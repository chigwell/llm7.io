/*! For license information please see main.96a239a2.js.LICENSE.txt */
(()=>{var e={115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){let r=0,n=e.length;for(;n>0;){const a=n/2|0;let s=r+a;i(e[s],t)<=0?(r=++s,n-=a+1):n=a}return r}},162:(e,t,i)=>{const r=i(5296),n=i(2419);e.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(l){return null}return e.forEach((e=>{o.test(e)&&(a&&1!==s.compare(e)||(a=e,s=new r(a,i)))})),a}},302:(e,t,i)=>{e.exports=i(3944)},334:e=>{"use strict";const t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},495:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>r(e,t,i)<0},579:(e,t,i)=>{"use strict";e.exports=i(2799)},706:(e,t,i)=>{const r=i(4635);e.exports=(e,t,i,n,a)=>{"string"===typeof i&&(a=n,n=i,i=void 0);try{return new r(e instanceof r?e.version:e,i).inc(t,n,a).version}catch(s){return null}}},933:(e,t,i)=>{const r=i(2604);e.exports=(e,t)=>{const i=r(e,t);return i&&i.prerelease.length?i.prerelease:null}},1171:(e,t,i)=>{const r=i(2419);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},1319:(e,t,i)=>{const r=i(9340);e.exports=(e,t)=>r(e,t,!0)},1687:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},1715:(e,t,i)=>{const r=i(4635),n=i(4606);e.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(l){return null}return e.forEach((e=>{o.test(e)&&(a&&1!==s.compare(e)||(a=e,s=new r(a,i)))})),a}},1769:(e,t,i)=>{const r=i(5296),n=i(2419),a=i(2440);e.exports=(e,t)=>{e=new n(e,t);let i=new r("0.0.0");if(e.test(i))return i;if(i=new r("0.0.0-0"),e.test(i))return i;i=null;for(let n=0;n<e.set.length;++n){const t=e.set[n];let s=null;t.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!a(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||i&&!a(i,s)||(i=s)}return i&&e.test(i)?i:null}},1776:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>r(e,t,i)<0},1900:(e,t,i)=>{"use strict";e=i.nmd(e);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=>`\x1b[${38+e};5;${t}m`},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t,i,r)=>`\x1b[${38+e};2;${t};${i};${r}m`};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[i,r]of Object.entries(t)){for(const[i,n]of Object.entries(r))t[i]={open:`\x1b[${n[0]}m`,close:`\x1b[${n[1]}m`},r[i]=t[i],e.set(n[0],n[1]);Object.defineProperty(t,i,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=r(),t.color.ansi16m=n(),t.bgColor.ansi256=r(10),t.bgColor.ansi16m=n(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,i)=>e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:i}=t.groups;3===i.length&&(i=i.split("").map((e=>e+e)).join(""));const r=Number.parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},1929:(e,t,i)=>{const r=i(4606);e.exports=(e,t,i)=>(e=new r(e,i),t=new r(t,i),e.intersects(t,i))},1975:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>r(e,t,i)>0},2217:(e,t,i)=>{const r=i(7049);e.exports=(e,t)=>e.sort(((e,i)=>r(i,e,t)))},2247:(e,t,i)=>{const r=i(9361);e.exports=(e,t)=>{const i=r(e,null,!0),n=r(t,null,!0),a=i.compare(n);if(0===a)return null;const s=a>0,o=s?i:n,l=s?n:i,u=!!o.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return i.major!==n.major?c+"major":i.minor!==n.minor?c+"minor":i.patch!==n.patch?c+"patch":"prerelease"}},2252:(e,t,i)=>{const r=i(2419),n=i(7180),{ANY:a}=n,s=i(3202),o=i(9340),l=[new n(">=0.0.0-0")],u=[new n(">=0.0.0")],c=(e,t,i)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===a){if(1===t.length&&t[0].semver===a)return!0;e=i.includePrerelease?l:u}if(1===t.length&&t[0].semver===a){if(i.includePrerelease)return!0;t=u}const r=new Set;let n,c,p,f,m,g,b;for(const a of e)">"===a.operator||">="===a.operator?n=h(n,a,i):"<"===a.operator||"<="===a.operator?c=d(c,a,i):r.add(a.semver);if(r.size>1)return null;if(n&&c){if(p=o(n.semver,c.semver,i),p>0)return null;if(0===p&&(">="!==n.operator||"<="!==c.operator))return null}for(const a of r){if(n&&!s(a,String(n),i))return null;if(c&&!s(a,String(c),i))return null;for(const e of t)if(!s(a,String(e),i))return!1;return!0}let y=!(!c||i.includePrerelease||!c.semver.prerelease.length)&&c.semver,v=!(!n||i.includePrerelease||!n.semver.prerelease.length)&&n.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const a of t){if(b=b||">"===a.operator||">="===a.operator,g=g||"<"===a.operator||"<="===a.operator,n)if(v&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===v.major&&a.semver.minor===v.minor&&a.semver.patch===v.patch&&(v=!1),">"===a.operator||">="===a.operator){if(f=h(n,a,i),f===a&&f!==n)return!1}else if(">="===n.operator&&!s(n.semver,String(a),i))return!1;if(c)if(y&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===y.major&&a.semver.minor===y.minor&&a.semver.patch===y.patch&&(y=!1),"<"===a.operator||"<="===a.operator){if(m=d(c,a,i),m===a&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(a),i))return!1;if(!a.operator&&(c||n)&&0!==p)return!1}return!(n&&g&&!c&&0!==p)&&(!(c&&b&&!n&&0!==p)&&(!v&&!y))},h=(e,t,i)=>{if(!e)return t;const r=o(e.semver,t.semver,i);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,i)=>{if(!e)return t;const r=o(e.semver,t.semver,i);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new r(e,i),t=new r(t,i);let n=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,i);if(n=n||null!==t,t)continue e}if(n)return!1}return!0}},2270:(e,t,i)=>{"use strict";const r=i(9498);class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}const a=(e,t,i)=>new Promise(((a,s)=>{if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);const o=setTimeout((()=>{if("function"===typeof i){try{a(i())}catch(o){s(o)}return}const r=i instanceof Error?i:new n("string"===typeof i?i:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),s(r)}),t);r(e.then(a,s),(()=>{clearTimeout(o)}))}));e.exports=a,e.exports.default=a,e.exports.TimeoutError=n},2419:(e,t,i)=>{const r=/\s+/g;class n{constructor(e,t){if(t=s(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!b(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&y(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,i=a.get(t);if(i)return i;const r=this.options.loose,n=r?c[h.HYPHENRANGELOOSE]:c[h.HYPHENRANGE];e=e.replace(n,C(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[h.COMPARATORTRIM],d),l("comparator trim",e),e=e.replace(c[h.TILDETRIM],p),l("tilde trim",e),e=e.replace(c[h.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>_(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));r&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[h.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,y=s.map((e=>new o(e,this.options)));for(const a of y){if(b(a))return[a];u.set(a.value,a)}u.size>1&&u.has("")&&u.delete("");const v=[...u.values()];return a.set(t,v),v}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((i=>v(i,t)&&e.set.some((e=>v(e,t)&&i.every((i=>e.every((e=>i.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new u(e,this.options)}catch(t){return!1}for(let i=0;i<this.set.length;i++)if(R(this.set[i],e,this.options))return!0;return!1}}e.exports=n;const a=new(i(8334)),s=i(4783),o=i(7180),l=i(6860),u=i(5296),{safeRe:c,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=i(8314),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=i(3254),b=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,v=(e,t)=>{let i=!0;const r=e.slice();let n=r.pop();for(;i&&r.length;)i=r.every((e=>n.intersects(e,t))),n=r.pop();return i},_=(e,t)=>(l("comp",e,t),e=E(e,t),l("caret",e),e=x(e,t),l("tildes",e),e=S(e,t),l("xrange",e),e=T(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map((e=>P(e,t))).join(" "),P=(e,t)=>{const i=t.loose?c[h.TILDELOOSE]:c[h.TILDE];return e.replace(i,((t,i,r,n,a)=>{let s;return l("tilde",e,t,i,r,n,a),w(i)?s="":w(r)?s=`>=${i}.0.0 <${+i+1}.0.0-0`:w(n)?s=`>=${i}.${r}.0 <${i}.${+r+1}.0-0`:a?(l("replaceTilde pr",a),s=`>=${i}.${r}.${n}-${a} <${i}.${+r+1}.0-0`):s=`>=${i}.${r}.${n} <${i}.${+r+1}.0-0`,l("tilde return",s),s}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>k(e,t))).join(" "),k=(e,t)=>{l("caret",e,t);const i=t.loose?c[h.CARETLOOSE]:c[h.CARET],r=t.includePrerelease?"-0":"";return e.replace(i,((t,i,n,a,s)=>{let o;return l("caret",e,t,i,n,a,s),w(i)?o="":w(n)?o=`>=${i}.0.0${r} <${+i+1}.0.0-0`:w(a)?o="0"===i?`>=${i}.${n}.0${r} <${i}.${+n+1}.0-0`:`>=${i}.${n}.0${r} <${+i+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===i?"0"===n?`>=${i}.${n}.${a}-${s} <${i}.${n}.${+a+1}-0`:`>=${i}.${n}.${a}-${s} <${i}.${+n+1}.0-0`:`>=${i}.${n}.${a}-${s} <${+i+1}.0.0-0`):(l("no pr"),o="0"===i?"0"===n?`>=${i}.${n}.${a}${r} <${i}.${n}.${+a+1}-0`:`>=${i}.${n}.${a}${r} <${i}.${+n+1}.0-0`:`>=${i}.${n}.${a} <${+i+1}.0.0-0`),l("caret return",o),o}))},S=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>O(e,t))).join(" ")),O=(e,t)=>{e=e.trim();const i=t.loose?c[h.XRANGELOOSE]:c[h.XRANGE];return e.replace(i,((i,r,n,a,s,o)=>{l("xRange",e,i,r,n,a,s,o);const u=w(n),c=u||w(a),h=c||w(s),d=h;return"="===r&&d&&(r=""),o=t.includePrerelease?"-0":"",u?i=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(a=0),s=0,">"===r?(r=">=",c?(n=+n+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",c?n=+n+1:a=+a+1),"<"===r&&(o="-0"),i=`${r+n}.${a}.${s}${o}`):c?i=`>=${n}.0.0${o} <${+n+1}.0.0-0`:h&&(i=`>=${n}.${a}.0${o} <${n}.${+a+1}.0-0`),l("xRange return",i),i}))},T=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[h.STAR],"")),A=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?h.GTE0PRE:h.GTE0],"")),C=e=>(t,i,r,n,a,s,o,l,u,c,h,d)=>`${i=w(r)?"":w(n)?`>=${r}.0.0${e?"-0":""}`:w(a)?`>=${r}.${n}.0${e?"-0":""}`:s?`>=${i}`:`>=${i}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(h)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${h}-${d}`:e?`<${u}.${c}.${+h+1}-0`:`<=${l}`}`.trim(),R=(e,t,i)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!i.includePrerelease){for(let i=0;i<e.length;i++)if(l(e[i].semver),e[i].semver!==o.ANY&&e[i].semver.prerelease.length>0){const r=e[i].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},2440:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>r(e,t,i)>0},2491:(e,t,i)=>{const r=i(4635);e.exports=(e,t)=>new r(e,t).minor},2542:(e,t,i)=>{const r=i(5296),n=i(2604),{safeRe:a,t:s}=i(8314);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;let i=null;if((t=t||{}).rtl){const r=t.includePrerelease?a[s.COERCERTLFULL]:a[s.COERCERTL];let n;for(;(n=r.exec(e))&&(!i||i.index+i[0].length!==e.length);)i&&n.index+n[0].length===i.index+i[0].length||(i=n),r.lastIndex=n.index+n[1].length+n[2].length;r.lastIndex=-1}else i=e.match(t.includePrerelease?a[s.COERCEFULL]:a[s.COERCE]);if(null===i)return null;const o=i[2],l=i[3]||"0",u=i[4]||"0",c=t.includePrerelease&&i[5]?`-${i[5]}`:"",h=t.includePrerelease&&i[6]?`+${i[6]}`:"";return n(`${o}.${l}.${u}${c}${h}`,t)}},2604:(e,t,i)=>{const r=i(5296);e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof r)return e;try{return new r(e,t)}catch(n){if(!i)return null;throw n}}},2786:(e,t,i)=>{const r=i(2604);e.exports=(e,t)=>{const i=r(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null}},2799:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(e,t,r){var n=null;if(void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:i,type:e,key:n,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=n,t.jsxs=n},2844:(e,t,i)=>{const r=i(2604);e.exports=(e,t)=>{const i=r(e,null,!0),n=r(t,null,!0),a=i.compare(n);if(0===a)return null;const s=a>0,o=s?i:n,l=s?n:i,u=!!o.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return i.major!==n.major?c+"major":i.minor!==n.minor?c+"minor":i.patch!==n.patch?c+"patch":"prerelease"}},3033:(e,t,i)=>{const r=i(8314),n=i(3254),a=i(5296),s=i(4103),o=i(2604),l=i(9605),u=i(2786),c=i(6251),h=i(2844),d=i(4030),p=i(9002),f=i(6777),m=i(933),g=i(9340),b=i(5654),y=i(1319),v=i(7049),_=i(7123),w=i(2217),x=i(2440),P=i(495),E=i(6389),k=i(6355),S=i(6085),O=i(8748),T=i(5003),A=i(2542),C=i(7180),R=i(2419),I=i(3202),D=i(1171),j=i(3816),L=i(162),N=i(1769),M=i(9134),$=i(8207),F=i(3175),B=i(5682),U=i(6912),z=i(8881),H=i(2252);e.exports={parse:o,valid:l,clean:u,inc:c,diff:h,major:d,minor:p,patch:f,prerelease:m,compare:g,rcompare:b,compareLoose:y,compareBuild:v,sort:_,rsort:w,gt:x,lt:P,eq:E,neq:k,gte:S,lte:O,cmp:T,coerce:A,Comparator:C,Range:R,satisfies:I,toComparators:D,maxSatisfying:j,minSatisfying:L,minVersion:N,validRange:M,outside:$,gtr:F,ltr:B,intersects:U,simplifyRange:z,subset:H,SemVer:a,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n.SEMVER_SPEC_VERSION,RELEASE_TYPES:n.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},3047:e=>{"use strict";e.exports=function(e,t){if("string"!==typeof e)throw new TypeError("Expected a string");return t="undefined"===typeof t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},3175:(e,t,i)=>{const r=i(8207);e.exports=(e,t,i)=>r(e,t,">",i)},3202:(e,t,i)=>{const r=i(2419);e.exports=(e,t,i)=>{try{t=new r(t,i)}catch(n){return!1}return t.test(e)}},3254:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},3718:(e,t,i)=>{const r=i(7162),n=i(9950),a=i(1975),s=i(8756),o=i(1776),l=i(7293);e.exports=(e,t,i,u)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof i&&(i=i.version),e===i;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return r(e,i,u);case"!=":return n(e,i,u);case">":return a(e,i,u);case">=":return s(e,i,u);case"<":return o(e,i,u);case"<=":return l(e,i,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},3816:(e,t,i)=>{const r=i(5296),n=i(2419);e.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(l){return null}return e.forEach((e=>{o.test(e)&&(a&&-1!==s.compare(e)||(a=e,s=new r(a,i)))})),a}},3822:(e,t,i)=>{const r=i(4606);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},3944:(e,t,i)=>{var r=i(5790);t.operation=function(e){var i=t.timeouts(e);return new r(i,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],n=0;n<t.retries;n++)r.push(this.createTimeout(n,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(n,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var i=t.randomize?Math.random()+1:1,r=Math.round(i*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,i,r){if(i instanceof Array&&(r=i,i=null),!r)for(var n in r=[],e)"function"===typeof e[n]&&r.push(n);for(var a=0;a<r.length;a++){var s=r[a],o=e[s];e[s]=function(r){var n=t.operation(i),a=Array.prototype.slice.call(arguments,1),s=a.pop();a.push((function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),s.apply(this,arguments))})),n.attempt((function(){r.apply(e,a)}))}.bind(e,o),e[s].options=i}}},4030:(e,t,i)=>{const r=i(5296);e.exports=(e,t)=>new r(e,t).major},4103:e=>{const t=/^[0-9]+$/,i=(e,i)=>{const r=t.test(e),n=t.test(i);return r&&n&&(e=+e,i=+i),e===i?0:r&&!n?-1:n&&!r?1:e<i?-1:1};e.exports={compareIdentifiers:i,rcompareIdentifiers:(e,t)=>i(t,e)}},4288:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function y(){}function v(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=b.prototype;var _=v.prototype=new y;_.constructor=v,m(_,b.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function E(e,t,r,n,a,s){return r=s.ref,{$$typeof:i,type:e,key:t,ref:void 0!==r?r:null,props:s}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(){}function A(e,t,n,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case r:c=!0;break;case d:return A((c=e._init)(e._payload),t,n,a,s)}}if(c)return s=s(e),c=""===a?"."+O(e,0):a,w(s)?(n="",null!=c&&(n=c.replace(S,"$&/")+"/"),A(s,t,n,"",(function(e){return e}))):null!=s&&(k(s)&&(l=s,u=n+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+c,s=E(l.type,u,void 0,0,0,l.props)),t.push(s)),1;c=0;var h,f=""===a?".":a+":";if(w(e))for(var m=0;m<e.length;m++)c+=A(a=e[m],t,n,o=f+O(a,m),s);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(a=e.next()).done;)c+=A(a=a.value,t,n,o=f+O(a,m++),s);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function C(e,t,i){if(null==e)return e;var r=[],n=0;return A(e,r,"","",(function(e){return t.call(i,e,n++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:C,forEach:function(e,t,i){C(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=n,t.Profiler=s,t.PureComponent=v,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),n=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(n=""+t.key),t)!P.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=i;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];r.children=s}return E(e.type,n,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,i){var r,n={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)P.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(n[r]=t[r]);var s=arguments.length-2;if(1===s)n.children=i;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];n.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return E(e,a,void 0,0,0,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,i={};x.T=i;try{var r=e(),n=x.S;null!==n&&n(i,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,I)}catch(a){I(a)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,i){return x.H.useActionState(e,t,i)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,i){var r=x.H;if("function"===typeof i)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,i){return x.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return x.H.useReducer(e,t,i)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return x.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.0"},4349:(e,t,i)=>{const r=i(6584);e.exports=(e,t,i)=>r(e,t,"<",i)},4358:(e,t)=>{"use strict";const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,i){do{const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}while(++t<i);return i}function u(e,t,i){for(;t>i;){const i=e.charCodeAt(--t);if(32!==i&&9!==i)return t+1}return i}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},4391:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(7004)},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),i=t[0],r=t[1];return 3*(i+r)/4-r},t.toByteArray=function(e){var t,i,a=o(e),s=a[0],l=a[1],u=new n(function(e,t,i){return 3*(t+i)/4-i}(0,s,l)),c=0,h=l>0?s-4:s;for(i=0;i<h;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,u[c++]=255&t);1===l&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],s=16383,o=0,u=r-n;o<u;o+=s)a.push(l(e,o,o+s>u?u:o+s));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],r=[],n="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,r){for(var n,a,s=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},4606:(e,t,i)=>{const r=/\s+/g;class n{constructor(e,t){if(t=s(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!b(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&y(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,i=a.get(t);if(i)return i;const r=this.options.loose,n=r?c[h.HYPHENRANGELOOSE]:c[h.HYPHENRANGE];e=e.replace(n,C(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[h.COMPARATORTRIM],d),l("comparator trim",e),e=e.replace(c[h.TILDETRIM],p),l("tilde trim",e),e=e.replace(c[h.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>_(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));r&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[h.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,y=s.map((e=>new o(e,this.options)));for(const a of y){if(b(a))return[a];u.set(a.value,a)}u.size>1&&u.has("")&&u.delete("");const v=[...u.values()];return a.set(t,v),v}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((i=>v(i,t)&&e.set.some((e=>v(e,t)&&i.every((i=>e.every((e=>i.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new u(e,this.options)}catch(t){return!1}for(let i=0;i<this.set.length;i++)if(R(this.set[i],e,this.options))return!0;return!1}}e.exports=n;const a=new(i(1687)),s=i(5780),o=i(6547),l=i(8679),u=i(4635),{safeRe:c,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=i(7135),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=i(9693),b=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,v=(e,t)=>{let i=!0;const r=e.slice();let n=r.pop();for(;i&&r.length;)i=r.every((e=>n.intersects(e,t))),n=r.pop();return i},_=(e,t)=>(l("comp",e,t),e=E(e,t),l("caret",e),e=x(e,t),l("tildes",e),e=S(e,t),l("xrange",e),e=T(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map((e=>P(e,t))).join(" "),P=(e,t)=>{const i=t.loose?c[h.TILDELOOSE]:c[h.TILDE];return e.replace(i,((t,i,r,n,a)=>{let s;return l("tilde",e,t,i,r,n,a),w(i)?s="":w(r)?s=`>=${i}.0.0 <${+i+1}.0.0-0`:w(n)?s=`>=${i}.${r}.0 <${i}.${+r+1}.0-0`:a?(l("replaceTilde pr",a),s=`>=${i}.${r}.${n}-${a} <${i}.${+r+1}.0-0`):s=`>=${i}.${r}.${n} <${i}.${+r+1}.0-0`,l("tilde return",s),s}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>k(e,t))).join(" "),k=(e,t)=>{l("caret",e,t);const i=t.loose?c[h.CARETLOOSE]:c[h.CARET],r=t.includePrerelease?"-0":"";return e.replace(i,((t,i,n,a,s)=>{let o;return l("caret",e,t,i,n,a,s),w(i)?o="":w(n)?o=`>=${i}.0.0${r} <${+i+1}.0.0-0`:w(a)?o="0"===i?`>=${i}.${n}.0${r} <${i}.${+n+1}.0-0`:`>=${i}.${n}.0${r} <${+i+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===i?"0"===n?`>=${i}.${n}.${a}-${s} <${i}.${n}.${+a+1}-0`:`>=${i}.${n}.${a}-${s} <${i}.${+n+1}.0-0`:`>=${i}.${n}.${a}-${s} <${+i+1}.0.0-0`):(l("no pr"),o="0"===i?"0"===n?`>=${i}.${n}.${a}${r} <${i}.${n}.${+a+1}-0`:`>=${i}.${n}.${a}${r} <${i}.${+n+1}.0-0`:`>=${i}.${n}.${a} <${+i+1}.0.0-0`),l("caret return",o),o}))},S=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>O(e,t))).join(" ")),O=(e,t)=>{e=e.trim();const i=t.loose?c[h.XRANGELOOSE]:c[h.XRANGE];return e.replace(i,((i,r,n,a,s,o)=>{l("xRange",e,i,r,n,a,s,o);const u=w(n),c=u||w(a),h=c||w(s),d=h;return"="===r&&d&&(r=""),o=t.includePrerelease?"-0":"",u?i=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(a=0),s=0,">"===r?(r=">=",c?(n=+n+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",c?n=+n+1:a=+a+1),"<"===r&&(o="-0"),i=`${r+n}.${a}.${s}${o}`):c?i=`>=${n}.0.0${o} <${+n+1}.0.0-0`:h&&(i=`>=${n}.${a}.0${o} <${n}.${+a+1}.0-0`),l("xRange return",i),i}))},T=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[h.STAR],"")),A=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?h.GTE0PRE:h.GTE0],"")),C=e=>(t,i,r,n,a,s,o,l,u,c,h,d)=>`${i=w(r)?"":w(n)?`>=${r}.0.0${e?"-0":""}`:w(a)?`>=${r}.${n}.0${e?"-0":""}`:s?`>=${i}`:`>=${i}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(h)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${h}-${d}`:e?`<${u}.${c}.${+h+1}-0`:`<=${l}`}`.trim(),R=(e,t,i)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!i.includePrerelease){for(let i=0;i<e.length;i++)if(l(e[i].semver),e[i].semver!==o.ANY&&e[i].semver.prerelease.length>0){const r=e[i].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},4635:(e,t,i)=>{const r=i(8679),{MAX_LENGTH:n,MAX_SAFE_INTEGER:a}=i(9693),{safeRe:s,safeSrc:o,t:l}=i(7135),u=i(5780),{compareIdentifiers:c}=i(9012);class h{constructor(e,t){if(t=u(t),e instanceof h){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw new TypeError(`version is longer than ${n} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const i=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof h)){if("string"===typeof e&&e===this.version)return 0;e=new h(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof h||(e=new h(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const i=this.prerelease[t],n=e.prerelease[t];if(r("prerelease compare",t,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return c(i,n)}while(++t)}compareBuild(e){e instanceof h||(e=new h(e,this.options));let t=0;do{const i=this.build[t],n=e.build[t];if(r("build compare",t,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return c(i,n)}while(++t)}inc(e,t,i){if(e.startsWith("pre")){if(!t&&!1===i)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?o[l.PRERELEASELOOSE]:o[l.PRERELEASE]}$`),i=`-${t}`.match(e);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(i)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"===typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===i)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===i&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=h},4783:e=>{const t=Object.freeze({loose:!0}),i=Object.freeze({});e.exports=e=>e?"object"!==typeof e?t:e:i},4836:(e,t,i)=>{const r=i(4635);e.exports=(e,t)=>new r(e,t).patch},4924:(e,t,i)=>{const r=i(9147),n=i(9253);e.exports=(e,t,i)=>{const a=[];let s=null,o=null;const l=e.sort(((e,t)=>n(e,t,i)));for(const n of l){r(n,t,i)?(o=n,s||(s=n)):(o&&a.push([s,o]),o=null,s=null)}s&&a.push([s,null]);const u=[];for(const[r,n]of a)r===n?u.push(r):n||r!==l[0]?n?r===l[0]?u.push(`<=${n}`):u.push(`${r} - ${n}`):u.push(`>=${r}`):u.push("*");const c=u.join(" || "),h="string"===typeof t.raw?t.raw:String(t);return c.length<h.length?c:t}},5002:(e,t,i)=>{const r=i(9253);e.exports=(e,t)=>r(e,t,!0)},5003:(e,t,i)=>{const r=i(6389),n=i(6355),a=i(2440),s=i(6085),o=i(495),l=i(8748);e.exports=(e,t,i,u)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof i&&(i=i.version),e===i;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return r(e,i,u);case"!=":return n(e,i,u);case">":return a(e,i,u);case">=":return s(e,i,u);case"<":return o(e,i,u);case"<=":return l(e,i,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},5041:(e,t,i)=>{const r=i(4606);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(i){return null}}},5043:(e,t,i)=>{"use strict";e.exports=i(4288)},5296:(e,t,i)=>{const r=i(6860),{MAX_LENGTH:n,MAX_SAFE_INTEGER:a}=i(3254),{safeRe:s,safeSrc:o,t:l}=i(8314),u=i(4783),{compareIdentifiers:c}=i(4103);class h{constructor(e,t){if(t=u(t),e instanceof h){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw new TypeError(`version is longer than ${n} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const i=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof h)){if("string"===typeof e&&e===this.version)return 0;e=new h(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof h||(e=new h(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const i=this.prerelease[t],n=e.prerelease[t];if(r("prerelease compare",t,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return c(i,n)}while(++t)}compareBuild(e){e instanceof h||(e=new h(e,this.options));let t=0;do{const i=this.build[t],n=e.build[t];if(r("build compare",t,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return c(i,n)}while(++t)}inc(e,t,i){if(e.startsWith("pre")){if(!t&&!1===i)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?o[l.PRERELEASELOOSE]:o[l.PRERELEASE]}$`),i=`-${t}`.match(e);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(i)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"===typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===i)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===i&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=h},5623:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(7283),n=i(2270),a=i(7349),s=()=>{},o=new n.TimeoutError;t.default=class extends r{constructor(e){var t,i,r,n;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(i=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==i?i:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(n=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==n?n:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((i,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const a=void 0===this._timeout&&void 0===t.timeout?e():n.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(o)}));i(await a)}catch(a){r(a)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},5654:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>r(t,e,i)},5682:(e,t,i)=>{const r=i(8207);e.exports=(e,t,i)=>r(e,t,"<",i)},5780:e=>{const t=Object.freeze({loose:!0}),i=Object.freeze({});e.exports=e=>e?"object"!==typeof e?t:e:i},5790:e=>{function t(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),i),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){i._operationTimeoutCb()}),i._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var n=this._errors[r],a=n.message,s=(e[a]||0)+1;e[a]=s,s>=i&&(t=n,i=s)}return t}},5896:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var r=i-1>>>1,n=e[r];if(!(0<a(n,t)))break e;e[r]=t,e[i]=n,i=r}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var r=0,n=e.length,s=n>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,i))u<n&&0>a(c,l)?(e[r]=c,e[u]=i,r=u):(e[r]=l,e[o]=i,r=o);else{if(!(u<n&&0>a(c,i)))break e;e[r]=c,e[u]=i,r=u}}}return t}function a(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,b=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)n(c);else{if(!(t.startTime<=e))break;n(c),t.sortIndex=t.expirationTime,i(u,t)}t=r(c)}}function x(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,E||(E=!0,P());else{var t=r(c);null!==t&&I(x,t.startTime-e)}}var P,E=!1,k=-1,S=5,O=-1;function T(){return!!b||!(t.unstable_now()-O<S)}function A(){if(b=!1,E){var e=t.unstable_now();O=e;var i=!0;try{e:{m=!1,g&&(g=!1,v(k),k=-1),f=!0;var a=p;try{t:{for(w(e),d=r(u);null!==d&&!(d.expirationTime>e&&T());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var o=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,w(e),i=!0;break t}d===r(u)&&n(u),w(e)}else n(u);d=r(u)}if(null!==d)i=!0;else{var l=r(c);null!==l&&I(x,l.startTime-e),i=!1}}break e}finally{d=null,p=a,f=!1}i=void 0}}finally{i?P():E=!1}}}if("function"===typeof _)P=function(){_(A)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,R=C.port2;C.port1.onmessage=A,P=function(){R.postMessage(null)}}else P=function(){y(A,0)};function I(e,i){k=y((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:n,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,i(c,e),null===r(u)&&e===r(c)&&(g?(v(k),k=-1):g=!0,I(x,a-s))):(e.sortIndex=o,i(u,e),m||f||(m=!0,E||(E=!0,P()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},6085:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>r(e,t,i)>=0},6096:(e,t,i)=>{const r=i(4635);e.exports=(e,t,i)=>{const n=new r(e,i),a=new r(t,i);return n.compare(a)||n.compareBuild(a)}},6248:(e,t,i)=>{const r=i(6096);e.exports=(e,t)=>e.sort(((e,i)=>r(i,e,t)))},6251:(e,t,i)=>{const r=i(5296);e.exports=(e,t,i,n,a)=>{"string"===typeof i&&(a=n,n=i,i=void 0);try{return new r(e instanceof r?e.version:e,i).inc(t,n,a).version}catch(s){return null}}},6355:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>0!==r(e,t,i)},6389:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>0===r(e,t,i)},6503:(e,t,i)=>{"use strict";e=i.nmd(e);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=>`\x1b[${38+e};5;${t}m`},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t,i,r)=>`\x1b[${38+e};2;${t};${i};${r}m`};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[i,r]of Object.entries(t)){for(const[i,n]of Object.entries(r))t[i]={open:`\x1b[${n[0]}m`,close:`\x1b[${n[1]}m`},r[i]=t[i],e.set(n[0],n[1]);Object.defineProperty(t,i,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=r(),t.color.ansi16m=n(),t.bgColor.ansi256=r(10),t.bgColor.ansi16m=n(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,i)=>e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:i}=t.groups;3===i.length&&(i=i.split("").map((e=>e+e)).join(""));const r=Number.parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},6547:(e,t,i)=>{const r=Symbol("SemVer ANY");class n{static get ANY(){return r}constructor(e,t){if(t=a(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],i=e.match(t);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new c(i[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"===typeof e)try{e=new c(e,this.options)}catch(t){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):(!(t=a(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=n;const a=i(5780),{safeRe:s,t:o}=i(7135),l=i(3718),u=i(8679),c=i(4635),h=i(4606)},6584:(e,t,i)=>{const r=i(4635),n=i(6547),{ANY:a}=n,s=i(4606),o=i(9147),l=i(1975),u=i(1776),c=i(7293),h=i(8756);e.exports=(e,t,i,d)=>{let p,f,m,g,b;switch(e=new r(e,d),t=new s(t,d),i){case">":p=l,f=c,m=u,g=">",b=">=";break;case"<":p=u,f=h,m=l,g="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,d))return!1;for(let r=0;r<t.set.length;++r){const i=t.set[r];let s=null,o=null;if(i.forEach((e=>{e.semver===a&&(e=new n(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,d)?s=e:m(e.semver,o.semver,d)&&(o=e)})),s.operator===g||s.operator===b)return!1;if((!o.operator||o.operator===g)&&f(e,o.semver))return!1;if(o.operator===b&&m(e,o.semver))return!1}return!0}},6659:(e,t,i)=>{"use strict";const r=i(302),n=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class a extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((i,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const o=r.operation(t);o.attempt((async r=>{try{i(await e(r))}catch(u){if(!(u instanceof Error))return void s(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));if(u instanceof a)o.stop(),s(u.originalError);else if(u instanceof TypeError&&(l=u.message,!n.includes(l)))o.stop(),s(u);else{((e,t,i)=>{const r=i.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(u,r,t);try{await t.onFailedAttempt(u)}catch(u){return void s(u)}o.retry(u)||s(o.mainError())}}var l}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=a},6672:(e,t,i)=>{"use strict";var r=i(5043);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=i,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,r=u(i,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:n,fetchPriority:a}):"script"===i&&s.d.X(e,{crossOrigin:r,integrity:n,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=u(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,r=u(i,t.crossOrigin);s.d.L(e,i,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=u(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},6777:(e,t,i)=>{const r=i(5296);e.exports=(e,t)=>new r(e,t).patch},6860:e=>{const t="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.error("SEMVER",...t)}:()=>{};e.exports=t},6882:(e,t,i)=>{const r=i(9361);e.exports=(e,t)=>{const i=r(e,t);return i&&i.prerelease.length?i.prerelease:null}},6912:(e,t,i)=>{const r=i(2419);e.exports=(e,t,i)=>(e=new r(e,i),t=new r(t,i),e.intersects(t,i))},7004:(e,t,i)=>{"use strict";var r=i(8853),n=i(5043),a=i(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var O=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function C(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case E:return"SuspenseList";case O:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case _:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return I(e(t))}catch(i){}}return null}var D=Array.isArray,j=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},M=[],$=-1;function F(e){return{current:e}}function B(e){0>$||(e.current=M[$],M[$]=null,$--)}function U(e,t){$++,M[$]=e.current,e.current=t}var z=F(null),H=F(null),V=F(null),G=F(null);function Y(e,t){switch(U(V,t),U(H,e),U(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ah(t=nh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(z),U(z,e)}function W(){B(z),B(H),B(V)}function X(e){null!==e.memoizedState&&U(G,e);var t=z.current,i=ah(t,e.type);t!==i&&(U(H,e),U(z,i))}function Z(e){H.current===e&&(B(z),B(H)),G.current===e&&(B(G),Xh._currentValue=N)}var q=Object.prototype.hasOwnProperty,K=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Q=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ie=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ne=r.unstable_UserBlockingPriority,ae=r.unstable_NormalPriority,se=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,he=null;function de(e){if("function"===typeof le&&ue(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ce,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,be=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,i){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?n=ye(r):0!==(s&=o)?n=ye(s):i||0!==(i=o&~e)&&(n=ye(i)):0!==(o=r&~a)?n=ye(o):0!==s?n=ye(s):i||0!==(i=r&~e)&&(n=ye(i)),0===n?0:0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(i=t&-t)||32===a&&0!==(4194048&i))?t:n}function _e(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Pe(){var e=be;return 0===(62914560&(be<<=1))&&(be=4194304),e}function Ee(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&i}function Oe(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-pe(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ce(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ud(e.type)}var Re=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Re,De="__reactProps$"+Re,je="__reactContainer$"+Re,Le="__reactEvents$"+Re,Ne="__reactListeners$"+Re,Me="__reactHandles$"+Re,$e="__reactResources$"+Re,Fe="__reactMarker$"+Re;function Be(e){delete e[Ie],delete e[De],delete e[Le],delete e[Ne],delete e[Me]}function Ue(e){var t=e[Ie];if(t)return t;for(var i=e.parentNode;i;){if(t=i[je]||i[Ie]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=vh(e);null!==e;){if(i=e[Ie])return i;e=vh(e)}return t}i=(e=i).parentNode}return null}function ze(e){if(e=e[Ie]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ve(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Fe]=!0}var Ye=new Set,We={};function Xe(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(We[e]=t,e=0;e<t.length;e++)Ye.add(t[e])}var qe,Ke,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},et={};function tt(e,t,i){if(n=t,q.call(et,n)||!q.call(Qe,n)&&(Je.test(n)?et[n]=!0:(Qe[n]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var n}function it(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function rt(e,t,i,r){if(null===r)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+r)}}function nt(e){if(void 0===qe)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);qe=t&&t[1]||"",Ke=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+qe+e+Ke}var at=!1;function st(e,t){if(!e||at)return"";at=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(n){var r=n}Reflect.construct(e,[],i)}else{try{i.call()}catch(a){r=a}e.call(i.prototype)}}else{try{throw Error()}catch(s){r=s}(i=e())&&"function"===typeof i.catch&&i.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),u=o.split("\n");for(n=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;n<u.length&&!u[n].includes("DetermineComponentFrameRoot");)n++;if(r===l.length||n===u.length)for(r=l.length-1,n=u.length-1;1<=r&&0<=n&&l[r]!==u[n];)n--;for(;1<=r&&0<=n;r--,n--)if(l[r]!==u[n]){if(1!==r||1!==n)do{if(r--,0>--n||l[r]!==u[n]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=n);break}}}finally{at=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?nt(i):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return nt(e.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return nt("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==i&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,i,r,n,a,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?yt(e,s,ut(t)):null!=i?yt(e,s,ut(i)):null!=r&&e.removeAttribute("value"),null==n&&null!=a&&(e.defaultChecked=!!a),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ut(o):e.removeAttribute("name")}function bt(e,t,i,r,n,a,s,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=i){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return;i=null!=i?""+ut(i):"",t=null!=t?""+ut(t):i,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:n)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function yt(e,t,i){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function vt(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+ut(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function _t(e,t,i){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ut(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,i,r){if(null==t){if(null!=r){if(null!=i)throw Error(s(92));if(D(r)){if(1<r.length)throw Error(s(93));r=r[0]}i=r}null==i&&(i=""),t=i}i=ut(t),e.defaultValue=i,(r=e.textContent)===i&&""!==r&&null!==r&&(e.value=r)}function xt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var Pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,i){var r=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,i):"number"!==typeof i||0===i||Pt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function kt(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=i){for(var r in i)!i.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var n in t)r=t[n],t.hasOwnProperty(n)&&i[n]!==r&&Et(e,n,r)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ot=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ct=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Dt=null;function jt(e){var t=ze(e);if(t&&(e=t.stateNode)){var i=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=r[De]||null;if(!n)throw Error(s(90));gt(r,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)(r=i[t]).form===e.form&&dt(r)}break e;case"textarea":_t(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&vt(e,!!i.multiple,t,!1)}}}var Lt=!1;function Nt(e,t,i){if(Lt)return e(t,i);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==It||null!==Dt)&&(Uu(),It&&(t=It,e=Dt,Dt=It=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Mt(e,t){var i=e.stateNode;if(null===i)return null;var r=i[De]||null;if(null===r)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(s(231,t,typeof i));return i}var $t=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if($t)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Dd){Ft=!1}var Ut=null,zt=null,Ht=null;function Vt(){if(Ht)return Ht;var e,t,i=zt,r=i.length,n="value"in Ut?Ut.value:Ut.textContent,a=n.length;for(e=0;e<r&&i[e]===n[e];e++);var s=r-e;for(t=1;t<=s&&i[r-t]===n[a-t];t++);return Ht=n.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Wt(){return!1}function Xt(e){function t(t,i,r,n,a){for(var s in this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Yt:Wt,this.isPropagationStopped=Wt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Zt,qt,Kt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Xt(Jt),ei=d({},Jt,{view:0,detail:0}),ti=Xt(ei),ii=d({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kt&&(Kt&&"mousemove"===e.type?(Zt=e.screenX-Kt.screenX,qt=e.screenY-Kt.screenY):qt=Zt=0,Kt=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),ri=Xt(ii),ni=Xt(d({},ii,{dataTransfer:0})),ai=Xt(d({},ei,{relatedTarget:0})),si=Xt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),oi=Xt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),li=Xt(d({},Jt,{data:0})),ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function di(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hi[e])&&!!t[e]}function pi(){return di}var fi=Xt(d({},ei,{key:function(e){if(e.key){var t=ui[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ci[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mi=Xt(d({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gi=Xt(d({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi})),bi=Xt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yi=Xt(d({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vi=Xt(d({},Jt,{newState:0,oldState:0})),_i=[9,13,27,32],wi=$t&&"CompositionEvent"in window,xi=null;$t&&"documentMode"in document&&(xi=document.documentMode);var Pi=$t&&"TextEvent"in window&&!xi,Ei=$t&&(!wi||xi&&8<xi&&11>=xi),ki=String.fromCharCode(32),Si=!1;function Oi(e,t){switch(e){case"keyup":return-1!==_i.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ai=!1;var Ci={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ci[e.type]:"textarea"===t}function Ii(e,t,i,r){It?Dt?Dt.push(r):Dt=[r]:It=r,0<(t=Vc(t,"onChange")).length&&(i=new Qt("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var Di=null,ji=null;function Li(e){Nc(e,0)}function Ni(e){if(dt(He(e)))return e}function Mi(e,t){if("change"===e)return t}var $i=!1;if($t){var Fi;if($t){var Bi="oninput"in document;if(!Bi){var Ui=document.createElement("div");Ui.setAttribute("oninput","return;"),Bi="function"===typeof Ui.oninput}Fi=Bi}else Fi=!1;$i=Fi&&(!document.documentMode||9<document.documentMode)}function zi(){Di&&(Di.detachEvent("onpropertychange",Hi),ji=Di=null)}function Hi(e){if("value"===e.propertyName&&Ni(ji)){var t=[];Ii(t,ji,e,Rt(e)),Nt(Li,t)}}function Vi(e,t,i){"focusin"===e?(zi(),ji=i,(Di=t).attachEvent("onpropertychange",Hi)):"focusout"===e&&zi()}function Gi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ni(ji)}function Yi(e,t){if("click"===e)return Ni(t)}function Wi(e,t){if("input"===e||"change"===e)return Ni(t)}var Xi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zi(e,t){if(Xi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!q.call(t,n)||!Xi(e[n],t[n]))return!1}return!0}function qi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ki(e,t){var i,r=qi(e);for(e=0;r;){if(3===r.nodeType){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qi(r)}}function Ji(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ji(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qi(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(r){i=!1}if(!i)break;t=pt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tr=$t&&"documentMode"in document&&11>=document.documentMode,ir=null,rr=null,nr=null,ar=!1;function sr(e,t,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;ar||null==ir||ir!==pt(r)||("selectionStart"in(r=ir)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nr&&Zi(nr,r)||(nr=r,0<(r=Vc(rr,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=ir)))}function or(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var lr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},ur={},cr={};function hr(e){if(ur[e])return ur[e];if(!lr[e])return e;var t,i=lr[e];for(t in i)if(i.hasOwnProperty(t)&&t in cr)return ur[e]=i[t];return e}$t&&(cr=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var dr=hr("animationend"),pr=hr("animationiteration"),fr=hr("animationstart"),mr=hr("transitionrun"),gr=hr("transitionstart"),br=hr("transitioncancel"),yr=hr("transitionend"),vr=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){vr.set(e,t),Xe(t,[e])}_r.push("scrollEnd");var xr=new WeakMap;function Pr(e,t){if("object"===typeof e&&null!==e){var i=xr.get(e);return void 0!==i?i:(t={value:e,source:t,stack:lt(t)},xr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Er=[],kr=0,Sr=0;function Or(){for(var e=kr,t=Sr=kr=0;t<e;){var i=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var n=Er[t];Er[t++]=null;var a=Er[t];if(Er[t++]=null,null!==r&&null!==n){var s=r.pending;null===s?n.next=n:(n.next=s.next,s.next=n),r.pending=n}0!==a&&Rr(i,n,a)}}function Tr(e,t,i,r){Er[kr++]=e,Er[kr++]=t,Er[kr++]=i,Er[kr++]=r,Sr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,i,r){return Tr(e,t,i,r),Ir(e)}function Cr(e,t){return Tr(e,null,null,t),Ir(e)}function Rr(e,t,i){e.lanes|=i;var r=e.alternate;null!==r&&(r.lanes|=i);for(var n=!1,a=e.return;null!==a;)a.childLanes|=i,null!==(r=a.alternate)&&(r.childLanes|=i),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(n=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,n&&null!==t&&(n=31-pe(i),null===(r=(e=a.hiddenUpdates)[n])?e[n]=[t]:r.push(t),t.lane=536870912|i),a):null}function Ir(e){if(50<Iu)throw Iu=0,Du=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function jr(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,i,r){return new jr(e,t,i,r)}function Nr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mr(e,t){var i=e.alternate;return null===i?((i=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $r(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fr(e,t,i,r,n,a){var o=0;if(r=e,"function"===typeof e)Nr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case O:return(e=Lr(31,i,t,n)).elementType=O,e.lanes=a,e;case g:return Br(i.children,n,a,t);case b:o=8,n|=24;break;case y:return(e=Lr(12,i,t,2|n)).elementType=y,e.lanes=a,e;case P:return(e=Lr(13,i,t,n)).elementType=P,e.lanes=a,e;case E:return(e=Lr(19,i,t,n)).elementType=E,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case w:o=10;break e;case _:o=9;break e;case x:o=11;break e;case k:o=14;break e;case S:o=16,r=null;break e}o=29,i=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(o,i,t,n)).elementType=e,t.type=r,t.lanes=a,t}function Br(e,t,i,r){return(e=Lr(7,e,r,t)).lanes=i,e}function Ur(e,t,i){return(e=Lr(6,e,null,t)).lanes=i,e}function zr(e,t,i){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Vr=0,Gr=null,Yr=0,Wr=[],Xr=0,Zr=null,qr=1,Kr="";function Jr(e,t){Hr[Vr++]=Yr,Hr[Vr++]=Gr,Gr=e,Yr=t}function Qr(e,t,i){Wr[Xr++]=qr,Wr[Xr++]=Kr,Wr[Xr++]=Zr,Zr=e;var r=qr;e=Kr;var n=32-pe(r)-1;r&=~(1<<n),i+=1;var a=32-pe(t)+n;if(30<a){var s=n-n%5;a=(r&(1<<s)-1).toString(32),r>>=s,n-=s,qr=1<<32-pe(t)+n|i<<n|r,Kr=a+e}else qr=1<<a|i<<n|r,Kr=e}function en(e){null!==e.return&&(Jr(e,1),Qr(e,1,0))}function tn(e){for(;e===Gr;)Gr=Hr[--Vr],Hr[Vr]=null,Yr=Hr[--Vr],Hr[Vr]=null;for(;e===Zr;)Zr=Wr[--Xr],Wr[Xr]=null,Kr=Wr[--Xr],Wr[Xr]=null,qr=Wr[--Xr],Wr[Xr]=null}var rn=null,nn=null,an=!1,sn=null,on=!1,ln=Error(s(519));function un(e){throw mn(Pr(Error(s(418,"")),e)),ln}function cn(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[De]=r,i){case"dialog":Mc("cancel",t),Mc("close",t);break;case"iframe":case"object":case"embed":Mc("load",t);break;case"video":case"audio":for(i=0;i<jc.length;i++)Mc(jc[i],t);break;case"source":Mc("error",t);break;case"img":case"image":case"link":Mc("error",t),Mc("load",t);break;case"details":Mc("toggle",t);break;case"input":Mc("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Mc("invalid",t);break;case"textarea":Mc("invalid",t),wt(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(i=r.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===r.suppressHydrationWarning||qc(t.textContent,i)?(null!=r.popover&&(Mc("beforetoggle",t),Mc("toggle",t)),null!=r.onScroll&&Mc("scroll",t),null!=r.onScrollEnd&&Mc("scrollend",t),null!=r.onClick&&(t.onclick=Kc),t=!0):t=!1,t||un(e)}function hn(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 13:return void(on=!1);case 27:case 3:return void(on=!0);default:rn=rn.return}}function dn(e){if(e!==rn)return!1;if(!an)return hn(e),an=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sh(e.type,e.memoizedProps)),t=!t),t&&nn&&un(e),hn(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){nn=bh(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}nn=null}}else 27===i?(i=nn,ph(e.type)?(e=yh,yh=null,nn=e):nn=i):nn=rn?bh(e.stateNode.nextSibling):null;return!0}function pn(){nn=rn=null,an=!1}function fn(){var e=sn;return null!==e&&(null===vu?vu=e:vu.push.apply(vu,e),sn=null),e}function mn(e){null===sn?sn=[e]:sn.push(e)}var gn=F(null),bn=null,yn=null;function vn(e,t,i){U(gn,t._currentValue),t._currentValue=i}function _n(e){e._currentValue=gn.current,B(gn)}function wn(e,t,i){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function xn(e,t,i,r){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var a=n.dependencies;if(null!==a){var o=n.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=n;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),wn(a.return,i,e),r||(o=null);break e}a=l.next}}else if(18===n.tag){if(null===(o=n.return))throw Error(s(341));o.lanes|=i,null!==(a=o.alternate)&&(a.lanes|=i),wn(o,i,e),o=null}else o=n.child;if(null!==o)o.return=n;else for(o=n;null!==o;){if(o===e){o=null;break}if(null!==(n=o.sibling)){n.return=o.return,o=n;break}o=o.return}n=o}}function Pn(e,t,i,r){e=null;for(var n=t,a=!1;null!==n;){if(!a)if(0!==(524288&n.flags))a=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var o=n.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=n.type;Xi(n.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(n===G.current){if(null===(o=n.alternate))throw Error(s(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Xh):e=[Xh])}n=n.return}null!==e&&xn(t,e,i,r),t.flags|=262144}function En(e){for(e=e.firstContext;null!==e;){if(!Xi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){bn=e,yn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sn(e){return Tn(bn,e)}function On(e,t){return null===bn&&kn(e),Tn(e,t)}function Tn(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===yn){if(null===e)throw Error(s(308));yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yn=yn.next=t;return i}var An="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Cn=r.unstable_scheduleCallback,Rn=r.unstable_NormalPriority,In={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dn(){return{controller:new An,data:new Map,refCount:0}}function jn(e){e.refCount--,0===e.refCount&&Cn(Rn,(function(){e.controller.abort()}))}var Ln=null,Nn=0,Mn=0,$n=null;function Fn(){if(0===--Nn&&null!==Ln){null!==$n&&($n.status="fulfilled");var e=Ln;Ln=null,Mn=0,$n=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bn=j.S;j.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ln){var i=Ln=[];Nn=0,Mn=Ac(),$n={status:"pending",value:void 0,then:function(e){i.push(e)}}}Nn++,t.then(Fn,Fn)}(0,t),null!==Bn&&Bn(e,t)};var Un=F(null);function zn(){var e=Un.current;return null!==e?e:ru.pooledCache}function Hn(e,t){U(Un,null===t?Un.current:t.pool)}function Vn(){var e=zn();return null===e?null:{parent:In._currentValue,pool:e}}var Gn=Error(s(460)),Yn=Error(s(474)),Wn=Error(s(542)),Xn={then:function(){}};function Zn(e){return"fulfilled"===(e=e.status)||"rejected"===e}function qn(){}function Kn(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(qn,qn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e;default:if("string"===typeof t.status)t.then(qn,qn);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}}),(function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e}throw Jn=t,Gn}}var Jn=null;function Qn(){if(null===Jn)throw Error(s(459));var e=Jn;return Jn=null,e}function ea(e){if(e===Gn||e===Wn)throw Error(s(483))}var ta=!1;function ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,i){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&iu)){var n=r.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),r.pending=t,t=Ir(e),Rr(e,null,i),t}return Tr(e,r,t,i),Ir(e)}function sa(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&i))){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Oe(e,i)}}function oa(e,t){var i=e.updateQueue,r=e.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,a=null;if(null!==(i=i.firstBaseUpdate)){do{var s={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===a?n=a=s:a=a.next=s,i=i.next}while(null!==i);null===a?n=a=t:a=a.next=t}else n=a=t;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var la=!1;function ua(){if(la){if(null!==$n)throw $n}}function ca(e,t,i,r){la=!1;var n=e.updateQueue;ta=!1;var a=n.firstBaseUpdate,s=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=n.baseState;for(s=0,c=u=l=null,o=a;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(au&p)===p:(r&p)===p){0!==p&&p===Mn&&(la=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;p=t;var b=i;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(b,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(b,h,p):m)||void 0===p)break e;h=d({},h,p);break e;case 2:ta=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=n.callbacks)?n.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,s|=p;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(f=o).next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}null===c&&(l=h),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=c,null===a&&(n.shared.lanes=0),pu|=s,e.lanes=s,e.memoizedState=h}}function ha(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function da(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)ha(i[e],t)}var pa=F(null),fa=F(0);function ma(e,t){U(fa,e=hu),U(pa,t),hu=e|t.baseLanes}function ga(){U(fa,hu),U(pa,pa.current)}function ba(){hu=fa.current,B(pa),B(fa)}var ya=0,va=null,_a=null,wa=null,xa=!1,Pa=!1,Ea=!1,ka=0,Sa=0,Oa=null,Ta=0;function Aa(){throw Error(s(321))}function Ca(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xi(e[i],t[i]))return!1;return!0}function Ra(e,t,i,r,n,a){return ya=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?Gs:Ys,Ea=!1,a=i(r,n),Ea=!1,Pa&&(a=Da(t,i,r,n)),Ia(e),a}function Ia(e){j.H=Vs;var t=null!==_a&&null!==_a.next;if(ya=0,wa=_a=va=null,xa=!1,Sa=0,Oa=null,t)throw Error(s(300));null===e||Oo||null!==(e=e.dependencies)&&En(e)&&(Oo=!0)}function Da(e,t,i,r){va=e;var n=0;do{if(Pa&&(Oa=null),Sa=0,Pa=!1,25<=n)throw Error(s(301));if(n+=1,wa=_a=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}j.H=Ws,a=t(i,r)}while(Pa);return a}function ja(){var e=j.H,t=e.useState()[0];return t="function"===typeof t.then?Ba(t):t,e=e.useState()[0],(null!==_a?_a.memoizedState:null)!==e&&(va.flags|=1024),t}function La(){var e=0!==ka;return ka=0,e}function Na(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ma(e){if(xa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xa=!1}ya=0,wa=_a=va=null,Pa=!1,Sa=ka=0,Oa=null}function $a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wa?va.memoizedState=wa=e:wa=wa.next=e,wa}function Fa(){if(null===_a){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=_a.next;var t=null===wa?va.memoizedState:wa.next;if(null!==t)wa=t,_a=e;else{if(null===e){if(null===va.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(_a=e).memoizedState,baseState:_a.baseState,baseQueue:_a.baseQueue,queue:_a.queue,next:null},null===wa?va.memoizedState=wa=e:wa=wa.next=e}return wa}function Ba(e){var t=Sa;return Sa+=1,null===Oa&&(Oa=[]),e=Kn(Oa,e,t),t=va,null===(null===wa?t.memoizedState:wa.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?Gs:Ys),e}function Ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ba(e);if(e.$$typeof===w)return Sn(e)}throw Error(s(438,String(e)))}function za(e){var t=null,i=va.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var r=va.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},va.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=T;return t.index++,i}function Ha(e,t){return"function"===typeof t?t(e):t}function Va(e){return Ga(Fa(),_a,e)}function Ga(e,t,i){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=i;var n=e.baseQueue,a=r.pending;if(null!==a){if(null!==n){var o=n.next;n.next=a.next,a.next=o}t.baseQueue=n=a,r.pending=null}if(a=e.baseState,null===n)e.memoizedState=a;else{var l=o=null,u=null,c=t=n.next,h=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(au&d)===d:(ya&d)===d){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Mn&&(h=!0);else{if((ya&p)===p){c=c.next,p===Mn&&(h=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,o=a):u=u.next=d,va.lanes|=p,pu|=p}d=c.action,Ea&&i(a,d),a=c.hasEagerState?c.eagerState:i(a,d)}else p={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,o=a):u=u.next=p,va.lanes|=d,pu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=l,!Xi(a,e.memoizedState)&&(Oo=!0,h&&null!==(i=$n)))throw i;e.memoizedState=a,e.baseState=o,e.baseQueue=u,r.lastRenderedState=a}return null===n&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ya(e){var t=Fa(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,a=t.memoizedState;if(null!==n){i.pending=null;var o=n=n.next;do{a=e(a,o.action),o=o.next}while(o!==n);Xi(a,t.memoizedState)||(Oo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,r]}function Wa(e,t,i){var r=va,n=Fa(),a=an;if(a){if(void 0===i)throw Error(s(407));i=i()}else i=t();var o=!Xi((_a||n).memoizedState,i);if(o&&(n.memoizedState=i,Oo=!0),n=n.queue,gs(2048,8,qa.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==wa&&1&wa.memoizedState.tag){if(r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Za.bind(null,r,n,i,t),null),null===ru)throw Error(s(349));a||0!==(124&ya)||Xa(r,t,i)}return i}function Xa(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=va.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},va.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Za(e,t,i,r){t.value=i,t.getSnapshot=r,Ka(t)&&Ja(e)}function qa(e,t,i){return i((function(){Ka(t)&&Ja(e)}))}function Ka(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xi(e,i)}catch(r){return!0}}function Ja(e){var t=Cr(e,2);null!==t&&Nu(t,e,2)}function Qa(e){var t=$a();if("function"===typeof e){var i=e;if(e=i(),Ea){de(!0);try{i()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t}function es(e,t,i,r){return e.baseState=i,Ga(e,_a,"function"===typeof r?r:Ha)}function ts(e,t,i,r,n){if(Us(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==j.T?i(!0):a.isTransition=!1,r(a),null===(i=t.pending)?(a.next=t.pending=a,is(t,a)):(a.next=i.next,t.pending=i.next=a)}}function is(e,t){var i=t.action,r=t.payload,n=e.state;if(t.isTransition){var a=j.T,s={};j.T=s;try{var o=i(n,r),l=j.S;null!==l&&l(s,o),rs(e,t,o)}catch(u){as(e,t,u)}finally{j.T=a}}else try{rs(e,t,a=i(n,r))}catch(c){as(e,t,c)}}function rs(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then((function(i){ns(e,t,i)}),(function(i){return as(e,t,i)})):ns(e,t,i)}function ns(e,t,i){t.status="fulfilled",t.value=i,ss(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,is(e,i)))}function as(e,t,i){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=i,ss(t),t=t.next}while(t!==r)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(an){var i=ru.formState;if(null!==i){e:{var r=va;if(an){if(nn){t:{for(var n=nn,a=on;8!==n.nodeType;){if(!a){n=null;break t}if(null===(n=bh(n.nextSibling))){n=null;break t}}n="F!"===(a=n.data)||"F"===a?n:null}if(n){nn=bh(n.nextSibling),r="F!"===n.data;break e}}un(r)}r=!1}r&&(t=i[0])}}return(i=$a()).memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},i.queue=r,i=$s.bind(null,va,r),r.dispatch=i,r=Qa(!1),a=Bs.bind(null,va,!1,r.queue),n={state:t,dispatch:null,action:e,pending:null},(r=$a()).queue=n,i=ts.bind(null,va,n,a,i),n.dispatch=i,r.memoizedState=e,[t,i,!1]}function us(e){return cs(Fa(),_a,e)}function cs(e,t,i){if(t=Ga(e,t,os)[0],e=Va(Ha)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Ba(t)}catch(s){if(s===Gn)throw Wn;throw s}else r=t;var n=(t=Fa()).queue,a=n.dispatch;return i!==t.memoizedState&&(va.flags|=2048,ps(9,{destroy:void 0,resource:void 0},hs.bind(null,n,i),null)),[r,a,e]}function hs(e,t){e.action=t}function ds(e){var t=Fa(),i=_a;if(null!==i)return cs(t,i,e);Fa(),t=t.memoizedState;var r=(i=Fa()).queue.dispatch;return i.memoizedState=e,[t,r,!1]}function ps(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},null===(t=va.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},va.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function fs(){return Fa().memoizedState}function ms(e,t,i,r){var n=$a();r=void 0===r?null:r,va.flags|=e,n.memoizedState=ps(1|t,{destroy:void 0,resource:void 0},i,r)}function gs(e,t,i,r){var n=Fa();r=void 0===r?null:r;var a=n.memoizedState.inst;null!==_a&&null!==r&&Ca(r,_a.memoizedState.deps)?n.memoizedState=ps(t,a,i,r):(va.flags|=e,n.memoizedState=ps(1|t,a,i,r))}function bs(e,t){ms(8390656,8,e,t)}function ys(e,t){gs(2048,8,e,t)}function vs(e,t){return gs(4,2,e,t)}function _s(e,t){return gs(4,4,e,t)}function ws(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xs(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,gs(4,4,ws.bind(null,t,e),i)}function Ps(){}function Es(e,t){var i=Fa();t=void 0===t?null:t;var r=i.memoizedState;return null!==t&&Ca(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function ks(e,t){var i=Fa();t=void 0===t?null:t;var r=i.memoizedState;if(null!==t&&Ca(t,r[1]))return r[0];if(r=e(),Ea){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r}function Ss(e,t,i){return void 0===i||0!==(1073741824&ya)?e.memoizedState=t:(e.memoizedState=i,e=Lu(),va.lanes|=e,pu|=e,i)}function Os(e,t,i,r){return Xi(i,t)?i:null!==pa.current?(e=Ss(e,i,r),Xi(e,t)||(Oo=!0),e):0===(42&ya)?(Oo=!0,e.memoizedState=i):(e=Lu(),va.lanes|=e,pu|=e,t)}function Ts(e,t,i,r,n){var a=L.p;L.p=0!==a&&8>a?a:8;var s=j.T,o={};j.T=o,Bs(e,!1,t,i);try{var l=n(),u=j.S;if(null!==u&&u(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Fs(e,t,function(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)})),r}(l,r),ju());else Fs(e,t,r,ju())}catch(c){Fs(e,t,{then:function(){},status:"rejected",reason:c},ju())}finally{L.p=a,j.T=s}}function As(){}function Cs(e,t,i,r){if(5!==e.tag)throw Error(s(476));var n=Rs(e).queue;Ts(e,n,t,N,null===i?As:function(){return Is(e),i(r)})}function Rs(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:N},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Is(e){Fs(e,Rs(e).next.queue,{},ju())}function Ds(){return Sn(Xh)}function js(){return Fa().memoizedState}function Ls(){return Fa().memoizedState}function Ns(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=ju(),r=aa(t,e=na(i),i);return null!==r&&(Nu(r,t,i),sa(r,t,i)),t={cache:Dn()},void(e.payload=t)}t=t.return}}function Ms(e,t,i){var r=ju();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Us(e)?zs(t,i):null!==(i=Ar(e,t,i,r))&&(Nu(i,e,r),Hs(i,t,r))}function $s(e,t,i){Fs(e,t,i,ju())}function Fs(e,t,i,r){var n={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Us(e))zs(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,i);if(n.hasEagerState=!0,n.eagerState=o,Xi(o,s))return Tr(e,t,n,0),null===ru&&Or(),!1}catch(l){}if(null!==(i=Ar(e,t,n,r)))return Nu(i,e,r),Hs(i,t,r),!0}return!1}function Bs(e,t,i,r){if(r={lane:2,revertLane:Ac(),action:r,hasEagerState:!1,eagerState:null,next:null},Us(e)){if(t)throw Error(s(479))}else null!==(t=Ar(e,i,r,2))&&Nu(t,e,2)}function Us(e){var t=e.alternate;return e===va||null!==t&&t===va}function zs(e,t){Pa=xa=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Hs(e,t,i){if(0!==(4194048&i)){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Oe(e,i)}}var Vs={readContext:Sn,use:Ua,useCallback:Aa,useContext:Aa,useEffect:Aa,useImperativeHandle:Aa,useLayoutEffect:Aa,useInsertionEffect:Aa,useMemo:Aa,useReducer:Aa,useRef:Aa,useState:Aa,useDebugValue:Aa,useDeferredValue:Aa,useTransition:Aa,useSyncExternalStore:Aa,useId:Aa,useHostTransitionStatus:Aa,useFormState:Aa,useActionState:Aa,useOptimistic:Aa,useMemoCache:Aa,useCacheRefresh:Aa},Gs={readContext:Sn,use:Ua,useCallback:function(e,t){return $a().memoizedState=[e,void 0===t?null:t],e},useContext:Sn,useEffect:bs,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,ms(4194308,4,ws.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){ms(4,2,e,t)},useMemo:function(e,t){var i=$a();t=void 0===t?null:t;var r=e();if(Ea){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=$a();if(void 0!==i){var n=i(t);if(Ea){de(!0);try{i(t)}finally{de(!1)}}}else n=t;return r.memoizedState=r.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=Ms.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$a().memoizedState=e},useState:function(e){var t=(e=Qa(e)).queue,i=$s.bind(null,va,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Ps,useDeferredValue:function(e,t){return Ss($a(),e,t)},useTransition:function(){var e=Qa(!1);return e=Ts.bind(null,va,e.queue,!0,!1),$a().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=va,n=$a();if(an){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===ru)throw Error(s(349));0!==(124&au)||Xa(r,t,i)}n.memoizedState=i;var a={value:i,getSnapshot:t};return n.queue=a,bs(qa.bind(null,r,a,e),[e]),r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Za.bind(null,r,a,i,t),null),i},useId:function(){var e=$a(),t=ru.identifierPrefix;if(an){var i=Kr;t="\xab"+t+"R"+(i=(qr&~(1<<32-pe(qr)-1)).toString(32)+i),0<(i=ka++)&&(t+="H"+i.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(i=Ta++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ds,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=$a();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Bs.bind(null,va,!0,i),i.dispatch=t,[e,t]},useMemoCache:za,useCacheRefresh:function(){return $a().memoizedState=Ns.bind(null,va)}},Ys={readContext:Sn,use:Ua,useCallback:Es,useContext:Sn,useEffect:ys,useImperativeHandle:xs,useInsertionEffect:vs,useLayoutEffect:_s,useMemo:ks,useReducer:Va,useRef:fs,useState:function(){return Va(Ha)},useDebugValue:Ps,useDeferredValue:function(e,t){return Os(Fa(),_a.memoizedState,e,t)},useTransition:function(){var e=Va(Ha)[0],t=Fa().memoizedState;return["boolean"===typeof e?e:Ba(e),t]},useSyncExternalStore:Wa,useId:js,useHostTransitionStatus:Ds,useFormState:us,useActionState:us,useOptimistic:function(e,t){return es(Fa(),0,e,t)},useMemoCache:za,useCacheRefresh:Ls},Ws={readContext:Sn,use:Ua,useCallback:Es,useContext:Sn,useEffect:ys,useImperativeHandle:xs,useInsertionEffect:vs,useLayoutEffect:_s,useMemo:ks,useReducer:Ya,useRef:fs,useState:function(){return Ya(Ha)},useDebugValue:Ps,useDeferredValue:function(e,t){var i=Fa();return null===_a?Ss(i,e,t):Os(i,_a.memoizedState,e,t)},useTransition:function(){var e=Ya(Ha)[0],t=Fa().memoizedState;return["boolean"===typeof e?e:Ba(e),t]},useSyncExternalStore:Wa,useId:js,useHostTransitionStatus:Ds,useFormState:ds,useActionState:ds,useOptimistic:function(e,t){var i=Fa();return null!==_a?es(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:za,useCacheRefresh:Ls},Xs=null,Zs=0;function qs(e){var t=Zs;return Zs+=1,null===Xs&&(Xs=[]),Kn(Xs,e,t)}function Ks(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Js(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function eo(e){function t(t,i){if(e){var r=t.deletions;null===r?(t.deletions=[i],t.flags|=16):r.push(i)}}function i(i,r){if(!e)return null;for(;null!==r;)t(i,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Mr(e,t)).index=0,e.sibling=null,e}function a(t,i,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<i?(t.flags|=67108866,i):r:(t.flags|=67108866,i):(t.flags|=1048576,i)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,r){return null===t||6!==t.tag?((t=Ur(i,e.mode,r)).return=e,t):((t=n(t,i)).return=e,t)}function u(e,t,i,r){var a=i.type;return a===g?h(e,t,i.props.children,r,i.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===S&&Qs(a)===t.type)?(Ks(t=n(t,i.props),i),t.return=e,t):(Ks(t=Fr(i.type,i.key,i.props,null,e.mode,r),i),t.return=e,t)}function c(e,t,i,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=zr(i,e.mode,r)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function h(e,t,i,r,a){return null===t||7!==t.tag?((t=Br(i,e.mode,r,a)).return=e,t):((t=n(t,i)).return=e,t)}function d(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Ks(i=Fr(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case m:return(t=zr(t,e.mode,i)).return=e,t;case S:return d(e,t=(0,t._init)(t._payload),i)}if(D(t)||C(t))return(t=Br(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return d(e,qs(t),i);if(t.$$typeof===w)return d(e,On(e,t),i);Js(e,t)}return null}function p(e,t,i,r){var n=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==n?null:l(e,t,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case f:return i.key===n?u(e,t,i,r):null;case m:return i.key===n?c(e,t,i,r):null;case S:return p(e,t,i=(n=i._init)(i._payload),r)}if(D(i)||C(i))return null!==n?null:h(e,t,i,r,null);if("function"===typeof i.then)return p(e,t,qs(i),r);if(i.$$typeof===w)return p(e,t,On(e,i),r);Js(e,i)}return null}function b(e,t,i,r,n){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(i)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return u(t,e=e.get(null===r.key?i:r.key)||null,r,n);case m:return c(t,e=e.get(null===r.key?i:r.key)||null,r,n);case S:return b(e,t,i,r=(0,r._init)(r._payload),n)}if(D(r)||C(r))return h(t,e=e.get(i)||null,r,n,null);if("function"===typeof r.then)return b(e,t,i,qs(r),n);if(r.$$typeof===w)return b(e,t,i,On(t,r),n);Js(t,r)}return null}function y(l,u,c,h){if("object"===typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case f:e:{for(var v=c.key;null!==u;){if(u.key===v){if((v=c.type)===g){if(7===u.tag){i(l,u.sibling),(h=n(u,c.props.children)).return=l,l=h;break e}}else if(u.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===S&&Qs(v)===u.type){i(l,u.sibling),Ks(h=n(u,c.props),c),h.return=l,l=h;break e}i(l,u);break}t(l,u),u=u.sibling}c.type===g?((h=Br(c.props.children,l.mode,h,c.key)).return=l,l=h):(Ks(h=Fr(c.type,c.key,c.props,null,l.mode,h),c),h.return=l,l=h)}return o(l);case m:e:{for(v=c.key;null!==u;){if(u.key===v){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){i(l,u.sibling),(h=n(u,c.children||[])).return=l,l=h;break e}i(l,u);break}t(l,u),u=u.sibling}(h=zr(c,l.mode,h)).return=l,l=h}return o(l);case S:return y(l,u,c=(v=c._init)(c._payload),h)}if(D(c))return function(n,s,o,l){for(var u=null,c=null,h=s,f=s=0,m=null;null!==h&&f<o.length;f++){h.index>f?(m=h,h=null):m=h.sibling;var g=p(n,h,o[f],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(n,h),s=a(g,s,f),null===c?u=g:c.sibling=g,c=g,h=m}if(f===o.length)return i(n,h),an&&Jr(n,f),u;if(null===h){for(;f<o.length;f++)null!==(h=d(n,o[f],l))&&(s=a(h,s,f),null===c?u=h:c.sibling=h,c=h);return an&&Jr(n,f),u}for(h=r(h);f<o.length;f++)null!==(m=b(h,n,f,o[f],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),s=a(m,s,f),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(n,e)})),an&&Jr(n,f),u}(l,u,c,h);if(C(c)){if("function"!==typeof(v=C(c)))throw Error(s(150));return function(n,o,l,u){if(null==l)throw Error(s(151));for(var c=null,h=null,f=o,m=o=0,g=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var v=p(n,f,y.value,u);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(n,f),o=a(v,o,m),null===h?c=v:h.sibling=v,h=v,f=g}if(y.done)return i(n,f),an&&Jr(n,m),c;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=d(n,y.value,u))&&(o=a(y,o,m),null===h?c=y:h.sibling=y,h=y);return an&&Jr(n,m),c}for(f=r(f);!y.done;m++,y=l.next())null!==(y=b(f,n,m,y.value,u))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=a(y,o,m),null===h?c=y:h.sibling=y,h=y);return e&&f.forEach((function(e){return t(n,e)})),an&&Jr(n,m),c}(l,u,c=v.call(c),h)}if("function"===typeof c.then)return y(l,u,qs(c),h);if(c.$$typeof===w)return y(l,u,On(l,c),h);Js(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(i(l,u.sibling),(h=n(u,c)).return=l,l=h):(i(l,u),(h=Ur(c,l.mode,h)).return=l,l=h),o(l)):i(l,u)}return function(e,t,i,r){try{Zs=0;var n=y(e,t,i,r);return Xs=null,n}catch(s){if(s===Gn||s===Wn)throw s;var a=Lr(29,s,null,e.mode);return a.lanes=r,a.return=e,a}}}var to=eo(!0),io=eo(!1),ro=F(null),no=null;function ao(e){var t=e.alternate;U(uo,1&uo.current),U(ro,e),null===no&&(null===t||null!==pa.current||null!==t.memoizedState)&&(no=e)}function so(e){if(22===e.tag){if(U(uo,uo.current),U(ro,e),null===no){var t=e.alternate;null!==t&&null!==t.memoizedState&&(no=e)}}else oo()}function oo(){U(uo,uo.current),U(ro,ro.current)}function lo(e){B(ro),no===e&&(no=null),B(uo)}var uo=F(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||gh(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,i,r){i=null===(i=i(r,t=e.memoizedState))||void 0===i?t:d({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var po={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=ju(),n=na(r);n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=aa(e,n,r))&&(Nu(t,e,r),sa(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=ju(),n=na(r);n.tag=1,n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=aa(e,n,r))&&(Nu(t,e,r),sa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ju(),r=na(i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=aa(e,r,i))&&(Nu(t,e,i),sa(t,e,i))}};function fo(e,t,i,r,n,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zi(i,r)||!Zi(n,a))}function mo(e,t,i,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function go(e,t){var i=t;if("ref"in t)for(var r in i={},t)"ref"!==r&&(i[r]=t[r]);if(e=e.defaultProps)for(var n in i===t&&(i=d({},i)),e)void 0===i[n]&&(i[n]=e[n]);return i}var bo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){bo(e)}function vo(e){console.error(e)}function _o(e){bo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout((function(){throw i}))}}function xo(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Po(e,t,i){return(i=na(i)).tag=3,i.payload={element:null},i.callback=function(){wo(e,t)},i}function Eo(e){return(e=na(e)).tag=3,e}function ko(e,t,i,r){var n=i.type.getDerivedStateFromError;if("function"===typeof n){var a=r.value;e.payload=function(){return n(a)},e.callback=function(){xo(t,i,r)}}var s=i.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){xo(t,i,r),"function"!==typeof n&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var So=Error(s(461)),Oo=!1;function To(e,t,i,r){t.child=null===e?io(t,null,i,r):to(t,e.child,i,r)}function Ao(e,t,i,r,n){i=i.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return kn(t),r=Ra(e,t,i,s,a,n),o=La(),null===e||Oo?(an&&o&&en(t),t.flags|=1,To(e,t,r,n),t.child):(Na(e,t,n),Zo(e,t,n))}function Co(e,t,i,r,n){if(null===e){var a=i.type;return"function"!==typeof a||Nr(a)||void 0!==a.defaultProps||null!==i.compare?((e=Fr(i.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ro(e,t,a,r,n))}if(a=e.child,!qo(e,n)){var s=a.memoizedProps;if((i=null!==(i=i.compare)?i:Zi)(s,r)&&e.ref===t.ref)return Zo(e,t,n)}return t.flags|=1,(e=Mr(a,r)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,i,r,n){if(null!==e){var a=e.memoizedProps;if(Zi(a,r)&&e.ref===t.ref){if(Oo=!1,t.pendingProps=r=a,!qo(e,n))return t.lanes=e.lanes,Zo(e,t,n);0!==(131072&e.flags)&&(Oo=!0)}}return Lo(e,t,i,r,n)}function Io(e,t,i){var r=t.pendingProps,n=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|i:i,null!==e){for(n=t.child=e.child,a=0;null!==n;)a=a|n.lanes|n.childLanes,n=n.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,i)}if(0===(536870912&i))return t.lanes=t.childLanes=536870912,Do(e,t,null!==a?a.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hn(0,null!==a?a.cachePool:null),null!==a?ma(t,a):ga(),so(t)}else null!==a?(Hn(0,a.cachePool),ma(t,a),oo(),t.memoizedState=null):(null!==e&&Hn(0,null),ga(),oo());return To(e,t,n,i),t.child}function Do(e,t,i,r){var n=zn();return n=null===n?null:{parent:In._currentValue,pool:n},t.memoizedState={baseLanes:i,cachePool:n},null!==e&&Hn(0,null),ga(),so(t),null!==e&&Pn(e,t,r,!0),null}function jo(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(s(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function Lo(e,t,i,r,n){return kn(t),i=Ra(e,t,i,r,void 0,n),r=La(),null===e||Oo?(an&&r&&en(t),t.flags|=1,To(e,t,i,n),t.child):(Na(e,t,n),Zo(e,t,n))}function No(e,t,i,r,n,a){return kn(t),t.updateQueue=null,i=Da(t,r,i,n),Ia(e),r=La(),null===e||Oo?(an&&r&&en(t),t.flags|=1,To(e,t,i,a),t.child):(Na(e,t,a),Zo(e,t,a))}function Mo(e,t,i,r,n){if(kn(t),null===t.stateNode){var a=Dr,s=i.contextType;"object"===typeof s&&null!==s&&(a=Sn(s)),a=new i(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=po,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ia(t),s=i.contextType,a.context="object"===typeof s&&null!==s?Sn(s):Dr,a.state=t.memoizedState,"function"===typeof(s=i.getDerivedStateFromProps)&&(ho(t,i,s,r),a.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&po.enqueueReplaceState(a,a.state,null),ca(t,r,a,n),ua(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=go(i,o);a.props=l;var u=a.context,c=i.contextType;s=Dr,"object"===typeof c&&null!==c&&(s=Sn(c));var h=i.getDerivedStateFromProps;c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||u!==s)&&mo(t,a,r,s),ta=!1;var d=t.memoizedState;a.state=d,ca(t,r,a,n),ua(),u=t.memoizedState,o||d!==u||ta?("function"===typeof h&&(ho(t,i,h,r),u=t.memoizedState),(l=ta||fo(t,i,l,r,d,u,s))?(c||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ra(e,t),c=go(i,s=t.memoizedProps),a.props=c,h=t.pendingProps,d=a.context,u=i.contextType,l=Dr,"object"===typeof u&&null!==u&&(l=Sn(u)),(u="function"===typeof(o=i.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&mo(t,a,r,l),ta=!1,d=t.memoizedState,a.state=d,ca(t,r,a,n),ua();var p=t.memoizedState;s!==h||d!==p||ta||null!==e&&null!==e.dependencies&&En(e.dependencies)?("function"===typeof o&&(ho(t,i,o,r),p=t.memoizedState),(c=ta||fo(t,i,c,r,d,p,l)||null!==e&&null!==e.dependencies&&En(e.dependencies))?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,jo(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,i=r&&"function"!==typeof i.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,n),t.child=to(t,null,i,n)):To(e,t,i,n),t.memoizedState=a.state,e=t.child):e=Zo(e,t,n),e}function $o(e,t,i,r){return pn(),t.flags|=256,To(e,t,i,r),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:Vn()}}function Uo(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=gu),e}function zo(e,t,i){var r,n=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&uo.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(an){if(a?ao(t):oo(),an){var l,u=nn;if(l=u){e:{for(l=u,u=on;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=bh(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Zr?{id:qr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,rn=t,nn=null,l=!0):l=!1}l||un(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return gh(u)?t.lanes=32:t.lanes=536870912,null;lo(t)}return u=n.children,n=n.fallback,a?(oo(),u=Vo({mode:"hidden",children:u},a=t.mode),n=Br(n,a,i,null),u.return=t,n.return=t,u.sibling=n,t.child=u,(a=t.child).memoizedState=Bo(i),a.childLanes=Uo(e,r,i),t.memoizedState=Fo,n):(ao(t),Ho(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Go(e,t,i)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),a=n.fallback,u=t.mode,n=Vo({mode:"visible",children:n.children},u),(a=Br(a,u,i,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,to(t,e.child,null,i),(n=t.child).memoizedState=Bo(i),n.childLanes=Uo(e,r,i),t.memoizedState=Fo,t=a);else if(ao(t),gh(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(n=Error(s(419))).stack="",n.digest=r,mn({value:n,source:null,stack:null}),t=Go(e,t,i)}else if(Oo||Pn(e,t,i,!1),r=0!==(i&e.childLanes),Oo||r){if(null!==(r=ru)&&(0!==(n=0!==((n=0!==(42&(n=i&-i))?1:Te(n))&(r.suspendedLanes|i))?0:n)&&n!==l.retryLane))throw l.retryLane=n,Cr(e,n),Nu(r,e,n),So;"$?"===u.data||Wu(),t=Go(e,t,i)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,nn=bh(u.nextSibling),rn=t,an=!0,sn=null,on=!1,null!==e&&(Wr[Xr++]=qr,Wr[Xr++]=Kr,Wr[Xr++]=Zr,qr=e.id,Kr=e.overflow,Zr=t),(t=Ho(t,n.children)).flags|=4096);return t}return a?(oo(),a=n.fallback,u=t.mode,c=(l=e.child).sibling,(n=Mr(l,{mode:"hidden",children:n.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Mr(c,a):(a=Br(a,u,i,null)).flags|=2,a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,null===(u=e.child.memoizedState)?u=Bo(i):(null!==(l=u.cachePool)?(c=In._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Vn(),u={baseLanes:u.baseLanes|i,cachePool:l}),a.memoizedState=u,a.childLanes=Uo(e,r,i),t.memoizedState=Fo,n):(ao(t),e=(i=e.child).sibling,(i=Mr(i,{mode:"visible",children:n.children})).return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function Ho(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,i){return to(t,e.child,null,i),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Yo(e,t,i){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wn(e.return,t,i)}function Wo(e,t,i,r,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=i,a.tailMode=n)}function Xo(e,t,i){var r=t.pendingProps,n=r.revealOrder,a=r.tail;if(To(e,t,r.children,i),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yo(e,i,t);else if(19===e.tag)Yo(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(uo,r),n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===co(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Wo(t,!1,n,i,a);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===co(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Wo(t,!0,i,null,a);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zo(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(Pn(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Mr(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Mr(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function qo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!En(e))}function Ko(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oo=!0;else{if(!qo(e,i)&&0===(128&t.flags))return Oo=!1,function(e,t,i){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),vn(0,In,e.memoizedState.cache),pn();break;case 27:case 5:X(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:vn(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ao(t),t.flags|=128,null):0!==(i&t.child.childLanes)?zo(e,t,i):(ao(t),null!==(e=Zo(e,t,i))?e.sibling:null);ao(t);break;case 19:var n=0!==(128&e.flags);if((r=0!==(i&t.childLanes))||(Pn(e,t,i,!1),r=0!==(i&t.childLanes)),n){if(r)return Xo(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),U(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,i);case 24:vn(0,In,e.memoizedState.cache)}return Zo(e,t,i)}(e,t,i);Oo=0!==(131072&e.flags)}else Oo=!1,an&&0!==(1048576&t.flags)&&Qr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,n=r._init;if(r=n(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((n=r.$$typeof)===x){t.tag=11,t=Ao(null,t,r,e,i);break e}if(n===k){t.tag=14,t=Co(null,t,r,e,i);break e}}throw t=I(r)||r,Error(s(306,t,""))}Nr(r)?(e=go(r,e),t.tag=1,t=Mo(null,t,r,e,i)):(t.tag=0,t=Lo(null,t,r,e,i))}return t;case 0:return Lo(e,t,t.type,t.pendingProps,i);case 1:return Mo(e,t,r=t.type,n=go(r,t.pendingProps),i);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;n=a.element,ra(e,t),ca(t,r,null,i);var o=t.memoizedState;if(r=o.cache,vn(0,In,r),r!==a.cache&&xn(t,[In],i,!0),ua(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=$o(e,t,r,i);break e}if(r!==n){mn(n=Pr(Error(s(424)),t)),t=$o(e,t,r,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(nn=bh(e.firstChild),rn=t,an=!0,sn=null,on=!0,i=io(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(pn(),r===n){t=Zo(e,t,i);break e}To(e,t,r,i)}t=t.child}return t;case 26:return jo(e,t),null===e?(i=Th(t.type,null,t.pendingProps,null))?t.memoizedState=i:an||(i=t.type,e=t.pendingProps,(r=rh(V.current).createElement(i))[Ie]=t,r[De]=e,eh(r,i,e),Ge(r),t.stateNode=r):t.memoizedState=Th(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&an&&(r=t.stateNode=_h(t.type,t.pendingProps,V.current),rn=t,on=!0,n=nn,ph(t.type)?(yh=n,nn=bh(r.firstChild)):nn=n),To(e,t,t.pendingProps.children,i),jo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&an&&((n=r=nn)&&(null!==(r=function(e,t,i,r){for(;1===e.nodeType;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===a)return e}if(null===(e=bh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,on))?(t.stateNode=r,rn=t,nn=bh(r.firstChild),on=!1,n=!0):n=!1),n||un(t)),X(t),n=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,sh(n,a)?r=null:null!==o&&sh(n,o)&&(t.flags|=32),null!==t.memoizedState&&(n=Ra(e,t,ja,null,null,i),Xh._currentValue=n),jo(e,t),To(e,t,r,i),t.child;case 6:return null===e&&an&&((e=i=nn)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=bh(e.nextSibling)))return null}return e}(i,t.pendingProps,on))?(t.stateNode=i,rn=t,nn=null,e=!0):e=!1),e||un(t)),null;case 13:return zo(e,t,i);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,i):To(e,t,r,i),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,i);case 7:return To(e,t,t.pendingProps,i),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,vn(0,t.type,r.value),To(e,t,r.children,i),t.child;case 9:return n=t.type._context,r=t.pendingProps.children,kn(t),r=r(n=Sn(n)),t.flags|=1,To(e,t,r,i),t.child;case 14:return Co(e,t,t.type,t.pendingProps,i);case 15:return Ro(e,t,t.type,t.pendingProps,i);case 19:return Xo(e,t,i);case 31:return r=t.pendingProps,i=t.mode,r={mode:r.mode,children:r.children},null===e?((i=Vo(r,i)).ref=t.ref,t.child=i,i.return=t,t=i):((i=Mr(e.child,r)).ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Io(e,t,i);case 24:return kn(t),r=Sn(In),null===e?(null===(n=zn())&&(n=ru,a=Dn(),n.pooledCache=a,a.refCount++,null!==a&&(n.pooledCacheLanes|=i),n=a),t.memoizedState={parent:r,cache:n},ia(t),vn(0,In,n)):(0!==(e.lanes&i)&&(ra(e,t),ca(t,null,null,i),ua()),n=e.memoizedState,a=t.memoizedState,n.parent!==r?(n={parent:r,cache:r},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),vn(0,In,r)):(r=a.cache,vn(0,In,r),r!==n.cache&&xn(t,[In],i,!0))),To(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Jo(e){e.flags|=4}function Qo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uh(t)){if(null!==(t=ro.current)&&((4194048&au)===au?null!==no:(62914560&au)!==au&&0===(536870912&au)||t!==no))throw Jn=Xn,Yn;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,bu|=t)}function tl(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=65011712&n.subtreeFlags,r|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function rl(e,t,i){var r=t.pendingProps;switch(tn(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return i=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),_n(In),W(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(dn(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fn())),il(t),null;case 26:return i=t.memoizedState,null===e?(Jo(t),null!==i?(il(t),Qo(t,i)):(il(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Jo(t),il(t),Qo(t,i)):(il(t),t.flags&=-16777217):(e.memoizedProps!==r&&Jo(t),il(t),t.flags&=-16777217),null;case 27:Z(t),i=V.current;var n=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return il(t),null}e=z.current,dn(t)?cn(t):(e=_h(n,r,i),t.stateNode=e,Jo(t))}return il(t),null;case 5:if(Z(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return il(t),null}if(e=z.current,dn(t))cn(t);else{switch(n=rh(V.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?n.createElement("select",{is:r.is}):n.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?n.createElement(i,{is:r.is}):n.createElement(i)}}e[Ie]=t,e[De]=r;e:for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;null===n.sibling;){if(null===n.return||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(eh(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=V.current,dn(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,null!==(n=rn))switch(n.tag){case 27:case 5:r=n.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===i||null!==r&&!0===r.suppressHydrationWarning||qc(e.nodeValue,i)))||un(t)}else(e=rh(e).createTextNode(r))[Ie]=t,t.stateNode=e}return il(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=dn(t),null!==r&&null!==r.dehydrated){if(null===e){if(!n)throw Error(s(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(s(317));n[Ie]=t}else pn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),n=!1}else n=fn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=i,t;if(i=null!==r,e=null!==e&&null!==e.memoizedState,i){n=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(n=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==n&&(r.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),el(t,t.updateQueue),il(t),null;case 4:return W(),null===e&&Bc(t.stateNode.containerInfo),il(t),null;case 10:return _n(t.type),il(t),null;case 19:if(B(uo),null===(n=t.memoizedState))return il(t),null;if(r=0!==(128&t.flags),null===(a=n.rendering))if(r)tl(n,!1);else{if(0!==du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=co(e))){for(t.flags|=128,tl(n,!1),e=a.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)$r(i,e),i=i.sibling;return U(uo,1&uo.current|2),t.child}e=e.sibling}null!==n.tail&&te()>xu&&(t.flags|=128,r=!0,tl(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(n,!0),null===n.tail&&"hidden"===n.tailMode&&!a.alternate&&!an)return il(t),null}else 2*te()-n.renderingStartTime>xu&&536870912!==i&&(t.flags|=128,r=!0,tl(n,!1),t.lanes=4194304);n.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=n.last)?e.sibling=a:t.child=a,n.last=a)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=te(),t.sibling=null,e=uo.current,U(uo,r?1&e|2:1&e),t):(il(t),null);case 22:case 23:return lo(t),ba(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&i)&&0===(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(i=t.updateQueue)&&el(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),null!==e&&B(Un),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),_n(In),il(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function nl(e,t){switch(tn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return _n(In),W(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));pn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(uo),null;case 4:return W(),null;case 10:return _n(t.type),null;case 22:case 23:return lo(t),ba(),null!==e&&B(Un),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return _n(In),null;default:return null}}function al(e,t){switch(tn(t),t.tag){case 3:_n(In),W();break;case 26:case 27:case 5:Z(t);break;case 4:W();break;case 13:lo(t);break;case 19:B(uo);break;case 10:_n(t.type);break;case 22:case 23:lo(t),ba(),null!==e&&B(Un);break;case 24:_n(In)}}function sl(e,t){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var n=r.next;i=n;do{if((i.tag&e)===e){r=void 0;var a=i.create,s=i.inst;r=a(),s.destroy=r}i=i.next}while(i!==n)}}catch(o){cc(t,t.return,o)}}function ol(e,t,i){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,n=t;var l=i,u=o;try{u()}catch(c){cc(n,l,c)}}}r=r.next}while(r!==a)}}catch(c){cc(t,t.return,c)}}function ll(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{da(t,i)}catch(r){cc(e,e.return,r)}}}function ul(e,t,i){i.props=go(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof i?e.refCleanup=i(r):i.current=r}}catch(n){cc(e,t,n)}}function hl(e,t){var i=e.ref,r=e.refCleanup;if(null!==i)if("function"===typeof r)try{r()}catch(n){cc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(a){cc(e,t,a)}else i.current=null}function dl(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(n){cc(e,e.return,n)}}function pl(e,t,i){try{var r=e.stateNode;!function(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,a=null,o=null,l=null,u=null,c=null,h=null;for(f in i){var d=i[f];if(i.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(f)||Jc(e,t,f,null,r,d)}}for(var p in r){var f=r[p];if(d=i[p],r.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":a=f;break;case"name":n=f;break;case"checked":c=f;break;case"defaultChecked":h=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==d&&Jc(e,t,p,f,r,d)}}return void gt(e,o,l,u,c,h,a,n);case"select":for(a in f=o=l=p=null,i)if(u=i[a],i.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":f=u;default:r.hasOwnProperty(a)||Jc(e,t,a,null,r,u)}for(n in r)if(a=r[n],u=i[n],r.hasOwnProperty(n)&&(null!=a||null!=u))switch(n){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==u&&Jc(e,t,n,a,r,u)}return t=l,i=o,r=f,void(null!=p?vt(e,!!i,p,!1):!!r!==!!i&&(null!=t?vt(e,!!i,t,!0):vt(e,!!i,i?[]:"",!1)));case"textarea":for(l in f=p=null,i)if(n=i[l],i.hasOwnProperty(l)&&null!=n&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,r,n)}for(o in r)if(n=r[o],a=i[o],r.hasOwnProperty(o)&&(null!=n||null!=a))switch(o){case"value":p=n;break;case"defaultValue":f=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(s(91));break;default:n!==a&&Jc(e,t,o,n,r,a)}return void _t(e,p,f);case"option":for(var m in i)if(p=i[m],i.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Jc(e,t,m,null,r,p);for(u in r)if(p=r[u],f=i[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))if("selected"===u)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Jc(e,t,u,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in i)p=i[g],i.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Jc(e,t,g,null,r,p);for(c in r)if(p=r[c],f=i[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:Jc(e,t,c,p,r,f)}return;default:if(St(t)){for(var b in i)p=i[b],i.hasOwnProperty(b)&&void 0!==p&&!r.hasOwnProperty(b)&&Qc(e,t,b,void 0,r,p);for(h in r)p=r[h],f=i[h],!r.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||Qc(e,t,h,p,r,f);return}}for(var y in i)p=i[y],i.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&Jc(e,t,y,null,r,p);for(d in r)p=r[d],f=i[d],!r.hasOwnProperty(d)||p===f||null==p&&null==f||Jc(e,t,d,p,r,f)}(r,e.type,i,t),r[De]=t}catch(n){cc(e,e.return,n)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Kc));else if(4!==r&&(27===r&&ph(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,i),e=e.sibling;null!==e;)gl(e,t,i),e=e.sibling}function bl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==r&&(27===r&&ph(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(bl(e,t,i),e=e.sibling;null!==e;)bl(e,t,i),e=e.sibling}function yl(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);eh(t,r,i),t[Ie]=e,t[De]=i}catch(a){cc(e,e.return,a)}}var vl=!1,_l=!1,wl=!1,xl="function"===typeof WeakSet?WeakSet:Set,Pl=null;function El(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Ml(e,i),4&r&&sl(5,i);break;case 1:if(Ml(e,i),4&r)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(s){cc(i,i.return,s)}else{var n=go(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){cc(i,i.return,o)}}64&r&&ll(i),512&r&&cl(i,i.return);break;case 3:if(Ml(e,i),64&r&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{da(e,t)}catch(s){cc(i,i.return,s)}}break;case 27:null===t&&4&r&&yl(i);case 26:case 5:Ml(e,i),null===t&&4&r&&dl(i),512&r&&cl(i,i.return);break;case 12:Ml(e,i);break;case 13:Ml(e,i),4&r&&Cl(e,i),64&r&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$?"!==e.data||"complete"===i.readyState)t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,i=fc.bind(null,i))));break;case 22:if(!(r=null!==i.memoizedState||vl)){t=null!==t&&null!==t.memoizedState||_l,n=vl;var a=_l;vl=r,(_l=t)&&!a?Fl(e,i,0!==(8772&i.subtreeFlags)):Ml(e,i),vl=n,_l=a}break;case 30:break;default:Ml(e,i)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Sl=null,Ol=!1;function Tl(e,t,i){for(i=i.child;null!==i;)Al(e,t,i),i=i.sibling}function Al(e,t,i){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ce,i)}catch(a){}switch(i.tag){case 26:_l||hl(i,t),Tl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:_l||hl(i,t);var r=Sl,n=Ol;ph(i.type)&&(Sl=i.stateNode,Ol=!1),Tl(e,t,i),wh(i.stateNode),Sl=r,Ol=n;break;case 5:_l||hl(i,t);case 6:if(r=Sl,n=Ol,Sl=null,Tl(e,t,i),Ol=n,null!==(Sl=r))if(Ol)try{(9===Sl.nodeType?Sl.body:"HTML"===Sl.nodeName?Sl.ownerDocument.body:Sl).removeChild(i.stateNode)}catch(s){cc(i,t,s)}else try{Sl.removeChild(i.stateNode)}catch(s){cc(i,t,s)}break;case 18:null!==Sl&&(Ol?(fh(9===(e=Sl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),Od(e)):fh(Sl,i.stateNode));break;case 4:r=Sl,n=Ol,Sl=i.stateNode.containerInfo,Ol=!0,Tl(e,t,i),Sl=r,Ol=n;break;case 0:case 11:case 14:case 15:_l||ol(2,i,t),_l||ol(4,i,t),Tl(e,t,i);break;case 1:_l||(hl(i,t),"function"===typeof(r=i.stateNode).componentWillUnmount&&ul(i,t,r)),Tl(e,t,i);break;case 21:Tl(e,t,i);break;case 22:_l=(r=_l)||null!==i.memoizedState,Tl(e,t,i),_l=r;break;default:Tl(e,t,i)}}function Cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Od(e)}catch(i){cc(t,t.return,i)}}function Rl(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=mc.bind(null,e,t);i.has(t)||(i.add(t),t.then(r,r))}))}function Il(e,t){var i=t.deletions;if(null!==i)for(var r=0;r<i.length;r++){var n=i[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Sl=l.stateNode,Ol=!1;break e}break;case 5:Sl=l.stateNode,Ol=!1;break e;case 3:case 4:Sl=l.stateNode.containerInfo,Ol=!0;break e}l=l.return}if(null===Sl)throw Error(s(160));Al(a,o,n),Sl=null,Ol=!1,null!==(a=n.alternate)&&(a.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Dl=null;function jl(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Il(t,e),Ll(e),4&r&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:Il(t,e),Ll(e),512&r&&(_l||null===i||hl(i,i.return)),64&r&&vl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?r:i.concat(r))));break;case 26:var n=Dl;if(Il(t,e),Ll(e),512&r&&(_l||null===i||hl(i,i.return)),4&r){var a=null!==i?i.memoizedState:null;if(r=e.memoizedState,null===i)if(null===r)if(null===e.stateNode){e:{r=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(r){case"title":(!(a=n.getElementsByTagName("title")[0])||a[Fe]||a[Ie]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=n.createElement(r),n.head.insertBefore(a,n.querySelector("head > title"))),eh(a,r,i),a[Ie]=e,Ge(a),r=a;break e;case"link":var o=Fh("link","href",n).get(r+(i.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&a.getAttribute("rel")===(null==i.rel?null:i.rel)&&a.getAttribute("title")===(null==i.title?null:i.title)&&a.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){o.splice(l,1);break t}eh(a=n.createElement(r),r,i),n.head.appendChild(a);break;case"meta":if(o=Fh("meta","content",n).get(r+(i.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&a.getAttribute("name")===(null==i.name?null:i.name)&&a.getAttribute("property")===(null==i.property?null:i.property)&&a.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&a.getAttribute("charset")===(null==i.charSet?null:i.charSet)){o.splice(l,1);break t}eh(a=n.createElement(r),r,i),n.head.appendChild(a);break;default:throw Error(s(468,r))}a[Ie]=e,Ge(a),r=a}e.stateNode=r}else Bh(n,e.type,e.stateNode);else e.stateNode=jh(n,r,e.memoizedProps);else a!==r?(null===a?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):a.count--,null===r?Bh(n,e.type,e.stateNode):jh(n,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,i.memoizedProps)}break;case 27:Il(t,e),Ll(e),512&r&&(_l||null===i||hl(i,i.return)),null!==i&&4&r&&pl(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Il(t,e),Ll(e),512&r&&(_l||null===i||hl(i,i.return)),32&e.flags){n=e.stateNode;try{xt(n,"")}catch(f){cc(e,e.return,f)}}4&r&&null!=e.stateNode&&pl(e,n=e.memoizedProps,null!==i?i.memoizedProps:n),1024&r&&(wl=!0);break;case 6:if(Il(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(f){cc(e,e.return,f)}}break;case 3:if($h=null,n=Dl,Dl=Eh(t.containerInfo),Il(t,e),Dl=n,Ll(e),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Od(t.containerInfo)}catch(f){cc(e,e.return,f)}wl&&(wl=!1,Nl(e));break;case 4:r=Dl,Dl=Eh(e.stateNode.containerInfo),Il(t,e),Ll(e),Dl=r;break;case 12:default:Il(t,e),Ll(e);break;case 13:Il(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(wu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));break;case 22:n=null!==e.memoizedState;var u=null!==i&&null!==i.memoizedState,c=vl,h=_l;if(vl=c||n,_l=h||u,Il(t,e),_l=h,vl=c,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===i||u||vl||_l||$l(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){u=i=t;try{if(a=u.stateNode,n)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){cc(u,u.return,f)}}}else if(6===t.tag){if(null===i){u=t;try{u.stateNode.nodeValue=n?"":u.memoizedProps}catch(f){cc(u,u.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(i=r.retryQueue)&&(r.retryQueue=null,Rl(e,i))));break;case 19:Il(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var i,r=e.return;null!==r;){if(fl(r)){i=r;break}r=r.return}if(null==i)throw Error(s(160));switch(i.tag){case 27:var n=i.stateNode;bl(e,ml(e),n);break;case 5:var a=i.stateNode;32&i.flags&&(xt(a,""),i.flags&=-33),bl(e,ml(e),a);break;case 3:case 4:var o=i.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(s(161))}}catch(l){cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Nl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Nl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function $l(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),$l(t);break;case 1:hl(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&ul(t,t.return,i),$l(t);break;case 27:wh(t.stateNode);case 26:case 5:hl(t,t.return),$l(t);break;case 22:null===t.memoizedState&&$l(t);break;default:$l(t)}e=e.sibling}}function Fl(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,n=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Fl(n,a,i),sl(4,a);break;case 1:if(Fl(n,a,i),"function"===typeof(n=(r=a).stateNode).componentDidMount)try{n.componentDidMount()}catch(u){cc(r,r.return,u)}if(null!==(n=(r=a).updateQueue)){var o=r.stateNode;try{var l=n.shared.hiddenCallbacks;if(null!==l)for(n.shared.hiddenCallbacks=null,n=0;n<l.length;n++)ha(l[n],o)}catch(u){cc(r,r.return,u)}}i&&64&s&&ll(a),cl(a,a.return);break;case 27:yl(a);case 26:case 5:Fl(n,a,i),i&&null===r&&4&s&&dl(a),cl(a,a.return);break;case 12:Fl(n,a,i);break;case 13:Fl(n,a,i),i&&4&s&&Cl(n,a);break;case 22:null===a.memoizedState&&Fl(n,a,i),cl(a,a.return);break;case 30:break;default:Fl(n,a,i)}t=t.sibling}}function Bl(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&jn(i))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&jn(e))}function zl(e,t,i,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,i,r),t=t.sibling}function Hl(e,t,i,r){var n=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,i,r),2048&n&&sl(9,t);break;case 1:case 13:default:zl(e,t,i,r);break;case 3:zl(e,t,i,r),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&jn(e)));break;case 12:if(2048&n){zl(e,t,i,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){cc(t,t.return,l)}}else zl(e,t,i,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?zl(e,t,i,r):Gl(e,t):2&a._visibility?zl(e,t,i,r):(a._visibility|=2,Vl(e,t,i,r,0!==(10256&t.subtreeFlags))),2048&n&&Bl(s,t);break;case 24:zl(e,t,i,r),2048&n&&Ul(t.alternate,t)}}function Vl(e,t,i,r,n){for(n=n&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=i,l=r,u=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(a,s,o,l,n),sl(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?Vl(a,s,o,l,n):Gl(a,s):(c._visibility|=2,Vl(a,s,o,l,n)),n&&2048&u&&Bl(s.alternate,s);break;case 24:Vl(a,s,o,l,n),n&&2048&u&&Ul(s.alternate,s);break;default:Vl(a,s,o,l,n)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,r=t,n=r.flags;switch(r.tag){case 22:Gl(i,r),2048&n&&Bl(r.alternate,r);break;case 24:Gl(i,r),2048&n&&Ul(r.alternate,r);break;default:Gl(i,r)}t=t.sibling}}var Yl=8192;function Wl(e){if(e.subtreeFlags&Yl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:Wl(e),e.flags&Yl&&null!==e.memoizedState&&function(e,t,i){if(null===zh)throw Error(s(475));var r=zh;if("stylesheet"===t.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var n=Ah(i.href),a=e.querySelector(Ch(n));if(a)return null!==(e=a._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Vh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,void Ge(a);a=e.ownerDocument||e,i=Rh(i),(n=xh.get(n))&&Nh(i,n),Ge(a=a.createElement("link"));var o=a;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),eh(a,"link",i),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Vh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Dl;Dl=Eh(e.stateNode.containerInfo),Wl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Yl,Yl=16777216,Wl(e),Yl=t):Wl(e))}}function Zl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];Pl=r,Ql(r,e)}Zl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 0:case 11:case 15:ql(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):ql(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];Pl=r,Ql(r,e)}Zl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Ql(e,t){for(;null!==Pl;){var i=Pl;switch(i.tag){case 0:case 11:case 15:ol(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var r=i.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:jn(i.memoizedState.cache)}if(null!==(r=i.child))r.return=i,Pl=r;else e:for(i=e;null!==Pl;){var n=(r=Pl).sibling,a=r.return;if(kl(r),r===i){Pl=null;break e}if(null!==n){n.return=a,Pl=n;break e}Pl=a}}}var eu={getCacheForType:function(e){var t=Sn(In),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},tu="function"===typeof WeakMap?WeakMap:Map,iu=0,ru=null,nu=null,au=0,su=0,ou=null,lu=!1,uu=!1,cu=!1,hu=0,du=0,pu=0,fu=0,mu=0,gu=0,bu=0,yu=null,vu=null,_u=!1,wu=0,xu=1/0,Pu=null,Eu=null,ku=0,Su=null,Ou=null,Tu=0,Au=0,Cu=null,Ru=null,Iu=0,Du=null;function ju(){if(0!==(2&iu)&&0!==au)return au&-au;if(null!==j.T){return 0!==Mn?Mn:Ac()}return Ce()}function Lu(){0===gu&&(gu=0===(536870912&au)||an?xe():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gu}function Nu(e,t,i){(e!==ru||2!==su&&9!==su)&&null===e.cancelPendingCommit||(Hu(e,0),Bu(e,au,gu,!1)),ke(e,i),0!==(2&iu)&&e===ru||(e===ru&&(0===(2&iu)&&(fu|=i),4===du&&Bu(e,au,gu,!1)),xc(e))}function Mu(e,t,i){if(0!==(6&iu))throw Error(s(327));for(var r=!i&&0===(124&t)&&0===(t&e.expiredLanes)||_e(e,t),n=r?function(e,t){var i=iu;iu|=2;var r=Gu(),n=Yu();ru!==e||au!==t?(Pu=null,xu=te()+500,Hu(e,t)):uu=_e(e,t);e:for(;;)try{if(0!==su&&null!==nu){t=nu;var a=ou;t:switch(su){case 1:su=0,ou=null,Qu(e,t,a,1);break;case 2:case 9:if(Zn(a)){su=0,ou=null,Ju(t);break}t=function(){2!==su&&9!==su||ru!==e||(su=7),xc(e)},a.then(t,t);break e;case 3:su=7;break e;case 4:su=5;break e;case 7:Zn(a)?(su=0,ou=null,Ju(t)):(su=0,ou=null,Qu(e,t,a,7));break;case 5:var o=null;switch(nu.tag){case 26:o=nu.memoizedState;case 5:case 27:var l=nu;if(!o||Uh(o)){su=0,ou=null;var u=l.sibling;if(null!==u)nu=u;else{var c=l.return;null!==c?(nu=c,ec(c)):nu=null}break t}}su=0,ou=null,Qu(e,t,a,5);break;case 6:su=0,ou=null,Qu(e,t,a,6);break;case 8:zu(),du=6;break e;default:throw Error(s(462))}}qu();break}catch(h){Vu(e,h)}return yn=bn=null,j.H=r,j.A=n,iu=i,null!==nu?0:(ru=null,au=0,Or(),du)}(e,t):Xu(e,t,!0),a=r;;){if(0===n){uu&&!r&&Bu(e,t,0,!1);break}if(i=e.current.alternate,!a||Fu(i)){if(2===n){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;n=yu;var u=l.current.memoizedState.isDehydrated;if(u&&(Hu(l,o).flags|=256),2!==(o=Xu(l,o,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=a,fu|=a,n=4;break e}a=vu,vu=n,null!==a&&(null===vu?vu=a:vu.push.apply(vu,a))}n=o}if(a=!1,2!==n)continue}}if(1===n){Hu(e,0),Bu(e,t,0,!0);break}e:{switch(r=e,a=n){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Bu(r,t,gu,!lu);break e;case 2:vu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(n=wu+300-te())){if(Bu(r,t,gu,!lu),0!==ve(r,0,!0))break e;r.timeoutHandle=lh($u.bind(null,r,i,vu,Pu,_u,t,gu,fu,bu,lu,a,2,-0,0),n)}else $u(r,i,vu,Pu,_u,t,gu,fu,bu,lu,a,0,-0,0)}break}n=Xu(e,t,!1),a=!1}xc(e)}function $u(e,t,i,r,n,a,o,l,u,c,h,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(zh={stylesheets:null,count:0,unsuspend:Hh},Xl(t),null!==(d=function(){if(null===zh)throw Error(s(475));var e=zh;return e.stylesheets&&0===e.count&&Yh(e,e.stylesheets),0<e.count?function(t){var i=setTimeout((function(){if(e.stylesheets&&Yh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=d(ic.bind(null,e,t,a,i,r,n,o,l,u,h,1,p,f)),void Bu(e,a,o,!c);ic(e,t,a,i,r,n,o,l,u)}function Fu(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var r=0;r<i.length;r++){var n=i[r],a=n.getSnapshot;n=n.value;try{if(!Xi(a(),n))return!1}catch(s){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,i,r){t&=~mu,t&=~fu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var n=t;0<n;){var a=31-pe(n),s=1<<a;r[a]=-1,n&=~s}0!==i&&Se(e,i,t)}function Uu(){return 0!==(6&iu)||(Pc(0,!1),!1)}function zu(){if(null!==nu){if(0===su)var e=nu.return;else yn=bn=null,Ma(e=nu),Xs=null,Zs=0,e=nu;for(;null!==e;)al(e.alternate,e),e=e.return;nu=null}}function Hu(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,uh(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),zu(),ru=e,nu=i=Mr(e.current,null),au=t,su=0,ou=null,lu=!1,uu=_e(e,t),cu=!1,bu=gu=mu=fu=pu=du=0,vu=yu=null,_u=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var n=31-pe(r),a=1<<n;t|=e[n],r&=~a}return hu=t,Or(),i}function Vu(e,t){va=null,j.H=Vs,t===Gn||t===Wn?(t=Qn(),su=3):t===Yn?(t=Qn(),su=4):su=t===So?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ou=t,null===nu&&(du=1,wo(e,Pr(t,e.current)))}function Gu(){var e=j.H;return j.H=Vs,null===e?Vs:e}function Yu(){var e=j.A;return j.A=eu,e}function Wu(){du=4,lu||(4194048&au)!==au&&null!==ro.current||(uu=!0),0===(134217727&pu)&&0===(134217727&fu)||null===ru||Bu(ru,au,gu,!1)}function Xu(e,t,i){var r=iu;iu|=2;var n=Gu(),a=Yu();ru===e&&au===t||(Pu=null,Hu(e,t)),t=!1;var s=du;e:for(;;)try{if(0!==su&&null!==nu){var o=nu,l=ou;switch(su){case 8:zu(),s=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var u=su;if(su=0,ou=null,Qu(e,o,l,u),i&&uu){s=0;break e}break;default:u=su,su=0,ou=null,Qu(e,o,l,u)}}Zu(),s=du;break}catch(c){Vu(e,c)}return t&&e.shellSuspendCounter++,yn=bn=null,iu=r,j.H=n,j.A=a,null===nu&&(ru=null,au=0,Or()),s}function Zu(){for(;null!==nu;)Ku(nu)}function qu(){for(;null!==nu&&!Q();)Ku(nu)}function Ku(e){var t=Ko(e.alternate,e,hu);e.memoizedProps=e.pendingProps,null===t?ec(e):nu=t}function Ju(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=No(i,t,t.pendingProps,t.type,void 0,au);break;case 11:t=No(i,t,t.pendingProps,t.type.render,t.ref,au);break;case 5:Ma(t);default:al(i,t),t=Ko(i,t=nu=$r(t,hu),hu)}e.memoizedProps=e.pendingProps,null===t?ec(e):nu=t}function Qu(e,t,i,r){yn=bn=null,Ma(t),Xs=null,Zs=0;var n=t.return;try{if(function(e,t,i,r,n){if(i.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=i.alternate)&&Pn(t,i,n,!0),null!==(i=ro.current)){switch(i.tag){case 13:return null===no?Wu():null===i.alternate&&0===du&&(du=3),i.flags&=-257,i.flags|=65536,i.lanes=n,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([r]):t.add(r),hc(e,r,n)),!1;case 22:return i.flags|=65536,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([r]):i.add(r),hc(e,r,n)),!1}throw Error(s(435,i.tag))}return hc(e,r,n),Wu(),!1}if(an)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,r!==ln&&mn(Pr(e=Error(s(422),{cause:r}),i))):(r!==ln&&mn(Pr(t=Error(s(423),{cause:r}),i)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,r=Pr(r,i),oa(e,n=Po(e.stateNode,r,n)),4!==du&&(du=2)),!1;var a=Error(s(520),{cause:r});if(a=Pr(a,i),null===yu?yu=[a]:yu.push(a),4!==du&&(du=2),null===t)return!0;r=Pr(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,oa(i,e=Po(i.stateNode,r,e)),!1;case 1:if(t=i.type,a=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Eu||!Eu.has(a))))return i.flags|=65536,n&=-n,i.lanes|=n,ko(n=Eo(n),e,i,r),oa(i,n),!1}i=i.return}while(null!==i);return!1}(e,n,t,i,au))return du=1,wo(e,Pr(i,e.current)),void(nu=null)}catch(a){if(null!==n)throw nu=n,a;return du=1,wo(e,Pr(i,e.current)),void(nu=null)}32768&t.flags?(an||1===r?e=!0:uu||0!==(536870912&au)?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,lu);e=t.return;var i=rl(t.alternate,t,hu);if(null!==i)return void(nu=i);if(null!==(t=t.sibling))return void(nu=t);nu=t=e}while(null!==t);0===du&&(du=5)}function tc(e,t){do{var i=nl(e.alternate,e);if(null!==i)return i.flags&=32767,void(nu=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(nu=e);nu=e=i}while(null!==e);du=6,nu=null}function ic(e,t,i,r,n,a,o,l,u){e.cancelPendingCommit=null;do{oc()}while(0!==ku);if(0!==(6&iu))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,i,r,n,a){var s=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(i=s&~i;0<i;){var c=31-pe(i),h=1<<c;o[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var p=d[c];null!==p&&(p.lane&=-536870913)}i&=~h}0!==r&&Se(e,r,0),0!==a&&0===n&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,i,a|=Sr,o,l,u),e===ru&&(nu=ru=null,au=0),Ou=t,Su=e,Tu=i,Au=a,Cu=n,Ru=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,K(ae,(function(){return lc(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=j.T,j.T=null,n=L.p,L.p=2,o=iu,iu|=4;try{!function(e,t){if(e=e.containerInfo,th=id,er(e=Qi(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var n=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{i.nodeType,a.nodeType}catch(g){i=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==i||0!==n&&3!==d.nodeType||(l=o+n),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===i&&++c===n&&(l=o),p===a&&++h===r&&(u=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===u?null:{start:l,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(ih={focusedElem:e,selectionRange:i},id=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(a=(t=Pl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,i=t,n=a.memoizedProps,a=a.memoizedState,r=i.stateNode;try{var m=go(i.type,n,(i.elementType,i.type));e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(b){cc(i,i.return,b)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{iu=o,L.p=n,j.T=r}}ku=1,rc(),nc(),ac()}}function rc(){if(1===ku){ku=0;var e=Su,t=Ou,i=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||i){i=j.T,j.T=null;var r=L.p;L.p=2;var n=iu;iu|=4;try{jl(t,e);var a=ih,s=Qi(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Ji(o.ownerDocument.documentElement,o)){if(null!==l&&er(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(s=g,g=m,m=s);var b=Ki(o,m),y=Ki(o,g);if(b&&y&&(1!==p.rangeCount||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var v=h.createRange();v.setStart(b.node,b.offset),p.removeAllRanges(),m>g?(p.addRange(v),p.extend(y.node,y.offset)):(v.setEnd(y.node,y.offset),p.addRange(v))}}}}for(h=[],p=o;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<h.length;o++){var _=h[o];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}id=!!th,ih=th=null}finally{iu=n,L.p=r,j.T=i}}e.current=t,ku=2}}function nc(){if(2===ku){ku=0;var e=Su,t=Ou,i=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||i){i=j.T,j.T=null;var r=L.p;L.p=2;var n=iu;iu|=4;try{El(e,t.alternate,t)}finally{iu=n,L.p=r,j.T=i}}ku=3}}function ac(){if(4===ku||3===ku){ku=0,ee();var e=Su,t=Ou,i=Tu,r=Ru;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?ku=5:(ku=0,Ou=Su=null,sc(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Eu=null),Ae(i),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=j.T,n=L.p,L.p=2,j.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{j.T=t,L.p=n}}0!==(3&Tu)&&oc(),xc(e),n=e.pendingLanes,0!==(4194090&i)&&0!==(42&n)?e===Du?Iu++:(Iu=0,Du=e):Iu=0,Pc(0,!1)}}function sc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,jn(t)))}function oc(e){return rc(),nc(),ac(),lc()}function lc(){if(5!==ku)return!1;var e=Su,t=Au;Au=0;var i=Ae(Tu),r=j.T,n=L.p;try{L.p=32>i?32:i,j.T=null,i=Cu,Cu=null;var a=Su,o=Tu;if(ku=0,Ou=Su=null,Tu=0,0!==(6&iu))throw Error(s(331));var l=iu;if(iu|=4,Kl(a.current),Hl(a,a.current,o,i),iu=l,Pc(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ce,a)}catch(u){}return!0}finally{L.p=n,j.T=r,sc(e,t)}}function uc(e,t,i){t=Pr(i,t),null!==(e=aa(e,t=Po(e.stateNode,t,2),2))&&(ke(e,2),xc(e))}function cc(e,t,i){if(3===e.tag)uc(e,e,i);else for(;null!==t;){if(3===t.tag){uc(t,e,i);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Pr(i,e),null!==(r=aa(t,i=Eo(2),2))&&(ko(i,r,t,e),ke(r,2),xc(r));break}}t=t.return}}function hc(e,t,i){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(i)||(cu=!0,n.add(i),e=dc.bind(null,e,t,i),t.then(e,e))}function dc(e,t,i){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ru===e&&(au&i)===i&&(4===du||3===du&&(62914560&au)===au&&300>te()-wu?0===(2&iu)&&Hu(e,0):mu|=i,bu===au&&(bu=0)),xc(e)}function pc(e,t){0===t&&(t=Pe()),null!==(e=Cr(e,t))&&(ke(e,t),xc(e))}function fc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),pc(e,i)}function mc(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),pc(e,i)}var gc=null,bc=null,yc=!1,vc=!1,_c=!1,wc=0;function xc(e){e!==bc&&null===e.next&&(null===bc?gc=bc=e:bc=bc.next=e),vc=!0,yc||(yc=!0,hh((function(){0!==(6&iu)?K(re,Ec):kc()})))}function Pc(e,t){if(!_c&&vc){_c=!0;do{for(var i=!1,r=gc;null!==r;){if(!t)if(0!==e){var n=r.pendingLanes;if(0===n)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-pe(42|e)+1)-1,a=201326741&(a&=n&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(i=!0,Tc(r,a))}else a=au,0===(3&(a=ve(r,r===ru?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||_e(r,a)||(i=!0,Tc(r,a));r=r.next}}while(i);_c=!1}}function Ec(){kc()}function kc(){vc=yc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==oh&&(oh=e,!0);return oh=null,!1}()&&(e=wc),wc=0);for(var t=te(),i=null,r=gc;null!==r;){var n=r.next,a=Sc(r,t);0===a?(r.next=null,null===i?gc=n:i.next=n,null===n&&(bc=i)):(i=r,(0!==e||0!==(3&a))&&(vc=!0)),r=n}Pc(e,!1)}function Sc(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-pe(a),o=1<<s,l=n[s];-1===l?0!==(o&i)&&0===(o&r)||(n[s]=we(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(i=au,i=ve(e,e===(t=ru)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===i||e===t&&(2===su||9===su)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||_e(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==r&&J(r),Ae(i)){case 2:case 8:i=ne;break;case 32:default:i=ae;break;case 268435456:i=oe}return r=Oc.bind(null,e),i=K(i,r),e.callbackPriority=t,e.callbackNode=i,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Oc(e,t){if(0!==ku&&5!==ku)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(oc()&&e.callbackNode!==i)return null;var r=au;return 0===(r=ve(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mu(e,r,t),Sc(e,te()),null!=e.callbackNode&&e.callbackNode===i?Oc.bind(null,e):null)}function Tc(e,t){if(oc())return null;Mu(e,t,!0)}function Ac(){return 0===wc&&(wc=xe()),wc}function Cc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Rc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Ic=0;Ic<_r.length;Ic++){var Dc=_r[Ic];wr(Dc.toLowerCase(),"on"+(Dc[0].toUpperCase()+Dc.slice(1)))}wr(dr,"onAnimationEnd"),wr(pr,"onAnimationIteration"),wr(fr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(mr,"onTransitionRun"),wr(gr,"onTransitionStart"),wr(br,"onTransitionCancel"),wr(yr,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function Nc(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;a=o,n.currentTarget=u;try{a(n)}catch(c){bo(c)}n.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;a=o,n.currentTarget=u;try{a(n)}catch(c){bo(c)}n.currentTarget=null,a=l}}}}function Mc(e,t){var i=t[Le];void 0===i&&(i=t[Le]=new Set);var r=e+"__bubble";i.has(r)||(Uc(t,e,2,!1),i.add(r))}function $c(e,t,i){var r=0;t&&(r|=4),Uc(i,e,r,t)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[Fc]){e[Fc]=!0,Ye.forEach((function(t){"selectionchange"!==t&&(Lc.has(t)||$c(t,!1,e),$c(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fc]||(t[Fc]=!0,$c("selectionchange",!1,t))}}function Uc(e,t,i,r){switch(ud(t)){case 2:var n=rd;break;case 8:n=nd;break;default:n=ad}i=n.bind(null,t,i,e),n=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),r?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function zc(e,t,i,r,n){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===n)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===n)return;s=s.return}for(;null!==o;){if(null===(s=Ue(o)))return;if(5===(u=s.tag)||6===u||26===u||27===u){r=a=s;continue e}o=o.parentNode}}r=r.return}Nt((function(){var r=a,n=Rt(i),s=[];e:{var o=vr.get(e);if(void 0!==o){var u=Qt,c=e;switch(e){case"keypress":if(0===Gt(i))break e;case"keydown":case"keyup":u=fi;break;case"focusin":c="focus",u=ai;break;case"focusout":c="blur",u=ai;break;case"beforeblur":case"afterblur":u=ai;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=gi;break;case dr:case pr:case fr:u=si;break;case yr:u=bi;break;case"scroll":case"scrollend":u=ti;break;case"wheel":u=yi;break;case"copy":case"cut":case"paste":u=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mi;break;case"toggle":case"beforetoggle":u=vi}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==o?o+"Capture":null:o;h=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Mt(m,p))&&h.push(Hc(m,g,f)),d)break;m=m.return}0<h.length&&(o=new u(o,c,null,i,n),s.push({event:o,listeners:h}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||i===Ct||!(c=i.relatedTarget||i.fromElement)||!Ue(c)&&!c[je])&&(u||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=r,null!==(c=(c=i.relatedTarget||i.toElement)?Ue(c):null)&&(d=l(c),h=c.tag,c!==d||5!==h&&27!==h&&6!==h)&&(c=null)):(u=null,c=r),u!==c)){if(h=ri,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=mi,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==u?o:He(u),f=null==c?o:He(c),(o=new h(g,m+"leave",u,i,n)).target=d,o.relatedTarget=f,g=null,Ue(n)===r&&((h=new h(p,m+"enter",c,i,n)).target=f,h.relatedTarget=d,g=h),d=g,u&&c)e:{for(p=c,m=0,f=h=u;f;f=Gc(f))m++;for(f=0,g=p;g;g=Gc(g))f++;for(;0<m-f;)h=Gc(h),m--;for(;0<f-m;)p=Gc(p),f--;for(;m--;){if(h===p||null!==p&&h===p.alternate)break e;h=Gc(h),p=Gc(p)}h=null}else h=null;null!==u&&Yc(s,o,u,h,!1),null!==c&&null!==d&&Yc(s,d,c,h,!0)}if("select"===(u=(o=r?He(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var b=Mi;else if(Ri(o))if($i)b=Wi;else{b=Gi;var y=Vi}else!(u=o.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&St(r.elementType)&&(b=Mi):b=Yi;switch(b&&(b=b(e,r))?Ii(s,b,i,n):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&yt(o,"number",o.value)),y=r?He(r):window,e){case"focusin":(Ri(y)||"true"===y.contentEditable)&&(ir=y,rr=r,nr=null);break;case"focusout":nr=rr=ir=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(s,i,n);break;case"selectionchange":if(tr)break;case"keydown":case"keyup":sr(s,i,n)}var v;if(wi)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ai?Oi(e,i)&&(_="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(_="onCompositionStart");_&&(Ei&&"ko"!==i.locale&&(Ai||"onCompositionStart"!==_?"onCompositionEnd"===_&&Ai&&(v=Vt()):(zt="value"in(Ut=n)?Ut.value:Ut.textContent,Ai=!0)),0<(y=Vc(r,_)).length&&(_=new li(_,e,null,i,n),s.push({event:_,listeners:y}),v?_.data=v:null!==(v=Ti(i))&&(_.data=v))),(v=Pi?function(e,t){switch(e){case"compositionend":return Ti(t);case"keypress":return 32!==t.which?null:(Si=!0,ki);case"textInput":return(e=t.data)===ki&&Si?null:e;default:return null}}(e,i):function(e,t){if(Ai)return"compositionend"===e||!wi&&Oi(e,t)?(e=Vt(),Ht=zt=Ut=null,Ai=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ei&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(_=Vc(r,"onBeforeInput")).length&&(y=new li("onBeforeInput","beforeinput",null,i,n),s.push({event:y,listeners:_}),y.data=v)),function(e,t,i,r,n){if("submit"===t&&i&&i.stateNode===n){var a=Cc((n[De]||null).action),s=r.submitter;s&&null!==(t=(t=s[De]||null)?Cc(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new Qt("action","action",null,r,n);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=s?Rc(n,s):new FormData(n);Cs(i,{pending:!0,data:e,method:n.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=s?Rc(n,s):new FormData(n),Cs(i,{pending:!0,data:e,method:n.method,action:a},a,e))},currentTarget:n}]})}}(s,e,r,i,n)}Nc(s,t)}))}function Hc(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Vc(e,t){for(var i=t+"Capture",r=[];null!==e;){var n=e,a=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===a||(null!=(n=Mt(e,i))&&r.unshift(Hc(e,n,a)),null!=(n=Mt(e,t))&&r.push(Hc(e,n,a))),3===e.tag)return r;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Yc(e,t,i,r,n){for(var a=t._reactName,s=[];null!==i&&i!==r;){var o=i,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===u||(l=u,n?null!=(u=Mt(i,a))&&s.unshift(Hc(i,u,l)):n||null!=(u=Mt(i,a))&&s.push(Hc(i,u,l))),i=i.return}0!==s.length&&e.push({event:t,listeners:s})}var Wc=/\r\n?/g,Xc=/\u0000|\uFFFD/g;function Zc(e){return("string"===typeof e?e:""+e).replace(Wc,"\n").replace(Xc,"")}function qc(e,t){return t=Zc(t),Zc(e)===t}function Kc(){}function Jc(e,t,i,r,n,a){switch(i){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":it(e,"class",r);break;case"tabIndex":it(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,i,r);break;case"style":kt(e,r,a);break;case"data":if("object"!==t){it(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(i);break}r=At(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===i?("input"!==t&&Jc(e,t,"name",n.name,n,null),Jc(e,t,"formEncType",n.formEncType,n,null),Jc(e,t,"formMethod",n.formMethod,n,null),Jc(e,t,"formTarget",n.formTarget,n,null)):(Jc(e,t,"encType",n.encType,n,null),Jc(e,t,"method",n.method,n,null),Jc(e,t,"target",n.target,n,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(i);break}r=At(""+r),e.setAttribute(i,r);break;case"onClick":null!=r&&(e.onclick=Kc);break;case"onScroll":null!=r&&Mc("scroll",e);break;case"onScrollEnd":null!=r&&Mc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}i=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===r?e.setAttribute(i,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":Mc("beforetoggle",e),Mc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&tt(e,i=Ot.get(i)||i,r)}}function Qc(e,t,i,r,n,a){switch(i){case"style":kt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(s(60));e.innerHTML=i}}break;case"children":"string"===typeof r?xt(e,r):("number"===typeof r||"bigint"===typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&Mc("scroll",e);break;case"onScrollEnd":null!=r&&Mc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),"function"===typeof(a=null!=(a=e[De]||null)?a[i]:null)&&e.removeEventListener(t,a,n),"function"!==typeof r)?i in e?e[i]=r:!0===r?e.setAttribute(i,""):tt(e,i,r):("function"!==typeof a&&null!==a&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,n)))}}function eh(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mc("error",e),Mc("load",e);var r,n=!1,a=!1;for(r in i)if(i.hasOwnProperty(r)){var o=i[r];if(null!=o)switch(r){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Jc(e,t,r,o,i,null)}}return a&&Jc(e,t,"srcSet",i.srcSet,i,null),void(n&&Jc(e,t,"src",i.src,i,null));case"input":Mc("invalid",e);var l=r=o=a=null,u=null,c=null;for(n in i)if(i.hasOwnProperty(n)){var h=i[n];if(null!=h)switch(n){case"name":a=h;break;case"type":o=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:Jc(e,t,n,h,i,null)}}return bt(e,r,l,u,c,o,a,!1),void ht(e);case"select":for(a in Mc("invalid",e),n=o=r=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":n=l;default:Jc(e,t,a,l,i,null)}return t=r,i=o,e.multiple=!!n,void(null!=t?vt(e,!!n,t,!1):null!=i&&vt(e,!!n,i,!0));case"textarea":for(o in Mc("invalid",e),r=a=n=null,i)if(i.hasOwnProperty(o)&&null!=(l=i[o]))switch(o){case"value":n=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Jc(e,t,o,l,i,null)}return wt(e,n,a,r),void ht(e);case"option":for(u in i)if(i.hasOwnProperty(u)&&null!=(n=i[u]))if("selected"===u)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else Jc(e,t,u,n,i,null);return;case"dialog":Mc("beforetoggle",e),Mc("toggle",e),Mc("cancel",e),Mc("close",e);break;case"iframe":case"object":Mc("load",e);break;case"video":case"audio":for(n=0;n<jc.length;n++)Mc(jc[n],e);break;case"image":Mc("error",e),Mc("load",e);break;case"details":Mc("toggle",e);break;case"embed":case"source":case"link":Mc("error",e),Mc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(n=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Jc(e,t,c,n,i,null)}return;default:if(St(t)){for(h in i)i.hasOwnProperty(h)&&(void 0!==(n=i[h])&&Qc(e,t,h,n,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(n=i[l])&&Jc(e,t,l,n,i,null))}var th=null,ih=null;function rh(e){return 9===e.nodeType?e:e.ownerDocument}function nh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ah(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oh=null;var lh="function"===typeof setTimeout?setTimeout:void 0,uh="function"===typeof clearTimeout?clearTimeout:void 0,ch="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ch?function(e){return ch.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout((function(){throw e}))}function ph(e){return"head"===e}function fh(e,t){var i=t,r=0,n=0;do{var a=i.nextSibling;if(e.removeChild(i),a&&8===a.nodeType)if("/$"===(i=a.data)){if(0<r&&8>r){i=r;var s=e.ownerDocument;if(1&i&&wh(s.documentElement),2&i&&wh(s.body),4&i)for(wh(i=s.head),s=i.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||i.removeChild(s),s=o}}if(0===n)return e.removeChild(a),void Od(t);n--}else"$"===i||"$?"===i||"$!"===i?n++:r=i.charCodeAt(0)-48;else r=0;i=a}while(i);Od(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":mh(i),Be(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yh=null;function vh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function _h(e,t,i){switch(t=rh(i),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function wh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var xh=new Map,Ph=new Set;function Eh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kh=L.d;L.d={f:function(){var e=kh.f(),t=Uu();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Is(t):kh.r(e)},D:function(e){kh.D(e),Oh("dns-prefetch",e,null)},C:function(e,t){kh.C(e,t),Oh("preconnect",e,t)},L:function(e,t,i){kh.L(e,t,i);var r=Sh;if(r&&e&&t){var n='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(n+='[imagesrcset="'+mt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(n+='[imagesizes="'+mt(i.imageSizes)+'"]')):n+='[href="'+mt(e)+'"]';var a=n;switch(t){case"style":a=Ah(e);break;case"script":a=Ih(e)}xh.has(a)||(e=d({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),xh.set(a,e),null!==r.querySelector(n)||"style"===t&&r.querySelector(Ch(a))||"script"===t&&r.querySelector(Dh(a))||(eh(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){kh.m(e,t);var i=Sh;if(i&&e){var r=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',a=n;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Ih(e)}if(!xh.has(a)&&(e=d({rel:"modulepreload",href:e},t),xh.set(a,e),null===i.querySelector(n))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Dh(a)))return}eh(r=i.createElement("link"),"link",e),Ge(r),i.head.appendChild(r)}}},X:function(e,t){kh.X(e,t);var i=Sh;if(i&&e){var r=Ve(i).hoistableScripts,n=Ih(e),a=r.get(n);a||((a=i.querySelector(Dh(n)))||(e=d({src:e,async:!0},t),(t=xh.get(n))&&Mh(e,t),Ge(a=i.createElement("script")),eh(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(n,a))}},S:function(e,t,i){kh.S(e,t,i);var r=Sh;if(r&&e){var n=Ve(r).hoistableStyles,a=Ah(e);t=t||"default";var s=n.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(Ch(a)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},i),(i=xh.get(a))&&Nh(e,i);var l=s=r.createElement("link");Ge(l),eh(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Lh(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},n.set(a,s)}}},M:function(e,t){kh.M(e,t);var i=Sh;if(i&&e){var r=Ve(i).hoistableScripts,n=Ih(e),a=r.get(n);a||((a=i.querySelector(Dh(n)))||(e=d({src:e,async:!0,type:"module"},t),(t=xh.get(n))&&Mh(e,t),Ge(a=i.createElement("script")),eh(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(n,a))}}};var Sh="undefined"===typeof document?null:document;function Oh(e,t,i){var r=Sh;if(r&&"string"===typeof t&&t){var n=mt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof i&&(n+='[crossorigin="'+i+'"]'),Ph.has(n)||(Ph.add(n),e={rel:e,crossOrigin:i,href:t},null===r.querySelector(n)&&(eh(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Th(e,t,i,r){var n,a,o,l,u=(u=V.current)?Eh(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=Ah(i.href),(r=(i=Ve(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=Ah(i.href);var c=Ve(u).hoistableStyles,h=c.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=u.querySelector(Ch(e)))&&!c._p&&(h.instance=c,h.state.loading=5),xh.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},xh.set(e,i),c||(n=u,a=e,o=i,l=h.state,n.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=n.createElement("link"),l.preload=a,a.addEventListener("load",(function(){return l.loading|=1})),a.addEventListener("error",(function(){return l.loading|=2})),eh(a,"link",o),Ge(a),n.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return h}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ih(i),(r=(i=Ve(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ah(e){return'href="'+mt(e)+'"'}function Ch(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Ih(e){return'[src="'+mt(e)+'"]'}function Dh(e){return"script[async]"+e}function jh(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(i.href)+'"]');if(r)return t.instance=r,Ge(r),r;var n=d({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),eh(r,"style",n),Lh(r,i.precedence,e),t.instance=r;case"stylesheet":n=Ah(i.href);var a=e.querySelector(Ch(n));if(a)return t.state.loading|=4,t.instance=a,Ge(a),a;r=Rh(i),(n=xh.get(n))&&Nh(r,n),Ge(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),eh(a,"link",r),t.state.loading|=4,Lh(a,i.precedence,e),t.instance=a;case"script":return a=Ih(i.src),(n=e.querySelector(Dh(a)))?(t.instance=n,Ge(n),n):(r=i,(n=xh.get(a))&&Mh(r=d({},i),n),Ge(n=(e=e.ownerDocument||e).createElement("script")),eh(n,"link",r),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Lh(r,i.precedence,e));return t.instance}function Lh(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=r.length?r[r.length-1]:null,a=n,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==n)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function Nh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Mh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var $h=null;function Fh(e,t,i){if(null===$h){var r=new Map,n=$h=new Map;n.set(i,r)}else(r=(n=$h).get(i))||(r=new Map,n.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var a=i[n];if(!(a[Fe]||a[Ie]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function Bh(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Uh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var zh=null;function Hh(){}function Vh(){if(this.count--,0===this.count)if(this.stylesheets)Yh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gh=null;function Yh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gh=new Map,t.forEach(Wh,e),Gh=null,Vh.call(e))}function Wh(e,t){if(!(4&t.state.loading)){var i=Gh.get(e);if(i)var r=i.get(null);else{i=new Map,Gh.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<n.length;a++){var s=n[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(i.set(s.dataset.precedence,s),r=s)}r&&i.set(null,r)}s=(n=t.instance).getAttribute("data-precedence"),(a=i.get(s)||r)===r&&i.set(null,n),i.set(s,n),this.count++,r=Vh.bind(this),n.addEventListener("load",r),n.addEventListener("error",r),a?a.parentNode.insertBefore(n,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var Xh={$$typeof:w,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function Zh(e,t,i,r,n,a,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=n,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function qh(e,t,i,r,n,a,s,o,l,u,c,h){return e=new Zh(e,t,i,s,o,l,u,h),t=1,!0===a&&(t|=24),a=Lr(3,null,null,t),e.current=a,a.stateNode=e,(t=Dn()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:i,cache:t},ia(a),e}function Kh(e){return e?e=Dr:Dr}function Jh(e,t,i,r,n,a){n=Kh(n),null===r.context?r.context=n:r.pendingContext=n,(r=na(t)).payload={element:i},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(i=aa(e,r,t))&&(Nu(i,0,t),sa(i,e,t))}function Qh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ed(e,t){Qh(e,t),(e=e.alternate)&&Qh(e,t)}function td(e){if(13===e.tag){var t=Cr(e,67108864);null!==t&&Nu(t,0,67108864),ed(e,67108864)}}var id=!0;function rd(e,t,i,r){var n=j.T;j.T=null;var a=L.p;try{L.p=2,ad(e,t,i,r)}finally{L.p=a,j.T=n}}function nd(e,t,i,r){var n=j.T;j.T=null;var a=L.p;try{L.p=8,ad(e,t,i,r)}finally{L.p=a,j.T=n}}function ad(e,t,i,r){if(id){var n=sd(r);if(null===n)zc(e,t,r,od,i),yd(e,r);else if(function(e,t,i,r,n){switch(t){case"focusin":return hd=vd(hd,e,t,i,r,n),!0;case"dragenter":return dd=vd(dd,e,t,i,r,n),!0;case"mouseover":return pd=vd(pd,e,t,i,r,n),!0;case"pointerover":var a=n.pointerId;return fd.set(a,vd(fd.get(a)||null,e,t,i,r,n)),!0;case"gotpointercapture":return a=n.pointerId,md.set(a,vd(md.get(a)||null,e,t,i,r,n)),!0}return!1}(n,e,t,i,r))r.stopPropagation();else if(yd(e,r),4&t&&-1<bd.indexOf(e)){for(;null!==n;){var a=ze(n);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=ye(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-pe(s);o.entanglements[1]|=l,s&=~l}xc(a),0===(6&iu)&&(xu=te()+500,Pc(0,!1))}}break;case 13:null!==(o=Cr(a,2))&&Nu(o,0,2),Uu(),ed(a,2)}if(null===(a=sd(r))&&zc(e,t,r,od,i),a===n)break;n=a}null!==n&&r.stopPropagation()}else zc(e,t,r,null,i)}}function sd(e){return ld(e=Rt(e))}var od=null;function ld(e){if(od=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=u(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return od=e,null}function ud(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case re:return 2;case ne:return 8;case ae:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var cd=!1,hd=null,dd=null,pd=null,fd=new Map,md=new Map,gd=[],bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function vd(e,t,i,r,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=ze(t))&&td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function _d(e){var t=Ue(e.target);if(null!==t){var i=l(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=u(i)))return e.blockedOn=t,void function(e,t){var i=L.p;try{return L.p=e,t()}finally{L.p=i}}(e.priority,(function(){if(13===i.tag){var e=ju();e=Te(e);var t=Cr(i,e);null!==t&&Nu(t,0,e),ed(i,e)}}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function wd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=sd(e.nativeEvent);if(null!==i)return null!==(t=ze(i))&&td(t),e.blockedOn=i,!1;var r=new(i=e.nativeEvent).constructor(i.type,i);Ct=r,i.target.dispatchEvent(r),Ct=null,t.shift()}return!0}function xd(e,t,i){wd(e)&&i.delete(t)}function Pd(){cd=!1,null!==hd&&wd(hd)&&(hd=null),null!==dd&&wd(dd)&&(dd=null),null!==pd&&wd(pd)&&(pd=null),fd.forEach(xd),md.forEach(xd)}function Ed(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Pd)))}var kd=null;function Sd(e){kd!==e&&(kd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){kd===e&&(kd=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],n=e[t+2];if("function"!==typeof r){if(null===ld(r||i))continue;break}var a=ze(i);null!==a&&(e.splice(t,3),t-=3,Cs(a,{pending:!0,data:n,method:i.method,action:r},r,n))}})))}function Od(e){function t(t){return Ed(t,e)}null!==hd&&Ed(hd,e),null!==dd&&Ed(dd,e),null!==pd&&Ed(pd,e),fd.forEach(t),md.forEach(t);for(var i=0;i<gd.length;i++){var r=gd[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gd.length&&null===(i=gd[0]).blockedOn;)_d(i),null===i.blockedOn&&gd.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<i.length;r+=3){var n=i[r],a=i[r+1],s=n[De]||null;if("function"===typeof a)s||Sd(i);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(n=a,s=a[De]||null)o=s.formAction;else if(null!==ld(n))continue}else o=s.action;"function"===typeof o?i[r+1]=o:(i.splice(r,3),r-=3),Sd(i)}}}function Td(e){this._internalRoot=e}function Ad(e){this._internalRoot=e}Ad.prototype.render=Td.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Jh(t.current,ju(),e,t,null,null)},Ad.prototype.unmount=Td.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),Uu(),t[je]=null}},Ad.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ce();e={blockedOn:null,target:e,priority:t};for(var i=0;i<gd.length&&0!==t&&t<gd[i].priority;i++);gd.splice(i,0,e),0===i&&_d(e)}};var Cd=n.version;if("19.1.0"!==Cd)throw Error(s(527,Cd,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(r=n.return)){i=r;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===i)return c(n),e;if(a===r)return c(n),t;a=a.sibling}throw Error(s(188))}if(i.return!==r.return)i=n,r=a;else{for(var o=!1,u=n.child;u;){if(u===i){o=!0,i=n,r=a;break}if(u===r){o=!0,r=n,i=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===i){o=!0,i=a,r=n;break}if(u===r){o=!0,r=a,i=n;break}u=u.sibling}if(!o)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{ce=Id.inject(Rd),he=Id}catch(jd){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var i=!1,r="",n=yo,a=vo,l=_o;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=qh(e,1,!1,null,0,i,r,n,a,l,0,null),e[je]=t.current,Bc(e),new Td(t)},t.hydrateRoot=function(e,t,i){if(!o(e))throw Error(s(299));var r=!1,n="",a=yo,l=vo,u=_o,c=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(n=i.identifierPrefix),void 0!==i.onUncaughtError&&(a=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(u=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(c=i.formState)),(t=qh(e,1,!0,t,0,r,n,a,l,u,0,c)).context=Kh(null),i=t.current,(n=na(r=Te(r=ju()))).callback=null,aa(i,n,r),i=r,t.current.lanes=i,ke(t,i),xc(t),e[je]=t.current,Bc(e),new Ad(t)},t.version="19.1.0"},7024:(e,t,i)=>{const r=i(6096);e.exports=(e,t)=>e.sort(((e,i)=>r(e,i,t)))},7049:(e,t,i)=>{const r=i(5296);e.exports=(e,t,i)=>{const n=new r(e,i),a=new r(t,i);return n.compare(a)||n.compareBuild(a)}},7123:(e,t,i)=>{const r=i(7049);e.exports=(e,t)=>e.sort(((e,i)=>r(e,i,t)))},7135:(e,t,i)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=i(9693),s=i(8679),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],h=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[p,n]],m=(e,t,i)=>{const r=(e=>{for(const[t,i]of f)e=e.split(`${t}*`).join(`${t}{0,${i}}`).split(`${t}+`).join(`${t}{1,${i}}`);return e})(t),n=d++;s(e,n,t),h[e]=n,u[n]=t,c[n]=r,o[n]=new RegExp(t,i?"g":void 0),l[n]=new RegExp(r,i?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[h.NUMERICIDENTIFIER]}|${u[h.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[h.NUMERICIDENTIFIERLOOSE]}|${u[h.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[h.PRERELEASEIDENTIFIER]}(?:\\.${u[h.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[h.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${u[h.BUILDIDENTIFIER]}(?:\\.${u[h.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[h.MAINVERSION]}${u[h.PRERELEASE]}?${u[h.BUILD]}?`),m("FULL",`^${u[h.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[h.MAINVERSIONLOOSE]}${u[h.PRERELEASELOOSE]}?${u[h.BUILD]}?`),m("LOOSE",`^${u[h.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[h.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:${u[h.PRERELEASE]})?${u[h.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:${u[h.PRERELEASELOOSE]})?${u[h.BUILD]}?)?)?`),m("XRANGE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),m("COERCE",`${u[h.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[h.COERCEPLAIN]+`(?:${u[h.PRERELEASE]})?`+`(?:${u[h.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[h.COERCE],!0),m("COERCERTLFULL",u[h.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[h.LONECARET]}${u[h.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[h.LONECARET]}${u[h.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[h.GTLT]}\\s*(${u[h.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]}|${u[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[h.XRANGEPLAIN]})\\s+-\\s+(${u[h.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[h.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7162:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>0===r(e,t,i)},7180:(e,t,i)=>{const r=Symbol("SemVer ANY");class n{static get ANY(){return r}constructor(e,t){if(t=a(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],i=e.match(t);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new c(i[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"===typeof e)try{e=new c(e,this.options)}catch(t){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):(!(t=a(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=n;const a=i(4783),{safeRe:s,t:o}=i(8314),l=i(5003),u=i(6860),c=i(5296),h=i(2419)},7193:(e,t,i)=>{const r=i(4635),n=i(9361),{safeRe:a,t:s}=i(7135);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;let i=null;if((t=t||{}).rtl){const r=t.includePrerelease?a[s.COERCERTLFULL]:a[s.COERCERTL];let n;for(;(n=r.exec(e))&&(!i||i.index+i[0].length!==e.length);)i&&n.index+n[0].length===i.index+i[0].length||(i=n),r.lastIndex=n.index+n[1].length+n[2].length;r.lastIndex=-1}else i=e.match(t.includePrerelease?a[s.COERCEFULL]:a[s.COERCE]);if(null===i)return null;const o=i[2],l=i[3]||"0",u=i[4]||"0",c=t.includePrerelease&&i[5]?`-${i[5]}`:"",h=t.includePrerelease&&i[6]?`+${i[6]}`:"";return n(`${o}.${l}.${u}${c}${h}`,t)}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i="~";function r(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(e,t,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||e,s),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,r,n=[];if(0===this._eventsCount)return n;for(r in e=this._events)t.call(e,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,n,a,s){var o=i?i+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,i){return a(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return a(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||n&&!o[l].once||r&&o[l].context!==r)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o},7293:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>r(e,t,i)<=0},7349:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(115);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const i={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(i);const n=r.default(this._queue,i,((e,t)=>t.priority-e.priority));this._queue.splice(n,0,i)}dequeue(){const e=this._queue.shift();return null===e||void 0===e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},7512:(e,t,i)=>{const r=i(7135),n=i(9693),a=i(4635),s=i(9012),o=i(9361),l=i(7740),u=i(9847),c=i(706),h=i(2247),d=i(9167),p=i(2491),f=i(4836),m=i(6882),g=i(9253),b=i(9533),y=i(5002),v=i(6096),_=i(7024),w=i(6248),x=i(1975),P=i(1776),E=i(7162),k=i(9950),S=i(8756),O=i(7293),T=i(3718),A=i(7193),C=i(6547),R=i(4606),I=i(9147),D=i(3822),j=i(9065),L=i(1715),N=i(7658),M=i(5041),$=i(6584),F=i(8340),B=i(4349),U=i(1929),z=i(4924),H=i(8321);e.exports={parse:o,valid:l,clean:u,inc:c,diff:h,major:d,minor:p,patch:f,prerelease:m,compare:g,rcompare:b,compareLoose:y,compareBuild:v,sort:_,rsort:w,gt:x,lt:P,eq:E,neq:k,gte:S,lte:O,cmp:T,coerce:A,Comparator:C,Range:R,satisfies:I,toComparators:D,maxSatisfying:j,minSatisfying:L,minVersion:N,validRange:M,outside:$,gtr:F,ltr:B,intersects:U,simplifyRange:z,subset:H,SemVer:a,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n.SEMVER_SPEC_VERSION,RELEASE_TYPES:n.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},7658:(e,t,i)=>{const r=i(4635),n=i(4606),a=i(1975);e.exports=(e,t)=>{e=new n(e,t);let i=new r("0.0.0");if(e.test(i))return i;if(i=new r("0.0.0-0"),e.test(i))return i;i=null;for(let n=0;n<e.set.length;++n){const t=e.set[n];let s=null;t.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!a(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||i&&!a(i,s)||(i=s)}return i&&e.test(i)?i:null}},7740:(e,t,i)=>{const r=i(9361);e.exports=(e,t)=>{const i=r(e,t);return i?i.version:null}},7950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(6672)},8207:(e,t,i)=>{const r=i(5296),n=i(7180),{ANY:a}=n,s=i(2419),o=i(3202),l=i(2440),u=i(495),c=i(8748),h=i(6085);e.exports=(e,t,i,d)=>{let p,f,m,g,b;switch(e=new r(e,d),t=new s(t,d),i){case">":p=l,f=c,m=u,g=">",b=">=";break;case"<":p=u,f=h,m=l,g="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,d))return!1;for(let r=0;r<t.set.length;++r){const i=t.set[r];let s=null,o=null;if(i.forEach((e=>{e.semver===a&&(e=new n(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,d)?s=e:m(e.semver,o.semver,d)&&(o=e)})),s.operator===g||s.operator===b)return!1;if((!o.operator||o.operator===g)&&f(e,o.semver))return!1;if(o.operator===b&&m(e,o.semver))return!1}return!0}},8314:(e,t,i)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=i(3254),s=i(6860),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],h=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[p,n]],m=(e,t,i)=>{const r=(e=>{for(const[t,i]of f)e=e.split(`${t}*`).join(`${t}{0,${i}}`).split(`${t}+`).join(`${t}{1,${i}}`);return e})(t),n=d++;s(e,n,t),h[e]=n,u[n]=t,c[n]=r,o[n]=new RegExp(t,i?"g":void 0),l[n]=new RegExp(r,i?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[h.NUMERICIDENTIFIER]}|${u[h.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[h.NUMERICIDENTIFIERLOOSE]}|${u[h.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[h.PRERELEASEIDENTIFIER]}(?:\\.${u[h.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[h.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${u[h.BUILDIDENTIFIER]}(?:\\.${u[h.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[h.MAINVERSION]}${u[h.PRERELEASE]}?${u[h.BUILD]}?`),m("FULL",`^${u[h.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[h.MAINVERSIONLOOSE]}${u[h.PRERELEASELOOSE]}?${u[h.BUILD]}?`),m("LOOSE",`^${u[h.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[h.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:${u[h.PRERELEASE]})?${u[h.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:${u[h.PRERELEASELOOSE]})?${u[h.BUILD]}?)?)?`),m("XRANGE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),m("COERCE",`${u[h.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[h.COERCEPLAIN]+`(?:${u[h.PRERELEASE]})?`+`(?:${u[h.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[h.COERCE],!0),m("COERCERTLFULL",u[h.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[h.LONECARET]}${u[h.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[h.LONECARET]}${u[h.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[h.GTLT]}\\s*(${u[h.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]}|${u[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[h.XRANGEPLAIN]})\\s+-\\s+(${u[h.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[h.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},8321:(e,t,i)=>{const r=i(4606),n=i(6547),{ANY:a}=n,s=i(9147),o=i(9253),l=[new n(">=0.0.0-0")],u=[new n(">=0.0.0")],c=(e,t,i)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===a){if(1===t.length&&t[0].semver===a)return!0;e=i.includePrerelease?l:u}if(1===t.length&&t[0].semver===a){if(i.includePrerelease)return!0;t=u}const r=new Set;let n,c,p,f,m,g,b;for(const a of e)">"===a.operator||">="===a.operator?n=h(n,a,i):"<"===a.operator||"<="===a.operator?c=d(c,a,i):r.add(a.semver);if(r.size>1)return null;if(n&&c){if(p=o(n.semver,c.semver,i),p>0)return null;if(0===p&&(">="!==n.operator||"<="!==c.operator))return null}for(const a of r){if(n&&!s(a,String(n),i))return null;if(c&&!s(a,String(c),i))return null;for(const e of t)if(!s(a,String(e),i))return!1;return!0}let y=!(!c||i.includePrerelease||!c.semver.prerelease.length)&&c.semver,v=!(!n||i.includePrerelease||!n.semver.prerelease.length)&&n.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const a of t){if(b=b||">"===a.operator||">="===a.operator,g=g||"<"===a.operator||"<="===a.operator,n)if(v&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===v.major&&a.semver.minor===v.minor&&a.semver.patch===v.patch&&(v=!1),">"===a.operator||">="===a.operator){if(f=h(n,a,i),f===a&&f!==n)return!1}else if(">="===n.operator&&!s(n.semver,String(a),i))return!1;if(c)if(y&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===y.major&&a.semver.minor===y.minor&&a.semver.patch===y.patch&&(y=!1),"<"===a.operator||"<="===a.operator){if(m=d(c,a,i),m===a&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(a),i))return!1;if(!a.operator&&(c||n)&&0!==p)return!1}return!(n&&g&&!c&&0!==p)&&(!(c&&b&&!n&&0!==p)&&(!v&&!y))},h=(e,t,i)=>{if(!e)return t;const r=o(e.semver,t.semver,i);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,i)=>{if(!e)return t;const r=o(e.semver,t.semver,i);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new r(e,i),t=new r(t,i);let n=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,i);if(n=n||null!==t,t)continue e}if(n)return!1}return!0}},8334:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8340:(e,t,i)=>{const r=i(6584);e.exports=(e,t,i)=>r(e,t,">",i)},8679:e=>{const t="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.error("SEMVER",...t)}:()=>{};e.exports=t},8748:(e,t,i)=>{const r=i(9340);e.exports=(e,t,i)=>r(e,t,i)<=0},8756:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>r(e,t,i)>=0},8853:(e,t,i)=>{"use strict";e.exports=i(5896)},8881:(e,t,i)=>{const r=i(3202),n=i(9340);e.exports=(e,t,i)=>{const a=[];let s=null,o=null;const l=e.sort(((e,t)=>n(e,t,i)));for(const n of l){r(n,t,i)?(o=n,s||(s=n)):(o&&a.push([s,o]),o=null,s=null)}s&&a.push([s,null]);const u=[];for(const[r,n]of a)r===n?u.push(r):n||r!==l[0]?n?r===l[0]?u.push(`<=${n}`):u.push(`${r} - ${n}`):u.push(`>=${r}`):u.push("*");const c=u.join(" || "),h="string"===typeof t.raw?t.raw:String(t);return c.length<h.length?c:t}},9002:(e,t,i)=>{const r=i(5296);e.exports=(e,t)=>new r(e,t).minor},9012:e=>{const t=/^[0-9]+$/,i=(e,i)=>{const r=t.test(e),n=t.test(i);return r&&n&&(e=+e,i=+i),e===i?0:r&&!n?-1:n&&!r?1:e<i?-1:1};e.exports={compareIdentifiers:i,rcompareIdentifiers:(e,t)=>i(t,e)}},9065:(e,t,i)=>{const r=i(4635),n=i(4606);e.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(l){return null}return e.forEach((e=>{o.test(e)&&(a&&-1!==s.compare(e)||(a=e,s=new r(a,i)))})),a}},9134:(e,t,i)=>{const r=i(2419);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(i){return null}}},9147:(e,t,i)=>{const r=i(4606);e.exports=(e,t,i)=>{try{t=new r(t,i)}catch(n){return!1}return t.test(e)}},9167:(e,t,i)=>{const r=i(4635);e.exports=(e,t)=>new r(e,t).major},9253:(e,t,i)=>{const r=i(4635);e.exports=(e,t,i)=>new r(e,i).compare(new r(t,i))},9340:(e,t,i)=>{const r=i(5296);e.exports=(e,t,i)=>new r(e,i).compare(new r(t,i))},9361:(e,t,i)=>{const r=i(4635);e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof r)return e;try{return new r(e,t)}catch(n){if(!i)return null;throw n}}},9498:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},9533:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>r(t,e,i)},9605:(e,t,i)=>{const r=i(2604);e.exports=(e,t)=>{const i=r(e,t);return i?i.version:null}},9693:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9847:(e,t,i)=>{const r=i(9361);e.exports=(e,t)=>{const i=r(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null}},9894:e=>{"use strict";const t=/[\p{Lu}]/u,i=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,a=/[_.\- ]+/,s=new RegExp("^"+a.source),o=new RegExp(a.source+n.source,"gu"),l=new RegExp("\\d+"+n.source,"gu"),u=(e,n)=>{if("string"!==typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(n={pascalCase:!1,preserveConsecutiveUppercase:!1,...n},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const a=!1===n.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(n.locale),u=!1===n.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(n.locale);if(1===e.length)return n.pascalCase?u(e):a(e);return e!==a(e)&&(e=((e,r,n)=>{let a=!1,s=!1,o=!1;for(let l=0;l<e.length;l++){const u=e[l];a&&t.test(u)?(e=e.slice(0,l)+"-"+e.slice(l),a=!1,o=s,s=!0,l++):s&&o&&i.test(u)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=s,s=!1,a=!0):(a=r(u)===u&&n(u)!==u,o=s,s=n(u)===u&&r(u)!==u)}return e})(e,a,u)),e=e.replace(s,""),e=n.preserveConsecutiveUppercase?((e,t)=>(r.lastIndex=0,e.replace(r,(e=>t(e)))))(e,a):a(e),n.pascalCase&&(e=u(e.charAt(0))+e.slice(1)),((e,t)=>(o.lastIndex=0,l.lastIndex=0,e.replace(o,((e,i)=>t(i))).replace(l,(e=>t(e)))))(e,u)};e.exports=u,e.exports.default=u},9950:(e,t,i)=>{const r=i(9253);e.exports=(e,t,i)=>0!==r(e,t,i)}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,i),a.loaded=!0,a.exports}i.m=e,i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>"static/js/"+e+".15ac2821.chunk.js",i.miniCssF=e=>{},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="llm7.io:";i.l=(r,n,a,s)=>{if(e[r])e[r].push(n);else{var o,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[n];var d=(t,i)=>{o.onerror=o.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(i))),t)return t(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/",(()=>{var e={792:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise(((i,r)=>n=e[t]=[i,r]));r.push(n[2]=a);var s=i.p+i.u(t),o=new Error;i.l(s,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,a,s=r[0],o=r[1],l=r[2],u=0;if(s.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)l(i)}for(t&&t(r);u<s.length;u++)a=s[u],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkllm7_io=self.webpackChunkllm7_io||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{JsonPatchError:()=>gn,_areEquals:()=>Sn,applyOperation:()=>wn,applyPatch:()=>xn,applyReducer:()=>Pn,deepClone:()=>bn,getValueByPointer:()=>_n,validate:()=>kn,validator:()=>En});var t={};i.r(t),i.d(t,{hasBrowserEnv:()=>to,hasStandardBrowserEnv:()=>ro,hasStandardBrowserWebWorkerEnv:()=>no,navigator:()=>io,origin:()=>ao});var r={};i.r(r),i.d(r,{JsonPatchError:()=>Ju,_areEquals:()=>lc,applyOperation:()=>rc,applyPatch:()=>nc,applyReducer:()=>ac,deepClone:()=>Qu,getValueByPointer:()=>ic,validate:()=>oc,validator:()=>sc});var n=i(5043),a=i(4391);function s(e){if("undefined"===typeof e)return null;try{return JSON.parse(e)}catch(a){}let t="";const i=[];let r=!1,n=!1;for(let s of e){if(r)'"'!==s||n?"\n"!==s||n?n="\\"===s&&!n:s="\\n":r=!1;else if('"'===s)r=!0,n=!1;else if("{"===s)i.push("}");else if("["===s)i.push("]");else if("}"===s||"]"===s){if(!i||i[i.length-1]!==s)return null;i.pop()}t+=s}r&&(t+='"');for(let s=i.length-1;s>=0;s-=1)t+=i[s];try{return JSON.parse(t)}catch(a){return null}}var o=i(3047);i(9894);function l(e,t){return t?.[e]||o(e)}function u(e,t,i){const r={};for(const n in e)Object.hasOwn(e,n)&&(r[t(n,i)]=e[n]);return r}function c(e){return Array.isArray(e)?[...e]:{...e}}function h(e,t){const i=c(e);for(const[r,n]of Object.entries(t)){const[e,...t]=r.split(".").reverse();let a=i;for(const i of t.reverse()){if(void 0===a[i])break;a[i]=c(a[i]),a=a[i]}void 0!==a[e]&&(a[e]={lc:1,type:"secret",id:[n]})}return i}function d(e){const t=Object.getPrototypeOf(e);return"function"===typeof e.lc_name&&("function"!==typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}class p{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,d(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof p||"object"!==typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},i=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let r=Object.getPrototypeOf(this);r;r=Object.getPrototypeOf(r))Object.assign(e,Reflect.get(r,"lc_aliases",this)),Object.assign(t,Reflect.get(r,"lc_secrets",this)),Object.assign(i,Reflect.get(r,"lc_attributes",this));return Object.keys(t).forEach((e=>{let t=this,r=i;const[n,...a]=e.split(".").reverse();for(const i of a.reverse()){if(!(i in t)||void 0===t[i])return;i in r&&void 0!==r[i]||("object"===typeof t[i]&&null!=t[i]?r[i]={}:Array.isArray(t[i])&&(r[i]=[])),t=t[i],r=r[i]}n in t&&void 0!==t[n]&&(r[n]=r[n]||t[n])})),{lc:1,type:"constructor",id:this.lc_id,kwargs:u(Object.keys(t).length?h(i,t):i,l,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function f(e,t){return"string"===typeof e?"string"===typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?[...e,...t]:[...e,{type:"text",text:t}]}class m extends p{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"===typeof this.content?this.content:""}constructor(e,t){"string"===typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}function g(e,t){const i={...e};for(const[r,n]of Object.entries(t))if(null==i[r])i[r]=n;else{if(null==n)continue;if(typeof i[r]!==typeof n||Array.isArray(i[r])!==Array.isArray(n))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if("string"===typeof i[r])i[r]=i[r]+n;else if(Array.isArray(i[r])||"object"!==typeof i[r])if(Array.isArray(i[r]))i[r]=b(i[r],n);else{if(i[r]===n)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}else i[r]=g(i[r],n)}return i}function b(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const i=[...e];for(const e of t)if("object"===typeof e&&"index"in e&&"number"===typeof e.index){const t=i.findIndex((t=>t.index===e.index));-1!==t?i[t]=g(i[t],e):i.push(e)}else i.push(e);return i}}}class y extends m{}function v(e){return"function"===typeof e?._getType}class _ extends m{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let i;if("string"===typeof e)i={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{i=e;const t=i.additional_kwargs?.tool_calls,n=i.tool_calls;null!=t&&t.length>0&&(void 0===n||0===n.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===n){const[e,r]=function(e){const t=[],i=[];for(const n of e)if(n.function){const e=n.function.name;try{const i={name:e||"",args:JSON.parse(n.function.arguments)||{},id:n.id};t.push(i)}catch(r){i.push({name:e,args:n.function.arguments,id:n.id,error:"Malformed args."})}}return[t,i]}(t);i.tool_calls=e??[],i.invalid_tool_calls=r??[]}else i.tool_calls=i.tool_calls??[],i.invalid_tool_calls=i.invalid_tool_calls??[]}catch(r){i.tool_calls=[],i.invalid_tool_calls=[]}}super(i),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),"string"!==typeof i&&(this.tool_calls=i.tool_calls??this.tool_calls,this.invalid_tool_calls=i.invalid_tool_calls??this.invalid_tool_calls)}static lc_name(){return"AIMessage"}_getType(){return"ai"}}class w extends y{constructor(e){let t;if("string"===typeof e)t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)t={...e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else{const r=[],n=[];for(const t of e.tool_call_chunks){let e={};try{if(e=s(t.args??"{}")??{},"object"!==typeof e||Array.isArray(e))throw new Error("Malformed tool call chunk args.");r.push({name:t.name??"",args:e,id:t.id})}catch(i){n.push({name:t.name,args:t.args,id:t.id,error:"Malformed args."})}}t={...e,tool_calls:r,invalid_tool_calls:n}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.tool_call_chunks=t?.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t?.tool_calls??this.tool_calls,this.invalid_tool_calls=t?.invalid_tool_calls??this.invalid_tool_calls}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){const t={content:f(this.content,e.content),additional_kwargs:g(this.additional_kwargs,e.additional_kwargs),response_metadata:g(this.response_metadata,e.response_metadata),tool_call_chunks:[]};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const i=b(this.tool_call_chunks,e.tool_call_chunks);void 0!==i&&i.length>0&&(t.tool_call_chunks=i)}return new w(t)}}class x extends m{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class P extends m{static lc_name(){return"SystemMessage"}_getType(){return"system"}}function E(e){if("string"===typeof e)return new x(e);if(v(e))return e;const[t,i]=e;if("human"===t||"user"===t)return new x({content:i});if("ai"===t||"assistant"===t)return new _({content:i});if("system"===t)return new P({content:i});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Human",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AI";const r=[];for(const n of e){let e;if("human"===n._getType())e=t;else if("ai"===n._getType())e=i;else if("system"===n._getType())e="System";else if("function"===n._getType())e="Function";else if("tool"===n._getType())e="Tool";else{if("generic"!==n._getType())throw new Error(`Got unsupported message type: ${n._getType()}`);e=n.role}const a=n.name?`${n.name}, `:"";r.push(`${e}: ${a}${n.content}`)}return r.join("\n")}const S="__run";class O{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new O({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class T extends O{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new T({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}var A="object"===typeof window?window:{},C="0123456789abcdef".split(""),R=[-2147483648,8388608,32768,128],I=[24,16,8,0],D=[];function j(e){e?(D[0]=D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0,this.blocks=D):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}j.prototype.update=function(e){if(!this.finalized){var t="string"!==typeof e;t&&e.constructor===A.ArrayBuffer&&(e=new Uint8Array(e));for(var i,r,n=0,a=e.length||0,s=this.blocks;n<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(r=this.start;n<a&&r<64;++n)s[r>>2]|=e[n]<<I[3&r++];else for(r=this.start;n<a&&r<64;++n)(i=e.charCodeAt(n))<128?s[r>>2]|=i<<I[3&r++]:i<2048?(s[r>>2]|=(192|i>>6)<<I[3&r++],s[r>>2]|=(128|63&i)<<I[3&r++]):i<55296||i>=57344?(s[r>>2]|=(224|i>>12)<<I[3&r++],s[r>>2]|=(128|i>>6&63)<<I[3&r++],s[r>>2]|=(128|63&i)<<I[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),s[r>>2]|=(240|i>>18)<<I[3&r++],s[r>>2]|=(128|i>>12&63)<<I[3&r++],s[r>>2]|=(128|i>>6&63)<<I[3&r++],s[r>>2]|=(128|63&i)<<I[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},j.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=R[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},j.prototype.hash=function(){var e,t,i=this.h0,r=this.h1,n=this.h2,a=this.h3,s=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)i=(t=(r=(t=(n=(t=(a=(t=(s=(t=i<<5|i>>>27)+(r&n|~r&a)+s+1518500249+o[e]|0)<<5|s>>>27)+(i&(r=r<<30|r>>>2)|~i&n)+a+1518500249+o[e+1]|0)<<5|a>>>27)+(s&(i=i<<30|i>>>2)|~s&r)+n+1518500249+o[e+2]|0)<<5|n>>>27)+(a&(s=s<<30|s>>>2)|~a&i)+r+1518500249+o[e+3]|0)<<5|r>>>27)+(n&(a=a<<30|a>>>2)|~n&s)+i+1518500249+o[e+4]|0,n=n<<30|n>>>2;for(;e<40;e+=5)i=(t=(r=(t=(n=(t=(a=(t=(s=(t=i<<5|i>>>27)+(r^n^a)+s+1859775393+o[e]|0)<<5|s>>>27)+(i^(r=r<<30|r>>>2)^n)+a+1859775393+o[e+1]|0)<<5|a>>>27)+(s^(i=i<<30|i>>>2)^r)+n+1859775393+o[e+2]|0)<<5|n>>>27)+(a^(s=s<<30|s>>>2)^i)+r+1859775393+o[e+3]|0)<<5|r>>>27)+(n^(a=a<<30|a>>>2)^s)+i+1859775393+o[e+4]|0,n=n<<30|n>>>2;for(;e<60;e+=5)i=(t=(r=(t=(n=(t=(a=(t=(s=(t=i<<5|i>>>27)+(r&n|r&a|n&a)+s-1894007588+o[e]|0)<<5|s>>>27)+(i&(r=r<<30|r>>>2)|i&n|r&n)+a-1894007588+o[e+1]|0)<<5|a>>>27)+(s&(i=i<<30|i>>>2)|s&r|i&r)+n-1894007588+o[e+2]|0)<<5|n>>>27)+(a&(s=s<<30|s>>>2)|a&i|s&i)+r-1894007588+o[e+3]|0)<<5|r>>>27)+(n&(a=a<<30|a>>>2)|n&s|a&s)+i-1894007588+o[e+4]|0,n=n<<30|n>>>2;for(;e<80;e+=5)i=(t=(r=(t=(n=(t=(a=(t=(s=(t=i<<5|i>>>27)+(r^n^a)+s-899497514+o[e]|0)<<5|s>>>27)+(i^(r=r<<30|r>>>2)^n)+a-899497514+o[e+1]|0)<<5|a>>>27)+(s^(i=i<<30|i>>>2)^r)+n-899497514+o[e+2]|0)<<5|n>>>27)+(a^(s=s<<30|s>>>2)^i)+r-899497514+o[e+3]|0)<<5|r>>>27)+(n^(a=a<<30|a>>>2)^s)+i-899497514+o[e+4]|0,n=n<<30|n>>>2;this.h0=this.h0+i|0,this.h1=this.h1+r|0,this.h2=this.h2+n|0,this.h3=this.h3+a|0,this.h4=this.h4+s|0},j.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,r=this.h3,n=this.h4;return C[e>>28&15]+C[e>>24&15]+C[e>>20&15]+C[e>>16&15]+C[e>>12&15]+C[e>>8&15]+C[e>>4&15]+C[15&e]+C[t>>28&15]+C[t>>24&15]+C[t>>20&15]+C[t>>16&15]+C[t>>12&15]+C[t>>8&15]+C[t>>4&15]+C[15&t]+C[i>>28&15]+C[i>>24&15]+C[i>>20&15]+C[i>>16&15]+C[i>>12&15]+C[i>>8&15]+C[i>>4&15]+C[15&i]+C[r>>28&15]+C[r>>24&15]+C[r>>20&15]+C[r>>16&15]+C[r>>12&15]+C[r>>8&15]+C[r>>4&15]+C[15&r]+C[n>>28&15]+C[n>>24&15]+C[n>>20&15]+C[n>>16&15]+C[n>>12&15]+C[n>>8&15]+C[n>>4&15]+C[15&n]},j.prototype.toString=j.prototype.hex,j.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,r=this.h3,n=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n]},j.prototype.array=j.prototype.digest,j.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};const L=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r=t.join("_"),new j(!0).update(r).hex();var r};class N{}const M=new Map;class $ extends N{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(L(e,t))??null)}async update(e,t,i){this.cache.set(L(e,t),i)}static global(){return new $(M)}}class F extends p{}class B extends F{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new x(this.value)]}}class U extends F{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return k(this.messages)}toChatMessages(){return this.messages}}var z=i(6659),H=i(5623);const V=[400,401,402,403,404,405,406,407,409],G=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&V.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};class Y{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??G;const t=H.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return this.queue.add((()=>z((()=>e(...i).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,i)=>{e.signal?.addEventListener("abort",(()=>{i(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call((()=>fetch(...t).then((e=>e.ok?e:Promise.reject(e)))))}}var W=i(4445),X=Object.defineProperty;function Z(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let i=Array.from({length:e.length},((e,t)=>({start:t,end:t+1})));for(;i.length>1;){let r=null;for(let n=0;n<i.length-1;n++){const a=e.slice(i[n].start,i[n+1].end),s=t.get(a.join(","));null!=s&&(null==r||s<r[0])&&(r=[s,n])}if(null==r)break;{const e=r[1];i[e]={start:i[e].start,end:i[e+1].end},i.splice(e+1,1)}}return i}(e,t).map((i=>t.get(e.slice(i.start,i.end).join(",")))).filter((e=>null!=e))}var q,K,J=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=(()=>new TextEncoder)();textDecoder=(()=>new TextDecoder("utf-8"))();rankMap=(()=>new Map)();textMap=(()=>new Map)();constructor(e,t){this.patStr=e.pat_str;const i=e.bpe_ranks.split("\n").filter(Boolean).reduce(((e,t)=>{const[i,r,...n]=t.split(" "),a=Number.parseInt(r,10);return n.forEach(((t,i)=>e[t]=a+i)),e}),{});for(const[r,n]of Object.entries(i)){const e=W.toByteArray(r);this.rankMap.set(e.join(","),n),this.textMap.set(n,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce(((e,t)=>{let[i,r]=t;return e[r]=this.textEncoder.encode(i),e}),{})}encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";const r=new RegExp(this.patStr,"ug"),n=J.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set("all"===t?Object.keys(this.specialTokens):t),o=new Set("all"===i?Object.keys(this.specialTokens).filter((e=>!s.has(e))):i);if(o.size>0){const t=J.specialTokenRegex([...o]),i=e.match(t);if(null!=i)throw new Error(`The text contains a special token that is not allowed: ${i[0]}`)}let l=0;for(;;){let t=null,i=l;for(;n.lastIndex=i,t=n.exec(e),null!=t&&!s.has(t[0]);)i=t.index+1;const o=t?.index??e.length;for(const n of e.substring(l,o).matchAll(r)){const e=this.textEncoder.encode(n[0]),t=this.rankMap.get(e.join(","));null==t?a.push(...Z(e,this.rankMap)):a.push(t)}if(null==t)break;let u=this.specialTokens[t[0]];a.push(u),l=t.index+t[0].length}return a}decode(e){const t=[];let i=0;for(let a=0;a<e.length;++a){const r=e[a],n=this.textMap.get(r)??this.inverseSpecialTokens[r];null!=n&&(t.push(n),i+=n.length)}const r=new Uint8Array(i);let n=0;for(const a of t)r.set(a,n),n+=a.length;return this.textDecoder.decode(r)}},Q=J;K=e=>new RegExp(e.map((e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|"),"g"),((e,t,i)=>{t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(Q,"symbol"!==typeof(q="specialTokenRegex")?q+"":q,K);const ee={},te=new Y({});async function ie(e){return async function(e){return e in ee||(ee[e]=te.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then((e=>e.json())).then((e=>new Q(e))).catch((t=>{throw delete ee[e],t}))),await ee[e]}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}(e))}var re,ne;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const i of e)t[i]=i;return t},e.getValidEnumValues=t=>{const i=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),r={};for(const e of i)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(const i of e)if(t(i))return i},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(re||(re={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(ne||(ne={}));const ae=re.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),se=e=>{switch(typeof e){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return isNaN(e)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(e)?ae.array:null===e?ae.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?ae.promise:"undefined"!==typeof Map&&e instanceof Map?ae.map:"undefined"!==typeof Set&&e instanceof Set?ae.set:"undefined"!==typeof Date&&e instanceof Date?ae.date:ae.object;default:return ae.unknown}},oe=re.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class le extends Error{get errors(){return this.issues}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},i={_errors:[]},r=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(r);else if("invalid_return_type"===n.code)r(n.returnTypeError);else if("invalid_arguments"===n.code)r(n.argumentsError);else if(0===n.path.length)i._errors.push(t(n));else{let e=i,r=0;for(;r<n.path.length;){const i=n.path[r];r===n.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(n))):e[i]=e[i]||{_errors:[]},e=e[i],r++}}};return r(this),i}static assert(e){if(!(e instanceof le))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,re.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},i=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}le.create=e=>new le(e);const ue=(e,t)=>{let i;switch(e.code){case oe.invalid_type:i=e.received===ae.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case oe.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,re.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:i=`Unrecognized key(s) in object: ${re.joinValues(e.keys,", ")}`;break;case oe.invalid_union:i="Invalid input";break;case oe.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${re.joinValues(e.options)}`;break;case oe.invalid_enum_value:i=`Invalid enum value. Expected ${re.joinValues(e.options)}, received '${e.received}'`;break;case oe.invalid_arguments:i="Invalid function arguments";break;case oe.invalid_return_type:i="Invalid function return type";break;case oe.invalid_date:i="Invalid date";break;case oe.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"===typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:re.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case oe.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case oe.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case oe.custom:i="Invalid input";break;case oe.invalid_intersection_types:i="Intersection results could not be merged";break;case oe.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case oe.not_finite:i="Number must be finite";break;default:i=t.defaultError,re.assertNever(e)}return{message:i}};let ce=ue;function he(){return ce}const de=e=>{const{data:t,path:i,errorMaps:r,issueData:n}=e,a=[...i,...n.path||[]],s={...n,path:a};if(void 0!==n.message)return{...n,path:a,message:n.message};let o="";const l=r.filter((e=>!!e)).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...n,path:a,message:o}};function pe(e,t){const i=he(),r=de({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===ue?void 0:ue].filter((e=>!!e))});e.common.issues.push(r)}class fe{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const r of t){if("aborted"===r.status)return me;"dirty"===r.status&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const r of t){const e=await r.key,t=await r.value;i.push({key:e,value:t})}return fe.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const r of t){const{key:t,value:n}=r;if("aborted"===t.status)return me;if("aborted"===n.status)return me;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof n.value&&!r.alwaysSet||(i[t.value]=n.value)}return{status:e.value,value:i}}}const me=Object.freeze({status:"aborted"}),ge=e=>({status:"dirty",value:e}),be=e=>({status:"valid",value:e}),ye=e=>"aborted"===e.status,ve=e=>"dirty"===e.status,_e=e=>"valid"===e.status,we=e=>"undefined"!==typeof Promise&&e instanceof Promise;function xe(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)}function Pe(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i}var Ee,ke,Se;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(Ee||(Ee={}));class Oe{constructor(e,t,i,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Te=(e,t)=>{if(_e(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new le(e.common.issues);return this._error=t,this._error}}};function Ae(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:r,description:n}=e;if(t&&(i||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{var a,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!==o&&void 0!==o?o:n.defaultError}:"undefined"===typeof n.data?{message:null!==(a=null!==o&&void 0!==o?o:r)&&void 0!==a?a:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(s=null!==o&&void 0!==o?o:i)&&void 0!==s?s:n.defaultError}},description:n}}class Ce{get description(){return this._def.description}_getType(e){return se(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:se(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fe,ctx:{common:e.parent.common,data:e.data,parsedType:se(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(we(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const r={common:{issues:[],async:null!==(i=null===t||void 0===t?void 0:t.async)&&void 0!==i&&i,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:se(e)},n=this._parseSync({data:e,path:r.path,parent:r});return Te(r,n)}"~validate"(e){var t,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:se(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return _e(t)?{value:t.value}:{issues:r.common.issues}}catch(n){(null===(i=null===(t=null===n||void 0===n?void 0:n.message)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then((e=>_e(e)?{value:e.value}:{issues:r.common.issues}))}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:se(e)},r=this._parse({data:e,path:i.path,parent:i}),n=await(we(r)?r:Promise.resolve(r));return Te(i,n)}refine(e,t){const i=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,r)=>{const n=e(t),a=()=>r.addIssue({code:oe.custom,...i(t)});return"undefined"!==typeof Promise&&n instanceof Promise?n.then((e=>!!e||(a(),!1))):!!n||(a(),!1)}))}refinement(e,t){return this._refinement(((i,r)=>!!e(i)||(r.addIssue("function"===typeof t?t(i,r):t),!1)))}_refinement(e){return new Ct({schema:this,typeName:Ht.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Rt.create(this,this._def)}nullable(){return It.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ht.create(this)}promise(){return At.create(this,this._def)}or(e){return ft.create([this,e],this._def)}and(e){return yt.create(this,e,this._def)}transform(e){return new Ct({...Ae(this._def),schema:this,typeName:Ht.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new Dt({...Ae(this._def),innerType:this,defaultValue:t,typeName:Ht.ZodDefault})}brand(){return new Mt({typeName:Ht.ZodBranded,type:this,...Ae(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new jt({...Ae(this._def),innerType:this,catchValue:t,typeName:Ht.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return $t.create(this,e)}readonly(){return Ft.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Re=/^c[^\s-]{8,}$/i,Ie=/^[0-9a-z]+$/,De=/^[0-9A-HJKMNP-TV-Z]{26}$/i,je=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Le=/^[a-z0-9_-]{21}$/i,Ne=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Me=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Fe;const Be=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ze=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,He=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ve=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ge=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ye="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",We=new RegExp(`^${Ye}$`);function Xe(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Ze(e){let t=`${Ye}T${Xe(e)}`;const i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${i.join("|")})`,new RegExp(`^${t}$`)}function qe(e,t){if(!Ne.test(e))return!1;try{const[i]=e.split("."),r=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),n=JSON.parse(atob(r));return"object"===typeof n&&null!==n&&(!(!n.typ||!n.alg)&&(!t||n.alg===t))}catch(i){return!1}}function Ke(e,t){return!("v4"!==t&&t||!Ue.test(e))||!("v6"!==t&&t||!He.test(e))}class Je extends Ce{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==ae.string){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.string,received:t.parsedType}),me}const t=new fe;let i;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const r=e.data.length>s.value,n=e.data.length<s.value;(r||n)&&(i=this._getOrReturnCtx(e,i),r?pe(i,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):n&&pe(i,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)$e.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"email",code:oe.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)Fe||(Fe=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Fe.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"emoji",code:oe.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)je.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"uuid",code:oe.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)Le.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"nanoid",code:oe.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)Re.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid",code:oe.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)Ie.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid2",code:oe.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)De.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ulid",code:oe.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(a){i=this._getOrReturnCtx(e,i),pe(i,{validation:"url",code:oe.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"regex",code:oe.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){Ze(s).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){We.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){new RegExp(`^${Xe(s)}$`).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?Me.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"duration",code:oe.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(r=e.data,("v4"!==(n=s.version)&&n||!Be.test(r))&&("v6"!==n&&n||!ze.test(r))&&(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ip",code:oe.invalid_string,message:s.message}),t.dirty())):"jwt"===s.kind?qe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"jwt",code:oe.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?Ke(e.data,s.version)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cidr",code:oe.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?Ve.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"base64",code:oe.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?Ge.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"base64url",code:oe.invalid_string,message:s.message}),t.dirty()):re.assertNever(s);var r,n;return{status:t.value,value:e.data}}_regex(e,t,i){return this.refinement((t=>e.test(t)),{validation:t,code:oe.invalid_string,...Ee.errToObj(i)})}_addCheck(e){return new Je({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ee.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ee.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ee.errToObj(e)})}datetime(e){var t,i;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(i=null===e||void 0===e?void 0:e.local)&&void 0!==i&&i,...Ee.errToObj(null===e||void 0===e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,...Ee.errToObj(null===e||void 0===e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ee.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...Ee.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ee.errToObj(t)})}nonempty(e){return this.min(1,Ee.errToObj(e))}trim(){return new Je({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Je({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Je({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Qe(e,t){const i=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=i>r?i:r;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}Je.create=e=>{var t;return new Je({checks:[],typeName:Ht.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...Ae(e)})};class et extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==ae.number){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.number,received:t.parsedType}),me}let t;const i=new fe;for(const r of this._def.checks)if("int"===r.kind)re.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty())}else"multipleOf"===r.kind?0!==Qe(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.not_finite,message:r.message}),i.dirty()):re.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ee.toString(t))}setLimit(e,t,i,r){return new et({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&re.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===t||i.value>t)&&(t=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}et.create=e=>new et({checks:[],typeName:Ht.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...Ae(e)});class tt extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(r){return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let t;const i=new fe;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),pe(t,{code:oe.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):re.assertNever(n);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.bigint,received:t.parsedType}),me}gte(e,t){return this.setLimit("min",e,!0,Ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ee.toString(t))}setLimit(e,t,i,r){return new tt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Ee.toString(r)}]})}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tt.create=e=>{var t;return new tt({checks:[],typeName:Ht.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...Ae(e)})};class it extends Ce{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==ae.boolean){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.boolean,received:t.parsedType}),me}return be(e.data)}}it.create=e=>new it({typeName:Ht.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...Ae(e)});class rt extends Ce{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==ae.date){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.date,received:t.parsedType}),me}if(isNaN(e.data.getTime())){return pe(this._getOrReturnCtx(e),{code:oe.invalid_date}),me}const t=new fe;let i;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:oe.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):re.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}rt.create=e=>new rt({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Ht.ZodDate,...Ae(e)});class nt extends Ce{_parse(e){if(this._getType(e)!==ae.symbol){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.symbol,received:t.parsedType}),me}return be(e.data)}}nt.create=e=>new nt({typeName:Ht.ZodSymbol,...Ae(e)});class at extends Ce{_parse(e){if(this._getType(e)!==ae.undefined){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.undefined,received:t.parsedType}),me}return be(e.data)}}at.create=e=>new at({typeName:Ht.ZodUndefined,...Ae(e)});class st extends Ce{_parse(e){if(this._getType(e)!==ae.null){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.null,received:t.parsedType}),me}return be(e.data)}}st.create=e=>new st({typeName:Ht.ZodNull,...Ae(e)});class ot extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return be(e.data)}}ot.create=e=>new ot({typeName:Ht.ZodAny,...Ae(e)});class lt extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return be(e.data)}}lt.create=e=>new lt({typeName:Ht.ZodUnknown,...Ae(e)});class ut extends Ce{_parse(e){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.never,received:t.parsedType}),me}}ut.create=e=>new ut({typeName:Ht.ZodNever,...Ae(e)});class ct extends Ce{_parse(e){if(this._getType(e)!==ae.undefined){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.void,received:t.parsedType}),me}return be(e.data)}}ct.create=e=>new ct({typeName:Ht.ZodVoid,...Ae(e)});class ht extends Ce{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),r=this._def;if(t.parsedType!==ae.array)return pe(t,{code:oe.invalid_type,expected:ae.array,received:t.parsedType}),me;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,n=t.data.length<r.exactLength.value;(e||n)&&(pe(t,{code:e?oe.too_big:oe.too_small,minimum:n?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(pe(t,{code:oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(pe(t,{code:oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map(((e,i)=>r.type._parseAsync(new Oe(t,e,t.path,i))))).then((e=>fe.mergeArray(i,e)));const n=[...t.data].map(((e,i)=>r.type._parseSync(new Oe(t,e,t.path,i))));return fe.mergeArray(i,n)}get element(){return this._def.type}min(e,t){return new ht({...this._def,minLength:{value:e,message:Ee.toString(t)}})}max(e,t){return new ht({...this._def,maxLength:{value:e,message:Ee.toString(t)}})}length(e,t){return new ht({...this._def,exactLength:{value:e,message:Ee.toString(t)}})}nonempty(e){return this.min(1,e)}}function dt(e){if(e instanceof pt){const t={};for(const i in e.shape){const r=e.shape[i];t[i]=Rt.create(dt(r))}return new pt({...e._def,shape:()=>t})}return e instanceof ht?new ht({...e._def,type:dt(e.element)}):e instanceof Rt?Rt.create(dt(e.unwrap())):e instanceof It?It.create(dt(e.unwrap())):e instanceof vt?vt.create(e.items.map((e=>dt(e)))):e}ht.create=(e,t)=>new ht({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ht.ZodArray,...Ae(t)});class pt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=re.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ae.object){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.object,received:t.parsedType}),me}const{status:t,ctx:i}=this._processInputParams(e),{shape:r,keys:n}=this._getCached(),a=[];if(!(this._def.catchall instanceof ut&&"strip"===this._def.unknownKeys))for(const o in i.data)n.includes(o)||a.push(o);const s=[];for(const o of n){const e=r[o],t=i.data[o];s.push({key:{status:"valid",value:o},value:e._parse(new Oe(i,t,i.path,o)),alwaysSet:o in i.data})}if(this._def.catchall instanceof ut){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of a)s.push({key:{status:"valid",value:t},value:{status:"valid",value:i.data[t]}});else if("strict"===e)a.length>0&&(pe(i,{code:oe.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const r=i.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new Oe(i,r,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const i=await t.key,r=await t.value;e.push({key:i,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>fe.mergeObjectSync(t,e))):fe.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new pt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,i)=>{var r,n,a,s;const o=null!==(a=null===(n=(r=this._def).errorMap)||void 0===n?void 0:n.call(r,t,i).message)&&void 0!==a?a:i.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=Ee.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new pt({...this._def,unknownKeys:"strip"})}passthrough(){return new pt({...this._def,unknownKeys:"passthrough"})}extend(e){return new pt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ht.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new pt({...this._def,catchall:e})}pick(e){const t={};return re.objectKeys(e).forEach((i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])})),new pt({...this._def,shape:()=>t})}omit(e){const t={};return re.objectKeys(this.shape).forEach((i=>{e[i]||(t[i]=this.shape[i])})),new pt({...this._def,shape:()=>t})}deepPartial(){return dt(this)}partial(e){const t={};return re.objectKeys(this.shape).forEach((i=>{const r=this.shape[i];e&&!e[i]?t[i]=r:t[i]=r.optional()})),new pt({...this._def,shape:()=>t})}required(e){const t={};return re.objectKeys(this.shape).forEach((i=>{if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof Rt;)e=e._def.innerType;t[i]=e}})),new pt({...this._def,shape:()=>t})}keyof(){return St(re.objectKeys(this.shape))}}pt.create=(e,t)=>new pt({shape:()=>e,unknownKeys:"strip",catchall:ut.create(),typeName:Ht.ZodObject,...Ae(t)}),pt.strictCreate=(e,t)=>new pt({shape:()=>e,unknownKeys:"strict",catchall:ut.create(),typeName:Ht.ZodObject,...Ae(t)}),pt.lazycreate=(e,t)=>new pt({shape:e,unknownKeys:"strip",catchall:ut.create(),typeName:Ht.ZodObject,...Ae(t)});class ft extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map((async e=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const i=e.map((e=>new le(e.ctx.common.issues)));return pe(t,{code:oe.invalid_union,unionErrors:i}),me}));{let e;const r=[];for(const a of i){const i={...t,common:{...t.common,issues:[]},parent:null},n=a._parseSync({data:t.data,path:t.path,parent:i});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:i}),i.common.issues.length&&r.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=r.map((e=>new le(e)));return pe(t,{code:oe.invalid_union,unionErrors:n}),me}}get options(){return this._def.options}}ft.create=(e,t)=>new ft({options:e,typeName:Ht.ZodUnion,...Ae(t)});const mt=e=>e instanceof Et?mt(e.schema):e instanceof Ct?mt(e.innerType()):e instanceof kt?[e.value]:e instanceof Ot?e.options:e instanceof Tt?re.objectValues(e.enum):e instanceof Dt?mt(e._def.innerType):e instanceof at?[void 0]:e instanceof st?[null]:e instanceof Rt?[void 0,...mt(e.unwrap())]:e instanceof It?[null,...mt(e.unwrap())]:e instanceof Mt||e instanceof Ft?mt(e.unwrap()):e instanceof jt?mt(e._def.innerType):[];class gt extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.object)return pe(t,{code:oe.invalid_type,expected:ae.object,received:t.parsedType}),me;const i=this.discriminator,r=t.data[i],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(pe(t,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const r=new Map;for(const n of t){const t=mt(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new gt({typeName:Ht.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Ae(i)})}}function bt(e,t){const i=se(e),r=se(t);if(e===t)return{valid:!0,data:e};if(i===ae.object&&r===ae.object){const i=re.objectKeys(t),r=re.objectKeys(e).filter((e=>-1!==i.indexOf(e))),n={...e,...t};for(const a of r){const i=bt(e[a],t[a]);if(!i.valid)return{valid:!1};n[a]=i.data}return{valid:!0,data:n}}if(i===ae.array&&r===ae.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let r=0;r<e.length;r++){const n=bt(e[r],t[r]);if(!n.valid)return{valid:!1};i.push(n.data)}return{valid:!0,data:i}}return i===ae.date&&r===ae.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class yt extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=(e,r)=>{if(ye(e)||ye(r))return me;const n=bt(e.value,r.value);return n.valid?((ve(e)||ve(r))&&t.dirty(),{status:t.value,value:n.data}):(pe(i,{code:oe.invalid_intersection_types}),me)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then((e=>{let[t,i]=e;return r(t,i)})):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}yt.create=(e,t,i)=>new yt({left:e,right:t,typeName:Ht.ZodIntersection,...Ae(i)});class vt extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ae.array)return pe(i,{code:oe.invalid_type,expected:ae.array,received:i.parsedType}),me;if(i.data.length<this._def.items.length)return pe(i,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&i.data.length>this._def.items.length&&(pe(i,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...i.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Oe(i,e,i.path,t)):null})).filter((e=>!!e));return i.common.async?Promise.all(r).then((e=>fe.mergeArray(t,e))):fe.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new vt({...this._def,rest:e})}}vt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vt({items:e,typeName:Ht.ZodTuple,rest:null,...Ae(t)})};class _t extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ae.object)return pe(i,{code:oe.invalid_type,expected:ae.object,received:i.parsedType}),me;const r=[],n=this._def.keyType,a=this._def.valueType;for(const s in i.data)r.push({key:n._parse(new Oe(i,s,i.path,s)),value:a._parse(new Oe(i,i.data[s],i.path,s)),alwaysSet:s in i.data});return i.common.async?fe.mergeObjectAsync(t,r):fe.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,i){return new _t(t instanceof Ce?{keyType:e,valueType:t,typeName:Ht.ZodRecord,...Ae(i)}:{keyType:Je.create(),valueType:e,typeName:Ht.ZodRecord,...Ae(t)})}}class wt extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ae.map)return pe(i,{code:oe.invalid_type,expected:ae.map,received:i.parsedType}),me;const r=this._def.keyType,n=this._def.valueType,a=[...i.data.entries()].map(((e,t)=>{let[a,s]=e;return{key:r._parse(new Oe(i,a,i.path,[t,"key"])),value:n._parse(new Oe(i,s,i.path,[t,"value"]))}}));if(i.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const i of a){const r=await i.key,n=await i.value;if("aborted"===r.status||"aborted"===n.status)return me;"dirty"!==r.status&&"dirty"!==n.status||t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const i of a){const r=i.key,n=i.value;if("aborted"===r.status||"aborted"===n.status)return me;"dirty"!==r.status&&"dirty"!==n.status||t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}}}}wt.create=(e,t,i)=>new wt({valueType:t,keyType:e,typeName:Ht.ZodMap,...Ae(i)});class xt extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ae.set)return pe(i,{code:oe.invalid_type,expected:ae.set,received:i.parsedType}),me;const r=this._def;null!==r.minSize&&i.data.size<r.minSize.value&&(pe(i,{code:oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&i.data.size>r.maxSize.value&&(pe(i,{code:oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const n=this._def.valueType;function a(e){const i=new Set;for(const r of e){if("aborted"===r.status)return me;"dirty"===r.status&&t.dirty(),i.add(r.value)}return{status:t.value,value:i}}const s=[...i.data.values()].map(((e,t)=>n._parse(new Oe(i,e,i.path,t))));return i.common.async?Promise.all(s).then((e=>a(e))):a(s)}min(e,t){return new xt({...this._def,minSize:{value:e,message:Ee.toString(t)}})}max(e,t){return new xt({...this._def,maxSize:{value:e,message:Ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}xt.create=(e,t)=>new xt({valueType:e,minSize:null,maxSize:null,typeName:Ht.ZodSet,...Ae(t)});class Pt extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.function)return pe(t,{code:oe.invalid_type,expected:ae.function,received:t.parsedType}),me;function i(e,i){return de({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,he(),ue].filter((e=>!!e)),issueData:{code:oe.invalid_arguments,argumentsError:i}})}function r(e,i){return de({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,he(),ue].filter((e=>!!e)),issueData:{code:oe.invalid_return_type,returnTypeError:i}})}const n={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof At){const e=this;return be((async function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=new le([]),u=await e._def.args.parseAsync(s,n).catch((e=>{throw l.addIssue(i(s,e)),l})),c=await Reflect.apply(a,this,u);return await e._def.returns._def.type.parseAsync(c,n).catch((e=>{throw l.addIssue(r(c,e)),l}))}))}{const e=this;return be((function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=e._def.args.safeParse(s,n);if(!l.success)throw new le([i(s,l.error)]);const u=Reflect.apply(a,this,l.data),c=e._def.returns.safeParse(u,n);if(!c.success)throw new le([r(u,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Pt({...this._def,args:vt.create(t).rest(lt.create())})}returns(e){return new Pt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new Pt({args:e||vt.create([]).rest(lt.create()),returns:t||lt.create(),typeName:Ht.ZodFunction,...Ae(i)})}}class Et extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Et.create=(e,t)=>new Et({getter:e,typeName:Ht.ZodLazy,...Ae(t)});class kt extends Ce{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return pe(t,{received:t.data,code:oe.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}function St(e,t){return new Ot({values:e,typeName:Ht.ZodEnum,...Ae(t)})}kt.create=(e,t)=>new kt({value:e,typeName:Ht.ZodLiteral,...Ae(t)});class Ot extends Ce{constructor(){super(...arguments),ke.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),i=this._def.values;return pe(t,{expected:re.joinValues(i),received:t.parsedType,code:oe.invalid_type}),me}if(xe(this,ke,"f")||Pe(this,ke,new Set(this._def.values),"f"),!xe(this,ke,"f").has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return pe(t,{received:t.data,code:oe.invalid_enum_value,options:i}),me}return be(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ot.create(e,{...this._def,...t})}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ot.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}ke=new WeakMap,Ot.create=St;class Tt extends Ce{constructor(){super(...arguments),Se.set(this,void 0)}_parse(e){const t=re.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ae.string&&i.parsedType!==ae.number){const e=re.objectValues(t);return pe(i,{expected:re.joinValues(e),received:i.parsedType,code:oe.invalid_type}),me}if(xe(this,Se,"f")||Pe(this,Se,new Set(re.getValidEnumValues(this._def.values)),"f"),!xe(this,Se,"f").has(e.data)){const e=re.objectValues(t);return pe(i,{received:i.data,code:oe.invalid_enum_value,options:e}),me}return be(e.data)}get enum(){return this._def.values}}Se=new WeakMap,Tt.create=(e,t)=>new Tt({values:e,typeName:Ht.ZodNativeEnum,...Ae(t)});class At extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.promise&&!1===t.common.async)return pe(t,{code:oe.invalid_type,expected:ae.promise,received:t.parsedType}),me;const i=t.parsedType===ae.promise?t.data:Promise.resolve(t.data);return be(i.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}At.create=(e,t)=>new At({type:e,typeName:Ht.ZodPromise,...Ae(t)});class Ct extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:e=>{pe(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===r.type){const e=r.transform(i.data,n);if(i.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return me;const r=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===r.status?me:"dirty"===r.status||"dirty"===t.value?ge(r.value):r}));{if("aborted"===t.value)return me;const r=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===r.status?me:"dirty"===r.status||"dirty"===t.value?ge(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,n);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){const r=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===r.status?me:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((i=>"aborted"===i.status?me:("dirty"===i.status&&t.dirty(),e(i.value).then((()=>({status:t.value,value:i.value}))))))}if("transform"===r.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!_e(e))return e;const a=r.transform(e.value,n);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((e=>_e(e)?Promise.resolve(r.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e))}re.assertNever(r)}}Ct.create=(e,t,i)=>new Ct({schema:e,typeName:Ht.ZodEffects,effect:t,...Ae(i)}),Ct.createWithPreprocess=(e,t,i)=>new Ct({schema:t,effect:{type:"preprocess",transform:e},typeName:Ht.ZodEffects,...Ae(i)});class Rt extends Ce{_parse(e){return this._getType(e)===ae.undefined?be(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rt.create=(e,t)=>new Rt({innerType:e,typeName:Ht.ZodOptional,...Ae(t)});class It extends Ce{_parse(e){return this._getType(e)===ae.null?be(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}It.create=(e,t)=>new It({innerType:e,typeName:Ht.ZodNullable,...Ae(t)});class Dt extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===ae.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Dt.create=(e,t)=>new Dt({innerType:e,typeName:Ht.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...Ae(t)});class jt extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return we(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new le(i.common.issues)},input:i.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new le(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}jt.create=(e,t)=>new jt({innerType:e,typeName:Ht.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...Ae(t)});class Lt extends Ce{_parse(e){if(this._getType(e)!==ae.nan){const t=this._getOrReturnCtx(e);return pe(t,{code:oe.invalid_type,expected:ae.nan,received:t.parsedType}),me}return{status:"valid",value:e.data}}}Lt.create=e=>new Lt({typeName:Ht.ZodNaN,...Ae(e)});const Nt=Symbol("zod_brand");class Mt extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class $t extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?me:"dirty"===e.status?(t.dirty(),ge(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})()}{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?me:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new $t({in:e,out:t,typeName:Ht.ZodPipeline})}}class Ft extends Ce{_parse(e){const t=this._def.innerType._parse(e),i=e=>(_e(e)&&(e.value=Object.freeze(e.value)),e);return we(t)?t.then((e=>i(e))):i(t)}unwrap(){return this._def.innerType}}function Bt(e,t){const i="function"===typeof e?e(t):"string"===typeof e?{message:e}:e;return"string"===typeof i?{message:i}:i}function Ut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return e?ot.create().superRefine(((r,n)=>{var a,s;const o=e(r);if(o instanceof Promise)return o.then((e=>{var a,s;if(!e){const e=Bt(t,r),o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:i)||void 0===s||s;n.addIssue({code:"custom",...e,fatal:o})}}));if(!o){const e=Bt(t,r),o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:i)||void 0===s||s;n.addIssue({code:"custom",...e,fatal:o})}})):ot.create()}Ft.create=(e,t)=>new Ft({innerType:e,typeName:Ht.ZodReadonly,...Ae(t)});const zt={object:pt.lazycreate};var Ht;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ht||(Ht={}));const Vt=Je.create,Gt=et.create,Yt=Lt.create,Wt=tt.create,Xt=it.create,Zt=rt.create,qt=nt.create,Kt=at.create,Jt=st.create,Qt=ot.create,ei=lt.create,ti=ut.create,ii=ct.create,ri=ht.create,ni=pt.create,ai=pt.strictCreate,si=ft.create,oi=gt.create,li=yt.create,ui=vt.create,ci=_t.create,hi=wt.create,di=xt.create,pi=Pt.create,fi=Et.create,mi=kt.create,gi=Ot.create,bi=Tt.create,yi=At.create,vi=Ct.create,_i=Rt.create,wi=It.create,xi=Ct.createWithPreprocess,Pi=$t.create,Ei={string:e=>Je.create({...e,coerce:!0}),number:e=>et.create({...e,coerce:!0}),boolean:e=>it.create({...e,coerce:!0}),bigint:e=>tt.create({...e,coerce:!0}),date:e=>rt.create({...e,coerce:!0})},ki=me;var Si=Object.freeze({__proto__:null,defaultErrorMap:ue,setErrorMap:function(e){ce=e},getErrorMap:he,makeIssue:de,EMPTY_PATH:[],addIssueToContext:pe,ParseStatus:fe,INVALID:me,DIRTY:ge,OK:be,isAborted:ye,isDirty:ve,isValid:_e,isAsync:we,get util(){return re},get objectUtil(){return ne},ZodParsedType:ae,getParsedType:se,ZodType:Ce,datetimeRegex:Ze,ZodString:Je,ZodNumber:et,ZodBigInt:tt,ZodBoolean:it,ZodDate:rt,ZodSymbol:nt,ZodUndefined:at,ZodNull:st,ZodAny:ot,ZodUnknown:lt,ZodNever:ut,ZodVoid:ct,ZodArray:ht,ZodObject:pt,ZodUnion:ft,ZodDiscriminatedUnion:gt,ZodIntersection:yt,ZodTuple:vt,ZodRecord:_t,ZodMap:wt,ZodSet:xt,ZodFunction:Pt,ZodLazy:Et,ZodLiteral:kt,ZodEnum:Ot,ZodNativeEnum:Tt,ZodPromise:At,ZodEffects:Ct,ZodTransformer:Ct,ZodOptional:Rt,ZodNullable:It,ZodDefault:Dt,ZodCatch:jt,ZodNaN:Lt,BRAND:Nt,ZodBranded:Mt,ZodPipeline:$t,ZodReadonly:Ft,custom:Ut,Schema:Ce,ZodSchema:Ce,late:zt,get ZodFirstPartyTypeKind(){return Ht},coerce:Ei,any:Qt,array:ri,bigint:Wt,boolean:Xt,date:Zt,discriminatedUnion:oi,effect:vi,enum:gi,function:pi,instanceof:function(e){return Ut((t=>t instanceof e),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:`Input not instance of ${e.name}`})},intersection:li,lazy:fi,literal:mi,map:hi,nan:Yt,nativeEnum:bi,never:ti,null:Jt,nullable:wi,number:Gt,object:ni,oboolean:()=>Xt().optional(),onumber:()=>Gt().optional(),optional:_i,ostring:()=>Vt().optional(),pipeline:Pi,preprocess:xi,promise:yi,record:ci,set:di,strictObject:ai,string:Vt,symbol:qt,transformer:vi,tuple:ui,undefined:Kt,union:si,unknown:ei,void:ii,NEVER:ki,ZodIssueCode:oe,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:le});const Oi={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Ti;const Ai=new Uint8Array(16);function Ci(){if(!Ti&&(Ti="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ti))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ti(Ai)}const Ri=[];for(let i=0;i<256;++i)Ri.push((i+256).toString(16).slice(1));function Ii(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ri[e[t+0]]+Ri[e[t+1]]+Ri[e[t+2]]+Ri[e[t+3]]+"-"+Ri[e[t+4]]+Ri[e[t+5]]+"-"+Ri[e[t+6]]+Ri[e[t+7]]+"-"+Ri[e[t+8]]+Ri[e[t+9]]+"-"+Ri[e[t+10]]+Ri[e[t+11]]+Ri[e[t+12]]+Ri[e[t+13]]+Ri[e[t+14]]+Ri[e[t+15]]}const Di=function(e,t,i){if(Oi.randomUUID&&!t&&!e)return Oi.randomUUID();const r=(e=e||{}).random||(e.rng||Ci)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return Ii(r)},ji=()=>"undefined"!==typeof Deno,Li=()=>{let e;return e="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||ji()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":ji()?"deno":"other":"node",e};let Ni;async function Mi(){if(void 0===Ni){const e=Li();Ni={library:"langchain-js",runtime:e}}return Ni}function $i(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]:void 0}catch(t){return}}class Fi{}class Bi extends Fi{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,d(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"true"!==$i("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.awaitHandlers=e._awaitHandler??this.awaitHandlers)}copy(){return new this.constructor(this)}toJSON(){return p.prototype.toJSON.call(this)}toJSONNotImplemented(){return p.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends Bi{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Di()}),Object.assign(this,e)}}}}var Ui=i(1900);function zi(e,t){return e&&!Array.isArray(e)&&"object"===typeof e?e:{[t]:e}}class Hi extends Bi{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"===typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}async _startTrace(e){const t=function(e,t,i){const r=i.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`.replace(/[-:.]/g,"")+t}(e.start_time,e.id,e.execution_order),i={...e};if(void 0!==i.parent_run_id){const e=this.runMap.get(i.parent_run_id);e&&(this._addChildRun(e,i),e.child_execution_order=Math.max(e.child_execution_order,i.child_execution_order),i.trace_id=e.trace_id,void 0!==e.dotted_order&&(i.dotted_order=[e.dotted_order,t].join(".")))}else i.trace_id=i.id,i.dotted_order=t;this.runMap.set(i.id,i),await(this.onRunCreate?.(i))}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(this.onRunUpdate?.(e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c=s?{...n,metadata:s}:n,h={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return await this._startTrace(h),await(this.onLLMStart?.(h)),h}async handleChatModelStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c=s?{...n,metadata:s}:n,h={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return await this._startTrace(h),await(this.onLLMStart?.(h)),h}async handleLLMEnd(e,t){const i=this.runMap.get(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.outputs=e,i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),await(this.onLLMEnd?.(i)),await this._endTrace(i),i}async handleLLMError(e,t){const i=this.runMap.get(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),await(this.onLLMError?.(i)),await this._endTrace(i),i}async handleChainStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return await this._startTrace(c),await(this.onChainStart?.(c)),c}async handleChainEnd(e,t,i,r,n){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=zi(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),void 0!==n?.inputs&&(a.inputs=zi(n.inputs,"input")),await(this.onChainEnd?.(a)),await this._endTrace(a),a}async handleChainError(e,t,i,r,n){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),void 0!==n?.inputs&&(a.inputs=zi(n.inputs,"input")),await(this.onChainError?.(a)),await this._endTrace(a),a}async handleToolStart(e,t,i,r,n,a,s){const o=this._getExecutionOrder(r),l=Date.now(),u={id:i,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return await this._startTrace(u),await(this.onToolStart?.(u)),u}async handleToolEnd(e,t){const i=this.runMap.get(t);if(!i||"tool"!==i?.run_type)throw new Error("No tool run to end");return i.end_time=Date.now(),i.outputs={output:e},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),await(this.onToolEnd?.(i)),await this._endTrace(i),i}async handleToolError(e,t){const i=this.runMap.get(t);if(!i||"tool"!==i?.run_type)throw new Error("No tool run to end");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),await(this.onToolError?.(i)),await this._endTrace(i),i}async handleAgentAction(e,t){const i=this.runMap.get(t);if(!i||"chain"!==i?.run_type)return;const r=i;r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(i))}async handleAgentEnd(e,t){const i=this.runMap.get(t);i&&"chain"===i?.run_type&&(i.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(i)))}async handleRetrieverStart(e,t,i,r,n,a,s){const o=this._getExecutionOrder(r),l=Date.now(),u={id:i,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return await this._startTrace(u),await(this.onRetrieverStart?.(u)),u}async handleRetrieverEnd(e,t){const i=this.runMap.get(t);if(!i||"retriever"!==i?.run_type)throw new Error("No retriever run to end");return i.end_time=Date.now(),i.outputs={documents:e},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),await(this.onRetrieverEnd?.(i)),await this._endTrace(i),i}async handleRetrieverError(e,t){const i=this.runMap.get(t);if(!i||"retriever"!==i?.run_type)throw new Error("No retriever run to end");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),await(this.onRetrieverError?.(i)),await this._endTrace(i),i}async handleText(e,t){const i=this.runMap.get(t);i&&"chain"===i?.run_type&&(i.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(i)))}async handleLLMNewToken(e,t,i,r,n,a){const s=this.runMap.get(i);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:a?.chunk})),s}}function Vi(e,t){return`${e.open}${t}${e.close}`}function Gi(e,t){try{return JSON.stringify(e,null,2)}catch(i){return t}}function Yi(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:Wi}=Ui;class Xi extends Hi{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let i=e;for(;i.parent_run_id;){const e=this.runMap.get(i.parent_run_id);if(!e)break;t.push(e),i=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,i)=>{const r=`${e.execution_order}:${e.run_type}:${e.name}`;return t===i.length-1?Vi(Ui.bold,r):r})).join(" > ");return Vi(Wi.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Gi(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.cyan,"[chain/end]")} [${t}] [${Yi(e)}] Exiting Chain run with output: ${Gi(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.red,"[chain/error]")} [${t}] [${Yi(e)}] Chain run errored with error: ${Gi(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),i="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log(`${Vi(Wi.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Gi(i,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.cyan,"[llm/end]")} [${t}] [${Yi(e)}] Exiting LLM run with output: ${Gi(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.red,"[llm/error]")} [${t}] [${Yi(e)}] LLM run errored with error: ${Gi(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.green,"[tool/start]")} [${t}] Entering Tool run with input: "${e.inputs.input?.trim()}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.cyan,"[tool/end]")} [${t}] [${Yi(e)}] Exiting Tool run with output: "${e.outputs?.output?.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.red,"[tool/error]")} [${t}] [${Yi(e)}] Tool run errored with error: ${Gi(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Gi(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.cyan,"[retriever/end]")} [${t}] [${Yi(e)}] Exiting Retriever run with output: ${Gi(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${Vi(Wi.red,"[retriever/error]")} [${t}] [${Yi(e)}] Retriever run errored with error: ${Gi(e.error,"[error]")}`)}onAgentAction(e){const t=e,i=this.getBreadcrumbs(e);console.log(`${Vi(Wi.blue,"[agent/action]")} [${i}] Agent selected action: ${Gi(t.actions[t.actions.length-1],"[action]")}`)}}const Zi={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var qi,Ki=new Uint8Array(16);function Ji(){if(!qi&&!(qi="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qi(Ki)}for(var Qi=[],er=0;er<256;++er)Qi.push((er+256).toString(16).slice(1));function tr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Qi[e[t+0]]+Qi[e[t+1]]+Qi[e[t+2]]+Qi[e[t+3]]+"-"+Qi[e[t+4]]+Qi[e[t+5]]+"-"+Qi[e[t+6]]+Qi[e[t+7]]+"-"+Qi[e[t+8]]+Qi[e[t+9]]+"-"+Qi[e[t+10]]+Qi[e[t+11]]+Qi[e[t+12]]+Qi[e[t+13]]+Qi[e[t+14]]+Qi[e[t+15]]).toLowerCase()}const ir=function(e,t,i){if(Zi.randomUUID&&!t&&!e)return Zi.randomUUID();var r=(e=e||{}).random||(e.rng||Ji)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return tr(r)},rr=function(){return fetch(...arguments)},nr=Symbol.for("ls:fetch_implementation"),ar=()=>globalThis[nr]??rr,sr=[400,401,403,404,405,406,407,408],or=[409];class lr{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.queue=new H.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const n=this.onFailedResponseHook;return this.queue.add((()=>z((()=>e(...i).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,i=t?.status;if(i){if(sr.includes(+i))throw e;if(or.includes(+i))return;n&&await n(t)}},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,i)=>{e.signal?.addEventListener("abort",(()=>{i(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call((()=>ar()(...t).then((e=>e.ok?e:Promise.reject(e)))))}}function ur(e){return"function"===typeof e?._getType}function cr(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}let hr;const dr=()=>"undefined"!==typeof Deno,pr=()=>hr||(hr="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||dr()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":dr()?"deno":"other":"node",hr);let fr,mr;function gr(){if(void 0===fr){const e=pr(),t=function(){if(void 0!==mr)return mr;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const i of e){const e=yr(i);void 0!==e&&(t[i]=e)}return mr=t,t}();fr={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:Xr,...t}}return fr}function br(){try{return"undefined"!==typeof process?Object.entries({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).reduce(((e,t)=>{let[i,r]=t;return e[i]=String(r),e}),{}):void 0}catch(e){return}}function yr(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]:void 0}catch(t){return}}function vr(e){return yr(`LANGSMITH_${e}`)||yr(`LANGCHAIN_${e}`)}const _r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;const wr=function(e){return"string"===typeof e&&_r.test(e)};function xr(e,t){if(!wr(e)){throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`)}return e}const Pr={};function Er(e){Pr[e]||(console.warn(e),Pr[e]=!0)}var kr=i(7512);function Sr(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,i]=e.split(":"),r=i||"latest";if(t.includes("/")){const[i,n]=t.split("/",2);if(!i||!n)throw new Error(`Invalid identifier format: ${e}`);return[i,n,r]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,r]}class Or extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function Tr(e,t,i){let r;if(e.ok)return void(i&&(r=await e.text()));r=await e.text();const n=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${r}`;if(409===e.status)throw new Or(n);throw new Error(n)}var Ar="[...]",Cr={result:"[Circular]"},Rr=[],Ir=[];function Dr(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function jr(e,t,i,r){try{return JSON.stringify(e,t,i)}catch(s){if(!s.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."),"[Unserializable]";var n;console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),"undefined"===typeof r&&(r=Dr()),Nr(e,"",0,[],void 0,0,r);try{n=0===Ir.length?JSON.stringify(e,t,i):JSON.stringify(e,Mr(t),i)}catch(o){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Rr.length;){var a=Rr.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return n}}function Lr(e,t,i,r){var n=Object.getOwnPropertyDescriptor(r,i);void 0!==n.get?n.configurable?(Object.defineProperty(r,i,{value:e}),Rr.push([r,i,t,n])):Ir.push([t,i,e]):(r[i]=e,Rr.push([r,i,t]))}function Nr(e,t,i,r,n,a,s){var o;if(a+=1,"object"===typeof e&&null!==e){for(o=0;o<r.length;o++)if(r[o]===e)return void Lr(Cr,e,t,n);if("undefined"!==typeof s.depthLimit&&a>s.depthLimit)return void Lr(Ar,e,t,n);if("undefined"!==typeof s.edgesLimit&&i+1>s.edgesLimit)return void Lr(Ar,e,t,n);if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Nr(e[o],o,o,r,e,a,s);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var u=l[o];Nr(e[u],u,o,r,e,a,s)}}r.pop()}}function Mr(e){return e="undefined"!==typeof e?e:function(e,t){return t},function(t,i){if(Ir.length>0)for(var r=0;r<Ir.length;r++){var n=Ir[r];if(n[1]===t&&n[0]===i){i=n[2],Ir.splice(r,1);break}}return e.call(this,t,i)}}function $r(e){const t=gr(),i=function(){const e=br()||{},t={},i=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[r,n]of Object.entries(e))!r.startsWith("LANGCHAIN_")||"string"!==typeof n||i.includes(r)||r.toLowerCase().includes("key")||r.toLowerCase().includes("secret")||r.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===r?t.revision_id=n:t[r]=n);return t}(),r=e.extra??{},n=r.metadata;return e.extra={...r,runtime:{...t,...r?.runtime},metadata:{...i,...i.revision_id||e.revision_id?{revision_id:e.revision_id??i.revision_id}:{},...n}},e}function Fr(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const Br=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise((e=>setTimeout(e,t))),!0}return!1};class Ur{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const i=new Promise((e=>{t=e})),r=jr(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:i,size:r}),this.sizeBytes+=r,i}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let i=0;for(;i+(this.peek()?.size??0)<e&&this.items.length>0;){const e=this.items.shift();e&&(t.push(e),i+=e.size,this.sizeBytes-=e.size)}if(0===t.length&&this.items.length>0){const e=this.items.shift();t.push(e),i+=e.size,this.sizeBytes-=e.size}return[t.map((e=>({action:e.action,item:e.payload}))),()=>t.forEach((e=>e.itemPromiseResolve()))]}}class zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Ur}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=zr.getDefaultClientConfig();this.tracingSampleRate=(()=>{const e=vr("TRACING_SAMPLING_RATE");if(void 0===e)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t})(),this.apiUrl=Fr(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Fr(e.apiKey??t.apiKey),this.webUrl=Fr(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??12e3,this.caller=new lr(e.callerOptions??{}),this.batchIngestCaller=new lr({...e.callerOptions??{},onFailedResponseHook:Br}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){const e=vr("API_KEY");return{apiUrl:vr("ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===vr("HIDE_INPUTS"),hideOutputs:"true"===vr("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t})(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Xr}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"===typeof this.hideInputs?this.hideInputs(e):e}processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"===typeof this.hideOutputs?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){const i=t?.toString()??"",r=`${this.apiUrl}${e}?${i}`,n=await this.caller.call(ar(),r,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(n,`Failed to fetch ${e}`),n}async _get(e,t){return(await this._getResponse(e,t)).json()}_getPaginated(e){try{var t=this;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams,r=arguments.length>2?arguments[2]:void 0;return async function*(){let n=Number(i.get("offset"))||0;const a=Number(i.get("limit"))||100;for(;;){i.set("offset",String(n)),i.set("limit",String(a));const s=`${t.apiUrl}${e}?${i}`,o=await t.caller.call(ar(),s,{method:"GET",headers:t.headers,signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions});await Tr(o,`Failed to fetch ${e}`);const l=r?r(await o.json()):await o.json();if(0===l.length)break;if(yield l,l.length<a)break;n+=l.length}}()}catch(i){return Promise.reject(i)}}_getCursorPaginatedList(e){try{var t=this;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"runs";return async function*(){const a=i?{...i}:{};for(;;){const i=await t.caller.call(ar(),`${t.apiUrl}${e}`,{method:r,headers:{...t.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions,body:JSON.stringify(a)}),s=await i.json();if(!s)break;if(!s[n])break;yield s[n];const o=s.cursors;if(!o)break;if(!o.next)break;a.cursor=o.next}}()}catch(i){return Promise.reject(i)}}_filterForSampling(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):t.push(i);return t}{const t=[];for(const i of e)i.id!==i.trace_id&&!this.filteredPostUuids.has(i.trace_id)||Math.random()<this.tracingSampleRate?t.push(i):this.filteredPostUuids.add(i.id);return t}}async _getBatchSizeLimitBytes(){const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??20971520}async drainAutoBatchQueue(){for(;this.autoBatchQueue.items.length>=0;){const[e,t]=this.autoBatchQueue.pop(await this._getBatchSizeLimitBytes());if(!e.length)return void t();try{const t={runCreates:e.filter((e=>"create"===e.action)).map((e=>e.item)),runUpdates:e.filter((e=>"update"===e.action)).map((e=>e.item))},i=await this._ensureServerInfo();i?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(t):await this.batchIngestRuns(t)}finally{t()}}}async processRunOperation(e,t){const i=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,"create"===e.action&&(e.item=$r(e.item));const r=this.autoBatchQueue.push(e),n=await this._getBatchSizeLimitBytes();return(t||this.autoBatchQueue.sizeBytes>n)&&await this.drainAutoBatchQueue().catch(console.error),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout((()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)}),i?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),r}async _getServerInfo(){const e=await ar()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e3),...this.fetchOptions});return await Tr(e,"get server info"),e.json()}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to single calls and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then((e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e)))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const r=this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order)return void this.processRunOperation({action:"create",item:r}).catch(console.error);const n=$r(r),a=await this.caller.call(ar(),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:jr(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(a,"create run",!0)}async batchIngestRuns(e){let{runCreates:t,runUpdates:i}=e;if(void 0===t&&void 0===i)return;let r=t?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[],n=i?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[];if(r.length>0&&n.length>0){const e=r.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const i of n)void 0!==i.id&&e[i.id]?e[i.id]={...e[i.id],...i}:t.push(i);r=Object.values(e),n=t}const a={post:this._filterForSampling(r),patch:this._filterForSampling(n,!0)};if(!a.post.length&&!a.patch.length)return;if(void 0===(await this._ensureServerInfo()).version){this.autoBatchTracing=!1;for(const e of a.post)await this.createRun(e);for(const e of a.patch)void 0!==e.id&&await this.updateRun(e.id,e);return}const s={post:[],patch:[]};for(const o of["post","patch"]){const e=o,t=a[e].reverse();let i=t.pop();for(;void 0!==i;)s[e].push(i),i=t.pop()}(s.post.length>0||s.patch.length>0)&&await this._postBatchIngestRuns(jr(s))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},i=await this.batchIngestCaller.call(ar(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(i,"batch create run",!0)}async multipartIngestRuns(e){let{runCreates:t,runUpdates:i}=e;if(void 0===t&&void 0===i)return;const r={};let n=[];for(const l of t??[]){const e=this.prepareRunCreateOrUpdateInputs(l);void 0!==e.id&&void 0!==e.attachments&&(r[e.id]=e.attachments),delete e.attachments,n.push(e)}let a=[];for(const l of i??[])a.push(this.prepareRunCreateOrUpdateInputs(l));if(void 0!==n.find((e=>void 0===e.trace_id||void 0===e.dotted_order)))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==a.find((e=>void 0===e.trace_id||void 0===e.dotted_order)))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(n.length>0&&a.length>0){const e=n.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const i of a)void 0!==i.id&&e[i.id]?e[i.id]={...e[i.id],...i}:t.push(i);n=Object.values(e),a=t}if(0===n.length&&0===a.length)return;const s=[],o=[];for(const[l,u]of[["post",n],["patch",a]])for(const e of u){const{inputs:t,outputs:i,events:n,...a}=e,u={inputs:t,outputs:i,events:n},c=jr(a);o.push({name:`${l}.${a.id}`,payload:new Blob([c],{type:`application/json; length=${c.length}`})});for(const[e,r]of Object.entries(u)){if(void 0===r)continue;const t=jr(r);o.push({name:`${l}.${a.id}.${e}`,payload:new Blob([t],{type:`application/json; length=${t.length}`})})}if(void 0!==a.id){const e=r[a.id];if(e){delete r[a.id];for(const[t,[i,r]]of Object.entries(e))o.push({name:`attachment.${a.id}.${t}`,payload:new Blob([r],{type:`${i}; length=${r.length}`})})}}s.push(`trace=${a.trace_id},id=${a.id}`)}await this._sendMultipartRequest(o,s.join("; "))}async _sendMultipartRequest(e,t){try{const t=new FormData;for(const i of e)t.append(i.name,i.payload);await this.batchIngestCaller.call(ar(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers},body:t,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})}catch(i){let e="Failed to multipart ingest runs";i instanceof Error?e+=`: ${i.stack||i.message}`:e+=`: ${String(i)}`,console.warn(`${e.trim()}\n\nContext: ${t}`)}}async updateRun(e,t){xr(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const i={...t,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&void 0!==i.trace_id&&void 0!==i.dotted_order)return void 0!==t.end_time&&void 0===i.parent_run_id&&this.blockOnRootRunFinalization?void await this.processRunOperation({action:"update",item:i},!0):void this.processRunOperation({action:"update",item:i}).catch(console.error);const r={...this.headers,"Content-Type":"application/json"},n=await this.caller.call(ar(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:jr(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(n,"update run",!0)}async readRun(e){let{loadChildRuns:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadChildRuns:!1};xr(e);let i=await this._get(`/runs/${e}`);return t&&i.child_run_ids&&(i=await this._loadChildRuns(i)),i}async getRunUrl(e){let{runId:t,run:i,projectOpts:r}=e;if(void 0!==i){let e;if(i.session_id)e=i.session_id;else if(r?.projectName)e=(await this.readProject({projectName:r?.projectName})).id;else if(r?.projectId)e=r?.projectId;else{e=(await this.readProject({projectName:vr("PROJECT")||"default"})).id}const t=await this._getTenantId();return`${this.getHostUrl()}/o/${t}/projects/p/${e}/r/${i.id}?poll=true`}if(void 0!==t){const e=await this.readRun(t);if(!e.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${e.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const i of e)t.push(i);return t}(this.listRuns({id:e.child_run_ids})),i={},r={};t.sort(((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??"")));for(const n of t){if(null===n.parent_run_id||void 0===n.parent_run_id)throw new Error(`Child run ${n.id} has no parent`);n.parent_run_id in i||(i[n.parent_run_id]=[]),i[n.parent_run_id].push(n),r[n.id]=n}e.child_runs=i[e.id]||[];for(const n in i)n!==e.id&&(r[n].child_runs=i[n]);return e}async*listRuns(e){const{projectId:t,projectName:i,parentRunId:r,traceId:n,referenceExampleId:a,startTime:s,executionOrder:o,isRoot:l,runType:u,error:c,id:h,query:d,filter:p,traceFilter:f,treeFilter:m,limit:g,select:b}=e;let y=[];if(t&&(y=Array.isArray(t)?t:[t]),i){const e=Array.isArray(i)?i:[i],t=await Promise.all(e.map((e=>this.readProject({projectName:e}).then((e=>e.id)))));y.push(...t)}const v={session:y.length?y:null,run_type:u,reference_example:a,query:d,filter:p,trace_filter:f,tree_filter:m,execution_order:o,parent_run:r,start_time:s?s.toISOString():null,error:c,id:h,limit:g,trace:n,select:b||["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l};let _=0;for await(const w of this._getCursorPaginatedList("/runs/query",v))if(g){if(_>=g)break;if(w.length+_>g){const e=w.slice(0,g-_);yield*e;break}_+=w.length,yield*w}else yield*w}async getRunStats(e){let{id:t,trace:i,parentRun:r,runType:n,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:u,error:c,query:h,filter:d,traceFilter:p,treeFilter:f,isRoot:m,dataSourceType:g}=e,b=s||[];a&&(b=[...s||[],...await Promise.all(a.map((e=>this.readProject({projectName:e}).then((e=>e.id)))))]);const y={id:t,trace:i,parent_run:r,run_type:n,session:b,reference_example:o,start_time:l,end_time:u,error:c,query:h,filter:d,trace_filter:p,tree_filter:f,is_root:m,data_source_type:g},v=Object.fromEntries(Object.entries(y).filter((e=>{let[t,i]=e;return void 0!==i}))),_=await this.caller.call(ar(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await _.json()}async shareRun(e){let{shareId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={run_id:e,share_token:t||ir()};xr(e);const r=await this.caller.call(ar(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();if(null===n||!("share_token"in n))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${n.share_token}/r`}async unshareRun(e){xr(e);const t=await this.caller.call(ar(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(t,"unshare run",!0)}async readRunSharedLink(e){xr(e);const t=await this.caller.call(ar(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await t.json();if(null!==i&&"share_token"in i)return`${this.getHostUrl()}/public/${i.share_token}/r`}async listSharedRuns(e){let{runIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new URLSearchParams({share_token:e});if(void 0!==t)for(const n of t)i.append("id",n);xr(e);const r=await this.caller.call(ar(),`${this.apiUrl}/public/${e}/runs${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await r.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}xr(e);const i=await this.caller.call(ar(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await i.json();return r.url=`${this.getHostUrl()}/public/${r.share_token}/d`,r}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}const i={dataset_id:e};xr(e);const r=await this.caller.call(ar(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async unshareDataset(e){xr(e);const t=await this.caller.call(ar(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(t,"unshare dataset",!0)}async readSharedDataset(e){xr(e);const t=await this.caller.call(ar(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const i={};t?.exampleIds&&(i.id=t.exampleIds);const r=new URLSearchParams;Object.entries(i).forEach((e=>{let[t,i]=e;Array.isArray(i)?i.forEach((e=>r.append(t,e))):r.append(t,i)}));const n=await this.caller.call(ar(),`${this.apiUrl}/public/${e}/examples?${r.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();if(!n.ok){if("detail"in a)throw new Error(`Failed to list shared examples.\nStatus: ${n.status}\nMessage: ${a.detail.join("\n")}`);throw new Error(`Failed to list shared examples: ${n.status} ${n.statusText}`)}return a.map((e=>({...e,_hostUrl:this.getHostUrl()})))}async createProject(e){let{projectName:t,description:i=null,metadata:r=null,upsert:n=!1,projectExtra:a=null,referenceDatasetId:s=null}=e;const o=n?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,u=a||{};r&&(u.metadata=r);const c={name:t,extra:u,description:i};null!==s&&(c.reference_dataset_id=s);const h=await this.caller.call(ar(),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(h,"create project");return await h.json()}async updateProject(e,t){let{name:i=null,description:r=null,metadata:n=null,projectExtra:a=null,endTime:s=null}=t;const o=`${this.apiUrl}/sessions/${e}`;let l=a;n&&(l={...l||{},metadata:n});const u={name:i,extra:l,description:r,end_time:s?new Date(s).toISOString():null},c=await this.caller.call(ar(),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(c,"update project");return await c.json()}async hasProject(e){let{projectId:t,projectName:i}=e,r="/sessions";const n=new URLSearchParams;if(void 0!==t&&void 0!==i)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)xr(t),r+=`/${t}`;else{if(void 0===i)throw new Error("Must provide projectName or projectId");n.append("name",i)}const a=await this.caller.call(ar(),`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await a.json();return!!a.ok&&(!Array.isArray(e)||e.length>0)}catch(s){return!1}}async readProject(e){let{projectId:t,projectName:i,includeStats:r}=e,n="/sessions";const a=new URLSearchParams;if(void 0!==t&&void 0!==i)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)xr(t),n+=`/${t}`;else{if(void 0===i)throw new Error("Must provide projectName or projectId");a.append("name",i)}void 0!==r&&a.append("include_stats",r.toString());const s=await this._get(n,a);let o;if(Array.isArray(s)){if(0===s.length)throw new Error(`Project[id=${t}, name=${i}] not found`);o=s[0]}else o=s;return o}async getProjectUrl(e){let{projectId:t,projectName:i}=e;if(void 0===t&&void 0===i)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:t,projectName:i}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl(e){let{datasetId:t,datasetName:i}=e;if(void 0===t&&void 0===i)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:t,datasetName:i}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}listProjects(){try{var e=this;let{projectIds:t,name:i,nameContains:r,referenceDatasetId:n,referenceDatasetName:a,referenceFree:s,metadata:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const l=new URLSearchParams;if(void 0!==t)for(const e of t)l.append("id",e);if(void 0!==i&&l.append("name",i),void 0!==r&&l.append("name_contains",r),void 0!==n)l.append("reference_dataset",n);else if(void 0!==a){const t=await e.readDataset({datasetName:a});l.append("reference_dataset",t.id)}void 0!==s&&l.append("reference_free",s.toString()),void 0!==o&&l.append("metadata",JSON.stringify(o));for await(const t of e._getPaginated("/sessions",l))yield*t}()}catch(t){return Promise.reject(t)}}async deleteProject(e){let t,{projectId:i,projectName:r}=e;if(void 0===i&&void 0===r)throw new Error("Must provide projectName or projectId");if(void 0!==i&&void 0!==r)throw new Error("Must provide either projectName or projectId, not both");t=void 0===i?(await this.readProject({projectName:r})).id:i,xr(t);const n=await this.caller.call(ar(),`${this.apiUrl}/sessions/${t}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(n,`delete session ${t} (${r})`,!0)}async uploadCsv(e){let{csvFile:t,fileName:i,inputKeys:r,outputKeys:n,description:a,dataType:s,name:o}=e;const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",t,i),r.forEach((e=>{u.append("input_keys",e)})),n.forEach((e=>{u.append("output_keys",e)})),a&&u.append("description",a),s&&u.append("data_type",s),o&&u.append("name",o);const c=await this.caller.call(ar(),l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(c,"upload CSV");return await c.json()}async createDataset(e){let{description:t,dataType:i,inputsSchema:r,outputsSchema:n,metadata:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={name:e,description:t,extra:a?{metadata:a}:void 0};i&&(s.data_type=i),r&&(s.inputs_schema_definition=r),n&&(s.outputs_schema_definition=n);const o=await this.caller.call(ar(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(o,"create dataset");return await o.json()}async readDataset(e){let{datasetId:t,datasetName:i}=e,r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)xr(t),r+=`/${t}`;else{if(void 0===i)throw new Error("Must provide datasetName or datasetId");n.append("name",i)}const a=await this._get(r,n);let s;if(Array.isArray(a)){if(0===a.length)throw new Error(`Dataset[id=${t}, name=${i}] not found`);s=a[0]}else s=a;return s}async hasDataset(e){let{datasetId:t,datasetName:i}=e;try{return await this.readDataset({datasetId:t,datasetName:i}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions(e){let{datasetId:t,datasetName:i,fromVersion:r,toVersion:n}=e,a=t;if(void 0===a&&void 0===i)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===a){a=(await this.readDataset({datasetName:i})).id}const s=new URLSearchParams({from_version:"string"===typeof r?r:r.toISOString(),to_version:"string"===typeof n?n:n.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning(e){let{datasetId:t,datasetName:i}=e;if(void 0!==t);else{if(void 0===i)throw new Error("Must provide datasetName or datasetId");t=(await this.readDataset({datasetName:i})).id}const r=await this._getResponse(`/datasets/${t}/openai_ft`),n=(await r.text()).trim().split("\n").map((e=>JSON.parse(e)));return n}listDatasets(){try{var e=this;let{limit:t=100,offset:i=0,datasetIds:r,datasetName:n,datasetNameContains:a,metadata:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const o=new URLSearchParams({limit:t.toString(),offset:i.toString()});if(void 0!==r)for(const e of r)o.append("id",e);void 0!==n&&o.append("name",n),void 0!==a&&o.append("name_contains",a),void 0!==s&&o.append("metadata",JSON.stringify(s));for await(const t of e._getPaginated("/datasets",o))yield*t}()}catch(t){return Promise.reject(t)}}async updateDataset(e){const{datasetId:t,datasetName:i,...r}=e;if(!t&&!i)throw new Error("Must provide either datasetName or datasetId");const n=t??(await this.readDataset({datasetName:i})).id;xr(n);const a=await this.caller.call(ar(),`${this.apiUrl}/datasets/${n}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(a,"update dataset"),await a.json()}async deleteDataset(e){let{datasetId:t,datasetName:i}=e,r="/datasets",n=t;if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==i){n=(await this.readDataset({datasetName:i})).id}if(void 0===n)throw new Error("Must provide datasetName or datasetId");xr(n),r+=`/${n}`;const a=await this.caller.call(ar(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(a,`delete ${r}`),await a.json()}async indexDataset(e){let{datasetId:t,datasetName:i,tag:r}=e,n=t;if(!n&&!i)throw new Error("Must provide either datasetName or datasetId");if(n&&i)throw new Error("Must provide either datasetName or datasetId, not both");if(!n){n=(await this.readDataset({datasetName:i})).id}xr(n);const a={tag:r},s=await this.caller.call(ar(),`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(s,"index dataset"),await s.json()}async similarExamples(e,t,i){let{filter:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={limit:i,inputs:e};void 0!==r&&(n.filter=r),xr(t);const a=await this.caller.call(ar(),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(a,"fetch similar examples");return(await a.json()).examples}async createExample(e,t,i){let{datasetId:r,datasetName:n,createdAt:a,exampleId:s,metadata:o,split:l,sourceRunId:u}=i,c=r;if(void 0===c&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==c&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===c){c=(await this.readDataset({datasetName:n})).id}const h=a||new Date,d={dataset_id:c,inputs:e,outputs:t,created_at:h?.toISOString(),id:s,metadata:o,split:l,source_run_id:u},p=await this.caller.call(ar(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(p,"create example");return await p.json()}async createExamples(e){const{inputs:t,outputs:i,metadata:r,sourceRunIds:n,exampleIds:a,datasetId:s,datasetName:o}=e;let l=s;if(void 0===l&&void 0===o)throw new Error("Must provide either datasetName or datasetId");if(void 0!==l&&void 0!==o)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===l){const e=await this.readDataset({datasetName:o});l=e.id}const u=t.map(((t,s)=>({dataset_id:l,inputs:t,outputs:i?i[s]:void 0,metadata:r?r[s]:void 0,split:e.splits?e.splits[s]:void 0,id:a?a[s]:void 0,source_run_id:n?n[s]:void 0}))),c=await this.caller.call(ar(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(c,"create examples");return await c.json()}async createLLMExample(e,t,i){return this.createExample({input:e},{output:t},i)}async createChatExample(e,t,i){const r=e.map((e=>ur(e)?cr(e):e)),n=ur(t)?cr(t):t;return this.createExample({input:r},{output:n},i)}async readExample(e){xr(e);const t=`/examples/${e}`;return await this._get(t)}listExamples(){try{var e=this;let{datasetId:t,datasetName:i,exampleIds:r,asOf:n,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:u,filter:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let h;if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)h=t;else{if(void 0===i)throw new Error("Must provide a datasetName or datasetId");h=(await e.readDataset({datasetName:i})).id}const d=new URLSearchParams({dataset:h}),p=n?"string"===typeof n?n:n?.toISOString():void 0;p&&d.append("as_of",p);const f=s??!0;if(d.append("inline_s3_urls",f.toString()),void 0!==r)for(const e of r)d.append("id",e);if(void 0!==a)for(const e of a)d.append("splits",e);if(void 0!==o){const e=JSON.stringify(o);d.append("metadata",e)}void 0!==l&&d.append("limit",l.toString()),void 0!==u&&d.append("offset",u.toString()),void 0!==c&&d.append("filter",c);let m=0;for await(const t of e._getPaginated("/examples",d)){for(const e of t)yield e,m++;if(void 0!==l&&m>=l)break}}()}catch(t){return Promise.reject(t)}}async deleteExample(e){xr(e);const t=`/examples/${e}`,i=await this.caller.call(ar(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(i,`delete ${t}`),await i.json()}async updateExample(e,t){xr(e);const i=await this.caller.call(ar(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(i,"update example");return await i.json()}async updateExamples(e){const t=await this.caller.call(ar(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(t,"update examples");return await t.json()}async listDatasetSplits(e){let t,{datasetId:i,datasetName:r,asOf:n}=e;if(void 0===i&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==i&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){t=(await this.readDataset({datasetName:r})).id}else t=i;xr(t);const a=new URLSearchParams,s=n?"string"===typeof n?n:n?.toISOString():void 0;s&&a.append("as_of",s);return await this._get(`/datasets/${t}/splits`,a)}async updateDatasetSplits(e){let t,{datasetId:i,datasetName:r,splitName:n,exampleIds:a,remove:s=!1}=e;if(void 0===i&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==i&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){t=(await this.readDataset({datasetName:r})).id}else t=i;xr(t);const o={split_name:n,examples:a.map((e=>(xr(e),e))),remove:s},l=await this.caller.call(ar(),`${this.apiUrl}/datasets/${t}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(l,"update dataset splits",!0)}async evaluateRun(e,t){let i,{sourceInfo:r,loadChildRuns:n,referenceExample:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{loadChildRuns:!1};if(Er("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"===typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!==typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(a=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,a),[o,l]=await this._logEvaluationFeedback(s,i,r);return l[0]}async createFeedback(e,t,i){let{score:r,value:n,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,feedbackConfig:h,projectId:d,comparativeExperimentId:p}=i;if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const f={type:l??"api",metadata:o??{}};void 0===u||void 0===f?.metadata||f.metadata.__run||(f.metadata.__run={run_id:u}),void 0!==f?.metadata&&void 0!==f.metadata.__run?.run_id&&xr(f.metadata.__run.run_id);const m={id:c??ir(),run_id:e,key:t,score:r,value:n,correction:a,comment:s,feedback_source:f,comparative_experiment_id:p,feedbackConfig:h,session_id:d},g=`${this.apiUrl}/feedback`,b=await this.caller.call(ar(),g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(b,"create feedback",!0),m}async updateFeedback(e,t){let{score:i,value:r,correction:n,comment:a}=t;const s={};void 0!==i&&null!==i&&(s.score=i),void 0!==r&&null!==r&&(s.value=r),void 0!==n&&null!==n&&(s.correction=n),void 0!==a&&null!==a&&(s.comment=a),xr(e);const o=await this.caller.call(ar(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(o,"update feedback",!0)}async readFeedback(e){xr(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){xr(e);const t=`/feedback/${e}`,i=await this.caller.call(ar(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(i,`delete ${t}`),await i.json()}listFeedback(){try{var e=this;let{runIds:t,feedbackKeys:i,feedbackSourceTypes:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=new URLSearchParams;if(t&&n.append("run",t.join(",")),i)for(const e of i)n.append("key",e);if(r)for(const e of r)n.append("source",e);for await(const t of e._getPaginated("/feedback",n))yield*t}()}catch(t){return Promise.reject(t)}}async createPresignedFeedbackToken(e,t){let{expiration:i,feedbackConfig:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={run_id:e,feedback_key:t,feedback_config:r};i?"string"===typeof i?n.expires_at=i:(i?.hours||i?.minutes||i?.days)&&(n.expires_in=i):n.expires_in={hours:3};const a=await this.caller.call(ar(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await a.json()}async createComparativeExperiment(e){let{name:t,experimentIds:i,referenceDatasetId:r,createdAt:n,description:a,metadata:s,id:o}=e;if(0===i.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:i[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const l={id:o,name:t,experiment_ids:i,reference_dataset_id:r,description:a,created_at:(n??new Date)?.toISOString(),extra:{}};s&&(l.extra.metadata=s);const u=await this.caller.call(ar(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await u.json()}async*listPresignedFeedbackTokens(e){xr(e);const t=new URLSearchParams({run_id:e});for await(const i of this._getPaginated("/feedback/tokens",t))yield*i}_selectEvalResults(e){let t;return t="results"in e?e.results:[e],t}async _logEvaluationFeedback(e,t,i){const r=this._selectEvalResults(e),n=[];for(const a of r){let e=i||{};a.evaluatorInfo&&(e={...a.evaluatorInfo,...e});let r=null;a.targetRunId?r=a.targetRunId:t&&(r=t.id),n.push(await this.createFeedback(r,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:e,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[r,n]}async logEvaluationFeedback(e,t,i){const[r]=await this._logEvaluationFeedback(e,t,i);return r}listAnnotationQueues(){try{var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const{queueIds:i,name:r,nameContains:n,limit:a}=t,s=new URLSearchParams;i&&i.forEach(((e,t)=>{xr(e,`queueIds[${t}]`),s.append("ids",e)})),r&&s.append("name",r),n&&s.append("name_contains",n),s.append("limit",(void 0!==a?Math.min(a,100):100).toString());let o=0;for await(const t of e._getPaginated("/annotation-queues",s))if(yield*t,o++,void 0!==a&&o>=a)break}()}catch(t){return Promise.reject(t)}}async createAnnotationQueue(e){const{name:t,description:i,queueId:r}=e,n={name:t,description:i,id:r||ir()},a=await this.caller.call(ar(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(n).filter((e=>{let[t,i]=e;return void 0!==i})))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(a,"create annotation queue");return await a.json()}async readAnnotationQueue(e){const t=await this.listAnnotationQueues({queueIds:[e]}).next();if(t.done)throw new Error(`Annotation queue with ID ${e} not found`);return t.value}async updateAnnotationQueue(e,t){const{name:i,description:r}=t,n=await this.caller.call(ar(),`${this.apiUrl}/annotation-queues/${xr(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:i,description:r}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(n,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(ar(),`${this.apiUrl}/annotation-queues/${xr(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const i=await this.caller.call(ar(),`${this.apiUrl}/annotation-queues/${xr(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map(((e,t)=>xr(e,`runIds[${t}]`).toString()))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(i,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const i=`/annotation-queues/${xr(e,"queueId")}/run`,r=await this.caller.call(ar(),`${this.apiUrl}${i}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(r,"get run from annotation queue"),await r.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const i=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${i.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(ar(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await t.json();if(!t.ok){const e="string"===typeof i.detail?i.detail:JSON.stringify(i.detail),r=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw r.statusCode=t.status,r}if(0!==i.commits.length)return i.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[i,r,n]=Sr(e),a=await this.caller.call(ar(),`${this.apiUrl}/likes/${i}/${r}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(a,(t?"like":"unlike")+" prompt"),await a.json()}async _getPromptUrl(e){const[t,i,r]=Sr(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==r?`${this.getHostUrl()}/prompts/${i}/${r.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${i}?organizationId=${e.id}`}return"latest"!==r?`${this.getHostUrl()}/hub/${t}/${i}/${r.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${i}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,(e=>e.commits)))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const i of this._getPaginated("/repos",t,(e=>e.repos)))yield*i}async getPrompt(e){const[t,i,r]=Sr(e),n=await this.caller.call(ar(),`${this.apiUrl}/repos/${t}/${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===n.status)return null;await Tr(n,"get prompt");const a=await n.json();return a.repo?a.repo:null}async createPrompt(e,t){const i=await this._getSettings();if(t?.isPublic&&!i.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle. \n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[r,n,a]=Sr(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("create a prompt",r);const s={repo_handle:n,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},o=await this.caller.call(ar(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(o,"create prompt");const{repo:l}=await o.json();return l}async createCommit(e,t,i){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n,a]=Sr(e),s="latest"!==i?.parentCommitHash&&i?.parentCommitHash?i?.parentCommitHash:await this._getLatestCommitHash(`${r}/${n}`),o={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call(ar(),`${this.apiUrl}/commits/${r}/${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(l,"create commit");const u=await l.json();return this._getPromptUrl(`${r}/${n}${u.commit_hash?`:${u.commit_hash}`:""}`)}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,r]=Sr(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("update a prompt",i);const n={};if(void 0!==t?.description&&(n.description=t.description),void 0!==t?.readme&&(n.readme=t.readme),void 0!==t?.tags&&(n.tags=t.tags),void 0!==t?.isPublic&&(n.is_public=t.isPublic),void 0!==t?.isArchived&&(n.is_archived=t.isArchived),0===Object.keys(n).length)throw new Error("No valid update options provided");const a=await this.caller.call(ar(),`${this.apiUrl}/repos/${i}/${r}`,{method:"PATCH",body:JSON.stringify(n),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Tr(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,i,r]=Sr(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);const n=await this.caller.call(ar(),`${this.apiUrl}/repos/${t}/${i}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await n.json()}async pullPromptCommit(e,t){const[i,r,n]=Sr(e);let a=n;if(!function(e,t){const i=(0,kr.parse)(e),r=(0,kr.parse)(t);if(!i||!r)throw new Error("Invalid version format.");return i.compare(r)>=0}((await this._getServerInfo()).version,"0.5.23")&&"latest"===n){const e=await this._getLatestCommitHash(`${i}/${r}`);if(!e)throw new Error("No commits found");a=e}const s=await this.caller.call(ar(),`${this.apiUrl}/commits/${i}/${r}/${a}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Tr(s,"pull prompt commit");const o=await s.json();return{owner:i,repo:r,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,t){const i=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(i.manifest)}async pushPrompt(e,t){if(await this.promptExists(e)?t&&Object.keys(t).some((e=>"object"!==e))&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),!t?.object)return await this._getPromptUrl(e);return await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash})}async clonePublicDataset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceApiUrl:i=this.apiUrl,datasetName:r}=t,[n,a]=this.parseTokenOrUrl(e,i),s=new zr({apiUrl:n,apiKey:"placeholder"}),o=await s.readSharedDataset(a),l=r||o.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(h){}const u=await s.listSharedExamples(a),c=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map((e=>e.inputs)),outputs:u.flatMap((e=>e.outputs?[e.outputs]:[])),datasetId:c.id})}catch(d){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),d}}parseTokenOrUrl(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataset";try{return xr(e),[t,e]}catch(n){}try{const n=new URL(e).pathname.split("/").filter((e=>""!==e));if(n.length>=i){return[t,n[n.length-i]]}throw new Error(`Invalid public ${r} URL: ${e}`)}catch(a){throw new Error(`Invalid public ${r} URL or token: ${e}`)}}awaitPendingTraceBatches(){return Promise.all(this.autoBatchQueue.items.map((e=>{let{itemPromise:t}=e;return t})))}}const Hr=Symbol.for("lc:context_variables");class Vr{constructor(e,t){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t}static fromHeader(e){const t=e.split(",");let i={},r=[];for(const n of t){const[e,t]=n.split("="),a=decodeURIComponent(t);"langsmith-metadata"===e?i=JSON.parse(a):"langsmith-tags"===e&&(r=a.split(","))}return new Vr(i,r)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class Gr{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),void 0!==(t=e)&&"function"===typeof t.createChild&&"function"===typeof t.postRun)return void Object.assign(this,{...e});var t;const i=Gr.getDefaultConfig(),{metadata:r,...n}=e,a=n.client??Gr.getSharedClient(),s={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:s},Object.assign(this,{...i,...n,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const e=function(e,t){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1).toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${i}Z`.replace(/[-:.]/g,"")+t}(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:ir(),run_type:"chain",project_name:yr("LANGCHAIN_PROJECT")??yr("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:yr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:yr("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Gr.sharedClient||(Gr.sharedClient=new zr),Gr.sharedClient}createChild(e){const t=this.child_execution_order+1,i=new Gr({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});Hr in this&&(i[Hr]=this[Hr]);const r=Symbol.for("lc:child_config"),n=e.extra?.[r]??this.extra[r];if(void 0!==(a=n)&&"object"===typeof a.callbacks&&(Wr(a.callbacks?.handlers)||Wr(a.callbacks))){const e={...n},t=function(e){return"object"===typeof e&&null!=e&&Array.isArray(e.handlers)}(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:i.id}),t.handlers?.find(Yr)?.updateFromRunTree?.(i),e.callbacks=t),i.extra[r]=e}var a;const s=new Set;let o=this;for(;null!=o&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,t),o=o.parent_run;return this.child_runs.push(i),i}async end(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),r=arguments.length>3?arguments[3]:void 0;this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??i,r&&Object.keys(r).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...r}}:{metadata:r})}_convertToCreate(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.extra??{};if(r.runtime||(r.runtime={}),t)for(const[s,o]of Object.entries(t))r.runtime[s]||(r.runtime[s]=o);let n,a;i?(a=e.parent_run?.id,n=[]):(n=e.child_runs.map((e=>this._convertToCreate(e,t,i))),a=void 0);return{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:r,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:n,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{const t=gr(),i=await this._convertToCreate(this,t,!0);if(await this.client.createRun(i),!e){Er("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,t){const i=e?.callbacks;let r,n,a,s=(e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find((e=>"true"===vr(e))))();if(i){const e=i?.getParentRunId?.()??"",t=i?.handlers?.find((e=>"langchain_tracer"==e?.name));r=t?.getRun?.(e),n=t?.projectName,a=t?.client,s=s||!!t}if(!r)return new Gr({...t,client:a,tracingEnabled:s,project_name:n});return new Gr({name:r.name,id:r.id,trace_id:r.trace_id,dotted_order:r.dotted_order,client:a,tracingEnabled:s,project_name:n,tags:[...new Set((r?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...r?.extra?.metadata,...e?.metadata}}}).createChild(t)}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const i="get"in e&&"function"===typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,r=i["langsmith-trace"];if(!r||"string"!==typeof r)return;const n=r.trim(),a=n.split(".").map((e=>{const[t,i]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:i}})),s=a[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:a.at(-1)?.uuid,trace_id:s,dotted_order:n};if(i.baggage&&"string"===typeof i.baggage){const e=Vr.fromHeader(i.baggage);o.metadata=e.metadata,o.tags=e.tags}return new Gr(o)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new Vr(this.extra?.metadata,this.tags).toHeader()};if(e)for(const[i,r]of Object.entries(t))e.set(i,r);return t}}function Yr(e){return"object"===typeof e&&null!=e&&"string"===typeof e.name&&"langchain_tracer"===e.name}function Wr(e){return Array.isArray(e)&&e.some((e=>Yr(e)))}Object.defineProperty(Gr,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});const Xr="0.1.68";class Zr extends Hi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:i,client:r}=e;this.projectName=i??$i("LANGCHAIN_PROJECT")??$i("LANGCHAIN_SESSION"),this.exampleId=t,this.client=r??new zr({})}async _convertToCreate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{...e,extra:{...e.extra,runtime:await Mi()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}}let qr;async function Kr(e,t){!0===t?await e():("undefined"===typeof qr&&(qr=new(0,H.default)({autoStart:!0,concurrency:1})),qr.add(e))}"true"===$i("LANGCHAIN_TRACING_V2")&&"true"!==$i("LANGCHAIN_CALLBACKS_BACKGROUND")&&["[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.","[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,",'[WARN]: we suggest setting "process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true" to avoid additional latency.'].join("\n");class Jr{setHandler(e){return this.setHandlers([e])}}class Qr{constructor(e,t,i,r,n,a,s,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}async handleText(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleText: ${i}`)}}),t.awaitHandlers))))}}class en extends Qr{getChild(e){const t=new an(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleRetriever`)}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`)}}),t.awaitHandlers))))}}class tn extends Qr{async handleLLMNewToken(e,t,i,r,n,a){await Promise.all(this.handlers.map((i=>Kr((async()=>{if(!i.ignoreLLM)try{await(i.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(r){console.error(`Error in handler ${i.constructor.name}, handleLLMNewToken: ${r}`)}}),i.awaitHandlers))))}async handleLLMError(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`)}}),t.awaitHandlers))))}async handleLLMEnd(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${i}`)}}),t.awaitHandlers))))}}class rn extends Qr{getChild(e){const t=new an(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,i,r,n){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,n))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${e}`)}}),t.awaitHandlers))))}async handleChainEnd(e,t,i,r,n){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,n))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${i}`)}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`)}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`)}}),t.awaitHandlers))))}}class nn extends Qr{getChild(e){const t=new an(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${e}`)}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>Kr((async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`)}}),t.awaitHandlers))))}}class an extends Jr{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,a)=>{const s=0===a&&i?i:Di();return await Promise.all(this.handlers.map((i=>Kr((async()=>{if(!i.ignoreLLM)try{await(i.handleLLMStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n))}catch(a){console.error(`Error in handler ${i.constructor.name}, handleLLMStart: ${a}`)}}),i.awaitHandlers)))),new tn(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,a)=>{const s=0===a&&i?i:Di();return await Promise.all(this.handlers.map((i=>Kr((async()=>{if(!i.ignoreLLM)try{if(i.handleChatModelStart)await(i.handleChatModelStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n));else if(i.handleLLMStart){const a=k(t);await(i.handleLLMStart?.(e,[a],s,this._parentRunId,r,this.tags,this.metadata,n))}}catch(a){console.error(`Error in handler ${i.constructor.name}, handleLLMStart: ${a}`)}}),i.awaitHandlers)))),new tn(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Di(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((a=>Kr((async()=>{if(!a.ignoreChain)try{await(a.handleChainStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r,n))}catch(s){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${s}`)}}),a.awaitHandlers)))),new rn(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Di(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((n=>Kr((async()=>{if(!n.ignoreAgent)try{await(n.handleToolStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r))}catch(a){console.error(`Error in handler ${n.constructor.name}, handleToolStart: ${a}`)}}),n.awaitHandlers)))),new nn(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Di(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((n=>Kr((async()=>{if(!n.ignoreRetriever)try{await(n.handleRetrieverStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r))}catch(a){console.error(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${a}`)}}),n.awaitHandlers)))),new en(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers=[],this.inheritableHandlers=[];for(const i of e)this.addHandler(i,t)}addTags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new an(this._parentRunId);for(const r of this.handlers){const e=this.inheritableHandlers.includes(r);i.addHandler(r,e)}for(const r of this.tags){const e=this.inheritableTags.includes(r);i.addTags([r],e)}for(const r of Object.keys(this.metadata)){const e=Object.keys(this.inheritableMetadata).includes(r);i.addMetadata({[r]:this.metadata[r]},e)}for(const r of e)i.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===r.name))||i.addHandler(r,t);return i}static fromHandlers(e){const t=new this;return t.addHandler(new class extends Bi{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Di()}),Object.assign(this,e)}}),t}static async configure(e,t,i,r,n,a,s){let o;(e||t)&&(Array.isArray(e)||!e?(o=new an,o.setHandlers(e?.map(sn)??[],!0)):o=e,o=o.copy(Array.isArray(t)?t.map(sn):t?.handlers,!1));const l="true"===$i("LANGCHAIN_VERBOSE")||s?.verbose,u="true"===$i("LANGCHAIN_TRACING_V2"),c=u||($i("LANGCHAIN_TRACING")??!1);if(l||c){if(o||(o=new an),l&&!o.handlers.some((e=>e.name===Xi.prototype.name))){const e=new Xi;o.addHandler(e,!0)}c&&!o.handlers.some((e=>"langchain_tracer"===e.name))&&u&&o.addHandler(await async function(){return new Zr}(),!0)}return(i||r)&&o&&(o.addTags(i??[]),o.addTags(r??[],!1)),(n||a)&&o&&(o.addMetadata(n??{}),o.addMetadata(a??{},!1)),o}}function sn(e){return"name"in e?e:Bi.fromMethods(e)}const on=Object.prototype.hasOwnProperty;function ln(e,t){return on.call(e,t)}function un(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function cn(e){let t=0;const i=e.length;let r;for(;t<i;){if(r=e.charCodeAt(t),!(r>=48&&r<=57))return!1;t++}return!0}function hn(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function dn(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function pn(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(pn(e[i]))return!0}else if("object"===typeof e){const i=function(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let i in e)ln(e,i)&&t.push(i);return t}(e),r=i.length;for(var t=0;t<r;t++)if(pn(e[i[t]]))return!0}return!1}function fn(e,t){const i=[e];for(const r in t){const e="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof e&&i.push(`${r}: ${e}`)}return i.join("\n")}class mn extends Error{constructor(e,t,i,r,n){super(fn(e,{name:t,index:i,operation:r,tree:n})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.setPrototypeOf(this,new.target.prototype),this.message=fn(e,{name:t,index:i,operation:r,tree:n})}}const gn=mn,bn=un,yn={add:function(e,t,i){return e[t]=this.value,{newDocument:i}},remove:function(e,t,i){var r=e[t];return delete e[t],{newDocument:i,removed:r}},replace:function(e,t,i){var r=e[t];return e[t]=this.value,{newDocument:i,removed:r}},move:function(e,t,i){let r=_n(i,this.path);r&&(r=un(r));const n=wn(i,{op:"remove",path:this.from}).removed;return wn(i,{op:"add",path:this.path,value:n}),{newDocument:i,removed:r}},copy:function(e,t,i){const r=_n(i,this.from);return wn(i,{op:"add",path:this.path,value:un(r)}),{newDocument:i}},test:function(e,t,i){return{newDocument:i,test:Sn(e[t],this.value)}},_get:function(e,t,i){return this.value=e[t],{newDocument:i}}};var vn={add:function(e,t,i){return cn(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:i,index:t}},remove:function(e,t,i){return{newDocument:i,removed:e.splice(t,1)[0]}},replace:function(e,t,i){var r=e[t];return e[t]=this.value,{newDocument:i,removed:r}},move:yn.move,copy:yn.copy,test:yn.test,_get:yn._get};function _n(e,t){if(""==t)return e;var i={op:"_get",path:t};return wn(e,i),i.value}function wn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i&&("function"==typeof i?i(t,0,e,t.path):En(t,0)),""===t.path){let r={newDocument:e};if("add"===t.op)return r.newDocument=t.value,r;if("replace"===t.op)return r.newDocument=t.value,r.removed=e,r;if("move"===t.op||"copy"===t.op)return r.newDocument=_n(e,t.from),"move"===t.op&&(r.removed=e),r;if("test"===t.op){if(r.test=Sn(e,t.value),!1===r.test)throw new gn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return r.newDocument=e,r}if("remove"===t.op)return r.removed=e,r.newDocument=null,r;if("_get"===t.op)return t.value=e,r;if(i)throw new gn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return r}{r||(e=un(e));const s=(t.path||"").split("/");let o,l,u,c=e,h=1,d=s.length;for(u="function"==typeof i?i:En;;){if(l=s[h],l&&-1!=l.indexOf("~")&&(l=dn(l)),n&&("__proto__"==l||"prototype"==l&&h>0&&"constructor"==s[h-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&void 0===o&&(void 0===c[l]?o=s.slice(0,h).join("/"):h==d-1&&(o=t.path),void 0!==o&&u(t,0,e,o)),h++,Array.isArray(c)){if("-"===l)l=c.length;else{if(i&&!cn(l))throw new gn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);cn(l)&&(l=~~l)}if(h>=d){if(i&&"add"===t.op&&l>c.length)throw new gn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);const r=vn[t.op].call(t,c,l,e);if(!1===r.test)throw new gn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return r}}else if(h>=d){const i=yn[t.op].call(t,c,l,e);if(!1===i.test)throw new gn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}if(c=c[l],i&&h<d&&(!c||"object"!==typeof c))throw new gn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function xn(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i&&!Array.isArray(t))throw new gn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=un(e));const a=new Array(t.length);for(let s=0,o=t.length;s<o;s++)a[s]=wn(e,t[s],i,!0,n,s),e=a[s].newDocument;return a.newDocument=e,a}function Pn(e,t,i){const r=wn(e,t);if(!1===r.test)throw new gn("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return r.newDocument}function En(e,t,i,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new gn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,i);if(!yn[e.op])throw new gn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,i);if("string"!==typeof e.path)throw new gn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new gn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new gn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new gn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&pn(e.value))throw new gn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,i);if(i)if("add"==e.op){var n=e.path.split("/").length,a=r.split("/").length;if(n!==a+1&&n!==a)throw new gn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new gn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,i)}else if("move"===e.op||"copy"===e.op){var s=kn([{op:"_get",path:e.from,value:void 0}],i);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new gn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,i)}}function kn(e,t,i){try{if(!Array.isArray(e))throw new gn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)xn(un(t),un(e),i||!0);else{i=i||En;for(var r=0;r<e.length;r++)i(e[r],r,t,void 0)}}catch(n){if(n instanceof gn)return n;throw n}}function Sn(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var i,r,n,a=Array.isArray(e),s=Array.isArray(t);if(a&&s){if((r=e.length)!=t.length)return!1;for(i=r;0!==i--;)if(!Sn(e[i],t[i]))return!1;return!0}if(a!=s)return!1;var o=Object.keys(e);if((r=o.length)!==Object.keys(t).length)return!1;for(i=r;0!==i--;)if(!t.hasOwnProperty(o[i]))return!1;for(i=r;0!==i--;)if(!Sn(e[n=o[i]],t[n]))return!1;return!0}return e!==e&&t!==t}new WeakMap;class On extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new On({start:e=>function i(){return t.read().then((t=>{let{done:r,value:n}=t;if(!r)return e.enqueue(n),i();e.close()}))}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new On({async pull(t){const{value:i,done:r}=await e.next();r&&t.close(),t.enqueue(i)},async cancel(t){await e.return(t)}})}}function Tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Array.from({length:t},(()=>[]));return i.map((async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of i)e.push(t)}else{if(t[0].done)return;yield t.shift().value}}))}function An(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"===typeof e&&"string"===typeof t)return e+t;if("number"===typeof e&&"number"===typeof t)return e+t;if("concat"in e&&"function"===typeof e.concat)return e.concat(t);if("object"===typeof e&&"object"===typeof t){const i={...e};for(const[e,r]of Object.entries(t))e in i&&!Array.isArray(i[e])?i[e]=An(i[e],r):i[e]=r;return i}throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}class Cn{constructor(e,t){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e,this.setup=new Promise(((i,r)=>{this.firstResult=e.next(),t?this.firstResult.then(t).then(i,r):this.firstResult.then((e=>i(void 0)),r)}))}async next(){return this.firstResultUsed?this.generator.next(...arguments):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}}class Rn{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),i=xn({},t);return new In({ops:t,state:i[i.length-1].newDocument})}}class In extends Rn{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),i=xn(this.state,e.ops);return new In({ops:t,state:i[i.length-1].newDocument})}static fromRunLogPatch(e){const t=xn({},e.ops);return new In({ops:e.ops,state:t[t.length-1].newDocument})}}async function Dn(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:i}=e;return["retriever","llm","prompt"].includes(e.run_type)?i:1!==Object.keys(i).length||""!==i?.input?i.input:void 0}async function jn(e,t){const{outputs:i}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?i:void 0!==i&&1===Object.keys(i).length&&void 0!==i?.output?i.output:i}class Ln extends Hi{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=On.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let i=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(i=i||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(i=i||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(i=i||void 0!==t.find((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(i=i&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(i=i&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(i=i&&t.every((e=>!this.excludeTags?.includes(e)))),i}async*tapOutputIterable(e,t){for await(const i of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new Rn({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:i}]}))}yield i}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new Rn({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const i={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(i.inputs=await Dn(e,this._schemaFormat)),await this.writer.write(new Rn({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:i}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const i=[];"streaming_events"===this._schemaFormat&&i.push({op:"replace",path:`/logs/${t}/inputs`,value:await Dn(e,this._schemaFormat)}),i.push({op:"add",path:`/logs/${t}/final_output`,value:await jn(e,this._schemaFormat)}),void 0!==e.end_time&&i.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const r=new Rn({ops:i});await this.writer.write(r)}finally{if(e.id===this.rootId){const t=new Rn({ops:[{op:"replace",path:"/final_output",value:await jn(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,i){const r=this.keyMapByRunId[e.id];if(void 0===r)return;let n;var a;void 0!==e.inputs.messages?(a=i?.chunk,n=void 0!==a&&void 0!==a.message?i?.chunk:new w(t)):n=t;const s=new Rn({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${r}/streamed_output/-`,value:n}]});await this.writer.write(s)}}class Nn{getStore(){}run(e,t){return t()}}const Mn=new class{constructor(){Object.defineProperty(this,"asyncLocalStorage",{enumerable:!0,configurable:!0,writable:!0,value:new Nn}),Object.defineProperty(this,"hasBeenInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getInstance(){return this.asyncLocalStorage}initializeGlobalInstance(e){this.hasBeenInitialized||(this.hasBeenInitialized=!0,this.asyncLocalStorage=e)}};async function $n(e){return an.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function Fn(){const e={};for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(const n of i.filter((e=>!!e)))for(const t of Object.keys(n))if("metadata"===t)e[t]={...e[t],...n[t]};else if("tags"===t){const i=e[t]??[];e[t]=[...new Set(i.concat(n[t]??[]))]}else if("configurable"===t)e[t]={...e[t],...n[t]};else if("callbacks"===t){const t=e.callbacks,i=n.callbacks;if(Array.isArray(i))if(t)if(Array.isArray(t))e.callbacks=t.concat(i);else{const r=t.copy();for(const e of i)r.addHandler(sn(e),!0);e.callbacks=r}else e.callbacks=i;else if(i)if(t)if(Array.isArray(t)){const r=i.copy();for(const e of t)r.addHandler(sn(e),!0);e.callbacks=r}else e.callbacks=new an(i._parentRunId,{handlers:t.handlers.concat(i.handlers),inheritableHandlers:t.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(t.tags.concat(i.tags))),inheritableTags:Array.from(new Set(t.inheritableTags.concat(i.inheritableTags))),metadata:{...t.metadata,...i.metadata}});else e.callbacks=i}else{const i=t;e[i]=n[i]??e[i]}return e}const Bn=new Set(["string","number","boolean"]);function Un(e){const t=e??Mn.getInstance().getStore();let i={tags:[],metadata:{},callbacks:void 0,recursionLimit:25,runId:void 0};if(t&&(i={...i,...t}),t?.configurable)for(const r of Object.keys(t.configurable))Bn.has(typeof t.configurable[r])&&!i.metadata?.[r]&&(i.metadata||(i.metadata={}),i.metadata[r]=t.configurable[r]);return i}function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{callbacks:t,maxConcurrency:i,recursionLimit:r,runName:n,configurable:a,runId:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Un(e);return void 0!==t&&(delete o.runName,o.callbacks=t),void 0!==r&&(o.recursionLimit=r),void 0!==i&&(o.maxConcurrency=i),void 0!==n&&(o.runName=n),void 0!==a&&(o.configurable={...o.configurable,...a}),void 0!==s&&delete o.runId,o}class Hn extends Hi{constructor(e){let{config:t,onStart:i,onEnd:r,onError:n}=e;super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=i,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(1===this.argOnStart.length?await this.argOnStart(e):2===this.argOnStart.length&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(1===this.argOnError.length?await this.argOnError(e):2===this.argOnError.length&&await this.argOnError(e,this.config)):this.argOnEnd&&(1===this.argOnEnd.length?await this.argOnEnd(e):2===this.argOnEnd.length&&await this.argOnEnd(e,this.config)))}}function Vn(e){return!!e&&e.lc_runnable}class Gn{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let i=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const r=e.tags??[];return void 0!==this.includeNames&&(i=i||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(i=i||this.includeTypes.includes(t)),void 0!==this.includeTags&&(i=i||r.some((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(i=i&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(i=i&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(i=i&&r.every((e=>!this.excludeTags?.includes(e)))),i}}const Yn=Symbol("Let zodToJsonSchema decide on which parser to use"),Wn={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Xn=e=>{const t=(e=>"string"===typeof e?{...Wn,name:e}:{...Wn,...e})(e),i=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:i,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map((e=>{let[i,r]=e;return[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,i],jsonSchema:void 0}]})))}};function Zn(e,t,i,r){r?.errorMessages&&i&&(e.errorMessage={...e.errorMessage,[t]:i})}function qn(e,t,i,r,n){e[t]=i,Zn(e,t,r,n)}function Kn(e,t){return Ea(e.type._def,t)}function Jn(e,t,i){const r=i??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(((i,r)=>Jn(e,t,i)))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Qn(e,t)}}const Qn=(e,t)=>{const i={type:"integer",format:"unix-time"};if("openApi3"===t.target)return i;for(const r of e.checks)switch(r.kind){case"min":qn(i,"minimum",r.value,r.message,t);break;case"max":qn(i,"maximum",r.value,r.message,t)}return i};let ea;const ta=/^[cC][^\s-]{8,}$/,ia=/^[0-9a-z]+$/,ra=/^[0-9A-HJKMNP-TV-Z]{26}$/,na=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,aa=()=>(void 0===ea&&(ea=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ea),sa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oa=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,la=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ua=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ca=/^[a-zA-Z0-9_-]{21}$/,ha=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function da(e,t){const i={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":qn(i,"minLength","number"===typeof i.minLength?Math.max(i.minLength,r.value):r.value,r.message,t);break;case"max":qn(i,"maxLength","number"===typeof i.maxLength?Math.min(i.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":ma(i,"email",r.message,t);break;case"format:idn-email":ma(i,"idn-email",r.message,t);break;case"pattern:zod":ga(i,na,r.message,t)}break;case"url":ma(i,"uri",r.message,t);break;case"uuid":ma(i,"uuid",r.message,t);break;case"regex":ga(i,r.regex,r.message,t);break;case"cuid":ga(i,ta,r.message,t);break;case"cuid2":ga(i,ia,r.message,t);break;case"startsWith":ga(i,RegExp(`^${pa(r.value,t)}`),r.message,t);break;case"endsWith":ga(i,RegExp(`${pa(r.value,t)}$`),r.message,t);break;case"datetime":ma(i,"date-time",r.message,t);break;case"date":ma(i,"date",r.message,t);break;case"time":ma(i,"time",r.message,t);break;case"duration":ma(i,"duration",r.message,t);break;case"length":qn(i,"minLength","number"===typeof i.minLength?Math.max(i.minLength,r.value):r.value,r.message,t),qn(i,"maxLength","number"===typeof i.maxLength?Math.min(i.maxLength,r.value):r.value,r.message,t);break;case"includes":ga(i,RegExp(pa(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&ma(i,"ipv4",r.message,t),"v4"!==r.version&&ma(i,"ipv6",r.message,t);break;case"base64url":ga(i,ua,r.message,t);break;case"jwt":ga(i,ha,r.message,t);break;case"cidr":"v6"!==r.version&&ga(i,sa,r.message,t),"v4"!==r.version&&ga(i,oa,r.message,t);break;case"emoji":ga(i,aa(),r.message,t);break;case"ulid":ga(i,ra,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":ma(i,"binary",r.message,t);break;case"contentEncoding:base64":qn(i,"contentEncoding","base64",r.message,t);break;case"pattern:zod":ga(i,la,r.message,t)}break;case"nanoid":ga(i,ca,r.message,t)}return i}function pa(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let i=0;i<e.length;i++)fa.has(e[i])||(t+="\\"),t+=e[i];return t}(e):e}const fa=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ma(e,t,i,r){e.format||e.anyOf?.some((e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...i&&r.errorMessages&&{errorMessage:{format:i}}})):qn(e,"format",t,i,r)}function ga(e,t,i,r){e.pattern||e.allOf?.some((e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:ba(t,r),...i&&r.errorMessages&&{errorMessage:{pattern:i}}})):qn(e,"pattern",ba(t,r),i,r)}function ba(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const i=e.flags.includes("i"),r=e.flags.includes("m"),n=e.flags.includes("s"),a=i?e.source.toLowerCase():e.source;let s="",o=!1,l=!1,u=!1;for(let c=0;c<a.length;c++)if(o)s+=a[c],o=!1;else{if(i)if(l){if(a[c].match(/[a-z]/)){u?(s+=a[c],s+=`${a[c-2]}-${a[c]}`.toUpperCase(),u=!1):"-"===a[c+1]&&a[c+2]?.match(/[a-z]/)?(s+=a[c],u=!0):s+=`${a[c]}${a[c].toUpperCase()}`;continue}}else if(a[c].match(/[a-z]/)){s+=`[${a[c]}${a[c].toUpperCase()}]`;continue}if(r){if("^"===a[c]){s+="(^|(?<=[\r\n]))";continue}if("$"===a[c]){s+="($|(?=[\r\n]))";continue}}n&&"."===a[c]?s+=l?`${a[c]}\r\n`:`[${a[c]}\r\n]`:(s+=a[c],"\\"===a[c]?o=!0:l&&"]"===a[c]?l=!1:l||"["!==a[c]||(l=!0))}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function ya(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===Ht.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce(((i,r)=>({...i,[r]:Ea(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??{}})),{}),additionalProperties:t.rejectedAdditionalProperties};const i={type:"object",additionalProperties:Ea(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return i;if(e.keyType?._def.typeName===Ht.ZodString&&e.keyType._def.checks?.length){const{type:r,...n}=da(e.keyType._def,t);return{...i,propertyNames:n}}if(e.keyType?._def.typeName===Ht.ZodEnum)return{...i,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===Ht.ZodBranded&&e.keyType._def.type._def.typeName===Ht.ZodString&&e.keyType._def.type._def.checks?.length){const{type:r,...n}=Kn(e.keyType._def,t);return{...i,propertyNames:n}}return i}const va={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const _a=(e,t)=>{const i=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,i)=>Ea(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${i}`]}))).filter((e=>!!e&&(!t.strictUnions||"object"===typeof e&&Object.keys(e).length>0)));return i.length?{anyOf:i}:void 0};function wa(e,t){const i="openAi"===t.target,r={type:"object",properties:{}},n=[],a=e.shape();for(const o in a){let e=a[o];if(void 0===e||void 0===e._def)continue;let s=xa(e);s&&i&&(e instanceof Rt&&(e=e._def.innerType),e.isNullable()||(e=e.nullable()),s=!1);const l=Ea(e._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});void 0!==l&&(r.properties[o]=l,s||n.push(o))}n.length&&(r.required=n);const s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return Ea(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(r.additionalProperties=s),r}function xa(e){try{return e.isOptional()}catch{return!0}}const Pa=(e,t,i)=>{switch(t){case Ht.ZodString:return da(e,i);case Ht.ZodNumber:return function(e,t){const i={type:"number"};if(!e.checks)return i;for(const r of e.checks)switch(r.kind){case"int":i.type="integer",Zn(i,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?qn(i,"minimum",r.value,r.message,t):qn(i,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(i.exclusiveMinimum=!0),qn(i,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?qn(i,"maximum",r.value,r.message,t):qn(i,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(i.exclusiveMaximum=!0),qn(i,"maximum",r.value,r.message,t));break;case"multipleOf":qn(i,"multipleOf",r.value,r.message,t)}return i}(e,i);case Ht.ZodObject:return wa(e,i);case Ht.ZodBigInt:return function(e,t){const i={type:"integer",format:"int64"};if(!e.checks)return i;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?qn(i,"minimum",r.value,r.message,t):qn(i,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(i.exclusiveMinimum=!0),qn(i,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?qn(i,"maximum",r.value,r.message,t):qn(i,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(i.exclusiveMaximum=!0),qn(i,"maximum",r.value,r.message,t));break;case"multipleOf":qn(i,"multipleOf",r.value,r.message,t)}return i}(e,i);case Ht.ZodBoolean:return{type:"boolean"};case Ht.ZodDate:return Jn(e,i);case Ht.ZodUndefined:return{not:{}};case Ht.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(i);case Ht.ZodArray:return function(e,t){const i={type:"array"};return e.type?._def&&e.type?._def?.typeName!==Ht.ZodAny&&(i.items=Ea(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&qn(i,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&qn(i,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(qn(i,"minItems",e.exactLength.value,e.exactLength.message,t),qn(i,"maxItems",e.exactLength.value,e.exactLength.message,t)),i}(e,i);case Ht.ZodUnion:case Ht.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return _a(e,t);const i=e.options instanceof Map?Array.from(e.options.values()):e.options;if(i.every((e=>e._def.typeName in va&&(!e._def.checks||!e._def.checks.length)))){const e=i.reduce(((e,t)=>{const i=va[t._def.typeName];return i&&!e.includes(i)?[...e,i]:e}),[]);return{type:e.length>1?e:e[0]}}if(i.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=i.reduce(((e,t)=>{const i=typeof t._def.value;switch(i){case"string":case"number":case"boolean":return[...e,i];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===i.length){const t=e.filter(((e,t,i)=>i.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:i.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(i.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:i.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return _a(e,t)}(e,i);case Ht.ZodIntersection:return function(e,t){const i=[Ea(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Ea(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter((e=>!!e));let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const n=[];return i.forEach((e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:i,...r}=e;t=r}else r=void 0;n.push(t)}else n.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);var t})),n.length?{allOf:n,...r}:void 0}(e,i);case Ht.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,i)=>Ea(e._def,{...t,currentPath:[...t.currentPath,"items",`${i}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:Ea(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,i)=>Ea(e._def,{...t,currentPath:[...t.currentPath,"items",`${i}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}(e,i);case Ht.ZodRecord:return ya(e,i);case Ht.ZodLiteral:return function(e,t){const i=typeof e.value;return"bigint"!==i&&"number"!==i&&"boolean"!==i&&"string"!==i?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===i?"integer":i,enum:[e.value]}:{type:"bigint"===i?"integer":i,const:e.value}}(e,i);case Ht.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case Ht.ZodNativeEnum:return function(e){const t=e.values,i=Object.keys(e.values).filter((e=>"number"!==typeof t[t[e]])),r=i.map((e=>t[e])),n=Array.from(new Set(r.map((e=>typeof e))));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case Ht.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:va[e.innerType._def.typeName],nullable:!0}:{type:[va[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const i=Ea(e.innerType._def,{...t,currentPath:[...t.currentPath]});return i&&"$ref"in i?{allOf:[i],nullable:!0}:i&&{...i,nullable:!0}}const i=Ea(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return i&&{anyOf:[i,{type:"null"}]}}(e,i);case Ht.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Ea(e.innerType._def,t);const i=Ea(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return i?{anyOf:[{not:{}},i]}:{}})(e,i);case Ht.ZodMap:return function(e,t){return"record"===t.mapStrategy?ya(e,t):{type:"array",maxItems:125,items:{type:"array",items:[Ea(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},Ea(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,i);case Ht.ZodSet:return function(e,t){const i={type:"array",uniqueItems:!0,items:Ea(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&qn(i,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&qn(i,"maxItems",e.maxSize.value,e.maxSize.message,t),i}(e,i);case Ht.ZodLazy:return()=>e.getter()._def;case Ht.ZodPromise:return function(e,t){return Ea(e.type._def,t)}(e,i);case Ht.ZodNaN:case Ht.ZodNever:return{not:{}};case Ht.ZodEffects:return function(e,t){return"input"===t.effectStrategy?Ea(e.schema._def,t):{}}(e,i);case Ht.ZodAny:case Ht.ZodUnknown:return{};case Ht.ZodDefault:return function(e,t){return{...Ea(e.innerType._def,t),default:e.defaultValue()}}(e,i);case Ht.ZodBranded:return Kn(e,i);case Ht.ZodReadonly:case Ht.ZodCatch:return((e,t)=>Ea(e.innerType._def,t))(e,i);case Ht.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return Ea(e.in._def,t);if("output"===t.pipeStrategy)return Ea(e.out._def,t);const i=Ea(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[i,Ea(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",i?"1":"0"]})].filter((e=>void 0!==e))}})(e,i);case Ht.ZodFunction:case Ht.ZodVoid:case Ht.ZodSymbol:default:return}};function Ea(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.seen.get(e);if(t.override){const n=t.override?.(e,t,r,i);if(n!==Yn)return n}if(r&&!i){const e=ka(r,t);if(void 0!==e)return e}const n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);const a=Pa(e,e.typeName,t),s="function"===typeof a?Ea(a(),t):a;if(s&&Oa(e,t,s),t.postProcess){const i=t.postProcess(s,e,t);return n.jsonSchema=s,i}return n.jsonSchema=s,s}const ka=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Sa(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every(((e,i)=>t.currentPath[i]===e))?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},Sa=(e,t)=>{let i=0;for(;i<e.length&&i<t.length&&e[i]===t[i];i++);return[(e.length-i).toString(),...t.slice(i)].join("/")},Oa=(e,t,i)=>(e.description&&(i.description=e.description,t.markdownDescription&&(i.markdownDescription=e.description)),i),Ta=(e,t)=>{const i=Xn(t),r="object"===typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:Ea(n._def,{...i,currentPath:[...i.basePath,i.definitionPath,r]},!0)??{}}}),{}):void 0,n="string"===typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,a=Ea(e._def,void 0===n?i:{...i,currentPath:[...i.basePath,i.definitionPath,n]},!1)??{},s="object"===typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(a.title=s);const o=void 0===n?r?{...a,[i.definitionPath]:r}:a:{$ref:[..."relative"===i.$refStrategy?[]:i.basePath,i.definitionPath,n].join("/"),[i.definitionPath]:{...r,[n]:a}};return"jsonSchema7"===i.target?o.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==i.target&&"openAi"!==i.target||(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===i.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o},Aa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Ca=function(e){return"string"===typeof e&&Aa.test(e)};function Ra(e){return Vn(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...Ta(e.data.schema),title:e.data.name}}}class Ia{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const e={};return Object.values(this.nodes).forEach(((t,i)=>{e[t.id]=Ca(t.id)?i:t.id})),{nodes:Object.values(this.nodes).map((t=>({id:e[t.id],...Ra(t)}))),edges:this.edges.map((t=>t.data?{source:e[t.source],target:e[t.target],data:t.data}:{source:e[t.source],target:e[t.target]}))}}addNode(e,t){if(void 0!==t&&void 0!==this.nodes[t])throw new Error(`Node with id ${t} already exists`);const i=t||Di(),r={id:i,data:e};return this.nodes[i]=r,r}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter((t=>t.source!==e.id&&t.target!==e.id))}addEdge(e,t,i){if(void 0===this.nodes[e.id])throw new Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw new Error(`Target node ${t.id} not in graph`);const r={source:e.id,target:t.id,data:i};return this.edges.push(r),r}firstNode(){const e=new Set(this.edges.map((e=>e.target))),t=[];return Object.values(this.nodes).forEach((i=>{e.has(i.id)||t.push(i)})),t[0]}lastNode(){const e=new Set(this.edges.map((e=>e.source))),t=[];return Object.values(this.nodes).forEach((i=>{e.has(i.id)||t.push(i)})),t[0]}extend(e){Object.entries(e.nodes).forEach((e=>{let[t,i]=e;this.nodes[t]=i})),this.edges=[...this.edges,...e.edges]}trimFirstNode(){const e=this.firstNode();if(e){const t=this.edges.filter((t=>t.source===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}trimLastNode(){const e=this.lastNode();if(e){const t=this.edges.filter((t=>t.target===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}}function Da(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.iterator]&&"function"===typeof e.next}function ja(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]}function*La(e,t){const i=Mn.getInstance();for(;;){const{value:r,done:n}=i.run(e,t.next.bind(t));if(n)break;yield r}}async function*Na(e,t){const i=Mn.getInstance(),r=t[Symbol.asyncIterator]();for(;;){const{value:n,done:a}=await i.run(e,r.next.bind(t));if(a)break;yield n}}function Ma(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!==typeof e?{[t]:e}:e}class $a extends p{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new Fa({bound:this,kwargs:e,config:{}})}map(){return new Ba({bound:this})}withRetry(e){return new Ua({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new Fa({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new Ga({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Un);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const i=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return"runId"!==t})));return Array.from({length:t},((t,r)=>Un(0===r?e:i)))}return Array.from({length:t},(()=>Un(e)))}async batch(e,t,i){const r=this._getOptionsList(t??{},e.length),n=r[0]?.maxConcurrency??i?.maxConcurrency,a=new Y({maxConcurrency:n,onFailedAttempt:e=>{throw e}}),s=e.map(((e,t)=>a.call((async()=>{try{return await this.invoke(e,r[t])}catch(n){if(i?.returnExceptions)return n;throw n}}))));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const i=new Cn(this._streamIterator(e,Un(t)));return await i.setup,On.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let t;t=Un(void 0===e?e:{callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId});const i={...e};return delete i.callbacks,delete i.tags,delete i.metadata,delete i.runName,delete i.configurable,delete i.recursionLimit,delete i.maxConcurrency,delete i.runId,[t,i]}async _callWithConfig(e,t,i){const r=Un(i),n=await $n(r),a=await(n?.handleChainStart(this.toJSON(),Ma(t,"input"),r.runId,r?.runType,void 0,void 0,r?.runName??this.getName()));let s;delete r.runId;try{s=await e.call(this,t,r,a)}catch(o){throw await(a?.handleChainError(o)),o}return await(a?.handleChainEnd(Ma(s,"output"))),s}async _batchWithConfig(e,t,i,r){const n=this._getOptionsList(i??{},t.length),a=await Promise.all(n.map($n)),s=await Promise.all(a.map((async(e,i)=>{const r=await(e?.handleChainStart(this.toJSON(),Ma(t[i],"input"),n[i].runId,n[i].runType,void 0,void 0,n[i].runName??this.getName()));return delete n[i].runId,r})));let o;try{o=await e.call(this,t,n,s,r)}catch(l){throw await Promise.all(s.map((e=>e?.handleChainError(l)))),l}return await Promise.all(s.map((e=>e?.handleChainEnd(Ma(o,"output"))))),o}async*_transformStreamWithConfig(e,t,i){let r,n,a=!0,s=!0;const o=Un(i),l=await $n(o);let u;try{const i=await async function(e,t,i){const r=new Cn(t,i),n=await r.setup;for(var a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];return{output:e(r,n,...s),setup:n}}(t.bind(this),async function*(){for await(const t of e){if(a)if(void 0===r)r=t;else try{r=An(r,t)}catch{r=void 0,a=!1}yield t}}(),(async()=>l?.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName())),o);delete o.runId,u=i.setup;const c=e=>"log_stream_tracer"===e.name,h=u?.handlers.find(c);let d=i.output;void 0!==h&&void 0!==u&&(d=await h.tapOutputIterable(u.runId,i.output));for await(const e of d)if(yield e,s)if(void 0===n)n=e;else try{n=An(n,e)}catch{n=void 0,s=!1}}catch(c){throw await(u?.handleChainError(c,void 0,void 0,void 0,{inputs:Ma(r,"input")})),c}await(u?.handleChainEnd(n??{},void 0,void 0,void 0,{inputs:Ma(r,"input")}))}getGraph(e){const t=new Ia,i=t.addNode({name:`${this.getName()}Input`,schema:Si.any()}),r=t.addNode(this),n=t.addNode({name:`${this.getName()}Output`,schema:Si.any()});return t.addEdge(i,r),t.addEdge(r,n),t}pipe(e){return new za({first:this,last:Ya(e)})}pick(e){return this.pipe(new Xa(e))}assign(e){return this.pipe(new Wa(new Ha({steps:e})))}async*transform(e,t){let i;for await(const r of e)i=void 0===i?r:An(i,r);yield*this._streamIterator(i,Un(t))}async*streamLog(e,t,i){const r=new Ln({...i,autoClose:!1,_schemaFormat:"original"}),n=Un(t);yield*this._streamLog(e,r,n)}async*_streamLog(e,t,i){const{callbacks:r}=i;if(void 0===r)i.callbacks=[t];else if(Array.isArray(r))i.callbacks=r.concat([t]);else{const e=r.copy();e.inheritableHandlers.push(t),i.callbacks=e}const n=this.stream(e,i);const a=async function(){try{const e=await n;for await(const i of e){const e=new Rn({ops:[{op:"add",path:"/streamed_output/-",value:i}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await a}}async*streamEvents(e,t,i){if("text/event-stream"===t.encoding){const r=await this._streamEvents(e,t,i);yield*function(e){const t=new TextEncoder,i=new ReadableStream({async start(i){for await(const r of e)i.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(r)}\n\n`));i.enqueue(t.encode("event: end\n\n")),i.close()}});return On.fromReadableStream(i)}(r)}else yield*this._streamEvents(e,t,i)}async*_streamEvents(e,t,i){if("v1"!==t.version)throw new Error('Only version "v1" of the events schema is currently supported.');let r,n=!1;const a=Un(t),s=a.tags??[],o=a.metadata??{},l=a.runName??this.getName(),u=new Ln({...i,autoClose:!1,_schemaFormat:"streaming_events"}),c=new Gn({...i}),h=this._streamLog(e,u,a);for await(const p of h){if(r=r?r.concat(p):In.fromRunLogPatch(p),void 0===r.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!n){n=!0;const t={...r.state},i={run_id:t.id,event:`on_${t.type}_start`,name:l,tags:s,metadata:o,data:{input:e}};c.includeEvent(i,t.type)&&(yield i)}const t=p.ops.filter((e=>e.path.startsWith("/logs/"))).map((e=>e.path.split("/")[2])),i=[...new Set(t)];for(const e of i){let t,i={};const n=r.state.logs[e];if(t=void 0===n.end_time?n.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==n.inputs&&(i.input=n.inputs);else if("end"===t)void 0!==n.inputs&&(i.input=n.inputs),i.output=n.final_output;else if("stream"===t){const e=n.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${n.name}"`);i={chunk:n.streamed_output[0]},n.streamed_output=[]}yield{event:`on_${n.type}_${t}`,name:n.name,run_id:n.id,tags:n.tags,metadata:n.metadata,data:i}}const{state:a}=r;if(a.streamed_output.length>0){const e=a.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${a.name}"`);const t={chunk:a.streamed_output[0]};a.streamed_output=[];const i={event:`on_${a.type}_stream`,run_id:a.id,tags:s,metadata:o,name:l,data:t};c.includeEvent(i,a.type)&&(yield i)}}const d=r?.state;if(void 0!==d){const e={event:`on_${d.type}_end`,name:l,run_id:d.id,tags:s,metadata:o,data:{output:d.final_output}};c.includeEvent(e,d.type)&&(yield e)}}static isRunnable(e){return Vn(e)}withListeners(e){let{onStart:t,onEnd:i,onError:r}=e;return new Fa({bound:this,config:{},configFactories:[e=>({callbacks:[new Hn({config:e,onStart:t,onEnd:i,onError:r})]})]})}}class Fa extends $a{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=Fn(this.config,...t);return Fn(r,...this.configFactories?await Promise.all(this.configFactories.map((async e=>await e(r)))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Un(t),this.kwargs))}async batch(e,t,i){const r=Array.isArray(t)?await Promise.all(t.map((async e=>this._mergeConfig(Un(e),this.kwargs)))):await this._mergeConfig(Un(t),this.kwargs);return this.bound.batch(e,r,i)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Un(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Un(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Un(t),this.kwargs))}async*streamEvents(e,t,i){yield*this.bound.streamEvents(e,{...await this._mergeConfig(Un(t),this.kwargs),version:t.version},i)}static isRunnableBinding(e){return e.bound&&$a.isRunnable(e.bound)}withListeners(e){let{onStart:t,onEnd:i,onError:r}=e;return new Fa({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[e=>({callbacks:[new Hn({config:e,onStart:t,onEnd:i,onError:r})]})]})}}class Ba extends $a{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Ba({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,i){return this.bound.batch(e,zn(t,{callbacks:i?.getChild()}))}withListeners(e){let{onStart:t,onEnd:i,onError:r}=e;return new Ba({bound:this.bound.withListeners({onStart:t,onEnd:i,onError:r})})}}class Ua extends Fa{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,i){const r=e>1?`retry:attempt:${e}`:void 0;return zn(t,{callbacks:i?.getChild(r)})}async _invoke(e,t,i){return z((r=>super.invoke(e,this._patchConfigForRetry(r,t,i))),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,i,r){const n={};try{await z((async a=>{const s=e.map(((e,t)=>t)).filter((e=>void 0===n[e.toString()]||n[e.toString()]instanceof Error)),o=s.map((t=>e[t])),l=s.map((e=>this._patchConfigForRetry(a,t?.[e],i?.[e]))),u=await super.batch(o,l,{...r,returnExceptions:!0});let c;for(let e=0;e<u.length;e+=1){const t=u[e],i=s[e];t instanceof Error&&void 0===c&&(c=t,c.input=o[e]),n[i.toString()]=t}if(c)throw c;return u}),{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(!0!==r?.returnExceptions)throw a}return Object.keys(n).sort(((e,t)=>parseInt(e,10)-parseInt(t,10))).map((e=>n[parseInt(e,10)]))}async batch(e,t,i){return this._batchWithConfig(this._batch.bind(this),e,t,i)}}class za extends $a{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const i=Un(t),r=await $n(i),n=await(r?.handleChainStart(this.toJSON(),Ma(e,"input"),i.runId,void 0,void 0,void 0,i?.runName));delete i.runId;let a,s=e;try{const e=[this.first,...this.middle];for(let t=0;t<e.length;t+=1){const r=e[t];s=await r.invoke(s,zn(i,{callbacks:n?.getChild(`seq:step:${t+1}`)}))}a=await this.last.invoke(s,zn(i,{callbacks:n?.getChild(`seq:step:${this.steps.length}`)}))}catch(o){throw await(n?.handleChainError(o)),o}return await(n?.handleChainEnd(Ma(a,"output"))),a}async batch(e,t,i){const r=this._getOptionsList(t??{},e.length),n=await Promise.all(r.map($n)),a=await Promise.all(n.map((async(t,i)=>{const n=await(t?.handleChainStart(this.toJSON(),Ma(e[i],"input"),r[i].runId,void 0,void 0,void 0,r[i].runName));return delete r[i].runId,n})));let s=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e];s=await t.batch(s,a.map(((t,i)=>{const n=t?.getChild(`seq:step:${e+1}`);return zn(r[i],{callbacks:n})})),i)}}catch(o){throw await Promise.all(a.map((e=>e?.handleChainError(o)))),o}return await Promise.all(a.map((e=>e?.handleChainEnd(Ma(s,"output"))))),s}async*_streamIterator(e,t){const i=await $n(t),{runId:r,...n}=t??{},a=await(i?.handleChainStart(this.toJSON(),Ma(e,"input"),r,void 0,void 0,void 0,n?.runName)),s=[this.first,...this.middle,this.last];let o,l=!0;try{let t=s[0].transform(async function*(){yield e}(),zn(n,{callbacks:a?.getChild("seq:step:1")}));for(let e=1;e<s.length;e+=1){const i=s[e];t=await i.transform(t,zn(n,{callbacks:a?.getChild(`seq:step:${e+1}`)}))}for await(const e of t)if(yield e,l)if(void 0===o)o=e;else try{o=An(o,e)}catch(u){o=void 0,l=!1}}catch(u){throw await(a?.handleChainError(u)),u}await(a?.handleChainEnd(Ma(o,"output")))}getGraph(e){const t=new Ia;let i=null;return this.steps.forEach(((r,n)=>{const a=r.getGraph(e);0!==n&&a.trimFirstNode(),n!==this.steps.length-1&&a.trimLastNode(),t.extend(a);const s=a.firstNode();if(!s)throw new Error(`Runnable ${r} has no first node`);i&&t.addEdge(i,s),i=a.lastNode()})),t}pipe(e){return za.isRunnableSequence(e)?new za({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new za({first:this.first,middle:[...this.middle,this.last],last:Ya(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&$a.isRunnable(e)}static from(e,t){let[i,...r]=e;return new za({first:Ya(i),middle:r.slice(0,-1).map(Ya),last:Ya(r[r.length-1]),name:t})}}class Ha extends $a{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,i]of Object.entries(e.steps))this.steps[t]=Ya(i)}static from(e){return new Ha({steps:e})}async invoke(e,t){const i=Un(t),r=await $n(i),n=await(r?.handleChainStart(this.toJSON(),{input:e},i.runId,void 0,void 0,void 0,i?.runName));delete i.runId;const a={};try{await Promise.all(Object.entries(this.steps).map((async t=>{let[r,s]=t;a[r]=await s.invoke(e,zn(i,{callbacks:n?.getChild(`map:key:${r}`)}))})))}catch(s){throw await(n?.handleChainError(s)),s}return await(n?.handleChainEnd(a)),a}async*_transform(e,t,i){const r={...this.steps},n=Tn(e,Object.keys(r).length),a=new Map(Object.entries(r).map(((e,r)=>{let[a,s]=e;const o=s.transform(n[r],zn(i,{callbacks:t?.getChild(`map:key:${a}`)}));return[a,o.next().then((e=>({key:a,gen:o,result:e})))]})));for(;a.size;){const{key:e,result:t,gen:i}=await Promise.race(a.values());a.delete(e),t.done||(yield{[e]:t.value},a.set(e,i.next().then((t=>({key:e,gen:i,result:t})))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const i=new Cn(this.transform(async function*(){yield e}(),t));return await i.setup,On.fromAsyncGenerator(i)}}class Va extends $a{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new Va({func:e})}async _invoke(e,t,i){return new Promise(((r,n)=>{const a=zn(t,{callbacks:i?.getChild(),recursionLimit:(t?.recursionLimit??25)-1});Mn.getInstance().run(a,(async()=>{try{let n=await this.func(e,{...a,config:a});if(n&&$a.isRunnable(n)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");n=await n.invoke(e,{...a,recursionLimit:(a.recursionLimit??25)-1})}else if(ja(n)){let e;for await(const t of Na(a,n))if(void 0===e)e=t;else try{e=An(e,t)}catch(i){e=t}n=e}else if(Da(n)){let e;for(const t of La(a,n))if(void 0===e)e=t;else try{e=An(e,t)}catch(i){e=t}n=e}r(n)}catch(i){n(i)}}))}))}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async*_transform(e,t,i){let r;for await(const s of e)if(void 0===r)r=s;else try{r=An(r,s)}catch(a){r=s}const n=await new Promise(((e,t)=>{Mn.getInstance().run(i,(async()=>{try{const t=await this.func(r,{...i,config:i});e(t)}catch(a){t(a)}}))}));if(n&&$a.isRunnable(n)){if(0===i?.recursionLimit)throw new Error("Recursion limit reached.");const e=await n.stream(r,zn(i,{callbacks:t?.getChild(),recursionLimit:(i?.recursionLimit??25)-1}));for await(const t of e)yield t}else if(ja(n))for await(const s of Na(i,n))yield s;else if(Da(n))for(const s of La(i,n))yield s;else yield n}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const i=new Cn(this.transform(async function*(){yield e}(),t));return await i.setup,On.fromAsyncGenerator(i)}}class Ga extends $a{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const i=await an.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),{runId:r,...n}=t??{},a=await(i?.handleChainStart(this.toJSON(),Ma(e,"input"),r,void 0,void 0,void 0,n?.runName));let s;for(const l of this.runnables())try{const t=await l.invoke(e,zn(n,{callbacks:a?.getChild()}));return await(a?.handleChainEnd(Ma(t,"output"))),t}catch(o){void 0===s&&(s=o)}if(void 0===s)throw new Error("No error stored at end of fallback.");throw await(a?.handleChainError(s)),s}async batch(e,t,i){if(i?.returnExceptions)throw new Error("Not implemented.");const r=this._getOptionsList(t??{},e.length),n=await Promise.all(r.map((e=>an.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)))),a=await Promise.all(n.map((async(t,i)=>{const n=await(t?.handleChainStart(this.toJSON(),Ma(e[i],"input"),r[i].runId,void 0,void 0,void 0,r[i].runName));return delete r[i].runId,n})));let s;for(const l of this.runnables())try{const t=await l.batch(e,a.map(((e,t)=>zn(r[t],{callbacks:e?.getChild()}))),i);return await Promise.all(a.map(((e,i)=>e?.handleChainEnd(Ma(t[i],"output"))))),t}catch(o){void 0===s&&(s=o)}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(a.map((e=>e?.handleChainError(s)))),s}}function Ya(e){if("function"===typeof e)return new Va({func:e});if($a.isRunnable(e))return e;if(Array.isArray(e)||"object"!==typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[i,r]of Object.entries(e))t[i]=Ya(r);return new Ha({steps:t})}}class Wa extends $a{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Ha&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const i=await this.mapper.invoke(e,t);return{...e,...i}}async*_transform(e,t,i){const r=this.mapper.getStepsKeys(),[n,a]=Tn(e),s=this.mapper.transform(a,zn(i,{callbacks:t?.getChild()})),o=s.next();for await(const l of n){if("object"!==typeof l||Array.isArray(l))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof l);const e=Object.fromEntries(Object.entries(l).filter((e=>{let[t]=e;return!r.includes(t)})));Object.keys(e).length>0&&(yield e)}yield(await o).value;for await(const l of s)yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const i=new Cn(this.transform(async function*(){yield e}(),t));return await i.setup,On.fromAsyncGenerator(i)}}class Xa extends $a{static lc_name(){return"RunnablePick"}constructor(e){("string"===typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"===typeof this.keys)return e[this.keys];{const t=this.keys.map((t=>[t,e[t]])).filter((e=>void 0!==e[1]));return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const i=new Cn(this.transform(async function*(){yield e}(),t));return await i.setup,On.fromAsyncGenerator(i)}}const Za=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e;class qa extends $a{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Ka extends qa{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(e){let{callbacks:t,callbackManager:i,...r}=e;super({callbacks:t??i,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"===typeof r.cache?this.cache=r.cache:r.cache?this.cache=$.global():this.cache=void 0,this.caller=new Y(r??{})}async getNumTokens(e){if("string"!==typeof e)return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await ie("modelName"in this?Za(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return t}static _convertInputToPromptValue(e){return"string"===typeof e?new B(e):Array.isArray(e)?new U(e.map(E)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){let{config:t,...i}=e;const r={...this._identifyingParams(),...i,_type:this._llmType(),_model:this._modelType()},n=Object.entries(r).filter((e=>{let[t,i]=e;return void 0!==i})),a=n.map((e=>{let[t,i]=e;return`${t}:${JSON.stringify(i)}`})).sort().join(",");return a}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Ja extends Ka{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[t,i]=super._separateRunnableConfigFromCallOptions(e);return i?.timeout&&!i.signal&&(i.signal=AbortSignal.timeout(i.timeout)),[t,i]}async invoke(e,t){const i=Ja._convertInputToPromptValue(e);return(await this.generatePrompt([i],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,i){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===Ja.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=Ja._convertInputToPromptValue(e).toChatMessages(),[n,a]=this._separateRunnableConfigFromCallOptions(t),s=await an.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),o={options:a,invocation_params:this?.invocationParams(a),batch_size:1},l=await(s?.handleChatModelStart(this.toJSON(),[r],n.runId,void 0,o,void 0,void 0,n.runName));let u;try{for await(const e of this._streamResponseChunks(r,a,l?.[0]))e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,u=u?u.concat(e):e}catch(i){throw await Promise.all((l??[]).map((e=>e?.handleLLMError(i)))),i}await Promise.all((l??[]).map((e=>e?.handleLLMEnd({generations:[[u]]}))))}}async _generateUncached(e,t,i){const r=e.map((e=>e.map(E))),n=await an.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),a={options:t,invocation_params:this?.invocationParams(t),batch_size:1},s=await(n?.handleChatModelStart(this.toJSON(),r,i.runId,void 0,a,void 0,void 0,i.runName)),o=await Promise.allSettled(r.map(((e,i)=>this._generate(e,{...t,promptIndex:i},s?.[i])))),l=[],u=[];await Promise.all(o.map((async(e,t)=>{if("fulfilled"===e.status){const i=e.value;for(const e of i.generations)e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};return 1===i.generations.length&&(i.generations[0].message.response_metadata={...i.llmOutput,...i.generations[0].message.response_metadata}),l[t]=i.generations,u[t]=i.llmOutput,s?.[t]?.handleLLMEnd({generations:[i.generations],llmOutput:i.llmOutput})}return await(s?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)})));const c={generations:l,llmOutput:u.length?this._combineLLMOutput?.(...u):void 0};return Object.defineProperty(c,S,{value:s?{runIds:s?.map((e=>e.runId))}:void 0,configurable:!0}),c}async _generateCached(e){let{messages:t,cache:i,llmStringKey:r,parsedOptions:n,handledOptions:a}=e;const s=t.map((e=>e.map(E))),o=await an.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this?.invocationParams(n),batch_size:1,cached:!0},u=await(o?.handleChatModelStart(this.toJSON(),s,a.runId,void 0,l,void 0,void 0,a.runName)),c=[],h=(await Promise.allSettled(s.map((async(e,t)=>{const n=Ja._convertInputToPromptValue(e).toString(),a=await i.lookup(n,r);return null==a&&c.push(t),a})))).map(((e,t)=>({result:e,runManager:u?.[t]}))).filter((e=>{let{result:t}=e;return"fulfilled"===t.status&&null!=t.value||"rejected"===t.status})),d=[];await Promise.all(h.map((async(e,t)=>{let{result:i,runManager:r}=e;if("fulfilled"===i.status){const e=i.value;return d[t]=e,e.length&&await(r?.handleLLMNewToken(e[0].text)),r?.handleLLMEnd({generations:[e]})}return await(r?.handleLLMError(i.reason)),Promise.reject(i.reason)})));const p={generations:d,missingPromptIndices:c};return Object.defineProperty(p,S,{value:u?{runIds:u?.map((e=>e.runId))}:void 0,configurable:!0}),p}async generate(e,t,i){let r;r=Array.isArray(t)?{stop:t}:t;const n=e.map((e=>e.map(E))),[a,s]=this._separateRunnableConfigFromCallOptions(r);if(a.callbacks=a.callbacks??i,!this.cache)return this._generateUncached(n,s,a);const{cache:o}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:u,missingPromptIndices:c}=await this._generateCached({messages:n,cache:o,llmStringKey:l,parsedOptions:s,handledOptions:a});let h={};if(c.length>0){const e=await this._generateUncached(c.map((e=>n[e])),s,a);await Promise.all(e.generations.map((async(e,t)=>{const i=c[t];u[i]=e;const r=Ja._convertInputToPromptValue(n[i]).toString();return o.update(r,l,e)}))),h=e.llmOutput??{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,i){const r=e.map((e=>e.toChatMessages()));return this.generate(r,t,i)}async call(e,t,i){return(await this.generate([e.map(E)],t,i)).generations[0][0].message}async callPrompt(e,t,i){const r=e.toChatMessages();return this.call(r,t,i)}async predictMessages(e,t,i){return this.call(e,t,i)}async predict(e,t,i){const r=new x(e),n=await this.call([r],t,i);if("string"!==typeof n.content)throw new Error("Cannot use predict when output is not a string.");return n.content}}class Qa extends Ja{async _generate(e,t,i){const r=await this._call(e,t,i),n=new _(r);if("string"!==typeof n.content)throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:n.content,message:n}]}}}function es(e,t){return function(){return e.apply(t,arguments)}}const{toString:ts}=Object.prototype,{getPrototypeOf:is}=Object,rs=(e=>t=>{const i=ts.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ns=e=>(e=e.toLowerCase(),t=>rs(t)===e),as=e=>t=>typeof t===e,{isArray:ss}=Array,os=as("undefined");const ls=ns("ArrayBuffer");const us=as("string"),cs=as("function"),hs=as("number"),ds=e=>null!==e&&"object"===typeof e,ps=e=>{if("object"!==rs(e))return!1;const t=is(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},fs=ns("Date"),ms=ns("File"),gs=ns("Blob"),bs=ns("FileList"),ys=ns("URLSearchParams"),[vs,_s,ws,xs]=["ReadableStream","Request","Response","Headers"].map(ns);function Ps(e,t){let i,r,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ss(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let s;for(i=0;i<a;i++)s=r[i],t.call(null,e[s],s,e)}}function Es(e,t){t=t.toLowerCase();const i=Object.keys(e);let r,n=i.length;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const ks="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ss=e=>!os(e)&&e!==ks;const Os=(Ts="undefined"!==typeof Uint8Array&&is(Uint8Array),e=>Ts&&e instanceof Ts);var Ts;const As=ns("HTMLFormElement"),Cs=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),Rs=ns("RegExp"),Is=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};Ps(i,((i,n)=>{let a;!1!==(a=t(i,n,e))&&(r[n]=a||i)})),Object.defineProperties(e,r)};const Ds=ns("AsyncFunction"),js=((e,t)=>{return e?setImmediate:t?(i=`axios@${Math.random()}`,r=[],ks.addEventListener("message",(e=>{let{source:t,data:n}=e;t===ks&&n===i&&r.length&&r.shift()()}),!1),e=>{r.push(e),ks.postMessage(i,"*")}):e=>setTimeout(e);var i,r})("function"===typeof setImmediate,cs(ks.postMessage)),Ls="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ks):"undefined"!==typeof process&&process.nextTick||js,Ns={isArray:ss,isArrayBuffer:ls,isBuffer:function(e){return null!==e&&!os(e)&&null!==e.constructor&&!os(e.constructor)&&cs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||cs(e.append)&&("formdata"===(t=rs(e))||"object"===t&&cs(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ls(e.buffer),t},isString:us,isNumber:hs,isBoolean:e=>!0===e||!1===e,isObject:ds,isPlainObject:ps,isReadableStream:vs,isRequest:_s,isResponse:ws,isHeaders:xs,isUndefined:os,isDate:fs,isFile:ms,isBlob:gs,isRegExp:Rs,isFunction:cs,isStream:e=>ds(e)&&cs(e.pipe),isURLSearchParams:ys,isTypedArray:Os,isFileList:bs,forEach:Ps,merge:function e(){const{caseless:t}=Ss(this)&&this||{},i={},r=(r,n)=>{const a=t&&Es(i,n)||n;ps(i[a])&&ps(r)?i[a]=e(i[a],r):ps(r)?i[a]=e({},r):ss(r)?i[a]=r.slice():i[a]=r};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Ps(arguments[n],r);return i},extend:function(e,t,i){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ps(t,((t,r)=>{i&&cs(t)?e[r]=es(t,i):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,r)=>{let n,a,s;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)s=n[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==i&&is(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:rs,kindOfTest:ns,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return-1!==r&&r===i},toArray:e=>{if(!e)return null;if(ss(e))return e;let t=e.length;if(!hs(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const r=[];for(;null!==(i=e.exec(t));)r.push(i);return r},isHTMLForm:As,hasOwnProperty:Cs,hasOwnProp:Cs,reduceDescriptors:Is,freezeMethods:e=>{Is(e,((t,i)=>{if(cs(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const r=e[i];cs(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},r=e=>{e.forEach((e=>{i[e]=!0}))};return ss(e)?r(e):r(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Es,global:ks,isContextDefined:Ss,isSpecCompliantForm:function(e){return!!(e&&cs(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,r)=>{if(ds(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const n=ss(e)?[]:{};return Ps(e,((e,t)=>{const a=i(e,r+1);!os(a)&&(n[t]=a)})),t[r]=void 0,n}}return e};return i(e,0)},isAsyncFn:Ds,isThenable:e=>e&&(ds(e)||cs(e))&&cs(e.then)&&cs(e.catch),setImmediate:js,asap:Ls};function Ms(e,t,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}Ns.inherits(Ms,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ns.toJSONObject(this.config),code:this.code,status:this.status}}});const $s=Ms.prototype,Fs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Fs[e]={value:e}})),Object.defineProperties(Ms,Fs),Object.defineProperty($s,"isAxiosError",{value:!0}),Ms.from=(e,t,i,r,n,a)=>{const s=Object.create($s);return Ns.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ms.call(s,e.message,t,i,r,n),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const Bs=Ms;function Us(e){return Ns.isPlainObject(e)||Ns.isArray(e)}function zs(e){return Ns.endsWith(e,"[]")?e.slice(0,-2):e}function Hs(e,t,i){return e?e.concat(t).map((function(e,t){return e=zs(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}const Vs=Ns.toFlatObject(Ns,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Gs=function(e,t,i){if(!Ns.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(i=Ns.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ns.isUndefined(t[e])}))).metaTokens,n=i.visitor||u,a=i.dots,s=i.indexes,o=(i.Blob||"undefined"!==typeof Blob&&Blob)&&Ns.isSpecCompliantForm(t);if(!Ns.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ns.isDate(e))return e.toISOString();if(!o&&Ns.isBlob(e))throw new Bs("Blob is not supported. Use a Buffer instead.");return Ns.isArrayBuffer(e)||Ns.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,i,n){let o=e;if(e&&!n&&"object"===typeof e)if(Ns.endsWith(i,"{}"))i=r?i:i.slice(0,-2),e=JSON.stringify(e);else if(Ns.isArray(e)&&function(e){return Ns.isArray(e)&&!e.some(Us)}(e)||(Ns.isFileList(e)||Ns.endsWith(i,"[]"))&&(o=Ns.toArray(e)))return i=zs(i),o.forEach((function(e,r){!Ns.isUndefined(e)&&null!==e&&t.append(!0===s?Hs([i],r,a):null===s?i:i+"[]",l(e))})),!1;return!!Us(e)||(t.append(Hs(n,i,a),l(e)),!1)}const c=[],h=Object.assign(Vs,{defaultVisitor:u,convertValue:l,isVisitable:Us});if(!Ns.isObject(e))throw new TypeError("data must be an object");return function e(i,r){if(!Ns.isUndefined(i)){if(-1!==c.indexOf(i))throw Error("Circular reference detected in "+r.join("."));c.push(i),Ns.forEach(i,(function(i,a){!0===(!(Ns.isUndefined(i)||null===i)&&n.call(t,i,Ns.isString(a)?a.trim():a,r,h))&&e(i,r?r.concat(a):[a])})),c.pop()}}(e),t};function Ys(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ws(e,t){this._pairs=[],e&&Gs(e,this,t)}const Xs=Ws.prototype;Xs.append=function(e,t){this._pairs.push([e,t])},Xs.toString=function(e){const t=e?function(t){return e.call(this,t,Ys)}:Ys;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Zs=Ws;function qs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ks(e,t,i){if(!t)return e;const r=i&&i.encode||qs;Ns.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let a;if(a=n?n(t,i):Ns.isURLSearchParams(t)?t.toString():new Zs(t,i).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Js=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ns.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Qs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eo={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Zs,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},to="undefined"!==typeof window&&"undefined"!==typeof document,io="object"===typeof navigator&&navigator||void 0,ro=to&&(!io||["ReactNative","NativeScript","NS"].indexOf(io.product)<0),no="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ao=to&&window.location.href||"http://localhost",so={...t,...eo};const oo=function(e){function t(e,i,r,n){let a=e[n++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),o=n>=e.length;if(a=!a&&Ns.isArray(r)?r.length:a,o)return Ns.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!s;r[a]&&Ns.isObject(r[a])||(r[a]=[]);return t(e,i,r[a],n)&&Ns.isArray(r[a])&&(r[a]=function(e){const t={},i=Object.keys(e);let r;const n=i.length;let a;for(r=0;r<n;r++)a=i[r],t[a]=e[a];return t}(r[a])),!s}if(Ns.isFormData(e)&&Ns.isFunction(e.entries)){const i={};return Ns.forEachEntry(e,((e,r)=>{t(function(e){return Ns.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,i,0)})),i}return null};const lo={transitional:Qs,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,n=Ns.isObject(e);n&&Ns.isHTMLForm(e)&&(e=new FormData(e));if(Ns.isFormData(e))return r?JSON.stringify(oo(e)):e;if(Ns.isArrayBuffer(e)||Ns.isBuffer(e)||Ns.isStream(e)||Ns.isFile(e)||Ns.isBlob(e)||Ns.isReadableStream(e))return e;if(Ns.isArrayBufferView(e))return e.buffer;if(Ns.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Gs(e,new so.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,r){return so.isNode&&Ns.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Ns.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Gs(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,i){if(Ns.isString(e))try{return(t||JSON.parse)(e),Ns.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||lo.transitional,i=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Ns.isResponse(e)||Ns.isReadableStream(e))return e;if(e&&Ns.isString(e)&&(i&&!this.responseType||r)){const i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(n){if(i){if("SyntaxError"===n.name)throw Bs.from(n,Bs.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:so.classes.FormData,Blob:so.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ns.forEach(["delete","get","head","post","put","patch"],(e=>{lo.headers[e]={}}));const uo=lo,co=Ns.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ho=Symbol("internals");function po(e){return e&&String(e).trim().toLowerCase()}function fo(e){return!1===e||null==e?e:Ns.isArray(e)?e.map(fo):String(e)}function mo(e,t,i,r,n){return Ns.isFunction(r)?r.call(this,t,i):(n&&(t=i),Ns.isString(t)?Ns.isString(r)?-1!==t.indexOf(r):Ns.isRegExp(r)?r.test(t):void 0:void 0)}class go{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function n(e,t,i){const n=po(t);if(!n)throw new Error("header name must be a non-empty string");const a=Ns.findKey(r,n);(!a||void 0===r[a]||!0===i||void 0===i&&!1!==r[a])&&(r[a||t]=fo(e))}const a=(e,t)=>Ns.forEach(e,((e,i)=>n(e,i,t)));if(Ns.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Ns.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let i,r,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!i||t[i]&&co[i]||("set-cookie"===i?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)})),t})(e),t);else if(Ns.isHeaders(e))for(const[s,o]of e.entries())n(o,s,i);else null!=e&&n(t,e,i);return this}get(e,t){if(e=po(e)){const i=Ns.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}(e);if(Ns.isFunction(t))return t.call(this,e,i);if(Ns.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=po(e)){const i=Ns.findKey(this,e);return!(!i||void 0===this[i]||t&&!mo(0,this[i],i,t))}return!1}delete(e,t){const i=this;let r=!1;function n(e){if(e=po(e)){const n=Ns.findKey(i,e);!n||t&&!mo(0,i[n],n,t)||(delete i[n],r=!0)}}return Ns.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const n=t[i];e&&!mo(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,i={};return Ns.forEach(this,((r,n)=>{const a=Ns.findKey(i,n);if(a)return t[a]=fo(r),void delete t[n];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(n):String(n).trim();s!==n&&delete t[n],t[s]=fo(r),i[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ns.forEach(this,((i,r)=>{null!=i&&!1!==i&&(t[r]=e&&Ns.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+": "+i})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ho]=this[ho]={accessors:{}}).accessors,i=this.prototype;function r(e){const r=po(e);t[r]||(!function(e,t){const i=Ns.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+i,{value:function(e,i,n){return this[r].call(this,t,e,i,n)},configurable:!0})}))}(i,e),t[r]=!0)}return Ns.isArray(e)?e.forEach(r):r(e),this}}go.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ns.reduceDescriptors(go.prototype,((e,t)=>{let{value:i}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[r]=e}}})),Ns.freezeMethods(go);const bo=go;function yo(e,t){const i=this||uo,r=t||i,n=bo.from(r.headers);let a=r.data;return Ns.forEach(e,(function(e){a=e.call(i,a,n.normalize(),t?t.status:void 0)})),n.normalize(),a}function vo(e){return!(!e||!e.__CANCEL__)}function _o(e,t,i){Bs.call(this,null==e?"canceled":e,Bs.ERR_CANCELED,t,i),this.name="CanceledError"}Ns.inherits(_o,Bs,{__CANCEL__:!0});const wo=_o;function xo(e,t,i){const r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(new Bs("Request failed with status code "+i.status,[Bs.ERR_BAD_REQUEST,Bs.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}const Po=function(e,t){e=e||10;const i=new Array(e),r=new Array(e);let n,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),u=r[s];n||(n=l),i[a]=o,r[a]=l;let c=s,h=0;for(;c!==a;)h+=i[c++],c%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-n<t)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}};const Eo=function(e,t){let i,r,n=0,a=1e3/t;const s=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=a,i=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-n;for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];t>=a?s(l,e):(i=l,r||(r=setTimeout((()=>{r=null,s(i)}),a-t)))},()=>i&&s(i)]},ko=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const n=Po(50,250);return Eo((i=>{const a=i.loaded,s=i.lengthComputable?i.total:void 0,o=a-r,l=n(o);r=a;e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:i,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),i)},So=(e,t)=>{const i=null!=e;return[r=>t[0]({lengthComputable:i,total:e,loaded:r}),t[1]]},Oo=e=>function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ns.asap((()=>e(...i)))},To=so.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,so.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(so.origin),so.navigator&&/(msie|trident)/i.test(so.navigator.userAgent)):()=>!0,Ao=so.hasStandardBrowserEnv?{write(e,t,i,r,n,a){const s=[e+"="+encodeURIComponent(t)];Ns.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),Ns.isString(r)&&s.push("path="+r),Ns.isString(n)&&s.push("domain="+n),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Co(e,t,i){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==i)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ro=e=>e instanceof bo?{...e}:e;function Io(e,t){t=t||{};const i={};function r(e,t,i,r){return Ns.isPlainObject(e)&&Ns.isPlainObject(t)?Ns.merge.call({caseless:r},e,t):Ns.isPlainObject(t)?Ns.merge({},t):Ns.isArray(t)?t.slice():t}function n(e,t,i,n){return Ns.isUndefined(t)?Ns.isUndefined(e)?void 0:r(void 0,e,0,n):r(e,t,0,n)}function a(e,t){if(!Ns.isUndefined(t))return r(void 0,t)}function s(e,t){return Ns.isUndefined(t)?Ns.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(i,n,a){return a in t?r(i,n):a in e?r(void 0,i):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,i)=>n(Ro(e),Ro(t),0,!0)};return Ns.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||n,s=a(e[r],t[r],r);Ns.isUndefined(s)&&a!==o||(i[r]=s)})),i}const Do=e=>{const t=Io({},e);let i,{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=bo.from(o),t.url=Ks(Co(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ns.isFormData(r))if(so.hasStandardBrowserEnv||so.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(i=o.getContentType())){const[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(so.hasStandardBrowserEnv&&(n&&Ns.isFunction(n)&&(n=n(t)),n||!1!==n&&To(t.url))){const e=a&&s&&Ao.read(s);e&&o.set(a,e)}return t},jo="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){const r=Do(e);let n=r.data;const a=bo.from(r.headers).normalize();let s,o,l,u,c,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=r;function f(){u&&u(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=bo.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());xo((function(e){t(e),f()}),(function(e){i(e),f()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(i(new Bs("Request aborted",Bs.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new Bs("Network Error",Bs.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const n=r.transitional||Qs;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),i(new Bs(t,n.clarifyTimeoutError?Bs.ETIMEDOUT:Bs.ECONNABORTED,e,m)),m=null},void 0===n&&a.setContentType(null),"setRequestHeader"in m&&Ns.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Ns.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),p&&([l,c]=ko(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([o,u]=ko(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(s=t=>{m&&(i(!t||t.type?new wo(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);b&&-1===so.protocols.indexOf(b)?i(new Bs("Unsupported protocol "+b+":",Bs.ERR_BAD_REQUEST,e)):m.send(n||null)}))},Lo=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,r=new AbortController;const n=function(e){if(!i){i=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Bs?t:new wo(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,n(new Bs(`timeout ${t} of ms exceeded`,Bs.ETIMEDOUT))}),t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:o}=r;return o.unsubscribe=()=>Ns.asap(s),o}},No=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let r,n=0;for(;n<i;)r=n+t,yield e.slice(n,r),n=r},Mo=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},$o=(e,t,i,r)=>{const n=async function*(e,t){for await(const i of Mo(e))yield*No(i,t)}(e,t);let a,s=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await n.next();if(t)return o(),void e.close();let a=r.byteLength;if(i){let e=s+=a;i(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},Fo="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Bo=Fo&&"function"===typeof ReadableStream,Uo=Fo&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),zo=function(e){try{for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return!!e(...i)}catch(n){return!1}},Ho=Bo&&zo((()=>{let e=!1;const t=new Request(so.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Vo=Bo&&zo((()=>Ns.isReadableStream(new Response("").body))),Go={stream:Vo&&(e=>e.body)};var Yo;Fo&&(Yo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Go[e]&&(Go[e]=Ns.isFunction(Yo[e])?t=>t[e]():(t,i)=>{throw new Bs(`Response type '${e}' is not supported`,Bs.ERR_NOT_SUPPORT,i)})})));const Wo=async(e,t)=>{const i=Ns.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Ns.isBlob(e))return e.size;if(Ns.isSpecCompliantForm(e)){const t=new Request(so.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ns.isArrayBufferView(e)||Ns.isArrayBuffer(e)?e.byteLength:(Ns.isURLSearchParams(e)&&(e+=""),Ns.isString(e)?(await Uo(e)).byteLength:void 0)})(t):i},Xo=Fo&&(async e=>{let{url:t,method:i,data:r,signal:n,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=Do(e);u=u?(u+"").toLowerCase():"text";let p,f=Lo([n,a&&a.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Ho&&"get"!==i&&"head"!==i&&0!==(g=await Wo(c,r))){let e,i=new Request(t,{method:"POST",body:r,duplex:"half"});if(Ns.isFormData(r)&&(e=i.headers.get("content-type"))&&c.setContentType(e),i.body){const[e,t]=So(g,ko(Oo(l)));r=$o(i.body,65536,e,t)}}Ns.isString(h)||(h=h?"include":"omit");const n="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:i.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:n?h:void 0});let a=await fetch(p);const s=Vo&&("stream"===u||"response"===u);if(Vo&&(o||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Ns.toFiniteNumber(a.headers.get("content-length")),[i,r]=o&&So(t,ko(Oo(o),!0))||[];a=new Response($o(a.body,65536,i,(()=>{r&&r(),m&&m()})),e)}u=u||"text";let b=await Go[Ns.findKey(Go,u)||"text"](a,e);return!s&&m&&m(),await new Promise(((t,i)=>{xo(t,i,{data:b,headers:bo.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(b){if(m&&m(),b&&"TypeError"===b.name&&/fetch/i.test(b.message))throw Object.assign(new Bs("Network Error",Bs.ERR_NETWORK,e,p),{cause:b.cause||b});throw Bs.from(b,b&&b.code,e,p)}}),Zo={http:null,xhr:jo,fetch:Xo};Ns.forEach(Zo,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(i){}Object.defineProperty(e,"adapterName",{value:t})}}));const qo=e=>`- ${e}`,Ko=e=>Ns.isFunction(e)||null===e||!1===e,Jo=e=>{e=Ns.isArray(e)?e:[e];const{length:t}=e;let i,r;const n={};for(let a=0;a<t;a++){let t;if(i=e[a],r=i,!Ko(i)&&(r=Zo[(t=String(i)).toLowerCase()],void 0===r))throw new Bs(`Unknown adapter '${t}'`);if(r)break;n[t||"#"+a]=r}if(!r){const e=Object.entries(n).map((e=>{let[t,i]=e;return`adapter ${t} `+(!1===i?"is not supported by the environment":"is not available in the build")}));let i=t?e.length>1?"since :\n"+e.map(qo).join("\n"):" "+qo(e[0]):"as no adapter specified";throw new Bs("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r};function Qo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wo(null,e)}function el(e){Qo(e),e.headers=bo.from(e.headers),e.data=yo.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Jo(e.adapter||uo.adapter)(e).then((function(t){return Qo(e),t.data=yo.call(e,e.transformResponse,t),t.headers=bo.from(t.headers),t}),(function(t){return vo(t)||(Qo(e),t&&t.response&&(t.response.data=yo.call(e,e.transformResponse,t.response),t.response.headers=bo.from(t.response.headers))),Promise.reject(t)}))}const tl="1.8.4",il={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{il[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const rl={};il.transitional=function(e,t,i){function r(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,a)=>{if(!1===e)throw new Bs(r(n," has been removed"+(t?" in "+t:"")),Bs.ERR_DEPRECATED);return t&&!rl[n]&&(rl[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,a)}},il.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};const nl={assertOptions:function(e,t,i){if("object"!==typeof e)throw new Bs("options must be an object",Bs.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const a=r[n],s=t[a];if(s){const t=e[a],i=void 0===t||s(t,a,e);if(!0!==i)throw new Bs("option "+a+" must be "+i,Bs.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Bs("Unknown option "+a,Bs.ERR_BAD_OPTION)}},validators:il},al=nl.validators;class sl{constructor(e){this.defaults=e,this.interceptors={request:new Js,response:new Js}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+t):i.stack=t}catch(r){}}throw i}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Io(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:n}=t;void 0!==i&&nl.assertOptions(i,{silentJSONParsing:al.transitional(al.boolean),forcedJSONParsing:al.transitional(al.boolean),clarifyTimeoutError:al.transitional(al.boolean)},!1),null!=r&&(Ns.isFunction(r)?t.paramsSerializer={serialize:r}:nl.assertOptions(r,{encode:al.function,serialize:al.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),nl.assertOptions(t,{baseUrl:al.spelling("baseURL"),withXsrfToken:al.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=n&&Ns.merge(n.common,n[t.method]);n&&Ns.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=bo.concat(a,n);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,h=0;if(!o){const e=[el.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);h<c;)u=u.then(e[h++],e[h++]);return u}c=s.length;let d=t;for(h=0;h<c;){const e=s[h++],t=s[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{u=el.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(e){return Ks(Co((e=Io(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ns.forEach(["delete","get","head","options"],(function(e){sl.prototype[e]=function(t,i){return this.request(Io(i||{},{method:e,url:t,data:(i||{}).data}))}})),Ns.forEach(["post","put","patch"],(function(e){function t(t){return function(i,r,n){return this.request(Io(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}sl.prototype[e]=t(),sl.prototype[e+"Form"]=t(!0)}));const ol=sl;class ll{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{i.subscribe(e),t=e})).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e((function(e,r,n){i.reason||(i.reason=new wo(e,r,n),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ll((function(t){e=t})),cancel:e}}}const ul=ll;const cl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cl).forEach((e=>{let[t,i]=e;cl[i]=t}));const hl=cl;const dl=function e(t){const i=new ol(t),r=es(ol.prototype.request,i);return Ns.extend(r,ol.prototype,i,{allOwnKeys:!0}),Ns.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return e(Io(t,i))},r}(uo);dl.Axios=ol,dl.CanceledError=wo,dl.CancelToken=ul,dl.isCancel=vo,dl.VERSION=tl,dl.toFormData=Gs,dl.AxiosError=Bs,dl.Cancel=dl.CanceledError,dl.all=function(e){return Promise.all(e)},dl.spread=function(e){return function(t){return e.apply(null,t)}},dl.isAxiosError=function(e){return Ns.isObject(e)&&!0===e.isAxiosError},dl.mergeConfig=Io,dl.AxiosHeaders=bo,dl.formToJSON=e=>oo(Ns.isHTMLForm(e)?new FormData(e):e),dl.getAdapter=Jo,dl.HttpStatusCode=hl,dl.default=dl;const pl=dl;var fl=i(334);const ml="axios-retry";function gl(e){return!e.response&&(!!e.code&&(!["ERR_CANCELED","ECONNABORTED"].includes(e.code)&&fl(e)))}const bl=["get","head","options"],yl=bl.concat(["put","delete"]);function vl(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function _l(e){return!!e.config?.method&&(vl(e)&&-1!==yl.indexOf(e.config.method))}function wl(e){return gl(e)||_l(e)}function xl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;const t=e?.response?.headers["retry-after"];if(!t)return 0;let i=1e3*(Number(t)||0);return 0===i&&(i=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,i)}const Pl={retries:3,retryCondition:wl,retryDelay:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Math.max(0,xl(e))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function El(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){return{...Pl,...t,...e[ml]}}(e,t||{});return r.retryCount=r.retryCount||0,r.lastRequestTime&&!i||(r.lastRequestTime=Date.now()),e[ml]=r,r}const kl=(e,t)=>{const i=e.interceptors.request.use((e=>(El(e,t,!0),e[ml]?.validateResponse&&(e.validateStatus=()=>!1),e))),r=e.interceptors.response.use(null,(async i=>{const{config:r}=i;if(!r)return Promise.reject(i);const n=El(r,t);return i.response&&n.validateResponse?.(i.response)?i.response:await async function(e,t){const{retries:i,retryCondition:r}=e,n=(e.retryCount||0)<i&&r(t);if("object"===typeof n)try{return!1!==await n}catch(a){return!1}return n}(n,i)?async function(e,t,i,r){t.retryCount+=1;const{retryDelay:n,shouldResetTimeout:a,onRetry:s}=t,o=n(t.retryCount,i);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,r),!a&&r.timeout&&t.lastRequestTime){const e=Date.now()-t.lastRequestTime,n=r.timeout-e-o;if(n<=0)return Promise.reject(i);r.timeout=n}return r.transformRequest=[e=>e],await s(t.retryCount,i,r),r.signal?.aborted?Promise.resolve(e(r)):new Promise((t=>{const i=()=>{clearTimeout(n),t(e(r))},n=setTimeout((()=>{t(e(r)),r.signal?.removeEventListener&&r.signal.removeEventListener("abort",i)}),o);r.signal?.addEventListener&&r.signal.addEventListener("abort",i,{once:!0})}))}(e,n,i,r):(await async function(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}(n,i),Promise.reject(i))}));return{requestInterceptorId:i,responseInterceptorId:r}};kl.isNetworkError=gl,kl.isSafeRequestError=function(e){return!!e.config?.method&&(vl(e)&&-1!==bl.indexOf(e.config.method))},kl.isIdempotentRequestError=_l,kl.isNetworkOrIdempotentRequestError=wl,kl.exponentialDelay=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const t=2**(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:100),i=Math.max(t,xl(e));return i+.2*i*Math.random()},kl.linearDelay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return function(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*e;return Math.max(i,xl(t))}},kl.isRetryableError=vl;const Sl=kl;function Ol(e,t){return t?.[e]||o(e)}function Tl(e,t,i){const r={};for(const n in e)Object.hasOwn(e,n)&&(r[t(n,i)]=e[n]);return r}function Al(e){return Array.isArray(e)?[...e]:{...e}}function Cl(e,t){const i=Al(e);for(const[r,n]of Object.entries(t)){const[e,...t]=r.split(".").reverse();let a=i;for(const i of t.reverse()){if(void 0===a[i])break;a[i]=Al(a[i]),a=a[i]}void 0!==a[e]&&(a[e]={lc:1,type:"secret",id:[n]})}return i}function Rl(e){const t=Object.getPrototypeOf(e);return"function"===typeof e.lc_name&&("function"!==typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}class Il{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Rl(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),void 0!==this.lc_serializable_keys?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter((e=>{let[t]=e;return this.lc_serializable_keys?.includes(t)}))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Il||"object"!==typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},i=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let r=Object.getPrototypeOf(this);r;r=Object.getPrototypeOf(r))Object.assign(e,Reflect.get(r,"lc_aliases",this)),Object.assign(t,Reflect.get(r,"lc_secrets",this)),Object.assign(i,Reflect.get(r,"lc_attributes",this));return Object.keys(t).forEach((e=>{let t=this,r=i;const[n,...a]=e.split(".").reverse();for(const i of a.reverse()){if(!(i in t)||void 0===t[i])return;i in r&&void 0!==r[i]||("object"===typeof t[i]&&null!=t[i]?r[i]={}:Array.isArray(t[i])&&(r[i]=[])),t=t[i],r=r[i]}n in t&&void 0!==t[n]&&(r[n]=r[n]||t[n])})),{lc:1,type:"constructor",id:this.lc_id,kwargs:Tl(Object.keys(t).length?Cl(i,t):i,Ol,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}class Dl extends Il{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"===typeof this.content?this.content:Array.isArray(this.content)?this.content.map((e=>"string"===typeof e?e:"text"===e.type?e.text:"")).join(""):""}getType(){return this._getType()}constructor(e,t){"string"===typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;const t=function(e,t){return JSON.stringify(function e(i,r){if("object"!==typeof i||null===i||void 0===i)return i;if(r>=t)return Array.isArray(i)?"[Array]":"[Object]";if(Array.isArray(i))return i.map((t=>e(t,r+1)));const n={};for(const t of Object.keys(i))n[t]=e(i[t],r+1);return n}(e,0),null,2)}(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}class jl extends Dl{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Ll extends Dl{static lc_name(){return"SystemMessage"}_getType(){return"system"}}Error;const Nl={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Ml,$l=new Uint8Array(16);function Fl(){if(!Ml&&!(Ml="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ml($l)}for(var Bl=[],Ul=0;Ul<256;++Ul)Bl.push((Ul+256).toString(16).slice(1));function zl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Bl[e[t+0]]+Bl[e[t+1]]+Bl[e[t+2]]+Bl[e[t+3]]+"-"+Bl[e[t+4]]+Bl[e[t+5]]+"-"+Bl[e[t+6]]+Bl[e[t+7]]+"-"+Bl[e[t+8]]+Bl[e[t+9]]+"-"+Bl[e[t+10]]+Bl[e[t+11]]+Bl[e[t+12]]+Bl[e[t+13]]+Bl[e[t+14]]+Bl[e[t+15]]).toLowerCase()}const Hl=function(e,t,i){if(Nl.randomUUID&&!t&&!e)return Nl.randomUUID();var r=(e=e||{}).random||(e.rng||Fl)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return zl(r)},Vl=function(){return fetch(...arguments)},Gl=Symbol.for("ls:fetch_implementation"),Yl=()=>globalThis[Gl]??Vl,Wl=[400,401,403,404,405,406,407,408],Xl=[409];class Zl{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.queue=new H.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const n=this.onFailedResponseHook;return this.queue.add((()=>z((()=>e(...i).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,i=t?.status;if(i){if(Wl.includes(+i))throw e;if(Xl.includes(+i))return;n&&await n(t)}},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,i)=>{e.signal?.addEventListener("abort",(()=>{i(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.call((()=>Yl()(...t).then((e=>e.ok?e:Promise.reject(e)))))}}function ql(e){return"function"===typeof e?._getType}function Kl(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}const Jl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;const Ql=function(e){return"string"===typeof e&&Jl.test(e)};function eu(e,t){if(!Ql(e)){throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`)}return e}const tu={};function iu(e){tu[e]||(console.warn(e),tu[e]=!0)}i(3033);function ru(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,i]=e.split(":"),r=i||"latest";if(t.includes("/")){const[i,n]=t.split("/",2);if(!i||!n)throw new Error(`Invalid identifier format: ${e}`);return[i,n,r]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,r]}class nu extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function au(e,t,i){let r;if(e.ok)return void(i&&(r=await e.text()));r=await e.text();const n=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${r}`;if(409===e.status)throw new nu(n);throw new Error(n)}var su="[...]",ou={result:"[Circular]"},lu=[],uu=[];const cu=new TextEncoder;function hu(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function du(e){return cu.encode(e)}function pu(e,t,i,r){try{return du(JSON.stringify(e,t,i))}catch(n){if(!n.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."),du("[Unserializable]");let s;console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),"undefined"===typeof r&&(r=hu()),mu(e,"",0,[],void 0,0,r);try{s=0===uu.length?JSON.stringify(e,t,i):JSON.stringify(e,gu(t),i)}catch(a){return du("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==lu.length;){const e=lu.pop();4===e.length?Object.defineProperty(e[0],e[1],e[3]):e[0][e[1]]=e[2]}}return du(s)}}function fu(e,t,i,r){var n=Object.getOwnPropertyDescriptor(r,i);void 0!==n.get?n.configurable?(Object.defineProperty(r,i,{value:e}),lu.push([r,i,t,n])):uu.push([t,i,e]):(r[i]=e,lu.push([r,i,t]))}function mu(e,t,i,r,n,a,s){var o;if(a+=1,"object"===typeof e&&null!==e){for(o=0;o<r.length;o++)if(r[o]===e)return void fu(ou,e,t,n);if("undefined"!==typeof s.depthLimit&&a>s.depthLimit)return void fu(su,e,t,n);if("undefined"!==typeof s.edgesLimit&&i+1>s.edgesLimit)return void fu(su,e,t,n);if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)mu(e[o],o,o,r,e,a,s);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var u=l[o];mu(e[u],u,o,r,e,a,s)}}r.pop()}}function gu(e){return e="undefined"!==typeof e?e:function(e,t){return t},function(t,i){if(uu.length>0)for(var r=0;r<uu.length;r++){var n=uu[r];if(n[1]===t&&n[0]===i){i=n[2],uu.splice(r,1);break}}return e.call(this,t,i)}}function bu(e){const t=Cu(),i=function(){const e=Ru()||{},t={},i=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,n]of Object.entries(e))!r.startsWith("LANGCHAIN_")&&!r.startsWith("LANGSMITH_")||"string"!==typeof n||i.includes(r)||r.toLowerCase().includes("key")||r.toLowerCase().includes("secret")||r.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===r?t.revision_id=n:t[r]=n);return t}(),r=e.extra??{},n=r.metadata;return e.extra={...r,runtime:{...t,...r?.runtime},metadata:{...i,...i.revision_id||e.revision_id?{revision_id:e.revision_id??i.revision_id}:{},...n}},e}function yu(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const vu=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise((e=>setTimeout(e,t))),!0}return!1};function _u(e){return"number"===typeof e?Number(e.toFixed(4)):e}class wu{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const i=new Promise((e=>{t=e})),r=pu(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:i,size:r}),this.sizeBytes+=r,i}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let i=0;for(;i+(this.peek()?.size??0)<e&&this.items.length>0;){const e=this.items.shift();e&&(t.push(e),i+=e.size,this.sizeBytes-=e.size)}if(0===t.length&&this.items.length>0){const e=this.items.shift();t.push(e),i+=e.size,this.sizeBytes-=e.size}return[t.map((e=>({action:e.action,item:e.payload}))),()=>t.forEach((e=>e.itemPromiseResolve()))]}}class xu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new wu}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:"false"===Iu("LANGSMITH_TRACING_BACKGROUND")}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const t=xu.getDefaultClientConfig();if(this.tracingSampleRate=(e=>{const t=e?.toString()??Du("TRACING_SAMPLING_RATE");if(void 0===t)return;const i=parseFloat(t);if(i<0||i>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${i}`);return i})(e.tracingSamplingRate),this.apiUrl=yu(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=yu(e.apiKey??t.apiKey),this.webUrl=yu(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Zl(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new Zl({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:vu}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=Du("API_KEY");return{apiUrl:Du("ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===Du("HIDE_INPUTS"),hideOutputs:"true"===Du("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t})(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Eu}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"===typeof this.hideInputs?this.hideInputs(e):e}processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"===typeof this.hideOutputs?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){const i=t?.toString()??"",r=`${this.apiUrl}${e}?${i}`,n=await this.caller.call(Yl(),r,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(n,`Failed to fetch ${e}`),n}async _get(e,t){return(await this._getResponse(e,t)).json()}_getPaginated(e){try{var t=this;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams,r=arguments.length>2?arguments[2]:void 0;return async function*(){let n=Number(i.get("offset"))||0;const a=Number(i.get("limit"))||100;for(;;){i.set("offset",String(n)),i.set("limit",String(a));const s=`${t.apiUrl}${e}?${i}`,o=await t.caller.call(Yl(),s,{method:"GET",headers:t.headers,signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions});await au(o,`Failed to fetch ${e}`);const l=r?r(await o.json()):await o.json();if(0===l.length)break;if(yield l,l.length<a)break;n+=l.length}}()}catch(i){return Promise.reject(i)}}_getCursorPaginatedList(e){try{var t=this;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"runs";return async function*(){const a=i?{...i}:{};for(;;){const i=await t.caller.call(Yl(),`${t.apiUrl}${e}`,{method:r,headers:{...t.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions,body:JSON.stringify(a)}),s=await i.json();if(!s)break;if(!s[n])break;yield s[n];const o=s.cursors;if(!o)break;if(!o.next)break;a.cursor=o.next}}()}catch(i){return Promise.reject(i)}}_shouldSample(){return void 0===this.tracingSampleRate||Math.random()<this.tracingSampleRate}_filterForSampling(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):t.push(i);return t}{const t=[];for(const i of e){const e=i.trace_id??i.id;this.filteredPostUuids.has(e)||(i.id===e?this._shouldSample()?t.push(i):this.filteredPostUuids.add(e):t.push(i))}return t}}async _getBatchSizeLimitBytes(){const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??20971520}async _getMultiPartSupport(){const e=await this._ensureServerInfo();return e.instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[i,r]=this.autoBatchQueue.pop(e);if(!i.length){r();break}const n=this._processBatch(i,r).catch(console.error);t.push(n)}return Promise.all(t)}async _processBatch(e,t){if(e.length)try{const t={runCreates:e.filter((e=>"create"===e.action)).map((e=>e.item)),runUpdates:e.filter((e=>"update"===e.action)).map((e=>e.item))},i=await this._ensureServerInfo();i?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(t):await this.batchIngestRuns(t)}finally{t()}else t()}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,"create"===e.action&&(e.item=bu(e.item));const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const i=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>i&&this.drainAutoBatchQueue(i),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout((()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(i)}),this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await Yl()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(2500),...this.fetchOptions});return await au(e,"get server info"),e.json()}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then((e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e)))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const r=this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order)return void this.processRunOperation({action:"create",item:r}).catch(console.error);const n=bu(r),a=await this.caller.call(Yl(),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:pu(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,"create run",!0)}async batchIngestRuns(e){let{runCreates:t,runUpdates:i}=e;if(void 0===t&&void 0===i)return;let r=t?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[],n=i?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[];if(r.length>0&&n.length>0){const e=r.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const i of n)void 0!==i.id&&e[i.id]?e[i.id]={...e[i.id],...i}:t.push(i);r=Object.values(e),n=t}const a={post:r,patch:n};if(!a.post.length&&!a.patch.length)return;const s={post:[],patch:[]};for(const o of["post","patch"]){const e=o,t=a[e].reverse();let i=t.pop();for(;void 0!==i;)s[e].push(i),i=t.pop()}(s.post.length>0||s.patch.length>0)&&await this._postBatchIngestRuns(pu(s))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},i=await this.batchIngestCaller.call(Yl(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(i,"batch create run",!0)}async multipartIngestRuns(e){let{runCreates:t,runUpdates:i}=e;if(void 0===t&&void 0===i)return;const r={};let n=[];for(const l of t??[]){const e=this.prepareRunCreateOrUpdateInputs(l);void 0!==e.id&&void 0!==e.attachments&&(r[e.id]=e.attachments),delete e.attachments,n.push(e)}let a=[];for(const l of i??[])a.push(this.prepareRunCreateOrUpdateInputs(l));if(void 0!==n.find((e=>void 0===e.trace_id||void 0===e.dotted_order)))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==a.find((e=>void 0===e.trace_id||void 0===e.dotted_order)))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(n.length>0&&a.length>0){const e=n.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const i of a)void 0!==i.id&&e[i.id]?e[i.id]={...e[i.id],...i}:t.push(i);n=Object.values(e),a=t}if(0===n.length&&0===a.length)return;const s=[],o=[];for(const[l,u]of[["post",n],["patch",a]])for(const e of u){const{inputs:t,outputs:i,events:n,attachments:a,...u}=e,c={inputs:t,outputs:i,events:n},h=pu(u);o.push({name:`${l}.${u.id}`,payload:new Blob([h],{type:`application/json; length=${h.length}`})});for(const[e,r]of Object.entries(c)){if(void 0===r)continue;const t=pu(r);o.push({name:`${l}.${u.id}.${e}`,payload:new Blob([t],{type:`application/json; length=${t.length}`})})}if(void 0!==u.id){const e=r[u.id];if(e){delete r[u.id];for(const[t,i]of Object.entries(e)){let e,r;Array.isArray(i)?[e,r]=i:(e=i.mimeType,r=i.data),t.includes(".")?console.warn(`Skipping attachment '${t}' for run ${u.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`):o.push({name:`attachment.${u.id}.${t}`,payload:new Blob([r],{type:`${e}; length=${r.byteLength}`})})}}}s.push(`trace=${u.trace_id},id=${u.id}`)}await this._sendMultipartRequest(o,s.join("; "))}async _sendMultipartRequest(e,t){try{const t="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=[];for(const s of e)i.push(new Blob([`--${t}\r\n`])),i.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r\n`,`Content-Type: ${s.payload.type}\r\n\r\n`])),i.push(s.payload),i.push(new Blob(["\r\n"]));i.push(new Blob([`--${t}--\r\n`]));const r=new Blob(i),n=await r.arrayBuffer(),a=await this.batchIngestCaller.call(Yl(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${t}`},body:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,"ingest multipart runs",!0)}catch(i){console.warn(`${i.message.trim()}\n\nContext: ${t}`)}}async updateRun(e,t){eu(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const i={...t,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&void 0!==i.trace_id&&void 0!==i.dotted_order)return void 0!==t.end_time&&void 0===i.parent_run_id&&this.blockOnRootRunFinalization&&!this.manualFlushMode?void await this.processRunOperation({action:"update",item:i}).catch(console.error):void this.processRunOperation({action:"update",item:i}).catch(console.error);const r={...this.headers,"Content-Type":"application/json"},n=await this.caller.call(Yl(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:pu(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(n,"update run",!0)}async readRun(e){let{loadChildRuns:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadChildRuns:!1};eu(e);let i=await this._get(`/runs/${e}`);return t&&i.child_run_ids&&(i=await this._loadChildRuns(i)),i}async getRunUrl(e){let{runId:t,run:i,projectOpts:r}=e;if(void 0!==i){let e;if(i.session_id)e=i.session_id;else if(r?.projectName)e=(await this.readProject({projectName:r?.projectName})).id;else if(r?.projectId)e=r?.projectId;else{e=(await this.readProject({projectName:Du("PROJECT")||"default"})).id}const t=await this._getTenantId();return`${this.getHostUrl()}/o/${t}/projects/p/${e}/r/${i.id}?poll=true`}if(void 0!==t){const e=await this.readRun(t);if(!e.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${e.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const i of e)t.push(i);return t}(this.listRuns({id:e.child_run_ids})),i={},r={};t.sort(((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??"")));for(const n of t){if(null===n.parent_run_id||void 0===n.parent_run_id)throw new Error(`Child run ${n.id} has no parent`);n.parent_run_id in i||(i[n.parent_run_id]=[]),i[n.parent_run_id].push(n),r[n.id]=n}e.child_runs=i[e.id]||[];for(const n in i)n!==e.id&&(r[n].child_runs=i[n]);return e}async*listRuns(e){const{projectId:t,projectName:i,parentRunId:r,traceId:n,referenceExampleId:a,startTime:s,executionOrder:o,isRoot:l,runType:u,error:c,id:h,query:d,filter:p,traceFilter:f,treeFilter:m,limit:g,select:b}=e;let y=[];if(t&&(y=Array.isArray(t)?t:[t]),i){const e=Array.isArray(i)?i:[i],t=await Promise.all(e.map((e=>this.readProject({projectName:e}).then((e=>e.id)))));y.push(...t)}const v={session:y.length?y:null,run_type:u,reference_example:a,query:d,filter:p,trace_filter:f,tree_filter:m,execution_order:o,parent_run:r,start_time:s?s.toISOString():null,error:c,id:h,limit:g,trace:n,select:b||["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l};let _=0;for await(const w of this._getCursorPaginatedList("/runs/query",v))if(g){if(_>=g)break;if(w.length+_>g){const e=w.slice(0,g-_);yield*e;break}_+=w.length,yield*w}else yield*w}async getRunStats(e){let{id:t,trace:i,parentRun:r,runType:n,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:u,error:c,query:h,filter:d,traceFilter:p,treeFilter:f,isRoot:m,dataSourceType:g}=e,b=s||[];a&&(b=[...s||[],...await Promise.all(a.map((e=>this.readProject({projectName:e}).then((e=>e.id)))))]);const y={id:t,trace:i,parent_run:r,run_type:n,session:b,reference_example:o,start_time:l,end_time:u,error:c,query:h,filter:d,trace_filter:p,tree_filter:f,is_root:m,data_source_type:g},v=Object.fromEntries(Object.entries(y).filter((e=>{let[t,i]=e;return void 0!==i}))),_=await this.caller.call(Yl(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await _.json()}async shareRun(e){let{shareId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={run_id:e,share_token:t||Hl()};eu(e);const r=await this.caller.call(Yl(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();if(null===n||!("share_token"in n))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${n.share_token}/r`}async unshareRun(e){eu(e);const t=await this.caller.call(Yl(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(t,"unshare run",!0)}async readRunSharedLink(e){eu(e);const t=await this.caller.call(Yl(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await t.json();if(null!==i&&"share_token"in i)return`${this.getHostUrl()}/public/${i.share_token}/r`}async listSharedRuns(e){let{runIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new URLSearchParams({share_token:e});if(void 0!==t)for(const n of t)i.append("id",n);eu(e);const r=await this.caller.call(Yl(),`${this.apiUrl}/public/${e}/runs${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await r.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}eu(e);const i=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await i.json();return r.url=`${this.getHostUrl()}/public/${r.share_token}/d`,r}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}const i={dataset_id:e};eu(e);const r=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async unshareDataset(e){eu(e);const t=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(t,"unshare dataset",!0)}async readSharedDataset(e){eu(e);const t=await this.caller.call(Yl(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const i={};t?.exampleIds&&(i.id=t.exampleIds);const r=new URLSearchParams;Object.entries(i).forEach((e=>{let[t,i]=e;Array.isArray(i)?i.forEach((e=>r.append(t,e))):r.append(t,i)}));const n=await this.caller.call(Yl(),`${this.apiUrl}/public/${e}/examples?${r.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();if(!n.ok){if("detail"in a)throw new Error(`Failed to list shared examples.\nStatus: ${n.status}\nMessage: ${a.detail.join("\n")}`);throw new Error(`Failed to list shared examples: ${n.status} ${n.statusText}`)}return a.map((e=>({...e,_hostUrl:this.getHostUrl()})))}async createProject(e){let{projectName:t,description:i=null,metadata:r=null,upsert:n=!1,projectExtra:a=null,referenceDatasetId:s=null}=e;const o=n?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,u=a||{};r&&(u.metadata=r);const c={name:t,extra:u,description:i};null!==s&&(c.reference_dataset_id=s);const h=await this.caller.call(Yl(),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(h,"create project");return await h.json()}async updateProject(e,t){let{name:i=null,description:r=null,metadata:n=null,projectExtra:a=null,endTime:s=null}=t;const o=`${this.apiUrl}/sessions/${e}`;let l=a;n&&(l={...l||{},metadata:n});const u={name:i,extra:l,description:r,end_time:s?new Date(s).toISOString():null},c=await this.caller.call(Yl(),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(c,"update project");return await c.json()}async hasProject(e){let{projectId:t,projectName:i}=e,r="/sessions";const n=new URLSearchParams;if(void 0!==t&&void 0!==i)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)eu(t),r+=`/${t}`;else{if(void 0===i)throw new Error("Must provide projectName or projectId");n.append("name",i)}const a=await this.caller.call(Yl(),`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await a.json();return!!a.ok&&(!Array.isArray(e)||e.length>0)}catch(s){return!1}}async readProject(e){let{projectId:t,projectName:i,includeStats:r}=e,n="/sessions";const a=new URLSearchParams;if(void 0!==t&&void 0!==i)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)eu(t),n+=`/${t}`;else{if(void 0===i)throw new Error("Must provide projectName or projectId");a.append("name",i)}void 0!==r&&a.append("include_stats",r.toString());const s=await this._get(n,a);let o;if(Array.isArray(s)){if(0===s.length)throw new Error(`Project[id=${t}, name=${i}] not found`);o=s[0]}else o=s;return o}async getProjectUrl(e){let{projectId:t,projectName:i}=e;if(void 0===t&&void 0===i)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:t,projectName:i}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl(e){let{datasetId:t,datasetName:i}=e;if(void 0===t&&void 0===i)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:t,datasetName:i}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}listProjects(){try{var e=this;let{projectIds:t,name:i,nameContains:r,referenceDatasetId:n,referenceDatasetName:a,referenceFree:s,metadata:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const l=new URLSearchParams;if(void 0!==t)for(const e of t)l.append("id",e);if(void 0!==i&&l.append("name",i),void 0!==r&&l.append("name_contains",r),void 0!==n)l.append("reference_dataset",n);else if(void 0!==a){const t=await e.readDataset({datasetName:a});l.append("reference_dataset",t.id)}void 0!==s&&l.append("reference_free",s.toString()),void 0!==o&&l.append("metadata",JSON.stringify(o));for await(const t of e._getPaginated("/sessions",l))yield*t}()}catch(t){return Promise.reject(t)}}async deleteProject(e){let t,{projectId:i,projectName:r}=e;if(void 0===i&&void 0===r)throw new Error("Must provide projectName or projectId");if(void 0!==i&&void 0!==r)throw new Error("Must provide either projectName or projectId, not both");t=void 0===i?(await this.readProject({projectName:r})).id:i,eu(t);const n=await this.caller.call(Yl(),`${this.apiUrl}/sessions/${t}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(n,`delete session ${t} (${r})`,!0)}async uploadCsv(e){let{csvFile:t,fileName:i,inputKeys:r,outputKeys:n,description:a,dataType:s,name:o}=e;const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",t,i),r.forEach((e=>{u.append("input_keys",e)})),n.forEach((e=>{u.append("output_keys",e)})),a&&u.append("description",a),s&&u.append("data_type",s),o&&u.append("name",o);const c=await this.caller.call(Yl(),l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(c,"upload CSV");return await c.json()}async createDataset(e){let{description:t,dataType:i,inputsSchema:r,outputsSchema:n,metadata:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={name:e,description:t,extra:a?{metadata:a}:void 0};i&&(s.data_type=i),r&&(s.inputs_schema_definition=r),n&&(s.outputs_schema_definition=n);const o=await this.caller.call(Yl(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(o,"create dataset");return await o.json()}async readDataset(e){let{datasetId:t,datasetName:i}=e,r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)eu(t),r+=`/${t}`;else{if(void 0===i)throw new Error("Must provide datasetName or datasetId");n.append("name",i)}const a=await this._get(r,n);let s;if(Array.isArray(a)){if(0===a.length)throw new Error(`Dataset[id=${t}, name=${i}] not found`);s=a[0]}else s=a;return s}async hasDataset(e){let{datasetId:t,datasetName:i}=e;try{return await this.readDataset({datasetId:t,datasetName:i}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions(e){let{datasetId:t,datasetName:i,fromVersion:r,toVersion:n}=e,a=t;if(void 0===a&&void 0===i)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===a){a=(await this.readDataset({datasetName:i})).id}const s=new URLSearchParams({from_version:"string"===typeof r?r:r.toISOString(),to_version:"string"===typeof n?n:n.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning(e){let{datasetId:t,datasetName:i}=e;if(void 0!==t);else{if(void 0===i)throw new Error("Must provide either datasetName or datasetId");t=(await this.readDataset({datasetName:i})).id}const r=await this._getResponse(`/datasets/${t}/openai_ft`),n=(await r.text()).trim().split("\n").map((e=>JSON.parse(e)));return n}listDatasets(){try{var e=this;let{limit:t=100,offset:i=0,datasetIds:r,datasetName:n,datasetNameContains:a,metadata:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const o=new URLSearchParams({limit:t.toString(),offset:i.toString()});if(void 0!==r)for(const e of r)o.append("id",e);void 0!==n&&o.append("name",n),void 0!==a&&o.append("name_contains",a),void 0!==s&&o.append("metadata",JSON.stringify(s));for await(const t of e._getPaginated("/datasets",o))yield*t}()}catch(t){return Promise.reject(t)}}async updateDataset(e){const{datasetId:t,datasetName:i,...r}=e;if(!t&&!i)throw new Error("Must provide either datasetName or datasetId");const n=t??(await this.readDataset({datasetName:i})).id;eu(n);const a=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${n}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(a,"update dataset"),await a.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:i,asOf:r,tag:n}=e;if(!t&&!i)throw new Error("Must provide either datasetName or datasetId");const a=t??(await this.readDataset({datasetName:i})).id;eu(a);const s=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:"string"===typeof r?r:r.toISOString(),tag:n}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(s,"update dataset tags")}async deleteDataset(e){let{datasetId:t,datasetName:i}=e,r="/datasets",n=t;if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==i){n=(await this.readDataset({datasetName:i})).id}if(void 0===n)throw new Error("Must provide datasetName or datasetId");eu(n),r+=`/${n}`;const a=await this.caller.call(Yl(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,`delete ${r}`),await a.json()}async indexDataset(e){let{datasetId:t,datasetName:i,tag:r}=e,n=t;if(!n&&!i)throw new Error("Must provide either datasetName or datasetId");if(n&&i)throw new Error("Must provide either datasetName or datasetId, not both");if(!n){n=(await this.readDataset({datasetName:i})).id}eu(n);const a={tag:r},s=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(s,"index dataset"),await s.json()}async similarExamples(e,t,i){let{filter:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={limit:i,inputs:e};void 0!==r&&(n.filter=r),eu(t);const a=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,"fetch similar examples");return(await a.json()).examples}async createExample(e,t,i){if(Pu(e)&&(void 0!==t||void 0!==i))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let r=t?i?.datasetId:e.dataset_id;const n=t?i?.datasetName:e.dataset_name;if(void 0===r&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==r&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===r){r=(await this.readDataset({datasetName:n})).id}const a=(t?i?.createdAt:e.created_at)||new Date;let s;s=Pu(e)?e:{inputs:e,outputs:t,created_at:a?.toISOString(),id:i?.exampleId,metadata:i?.metadata,split:i?.split,source_run_id:i?.sourceRunId,use_source_run_io:i?.useSourceRunIO,use_source_run_attachments:i?.useSourceRunAttachments,attachments:i?.attachments};const o=await this._uploadExamplesMultipart(r,[s]);return await this.readExample(o.example_ids?.[0]??Hl())}async createExamples(e){if(Array.isArray(e)){if(0===e.length)return[];const t=e;let i=t[0].dataset_id;const r=t[0].dataset_name;if(void 0===i&&void 0===r)throw new Error("Must provide either datasetName or datasetId");if(void 0!==i&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){i=(await this.readDataset({datasetName:r})).id}const n=await this._uploadExamplesMultipart(i,t);return await Promise.all(n.example_ids.map((e=>this.readExample(e))))}const{inputs:t,outputs:i,metadata:r,splits:n,sourceRunIds:a,useSourceRunIOs:s,useSourceRunAttachments:o,attachments:l,exampleIds:u,datasetId:c,datasetName:h}=e;if(void 0===t)throw new Error("Must provide inputs when using legacy parameters");let d=c;const p=h;if(void 0===d&&void 0===p)throw new Error("Must provide either datasetName or datasetId");if(void 0!==d&&void 0!==p)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===d){const e=await this.readDataset({datasetName:p});d=e.id}const f=t.map(((e,t)=>({dataset_id:d,inputs:e,outputs:i?.[t],metadata:r?.[t],split:n?.[t],id:u?.[t],attachments:l?.[t],source_run_id:a?.[t],use_source_run_io:s?.[t],use_source_run_attachments:o?.[t]}))),m=await this._uploadExamplesMultipart(d,f);return await Promise.all(m.example_ids.map((e=>this.readExample(e))))}async createLLMExample(e,t,i){return this.createExample({input:e},{output:t},i)}async createChatExample(e,t,i){const r=e.map((e=>ql(e)?Kl(e):e)),n=ql(t)?Kl(t):t;return this.createExample({input:r},{output:n},i)}async readExample(e){eu(e);const t=`/examples/${e}`,i=await this._get(t),{attachment_urls:r,...n}=i,a=n;return r&&(a.attachments=Object.entries(r).reduce(((e,t)=>{let[i,r]=t;return e[i.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type},e}),{})),a}listExamples(){try{var e=this;let{datasetId:t,datasetName:i,exampleIds:r,asOf:n,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:u,filter:c,includeAttachments:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let d;if(void 0!==t&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)d=t;else{if(void 0===i)throw new Error("Must provide a datasetName or datasetId");d=(await e.readDataset({datasetName:i})).id}const p=new URLSearchParams({dataset:d}),f=n?"string"===typeof n?n:n?.toISOString():void 0;f&&p.append("as_of",f);const m=s??!0;if(p.append("inline_s3_urls",m.toString()),void 0!==r)for(const e of r)p.append("id",e);if(void 0!==a)for(const e of a)p.append("splits",e);if(void 0!==o){const e=JSON.stringify(o);p.append("metadata",e)}void 0!==l&&p.append("limit",l.toString()),void 0!==u&&p.append("offset",u.toString()),void 0!==c&&p.append("filter",c),!0===h&&["attachment_urls","outputs","metadata"].forEach((e=>p.append("select",e)));let g=0;for await(const t of e._getPaginated("/examples",p)){for(const e of t){const{attachment_urls:t,...i}=e,r=i;t&&(r.attachments=Object.entries(t).reduce(((e,t)=>{let[i,r]=t;return e[i.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type||void 0},e}),{})),yield r,g++}if(void 0!==l&&g>=l)break}}()}catch(t){return Promise.reject(t)}}async deleteExample(e){eu(e);const t=`/examples/${e}`,i=await this.caller.call(Yl(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(i,`delete ${t}`),await i.json()}async updateExample(e,t){let i,r,n;if(i=t?e:e.id,eu(i),r=t?{id:i,...t}:e,void 0!==r.dataset_id)n=r.dataset_id;else{n=(await this.readExample(i)).dataset_id}return this._updateExamplesMultipart(n,[r])}async updateExamples(e){let t;if(void 0===e[0].dataset_id){t=(await this.readExample(e[0].id)).dataset_id}else t=e[0].dataset_id;return this._updateExamplesMultipart(t,e)}async readDatasetVersion(e){let t,{datasetId:i,datasetName:r,asOf:n,tag:a}=e;if(i)t=i;else{t=(await this.readDataset({datasetName:r})).id}if(eu(t),n&&a||!n&&!a)throw new Error("Exactly one of asOf and tag must be specified.");const s=new URLSearchParams;void 0!==n&&s.append("as_of","string"===typeof n?n:n.toISOString()),void 0!==a&&s.append("tag",a);const o=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${t}/version?${s.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(o,"read dataset version"),await o.json()}async listDatasetSplits(e){let t,{datasetId:i,datasetName:r,asOf:n}=e;if(void 0===i&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==i&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){t=(await this.readDataset({datasetName:r})).id}else t=i;eu(t);const a=new URLSearchParams,s=n?"string"===typeof n?n:n?.toISOString():void 0;s&&a.append("as_of",s);return await this._get(`/datasets/${t}/splits`,a)}async updateDatasetSplits(e){let t,{datasetId:i,datasetName:r,splitName:n,exampleIds:a,remove:s=!1}=e;if(void 0===i&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==i&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){t=(await this.readDataset({datasetName:r})).id}else t=i;eu(t);const o={split_name:n,examples:a.map((e=>(eu(e),e))),remove:s},l=await this.caller.call(Yl(),`${this.apiUrl}/datasets/${t}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(l,"update dataset splits",!0)}async evaluateRun(e,t){let i,{sourceInfo:r,loadChildRuns:n,referenceExample:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{loadChildRuns:!1};if(iu("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"===typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!==typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(a=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,a),[o,l]=await this._logEvaluationFeedback(s,i,r);return l[0]}async createFeedback(e,t,i){let{score:r,value:n,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,feedbackConfig:h,projectId:d,comparativeExperimentId:p}=i;if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const f={type:l??"api",metadata:o??{}};void 0===u||void 0===f?.metadata||f.metadata.__run||(f.metadata.__run={run_id:u}),void 0!==f?.metadata&&void 0!==f.metadata.__run?.run_id&&eu(f.metadata.__run.run_id);const m={id:c??Hl(),run_id:e,key:t,score:_u(r),value:n,correction:a,comment:s,feedback_source:f,comparative_experiment_id:p,feedbackConfig:h,session_id:d},g=`${this.apiUrl}/feedback`,b=await this.caller.call(Yl(),g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(b,"create feedback",!0),m}async updateFeedback(e,t){let{score:i,value:r,correction:n,comment:a}=t;const s={};void 0!==i&&null!==i&&(s.score=_u(i)),void 0!==r&&null!==r&&(s.value=r),void 0!==n&&null!==n&&(s.correction=n),void 0!==a&&null!==a&&(s.comment=a),eu(e);const o=await this.caller.call(Yl(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(o,"update feedback",!0)}async readFeedback(e){eu(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){eu(e);const t=`/feedback/${e}`,i=await this.caller.call(Yl(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(i,`delete ${t}`),await i.json()}listFeedback(){try{var e=this;let{runIds:t,feedbackKeys:i,feedbackSourceTypes:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=new URLSearchParams;if(t&&n.append("run",t.join(",")),i)for(const e of i)n.append("key",e);if(r)for(const e of r)n.append("source",e);for await(const t of e._getPaginated("/feedback",n))yield*t}()}catch(t){return Promise.reject(t)}}async createPresignedFeedbackToken(e,t){let{expiration:i,feedbackConfig:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={run_id:e,feedback_key:t,feedback_config:r};i?"string"===typeof i?n.expires_at=i:(i?.hours||i?.minutes||i?.days)&&(n.expires_in=i):n.expires_in={hours:3};const a=await this.caller.call(Yl(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await a.json()}async createComparativeExperiment(e){let{name:t,experimentIds:i,referenceDatasetId:r,createdAt:n,description:a,metadata:s,id:o}=e;if(0===i.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:i[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const l={id:o,name:t,experiment_ids:i,reference_dataset_id:r,description:a,created_at:(n??new Date)?.toISOString(),extra:{}};s&&(l.extra.metadata=s);const u=await this.caller.call(Yl(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await u.json()}async*listPresignedFeedbackTokens(e){eu(e);const t=new URLSearchParams({run_id:e});for await(const i of this._getPaginated("/feedback/tokens",t))yield*i}_selectEvalResults(e){let t;return t="results"in e?e.results:Array.isArray(e)?e:[e],t}async _logEvaluationFeedback(e,t,i){const r=this._selectEvalResults(e),n=[];for(const a of r){let e=i||{};a.evaluatorInfo&&(e={...a.evaluatorInfo,...e});let r=null;a.targetRunId?r=a.targetRunId:t&&(r=t.id),n.push(await this.createFeedback(r,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:e,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[r,n]}async logEvaluationFeedback(e,t,i){const[r]=await this._logEvaluationFeedback(e,t,i);return r}listAnnotationQueues(){try{var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const{queueIds:i,name:r,nameContains:n,limit:a}=t,s=new URLSearchParams;i&&i.forEach(((e,t)=>{eu(e,`queueIds[${t}]`),s.append("ids",e)})),r&&s.append("name",r),n&&s.append("name_contains",n),s.append("limit",(void 0!==a?Math.min(a,100):100).toString());let o=0;for await(const t of e._getPaginated("/annotation-queues",s))if(yield*t,o++,void 0!==a&&o>=a)break}()}catch(t){return Promise.reject(t)}}async createAnnotationQueue(e){const{name:t,description:i,queueId:r}=e,n={name:t,description:i,id:r||Hl()},a=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(n).filter((e=>{let[t,i]=e;return void 0!==i})))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,"create annotation queue");return await a.json()}async readAnnotationQueue(e){const t=await this.listAnnotationQueues({queueIds:[e]}).next();if(t.done)throw new Error(`Annotation queue with ID ${e} not found`);return t.value}async updateAnnotationQueue(e,t){const{name:i,description:r}=t,n=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues/${eu(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:i,description:r}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(n,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues/${eu(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const i=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues/${eu(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map(((e,t)=>eu(e,`runIds[${t}]`).toString()))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(i,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const i=`/annotation-queues/${eu(e,"queueId")}/run`,r=await this.caller.call(Yl(),`${this.apiUrl}${i}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(r,"get run from annotation queue"),await r.json()}async deleteRunFromAnnotationQueue(e,t){const i=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues/${eu(e,"queueId")}/runs/${eu(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(i,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call(Yl(),`${this.apiUrl}/annotation-queues/${eu(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const i=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${i.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(Yl(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await t.json();if(!t.ok){const e="string"===typeof i.detail?i.detail:JSON.stringify(i.detail),r=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw r.statusCode=t.status,r}if(0!==i.commits.length)return i.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[i,r,n]=ru(e),a=await this.caller.call(Yl(),`${this.apiUrl}/likes/${i}/${r}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(a,(t?"like":"unlike")+" prompt"),await a.json()}async _getPromptUrl(e){const[t,i,r]=ru(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==r?`${this.getHostUrl()}/prompts/${i}/${r.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${i}?organizationId=${e.id}`}return"latest"!==r?`${this.getHostUrl()}/hub/${t}/${i}/${r.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${i}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,(e=>e.commits)))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const i of this._getPaginated("/repos",t,(e=>e.repos)))yield*i}async getPrompt(e){const[t,i,r]=ru(e),n=await this.caller.call(Yl(),`${this.apiUrl}/repos/${t}/${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===n.status)return null;await au(n,"get prompt");const a=await n.json();return a.repo?a.repo:null}async createPrompt(e,t){const i=await this._getSettings();if(t?.isPublic&&!i.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle. \n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[r,n,a]=ru(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("create a prompt",r);const s={repo_handle:n,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},o=await this.caller.call(Yl(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(o,"create prompt");const{repo:l}=await o.json();return l}async createCommit(e,t,i){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n,a]=ru(e),s="latest"!==i?.parentCommitHash&&i?.parentCommitHash?i?.parentCommitHash:await this._getLatestCommitHash(`${r}/${n}`),o={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call(Yl(),`${this.apiUrl}/commits/${r}/${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(l,"create commit");const u=await l.json();return this._getPromptUrl(`${r}/${n}${u.commit_hash?`:${u.commit_hash}`:""}`)}async updateExamplesMultipart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const i=new FormData;for(const a of t){const e=a.id,t=pu({...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split}}),r=new Blob([t],{type:"application/json"});if(i.append(e,r),a.inputs){const t=pu(a.inputs),r=new Blob([t],{type:"application/json"});i.append(`${e}.inputs`,r)}if(a.outputs){const t=pu(a.outputs),r=new Blob([t],{type:"application/json"});i.append(`${e}.outputs`,r)}if(a.attachments)for(const[n,s]of Object.entries(a.attachments)){let t,r;Array.isArray(s)?[t,r]=s:(t=s.mimeType,r=s.data);const a=new Blob([r],{type:`${t}; length=${r.byteLength}`});i.append(`${e}.attachment.${n}`,a)}if(a.attachments_operations){const t=pu(a.attachments_operations),r=new Blob([t],{type:"application/json"});i.append(`${e}.attachments_operations`,r)}}const r=e??t[0]?.dataset_id,n=await this.caller.call(Yl(),`${this.apiUrl}/v1/platform/datasets/${r}/examples`,{method:"PATCH",headers:this.headers,body:i});return await n.json()}async uploadExamplesMultipart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const i=new FormData;for(const n of t){const e=(n.id??Hl()).toString(),t=pu({created_at:n.created_at,...n.metadata&&{metadata:n.metadata},...n.split&&{split:n.split},...n.source_run_id&&{source_run_id:n.source_run_id},...n.use_source_run_io&&{use_source_run_io:n.use_source_run_io},...n.use_source_run_attachments&&{use_source_run_attachments:n.use_source_run_attachments}}),r=new Blob([t],{type:"application/json"});if(i.append(e,r),n.inputs){const t=pu(n.inputs),r=new Blob([t],{type:"application/json"});i.append(`${e}.inputs`,r)}if(n.outputs){const t=pu(n.outputs),r=new Blob([t],{type:"application/json"});i.append(`${e}.outputs`,r)}if(n.attachments)for(const[a,s]of Object.entries(n.attachments)){let t,r;Array.isArray(s)?[t,r]=s:(t=s.mimeType,r=s.data);const n=new Blob([r],{type:`${t}; length=${r.byteLength}`});i.append(`${e}.attachment.${a}`,n)}}const r=await this.caller.call(Yl(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:i});return await r.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,r]=ru(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("update a prompt",i);const n={};if(void 0!==t?.description&&(n.description=t.description),void 0!==t?.readme&&(n.readme=t.readme),void 0!==t?.tags&&(n.tags=t.tags),void 0!==t?.isPublic&&(n.is_public=t.isPublic),void 0!==t?.isArchived&&(n.is_archived=t.isArchived),0===Object.keys(n).length)throw new Error("No valid update options provided");const a=await this.caller.call(Yl(),`${this.apiUrl}/repos/${i}/${r}`,{method:"PATCH",body:JSON.stringify(n),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await au(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,i,r]=ru(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);const n=await this.caller.call(Yl(),`${this.apiUrl}/repos/${t}/${i}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await n.json()}async pullPromptCommit(e,t){const[i,r,n]=ru(e),a=await this.caller.call(Yl(),`${this.apiUrl}/commits/${i}/${r}/${n}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await au(a,"pull prompt commit");const s=await a.json();return{owner:i,repo:r,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,t){const i=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(i.manifest)}async pushPrompt(e,t){if(await this.promptExists(e)?t&&Object.keys(t).some((e=>"object"!==e))&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),!t?.object)return await this._getPromptUrl(e);return await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash})}async clonePublicDataset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceApiUrl:i=this.apiUrl,datasetName:r}=t,[n,a]=this.parseTokenOrUrl(e,i),s=new xu({apiUrl:n,apiKey:"placeholder"}),o=await s.readSharedDataset(a),l=r||o.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(h){}const u=await s.listSharedExamples(a),c=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map((e=>e.inputs)),outputs:u.flatMap((e=>e.outputs?[e.outputs]:[])),datasetId:c.id})}catch(d){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),d}}parseTokenOrUrl(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataset";try{return eu(e),[t,e]}catch(n){}try{const n=new URL(e).pathname.split("/").filter((e=>""!==e));if(n.length>=i){return[t,n[n.length-i]]}throw new Error(`Invalid public ${r} URL: ${e}`)}catch(a){throw new Error(`Invalid public ${r} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map((e=>{let{itemPromise:t}=e;return t})),this.batchIngestCaller.queue.onIdle()])}}function Pu(e){return"dataset_id"in e||"dataset_name"in e}const Eu="0.3.15";let ku;const Su=()=>"undefined"!==typeof Deno,Ou=()=>ku||(ku="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||Su()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":Su()?"deno":"other":"node",ku);let Tu,Au;function Cu(){if(void 0===Tu){const e=Ou(),t=function(){if(void 0!==Au)return Au;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const i of e){const e=Iu(i);void 0!==e&&(t[i]=e)}return Au=t,t}();Tu={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:Eu,...t}}return Tu}function Ru(){try{return"undefined"!==typeof process?Object.entries({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).reduce(((e,t)=>{let[i,r]=t;return e[i]=String(r),e}),{}):void 0}catch(e){return}}function Iu(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]:void 0}catch(t){return}}function Du(e){return Iu(`LANGSMITH_${e}`)||Iu(`LANGCHAIN_${e}`)}const ju=Symbol.for("lc:context_variables");class Lu{constructor(e,t){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t}static fromHeader(e){const t=e.split(",");let i={},r=[];for(const n of t){const[e,t]=n.split("="),a=decodeURIComponent(t);"langsmith-metadata"===e?i=JSON.parse(a):"langsmith-tags"===e&&(r=a.split(","))}return new Lu(i,r)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class Nu{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Mu(e))return void Object.assign(this,{...e});const t=Nu.getDefaultConfig(),{metadata:i,...r}=e,n=r.client??Nu.getSharedClient(),a={...i,...r?.extra?.metadata};if(r.extra={...r.extra,metadata:a},Object.assign(this,{...t,...r,client:n}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const e=function(e,t){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1).toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${i}Z`.replace(/[-:.]/g,"")+t}(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:Hl(),run_type:"chain",project_name:Du("PROJECT")??Iu("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Iu("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Iu("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Nu.sharedClient||(Nu.sharedClient=new xu),Nu.sharedClient}createChild(e){const t=this.child_execution_order+1,i=new Nu({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});ju in this&&(i[ju]=this[ju]);const r=Symbol.for("lc:child_config"),n=e.extra?.[r]??this.extra[r];if(void 0!==(a=n)&&"object"===typeof a.callbacks&&(Fu(a.callbacks?.handlers)||Fu(a.callbacks))){const e={...n},t=function(e){return"object"===typeof e&&null!=e&&Array.isArray(e.handlers)}(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:i.id}),t.handlers?.find($u)?.updateFromRunTree?.(i),e.callbacks=t),i.extra[r]=e}var a;const s=new Set;let o=this;for(;null!=o&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,t),o=o.parent_run;return this.child_runs.push(i),i}async end(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),r=arguments.length>3?arguments[3]:void 0;this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??i,r&&Object.keys(r).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...r}}:{metadata:r})}_convertToCreate(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.extra??{};if(r.runtime||(r.runtime={}),t)for(const[s,o]of Object.entries(t))r.runtime[s]||(r.runtime[s]=o);let n,a;i?(a=e.parent_run?.id,n=[]):(n=e.child_runs.map((e=>this._convertToCreate(e,t,i))),a=void 0);return{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:r,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:n,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{const t=Cu(),i=await this._convertToCreate(this,t,!0);if(await this.client.createRun(i),!e){iu("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),"string"===typeof e?this.events.push({name:"event",time:(new Date).toISOString(),message:e}):this.events.push({...e,time:e.time??(new Date).toISOString()})}static fromRunnableConfig(e,t){const i=e?.callbacks;let r,n,a,s=(e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find((e=>"true"===Du(e))))();if(i){const e=i?.getParentRunId?.()??"",t=i?.handlers?.find((e=>"langchain_tracer"==e?.name));r=t?.getRun?.(e),n=t?.projectName,a=t?.client,s=s||!!t}if(!r)return new Nu({...t,client:a,tracingEnabled:s,project_name:n});return new Nu({name:r.name,id:r.id,trace_id:r.trace_id,dotted_order:r.dotted_order,client:a,tracingEnabled:s,project_name:n,tags:[...new Set((r?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...r?.extra?.metadata,...e?.metadata}}}).createChild(t)}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const i="get"in e&&"function"===typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,r=i["langsmith-trace"];if(!r||"string"!==typeof r)return;const n=r.trim(),a=n.split(".").map((e=>{const[t,i]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:i}})),s=a[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:a.at(-1)?.uuid,trace_id:s,dotted_order:n};if(i.baggage&&"string"===typeof i.baggage){const e=Lu.fromHeader(i.baggage);o.metadata=e.metadata,o.tags=e.tags}return new Nu(o)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new Lu(this.extra?.metadata,this.tags).toHeader()};if(e)for(const[i,r]of Object.entries(t))e.set(i,r);return t}}function Mu(e){return void 0!==e&&"function"===typeof e.createChild&&"function"===typeof e.postRun}function $u(e){return"object"===typeof e&&null!=e&&"string"===typeof e.name&&"langchain_tracer"===e.name}function Fu(e){return Array.isArray(e)&&e.some((e=>$u(e)))}Object.defineProperty(Nu,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});const Bu=Symbol.for("ls:tracing_async_local_storage"),Uu=new class{getStore(){}run(e,t){return t()}};const zu=new class{getInstance(){return globalThis[Bu]??Uu}initializeGlobalInstance(e){void 0===globalThis[Bu]&&(globalThis[Bu]=e)}};Symbol.for("langsmith:traceable:root");const Hu=Object.prototype.hasOwnProperty;function Vu(e,t){return Hu.call(e,t)}function Gu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Yu(e){let t=0;const i=e.length;let r;for(;t<i;){if(r=e.charCodeAt(t),!(r>=48&&r<=57))return!1;t++}return!0}function Wu(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Xu(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Zu(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(Zu(e[i]))return!0}else if("object"===typeof e){const i=function(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let i in e)Vu(e,i)&&t.push(i);return t}(e),r=i.length;for(var t=0;t<r;t++)if(Zu(e[i[t]]))return!0}return!1}function qu(e,t){const i=[e];for(const r in t){const e="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof e&&i.push(`${r}: ${e}`)}return i.join("\n")}class Ku extends Error{constructor(e,t,i,r,n){super(qu(e,{name:t,index:i,operation:r,tree:n})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.setPrototypeOf(this,new.target.prototype),this.message=qu(e,{name:t,index:i,operation:r,tree:n})}}const Ju=Ku,Qu=Gu,ec={add:function(e,t,i){return e[t]=this.value,{newDocument:i}},remove:function(e,t,i){var r=e[t];return delete e[t],{newDocument:i,removed:r}},replace:function(e,t,i){var r=e[t];return e[t]=this.value,{newDocument:i,removed:r}},move:function(e,t,i){let r=ic(i,this.path);r&&(r=Gu(r));const n=rc(i,{op:"remove",path:this.from}).removed;return rc(i,{op:"add",path:this.path,value:n}),{newDocument:i,removed:r}},copy:function(e,t,i){const r=ic(i,this.from);return rc(i,{op:"add",path:this.path,value:Gu(r)}),{newDocument:i}},test:function(e,t,i){return{newDocument:i,test:lc(e[t],this.value)}},_get:function(e,t,i){return this.value=e[t],{newDocument:i}}};var tc={add:function(e,t,i){return Yu(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:i,index:t}},remove:function(e,t,i){return{newDocument:i,removed:e.splice(t,1)[0]}},replace:function(e,t,i){var r=e[t];return e[t]=this.value,{newDocument:i,removed:r}},move:ec.move,copy:ec.copy,test:ec.test,_get:ec._get};function ic(e,t){if(""==t)return e;var i={op:"_get",path:t};return rc(e,i),i.value}function rc(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i&&("function"==typeof i?i(t,0,e,t.path):sc(t,0)),""===t.path){let r={newDocument:e};if("add"===t.op)return r.newDocument=t.value,r;if("replace"===t.op)return r.newDocument=t.value,r.removed=e,r;if("move"===t.op||"copy"===t.op)return r.newDocument=ic(e,t.from),"move"===t.op&&(r.removed=e),r;if("test"===t.op){if(r.test=lc(e,t.value),!1===r.test)throw new Ju("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return r.newDocument=e,r}if("remove"===t.op)return r.removed=e,r.newDocument=null,r;if("_get"===t.op)return t.value=e,r;if(i)throw new Ju("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return r}{r||(e=Gu(e));const s=(t.path||"").split("/");let o,l,u,c=e,h=1,d=s.length;for(u="function"==typeof i?i:sc;;){if(l=s[h],l&&-1!=l.indexOf("~")&&(l=Xu(l)),n&&("__proto__"==l||"prototype"==l&&h>0&&"constructor"==s[h-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&void 0===o&&(void 0===c[l]?o=s.slice(0,h).join("/"):h==d-1&&(o=t.path),void 0!==o&&u(t,0,e,o)),h++,Array.isArray(c)){if("-"===l)l=c.length;else{if(i&&!Yu(l))throw new Ju("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);Yu(l)&&(l=~~l)}if(h>=d){if(i&&"add"===t.op&&l>c.length)throw new Ju("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);const r=tc[t.op].call(t,c,l,e);if(!1===r.test)throw new Ju("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return r}}else if(h>=d){const i=ec[t.op].call(t,c,l,e);if(!1===i.test)throw new Ju("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}if(c=c[l],i&&h<d&&(!c||"object"!==typeof c))throw new Ju("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function nc(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i&&!Array.isArray(t))throw new Ju("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Gu(e));const a=new Array(t.length);for(let s=0,o=t.length;s<o;s++)a[s]=rc(e,t[s],i,!0,n,s),e=a[s].newDocument;return a.newDocument=e,a}function ac(e,t,i){const r=rc(e,t);if(!1===r.test)throw new Ju("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return r.newDocument}function sc(e,t,i,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new Ju("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,i);if(!ec[e.op])throw new Ju("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,i);if("string"!==typeof e.path)throw new Ju("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Ju('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new Ju("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Ju("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Zu(e.value))throw new Ju("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,i);if(i)if("add"==e.op){var n=e.path.split("/").length,a=r.split("/").length;if(n!==a+1&&n!==a)throw new Ju("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Ju("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,i)}else if("move"===e.op||"copy"===e.op){var s=oc([{op:"_get",path:e.from,value:void 0}],i);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new Ju("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,i)}}function oc(e,t,i){try{if(!Array.isArray(e))throw new Ju("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)nc(Gu(t),Gu(e),i||!0);else{i=i||sc;for(var r=0;r<e.length;r++)i(e[r],r,t,void 0)}}catch(n){if(n instanceof Ju)return n;throw n}}function lc(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var i,r,n,a=Array.isArray(e),s=Array.isArray(t);if(a&&s){if((r=e.length)!=t.length)return!1;for(i=r;0!==i--;)if(!lc(e[i],t[i]))return!1;return!0}if(a!=s)return!1;var o=Object.keys(e);if((r=o.length)!==Object.keys(t).length)return!1;for(i=r;0!==i--;)if(!t.hasOwnProperty(o[i]))return!1;for(i=r;0!==i--;)if(!lc(e[n=o[i]],t[n]))return!1;return!0}return e!==e&&t!==t}new WeakMap;const uc=()=>"undefined"!==typeof Deno,cc=()=>{let e;return e="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||uc()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":uc()?"deno":"other":"node",e};let hc;async function dc(){if(void 0===hc){const e=cc();hc={library:"langchain-js",runtime:e}}return hc}function pc(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]:uc()?Deno?.env.get(e):void 0}catch(t){return}}class fc{}class mc extends fc{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Rl(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"false"===pc("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Il.prototype.toJSON.call(this)}toJSONNotImplemented(){return Il.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends mc{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Hl()}),Object.assign(this,e)}}}}const gc=e=>{const t=e;return void 0!==t&&"function"===typeof t.copy&&"string"===typeof t.name&&"boolean"===typeof t.awaitHandlers};function bc(e,t){return e&&!Array.isArray(e)&&"object"===typeof e?e:{[t]:e}}function yc(e){return"function"===typeof e._addRunToRunMap}class vc extends mc{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"===typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=function(e,t,i){const r=i.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`.replace(/[-:.]/g,"")+t}(e.start_time,e.id,e.execution_order),i={...e};if(void 0!==i.parent_run_id){const e=this.runMap.get(i.parent_run_id);e&&(this._addChildRun(e,i),e.child_execution_order=Math.max(e.child_execution_order,i.child_execution_order),i.trace_id=e.trace_id,void 0!==e.dotted_order&&(i.dotted_order=[e.dotted_order,t].join(".")))}else i.trace_id=i.id,i.dotted_order=t;return this.runMap.set(i.id,i),i}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(this.onRunUpdate?.(e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c=s?{...n,metadata:s}:n,h={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(h)}async handleLLMStart(e,t,i,r,n,a,s,o){const l=this.runMap.get(i)??this._createRunForLLMStart(e,t,i,r,n,a,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}_createRunForChatModelStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c=s?{...n,metadata:s}:n,h={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(h)}async handleChatModelStart(e,t,i,r,n,a,s,o){const l=this.runMap.get(i)??this._createRunForChatModelStart(e,t,i,r,n,a,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}async handleLLMEnd(e,t,i,r,n){const a=this.runMap.get(t);if(!a||"llm"!==a?.run_type)throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...n},await(this.onLLMEnd?.(a)),await this._endTrace(a),a}async handleLLMError(e,t,i,r,n){const a=this.runMap.get(t);if(!a||"llm"!==a?.run_type)throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...n},await(this.onLLMError?.(a)),await this._endTrace(a),a}_createRunForChainStart(e,t,i,r,n,a,s,o){const l=this._getExecutionOrder(r),u=Date.now(),c={id:i,name:o??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return this._addRunToRunMap(c)}async handleChainStart(e,t,i,r,n,a,s,o){const l=this.runMap.get(i)??this._createRunForChainStart(e,t,i,r,n,a,s,o);return await(this.onRunCreate?.(l)),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,i,r,n){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=bc(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),void 0!==n?.inputs&&(a.inputs=bc(n.inputs,"input")),await(this.onChainEnd?.(a)),await this._endTrace(a),a}async handleChainError(e,t,i,r,n){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),void 0!==n?.inputs&&(a.inputs=bc(n.inputs,"input")),await(this.onChainError?.(a)),await this._endTrace(a),a}_createRunForToolStart(e,t,i,r,n,a,s){const o=this._getExecutionOrder(r),l=Date.now(),u={id:i,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return this._addRunToRunMap(u)}async handleToolStart(e,t,i,r,n,a,s){const o=this.runMap.get(i)??this._createRunForToolStart(e,t,i,r,n,a,s);return await(this.onRunCreate?.(o)),await(this.onToolStart?.(o)),o}async handleToolEnd(e,t){const i=this.runMap.get(t);if(!i||"tool"!==i?.run_type)throw new Error("No tool run to end");return i.end_time=Date.now(),i.outputs={output:e},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),await(this.onToolEnd?.(i)),await this._endTrace(i),i}async handleToolError(e,t){const i=this.runMap.get(t);if(!i||"tool"!==i?.run_type)throw new Error("No tool run to end");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),await(this.onToolError?.(i)),await this._endTrace(i),i}async handleAgentAction(e,t){const i=this.runMap.get(t);if(!i||"chain"!==i?.run_type)return;const r=i;r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(i))}async handleAgentEnd(e,t){const i=this.runMap.get(t);i&&"chain"===i?.run_type&&(i.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(i)))}_createRunForRetrieverStart(e,t,i,r,n,a,s){const o=this._getExecutionOrder(r),l=Date.now(),u={id:i,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:n||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,t,i,r,n,a,s){const o=this.runMap.get(i)??this._createRunForRetrieverStart(e,t,i,r,n,a,s);return await(this.onRunCreate?.(o)),await(this.onRetrieverStart?.(o)),o}async handleRetrieverEnd(e,t){const i=this.runMap.get(t);if(!i||"retriever"!==i?.run_type)throw new Error("No retriever run to end");return i.end_time=Date.now(),i.outputs={documents:e},i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),await(this.onRetrieverEnd?.(i)),await this._endTrace(i),i}async handleRetrieverError(e,t){const i=this.runMap.get(t);if(!i||"retriever"!==i?.run_type)throw new Error("No retriever run to end");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),await(this.onRetrieverError?.(i)),await this._endTrace(i),i}async handleText(e,t){const i=this.runMap.get(t);i&&"chain"===i?.run_type&&(i.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(i)))}async handleLLMNewToken(e,t,i,r,n,a){const s=this.runMap.get(i);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:a?.chunk})),s}}var _c=i(6503);function wc(e,t){return`${e.open}${t}${e.close}`}function xc(e,t){try{return JSON.stringify(e,null,2)}catch(i){return t}}function Pc(e){return"string"===typeof e?e.trim():null===e||void 0===e?e:xc(e,e.toString())}function Ec(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:kc}=_c;class Sc extends vc{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let i=e;for(;i.parent_run_id;){const e=this.runMap.get(i.parent_run_id);if(!e)break;t.push(e),i=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,i)=>{const r=`${e.execution_order}:${e.run_type}:${e.name}`;return t===i.length-1?wc(_c.bold,r):r})).join(" > ");return wc(kc.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.green,"[chain/start]")} [${t}] Entering Chain run with input: ${xc(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.cyan,"[chain/end]")} [${t}] [${Ec(e)}] Exiting Chain run with output: ${xc(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.red,"[chain/error]")} [${t}] [${Ec(e)}] Chain run errored with error: ${xc(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),i="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log(`${wc(kc.green,"[llm/start]")} [${t}] Entering LLM run with input: ${xc(i,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.cyan,"[llm/end]")} [${t}] [${Ec(e)}] Exiting LLM run with output: ${xc(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.red,"[llm/error]")} [${t}] [${Ec(e)}] LLM run errored with error: ${xc(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.green,"[tool/start]")} [${t}] Entering Tool run with input: "${Pc(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.cyan,"[tool/end]")} [${t}] [${Ec(e)}] Exiting Tool run with output: "${Pc(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.red,"[tool/error]")} [${t}] [${Ec(e)}] Tool run errored with error: ${xc(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${xc(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.cyan,"[retriever/end]")} [${t}] [${Ec(e)}] Exiting Retriever run with output: ${xc(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${wc(kc.red,"[retriever/error]")} [${t}] [${Ec(e)}] Retriever run errored with error: ${xc(e.error,"[error]")}`)}onAgentAction(e){const t=e,i=this.getBreadcrumbs(e);console.log(`${wc(kc.blue,"[agent/action]")} [${i}] Agent selected action: ${xc(t.actions[t.actions.length-1],"[action]")}`)}}let Oc;class Tc extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:i,client:r}=e;this.projectName=i??pc("LANGCHAIN_PROJECT")??pc("LANGCHAIN_SESSION"),this.exampleId=t,this.client=r??(()=>{if(void 0===Oc){const e="false"===pc("LANGCHAIN_CALLBACKS_BACKGROUND")?{blockOnRootRunFinalization:!0}:{};Oc=new xu(e)}return Oc})();const n=Tc.getTraceableRunTree();n&&this.updateFromRunTree(n)}async _convertToCreate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{...e,extra:{...e.extra,runtime:await dc()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let t=e;const i=new Set;for(;t.parent_run&&!i.has(t.id)&&(i.add(t.id),t.parent_run);)t=t.parent_run;i.clear();const r=[t];for(;r.length>0;){const e=r.shift();e&&!i.has(e.id)&&(i.add(e.id),this.runMap.set(e.id,e),e.child_runs&&r.push(...e.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const t={},i=[];for(const[r,n]of this.runMap){const e=new Nu({...n,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[r]=e,i.push([r,n.dotted_order])}i.sort(((e,t)=>e[1]&&t[1]?e[1].localeCompare(t[1]):0));for(const[r]of i){const e=this.runMap.get(r),i=t[r];if(e&&i&&e.parent_run_id){const r=t[e.parent_run_id];r&&(r.child_runs.push(i),i.parent_run=r)}}return t[e]}static getTraceableRunTree(){try{return(()=>{const e=zu.getInstance().getStore();if(!Mu(e))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join("\n"));return e})()}catch{return}}}const Ac=Symbol.for("ls:tracing_async_local_storage"),Cc=Symbol.for("lc:context_variables"),Rc=()=>globalThis[Ac];let Ic;function Dc(){return"undefined"===typeof Ic&&(Ic=new(0,H.default)({autoStart:!0,concurrency:1})),Ic}async function jc(e,t){if(!0===t){const t=Rc();void 0!==t?await t.run(void 0,(async()=>e())):await e()}else Ic=Dc(),Ic.add((async()=>{const t=Rc();void 0!==t?await t.run(void 0,(async()=>e())):await e()}))}function Lc(e){const t=Rc();if(void 0===t)return;const i=t.getStore();return i?.[Cc]?.[e]}const Nc=Symbol("lc:configure_hooks"),Mc=()=>Lc(Nc)||[];class $c{setHandler(e){return this.setHandlers([e])}}class Fc{constructor(e,t,i,r,n,a,s,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map((t=>jc((async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}async handleCustomEvent(e,t,i,r,n){await Promise.all(this.handlers.map((i=>jc((async()=>{try{await(i.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(r){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleCustomEvent: ${r}`),i.raiseError)throw r}}),i.awaitHandlers))))}}class Bc extends Fc{getChild(e){const t=new Vc(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw i}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`),t.raiseError)throw e}}),t.awaitHandlers))))}}class Uc extends Fc{async handleLLMNewToken(e,t,i,r,n,a){await Promise.all(this.handlers.map((i=>jc((async()=>{if(!i.ignoreLLM)try{await(i.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(r){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMNewToken: ${r}`),i.raiseError)throw r}}),i.awaitHandlers))))}async handleLLMError(e,t,i,r,n){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,n))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleLLMEnd(e,t,i,r,n){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,n))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}}class zc extends Fc{getChild(e){const t=new Vc(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,i,r,n){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,n))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleChainEnd(e,t,i,r,n){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,n))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}}class Hc extends Fc{getChild(e){const t=new Vc(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>jc((async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`),t.raiseError)throw i}}),t.awaitHandlers))))}}class Vc extends $c{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,a)=>{const s=0===a&&i?i:Hl();return await Promise.all(this.handlers.map((i=>{if(!i.ignoreLLM)return yc(i)&&i._createRunForLLMStart(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n),jc((async()=>{try{await(i.handleLLMStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n))}catch(a){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMStart: ${a}`),i.raiseError)throw a}}),i.awaitHandlers)}))),new Uc(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,a)=>{const s=0===a&&i?i:Hl();return await Promise.all(this.handlers.map((i=>{if(!i.ignoreLLM)return yc(i)&&i._createRunForChatModelStart(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n),jc((async()=>{try{if(i.handleChatModelStart)await(i.handleChatModelStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,n));else if(i.handleLLMStart){const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Human",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AI";const r=[];for(const n of e){let e;if("human"===n._getType())e=t;else if("ai"===n._getType())e=i;else if("system"===n._getType())e="System";else if("function"===n._getType())e="Function";else if("tool"===n._getType())e="Tool";else{if("generic"!==n._getType())throw new Error(`Got unsupported message type: ${n._getType()}`);e=n.role}const a=n.name?`${n.name}, `:"",s="string"===typeof n.content?n.content:JSON.stringify(n.content,null,2);r.push(`${e}: ${a}${s}`)}return r.join("\n")}(t);await(i.handleLLMStart?.(e,[a],s,this._parentRunId,r,this.tags,this.metadata,n))}}catch(a){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMStart: ${a}`),i.raiseError)throw a}}),i.awaitHandlers)}))),new Uc(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hl(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((a=>{if(!a.ignoreChain)return yc(a)&&a._createRunForChainStart(e,t,i,this._parentRunId,this.tags,this.metadata,r,n),jc((async()=>{try{await(a.handleChainStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r,n))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainStart: ${s}`),a.raiseError)throw s}}),a.awaitHandlers)}))),new zc(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hl(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((n=>{if(!n.ignoreAgent)return yc(n)&&n._createRunForToolStart(e,t,i,this._parentRunId,this.tags,this.metadata,r),jc((async()=>{try{await(n.handleToolStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r))}catch(a){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${a}`),n.raiseError)throw a}}),n.awaitHandlers)}))),new Hc(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hl(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((n=>{if(!n.ignoreRetriever)return yc(n)&&n._createRunForRetrieverStart(e,t,i,this._parentRunId,this.tags,this.metadata,r),jc((async()=>{try{await(n.handleRetrieverStart?.(e,t,i,this._parentRunId,this.tags,this.metadata,r))}catch(a){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${a}`),n.raiseError)throw a}}),n.awaitHandlers)}))),new Bc(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,i,r,n){await Promise.all(this.handlers.map((r=>jc((async()=>{if(!r.ignoreCustomEvent)try{await(r.handleCustomEvent?.(e,t,i,this.tags,this.metadata))}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${n}`),r.raiseError)throw n}}),r.awaitHandlers))))}addHandler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers=[],this.inheritableHandlers=[];for(const i of e)this.addHandler(i,t)}addTags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Vc(this._parentRunId);for(const r of this.handlers){const e=this.inheritableHandlers.includes(r);i.addHandler(r,e)}for(const r of this.tags){const e=this.inheritableTags.includes(r);i.addTags([r],e)}for(const r of Object.keys(this.metadata)){const e=Object.keys(this.inheritableMetadata).includes(r);i.addMetadata({[r]:this.metadata[r]},e)}for(const r of e)i.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===r.name))||i.addHandler(r,t);return i}static fromHandlers(e){const t=new this;return t.addHandler(new class extends mc{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Hl()}),Object.assign(this,e)}}),t}static configure(e,t,i,r,n,a,s){return this._configureSync(e,t,i,r,n,a,s)}static _configureSync(e,t,i,r,n,a,s){let o;(e||t)&&(Array.isArray(e)||!e?(o=new Vc,o.setHandlers(e?.map(Gc)??[],!0)):o=e,o=o.copy(Array.isArray(t)?t.map(Gc):t?.handlers,!1));const l="true"===pc("LANGCHAIN_VERBOSE")||s?.verbose,u=Tc.getTraceableRunTree()?.tracingEnabled||(e=>void 0!==e?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find((e=>"true"===pc(e))))(),c=u||(pc("LANGCHAIN_TRACING")??!1);if(l||c){if(o||(o=new Vc),l&&!o.handlers.some((e=>e.name===Sc.prototype.name))){const e=new Sc;o.addHandler(e,!0)}if(c&&!o.handlers.some((e=>"langchain_tracer"===e.name))&&u){const e=new Tc;o.addHandler(e,!0),o._parentRunId=Tc.getTraceableRunTree()?.id??o._parentRunId}}for(const{contextVar:h,inheritable:d=!0,handlerClass:p,envVar:f}of Mc()){const e=f&&"true"===pc(f)&&p;let t;const i=void 0!==h?Lc(h):void 0;i&&gc(i)?t=i:e&&(t=new p({})),void 0!==t&&(o||(o=new Vc),o.handlers.some((e=>e.name===t.name))||o.addHandler(t,d))}return(i||r)&&o&&(o.addTags(i??[]),o.addTags(r??[],!1)),(n||a)&&o&&(o.addMetadata(n??{}),o.addMetadata(a??{},!1)),o}}function Gc(e){return"name"in e?e:mc.fromMethods(e)}const Yc=new class{getStore(){}run(e,t){return t()}enterWith(e){}},Wc=Symbol.for("lc:child_config");new class{getInstance(){return Rc()??Yc}getRunnableConfig(){const e=this.getInstance();return e.getStore()?.extra?.[Wc]}runWithConfig(e,t,i){const r=Vc._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),n=this.getInstance(),a=n.getStore(),s=r?.getParentRunId(),o=r?.handlers?.find((e=>"langchain_tracer"===e?.name));let l;return o&&s?l=o.convertToRunTree(s):i||(l=new Nu({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[Wc]:e}),void 0!==a&&void 0!==a[Cc]&&(void 0===l&&(l={}),l[Cc]=a[Cc]),n.run(l,t)}initializeGlobalInstance(e){void 0===Rc()&&(e=>{globalThis[Ac]=e})(e)}};new Set(["string","number","boolean"]);ReadableStream,Symbol.asyncIterator,Symbol.asyncDispose;Symbol.asyncIterator,Symbol.asyncDispose;Symbol.asyncIterator;Symbol.asyncIterator;var Xc=i(579);const Zc=new class extends Qa{static lc_name(){return"ChatLLM7"}baseUrl;modelName;temperature;maxTokens;timeout;maxRetries;stop;client;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.baseUrl=e.baseUrl??"https://api.llm7.io/v1",this.modelName=e.modelName??"gpt-4o-mini-2024-07-18",this.temperature=e.temperature??1,this.maxTokens=e.maxTokens,this.timeout=e.timeout??120,this.maxRetries=e.maxRetries??3,this.stop=e.stop,this.client=pl.create({baseURL:this.baseUrl,timeout:1e3*this.timeout,headers:{"Content-Type":"application/json"}}),Sl(this.client,{retries:this.maxRetries,retryDelay:Sl.exponentialDelay,retryCondition:e=>Sl.isNetworkError(e)||Sl.isRetryableError(e)||429===e.response?.status})}_llmType(){return"llm7-chat"}_formatMessages(e){return e.map((e=>{let t,i;if("human"===e._getType())t="user";else if("ai"===e._getType())t="assistant";else{if("system"!==e._getType())throw new Error(`Unsupported message type: ${e._getType()}`);t="system"}if("string"===typeof e.content)i=e.content;else{if(!Array.isArray(e.content))throw new Error("Unsupported message content type: "+typeof e.content);{const r=e.content.filter((e=>"text"===e.type)).map((e=>e.text));0===r.length?(console.warn(`Message content array did not contain any text parts: ${JSON.stringify(e.content)}`),i=""):i=r.join("\n"),r.length<e.content.length&&console.warn(`Ignoring non-text parts in message content for role ${t}. LLM7 only supports text.`)}}return{role:t,content:i}}))}_createPayload(e,t,i){const r={model:this.modelName,messages:this._formatMessages(e),temperature:this.temperature,stream:t};void 0!==this.maxTokens&&(r.max_tokens=this.maxTokens);const n=[...this.stop??[],...i??[]];return n.length>0&&(r.stop=Array.from(new Set(n))),r}async _call(e,t,i){const r=this._createPayload(e,!1,t.stop);try{const e=await this.client.post("/chat/completions",r,{signal:t.signal});if(200!==e.status)throw new Error(`API request failed with status ${e.status}: ${e.statusText} - ${e.data}`);const i=e.data;if(!i.choices?.[0]?.message)throw new Error(`Invalid API response format: ${JSON.stringify(i)}`);return i.choices[0].message.content}catch(n){if(i?.handleLLMError(n),pl.isAxiosError(n))throw new Error(`LLM7 API request error: ${n.message} - ${n.response?.status} ${n.response?.data}`);throw n}}async*_streamResponseChunks(e,t,i){const r=this._createPayload(e,!0,t.stop);let n;try{const e=await this.client.post("/chat/completions",r,{responseType:"stream",signal:t.signal});if(200!==e.status){let t="";try{for await(const i of e.data)t+=i.toString()}catch(s){}throw new Error(`API request failed with status ${e.status}: ${e.statusText} - ${t}`)}n=e.data}catch(o){if(i?.handleLLMError(o),pl.isAxiosError(o))throw new Error(`LLM7 API stream request error: ${o.message} - ${o.response?.status} ${o.response?.data}`);throw o}let a="";try{for await(const e of n){let t;for(a+=e.toString("utf-8");-1!==(t=a.indexOf("\n"));){const e=a.substring(0,t).trim();if(a=a.substring(t+1),""===e||!e.startsWith("data:"))continue;const r=e.substring(6);if("[DONE]"===r)return;try{const e=JSON.parse(r),t=e.choices?.[0]?.delta,n=t?.content;if("string"===typeof n&&""!==n){const e=new T({message:new w({content:n}),text:n});yield e,await(i?.handleLLMNewToken(n))}}catch(s){console.warn(`Failed to parse stream chunk JSON: ${r}`,s)}}}}catch(o){throw i?.handleLLMError(o),new Error(`Error processing LLM7 stream: ${o}`)}finally{n&&"function"===typeof n.destroy&&n.destroy()}""!==a.trim()&&console.warn("Streaming finished with unprocessed buffer content:",a)}}({stream:!0});const qc=function(){const[e,t]=(0,n.useState)("Tell me a short story about a brave squirrel."),[i,r]=(0,n.useState)(""),[a,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),u=(0,n.useCallback)((async t=>{if(t.preventDefault(),!e||a)return;s(!0),l(null),r("");const i=[new Ll("You are a helpful AI assistant."),new jl(e)];try{const e=await Zc.stream(i);for await(const t of e)console.log(t.text),r((e=>e+t.text))}catch(n){console.error("Streaming Error:",n),l(`Error interacting with LLM: ${n.message}. Note: Direct browser calls often fail due to CORS or runtime limitations. A backend proxy is usually required.`)}finally{s(!1)}}),[e,a]);return(0,Xc.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-md w-full max-w-4xl mx-4 border border-gray-200",children:[(0,Xc.jsxs)("form",{onSubmit:u,children:[(0,Xc.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter your prompt:"}),(0,Xc.jsx)("textarea",{id:"prompt",rows:"3",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm",value:e,onChange:e=>t(e.target.value),placeholder:"e.g., What is LangChain?",disabled:a}),(0,Xc.jsx)("button",{type:"submit",style:{backgroundColor:a?"#ccc":"rgb(31 41 55 / var(--tw-bg-opacity))"},disabled:a||!e,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:a?"Generating...":"Send Prompt"})]}),o&&(0,Xc.jsxs)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded text-sm",children:[(0,Xc.jsx)("p",{children:(0,Xc.jsx)("strong",{children:"Error:"})}),(0,Xc.jsx)("p",{children:o})]}),i&&!o&&(0,Xc.jsxs)("div",{className:"mt-4",children:[(0,Xc.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response:"}),(0,Xc.jsx)("pre",{className:"bg-gray-100 p-3 rounded-md whitespace-pre-wrap break-words text-sm border border-gray-200",children:i})]})]})};function Kc(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){e.done?n(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(s,o)}l((r=r.apply(e,t||[])).next())}))}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class Jc{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,t){return e+this.value*(t-e)}static normalize(e,t,i){return e instanceof Jc?e:new Jc(t===i?0:100*Math.min(Math.max(1/(i-t)*(e-t),0),1))}}function Qc(e){return new Jc(e)}Qc(0);const eh=Qc(100),th=Qc(50);function ih(e){return e instanceof Jc}function rh(e){return Number(e)!==e}function nh(e){if(null!=e&&!uh(e)){let t=Number(e);return rh(t)&&lh(e)&&""!=e&&e.match(/[0-9]+/)?nh(e.replace(/[^0-9.\-]+/g,"")):t}return e}function ah(e){if(oh(e))return new Date(e);if(uh(e))return new Date(e);{let t=Number(e);return uh(t)?new Date(t):new Date(e)}}function sh(e,t){return new Array(t+1).join(e)}function oh(e){return"[object Date]"===function(e){return{}.toString.call(e)}(e)}function lh(e){return"string"===typeof e}function uh(e){return"number"===typeof e&&Number(e)==e}function ch(e){return"object"===typeof e&&null!==e}const hh="__\xa7\xa7\xa7__",dh="__\xa7\xa7\xa7\xa7__";function ph(e,t){const i=e.length;for(let r=0;r<i;++r)if(e[r]===t)return r;return-1}function fh(e,t){const i=e.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=t(e[n],n);return r}function mh(e,t){const i=e.length;for(let r=0;r<i;++r)t(e[r],r)}function gh(e,t){let i=e.length;for(;i>0;)--i,t(e[i],i)}function bh(e,t){const i=e.length;for(let r=0;r<i&&t(e[r],r);++r);}function yh(e,t){let i=!1,r=0;for(;;){if(r=e.indexOf(t,r),-1===r)return i;i=!0,e.splice(r,1)}}function vh(e,t){let i=e.indexOf(t);return-1!==i&&(e.splice(i,1),!0)}function _h(e,t,i){let r=ph(e,t);-1!==r&&Eh(e,r),null==i?e.push(t):Ph(e,i,t)}function wh(e,t){-1===e.indexOf(t)&&e.push(t)}function xh(e){const t=e.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=e[r];return i}function Ph(e,t,i){e.splice(t,0,i)}function Eh(e,t){e.splice(t,1)}function kh(e,t){const i=e.length;for(let r=0;r<i;++r)if(t(e[r],r))return r;return-1}function Sh(e,t){const i=kh(e,t);if(-1!==i)return e[i]}function Oh(e,t){let i=0,r=e.length,n=!1;for(;i<r;){const a=i+r>>1,s=t(e[a]);s<0?i=a+1:0===s?(n=!0,i=a+1):r=a}return{found:n,index:n?i-1:i}}function Th(e,t){let i=0,r=e.length,n=!1;for(;i<r;){const a=i+r>>1,s=t(e[a]);s<0?i=a+1:0===s?(n=!0,r=a):r=a}return{found:n,index:i}}function Ah(e,t){let i=e.length;for(;i>0;)--i,t(e[i])||e.splice(i,1)}function Ch(e){return Object.keys(e)}function Rh(e,t){return Ch(e).sort(t)}function Ih(e){return Object.assign({},e)}function Dh(e,t){Ch(e).forEach((i=>{t(i,e[i])}))}function jh(e,t){return{}.hasOwnProperty.call(e,t)}class Lh{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Nh{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Mh extends Lh{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){mh(this._disposers,(e=>{e.dispose()}))}}class $h extends Lh{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){mh(this._disposers,(e=>{e.dispose()}))}get disposers(){return this._disposers}}class Fh extends Nh{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new Nh((()=>{--this._counter,0===this._counter&&this.dispose()}))}}function Bh(e,t,i,r){return e.addEventListener(t,i,r||!1),new Nh((()=>{e.removeEventListener(t,i,r||!1)}))}function Uh(e){return Bh(window,"resize",(t=>{e()}))}function zh(e){switch(e){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function Hh(e){return e.pointerId||0}function Vh(e){if(zh("pointerevents"))return e;if(zh("touchevents"))switch(e){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerleave":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(zh("mouseevents"))switch(e){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return e}function Gh(e){if("undefined"!==typeof Touch&&e instanceof Touch)return!0;if("undefined"!==typeof PointerEvent&&e instanceof PointerEvent&&null!=e.pointerType)switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent)}else if(null!=e.type&&e.type.match(/^mouse/))return!1;return!0}function Yh(e,t,i){e.style[t]=i}function Wh(e){if(e.composedPath){const t=e.composedPath();return 0===t.length?null:t[0]}return e.target}function Xh(e,t){return e.target&&function(e,t){let i=t;for(;;){if(e===i)return!0;if(null===i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}(t.root.dom,e.target)}function Zh(e,t){e.style.pointerEvents=t?"auto":"none"}function qh(e){if(void 0!==e.key)return e.key;switch(e.keyCode){case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 27:return"Escape";case 32:return" ";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete"}return""+e.keyCode}function Kh(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0}function Jh(e,t){return uh(e)?e:null!=e&&uh(e.value)&&uh(t)?t*e.value:0}function Qh(e){let t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function ed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"string"!==typeof e&&(e=e.toString()),t>e.length?Array(t-e.length+1).join(i)+e:e}function td(e){return function(e){return e.replace(/^[\s]*/,"")}(function(e){return e.replace(/[\s]*$/,"")}(e))}function id(e){return e.replace(/\/(date|number|duration)$/i,"")}function rd(e){return e?e.replace(/<[^>]*>/g,""):e}function nd(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function ad(e){const t=new Date(e.getFullYear(),0,0),i=e.getTime()-t.getTime()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function sd(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-i);const r=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-r.getTime())/864e5+1)/7)}function od(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-i);return new Date(Date.UTC(t.getUTCFullYear(),0,1)).getFullYear()}function ld(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=sd(new Date(e.getFullYear(),e.getMonth(),1),t);let r=sd(e,t);return 1==r&&(r=53),r-i+1}function ud(e,t){return e>12?e-=12:0===e&&(e=12),null!=t?e+(t-1):e}function cd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>4?arguments[4]:void 0;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return t?"Coordinated Universal Time":"UTC";if(r){const i=e.toLocaleString("en-US",{timeZone:r});return td(e.toLocaleString("en-US",{timeZone:r,timeZoneName:t?"long":"short"}).substr(i.length))}let n=e.toLocaleString("UTC"),a=e.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(n.length);return!1===i&&(a=a.replace(/ (standard|daylight|summer|winter) /i," ")),td(a)}function hd(e,t){const i=t||new Date(Date.UTC(2012,0,1,0,0,0,0)),r=new Date(i.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(i.toLocaleString("en-US",{timeZone:e})).getTime()-r.getTime())/6e4*-1}function dd(e){return e.charAt(0).toUpperCase()+e.slice(1)}function pd(e){let t,i,r,n=e.h,a=e.s,s=e.l;if(0==a)t=i=r=s;else{let e=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},o=s<.5?s*(1+a):s+a-s*a,l=2*s-o;t=e(l,o,n+1/3),i=e(l,o,n),r=e(l,o,n-1/3)}return{r:Math.round(255*t),g:Math.round(255*i),b:Math.round(255*r)}}function fd(e){let t=e.r/255,i=e.g/255,r=e.b/255,n=Math.max(t,i,r),a=Math.min(t,i,r),s=0,o=0,l=(n+a)/2;if(n===a)s=o=0;else{let e=n-a;switch(o=l>.5?e/(2-n-a):e/(n+a),n){case t:s=(i-r)/e+(i<r?6:0);break;case i:s=(r-t)/e+2;break;case r:s=(t-i)/e+4}s/=6}return{h:s,s:o,l:l}}function md(e,t){let i=t>0?255-e:e;return Math.round(i*t)}function gd(e){return(299*e.r+587*e.g+114*e.b)/1e3>=128}function bd(e,t){return e||(e=[]),[...e,...t].filter(((e,t,i)=>i.indexOf(e)===t))}function yd(e,t){return!!t&&(e.left==t.left&&(e.right==t.right&&(e.top==t.top&&e.bottom==t.bottom)))}function vd(e){return"#"===e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)),parseInt(e,16)}function _d(e){return wd.fromAny(e)}class wd{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+ed(this.r.toString(16),2)+ed(this.g.toString(16),2)+ed(this.b.toString(16),2)}toHSL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fd({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,t,i){const r=pd({h:e,s:t,l:i});return this.fromRGB(r.r,r.g,r.b)}toString(){return this.toCSSHex()}static fromHex(e){return new wd(e)}static fromRGB(e,t,i){return new wd((0|i)+(t<<8)+(e<<16))}static fromString(e){return new wd(vd(e))}static fromCSS(e){return new wd(function(e){let t=(e=e.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(t=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!t)return 0;let i="";for(let r=1;r<=3;r++){let e=parseInt(t[r]).toString(16);1==e.length&&(e="0"+e),i+=e}return vd(i)}(e))}static fromAny(e){if(lh(e)){if("#"==e[0])return wd.fromString(e);if("rgb"==e.substr(0,3))return wd.fromCSS(e)}else{if(uh(e))return wd.fromHex(e);if(e instanceof wd)return wd.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,t,i){const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{r:255,g:255,b:255},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:255,g:255,b:255},r=t,n=i;return gd(i)&&(r=i,n=t),gd(e)?n:r}({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(r.r,r.g,r.b)}static interpolate(e,t,i){if("hsl"==(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb")){const r=t.toHSL(),n=i.toHSL();return wd.fromHSL(Pd(e,r.h,n.h),Pd(e,r.s,n.s),Pd(e,r.l,n.l))}return wd.fromRGB(Pd(e,t.r,i.r),Pd(e,t.g,i.g),Pd(e,t.b,i.b))}static lighten(e,t){const i=function(e,t){return e?{r:Math.max(0,Math.min(255,e.r+md(e.r,t))),g:Math.max(0,Math.min(255,e.g+md(e.g,t))),b:Math.max(0,Math.min(255,e.b+md(e.b,t))),a:e.a}:e}({r:e.r,g:e.g,b:e.b},t);return wd.fromRGB(i.r,i.g,i.b)}static brighten(e,t){const i=function(e,t){if(e){let i=md(Math.min(Math.max(e.r,e.g,e.b),230),t);return{r:Math.max(0,Math.min(255,Math.round(e.r+i))),g:Math.max(0,Math.min(255,Math.round(e.g+i))),b:Math.max(0,Math.min(255,Math.round(e.b+i))),a:e.a}}return e}({r:e.r,g:e.g,b:e.b},t);return wd.fromRGB(i.r,i.g,i.b)}static saturate(e,t){const i=function(e,t){if(void 0===e||1==t)return e;let i=fd(e);return i.s=t,pd(i)}({r:e.r,g:e.g,b:e.b},t);return wd.fromRGB(i.r,i.g,i.b)}}function xd(e){return Kc(this,void 0,void 0,(function*(){if(void 0!==e){const t=[];Dh(e,((e,i)=>{t.push(i.waitForStop())})),yield Promise.all(t)}}))}function Pd(e,t,i){return t+e*(i-t)}function Ed(e,t,i){return e>=1?i:t}function kd(e,t,i){return new Jc(Pd(e,t.percent,i.percent))}function Sd(e,t,i){return wd.interpolate(e,t,i)}var Od;!function(e){e[e.Stopped=0]="Stopped",e[e.Playing=1]="Playing",e[e.Paused=2]="Paused"}(Od||(Od={}));class Td{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{mh(e,(e=>{e.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(e){return function(e,t){const i=e.length;for(let r=0;r<i;++r)if(t(e[r]))return!0;return!1}(this._listeners,(t=>(null===t.type||t.type===e)&&!t.killed))}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;this._disabled[e]=t}_removeListener(e){if(0===this._iterating){const t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}_removeExistingListener(e,t,i,r){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((n=>{n.once!==e||n.type!==t||void 0!==i&&n.callback!==i||n.context!==r||n.disposer.dispose()}))}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&void 0===this._disabled[e]}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((t=>{t.type===e&&t.disposer.dispose()}))}has(e,t,i){return-1!==kh(this._listeners,(r=>!0!==r.once&&r.type===e&&(void 0===t||r.callback===t)&&r.context===i))}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const t=this._disabled[e];return uh(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{mh(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(mh(this._killed,(e=>{this._removeListener(e)})),this._killed.length=0)}}dispatch(e,t){this._shouldDispatch(e)&&this._eachListener((i=>{i.killed||null!==i.type&&i.type!==e||i.dispatch(e,t)}))}_on(e,t,i,r,n,a){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,i,r);const s={type:t,callback:i,context:r,shouldClone:n,dispatch:a,killed:!1,once:e,disposer:new Nh((()=>{s.killed=!0,this._removeListener(s)}))};return this._listeners.push(s),s}onAll(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._on(!1,null,e,t,i,((i,r)=>e.call(t,r))).disposer}on(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._on(!1,e,t,i,r,((e,r)=>t.call(i,r))).disposer}once(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=this._on(!0,e,t,i,r,((e,r)=>{n.disposer.dispose(),t.call(i,r)}));return n.disposer}off(e,t,i){this._removeExistingListener(!1,e,t,i)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const t=[];return mh(e._listeners,(e=>{!e.killed&&e.shouldClone&&(null===e.type?t.push(this.onAll(e.callback,e.context)):e.once?t.push(this.once(e.type,e.callback,e.context)):t.push(this.on(e.type,e.callback,e.context)))})),new $h(t)}}function Ad(e,t){if(!(e>=0&&e<t))throw new Error("Index out of bounds: "+e)}class Cd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Td}),this._values=e}get values(){return this._values}contains(e){return-1!==this._values.indexOf(e)}removeValue(e){let t=0,i=this._values.length;for(;t<i;)this._values[t]===e?(this.removeIndex(t),--i):++t}indexOf(e){return ph(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,t){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t})}_onSetIndex(e,t,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:t,newValue:i})}_onSwap(e,t){this.events.isEnabled("swap")&&this.events.dispatch("swap",{type:"swap",target:this,a:e,b:t})}_onRemoveIndex(e,t){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t})}_onMoveIndex(e,t,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:t,value:i})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,t){Ad(e,this._values.length);const i=this._values[e];return i!==t&&(this._values[e]=t,this._onSetIndex(e,i,t)),i}insertIndex(e,t){return Ad(e,this._values.length+1),Ph(this._values,e,t),this._onInsertIndex(e,t),t}swap(e,t){const i=this._values.length;if(Ad(e,i),Ad(t,i),e!==t){const i=this._values[e],r=this._values[t];this._values[e]=r,this._values[t]=i,this._onSwap(i,r)}}removeIndex(e){Ad(e,this._values.length);const t=this._values[e];return Eh(this._values,e),this._onRemoveIndex(e,t),t}moveValue(e,t){let i=this.indexOf(e);if(-1!==i)if(Eh(this._values,i),null==t){const t=this._values.length;this._values.push(e),this._onMoveIndex(i,t,e)}else Ph(this._values,t,e),this._onMoveIndex(i,t,e);else null==t?(this._values.push(e),this._onPush(e)):(Ph(this._values,t,e),this._onInsertIndex(t,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){mh(e,(e=>{this.push(e)}))}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const t=this._values;this._values=[],this._onClear(t),mh(e,(e=>{this._values.push(e),this._onPush(e)}))}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let t=0;t<e;++t)yield this._values[t]}each(e){mh(this._values,e)}eachReverse(e){gh(this._values,e)}}class Rd extends Cd{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}swap(e,t){const i=this.autoDispose;this.autoDispose=!1,super.swap(e,t),this.autoDispose=i}_onSetIndex(e,t,i){this.autoDispose&&t.dispose(),super._onSetIndex(e,t,i)}_onRemoveIndex(e,t){this.autoDispose&&t.dispose(),super._onRemoveIndex(e,t)}_onClear(e){this.autoDispose&&mh(e,(e=>{e.dispose()})),super._onClear(e)}_dispose(){this.autoDispose&&mh(this._values,(e=>{e.dispose()}))}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Id extends Rd{constructor(e,t){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=t}_dispose(){super._dispose(),this.autoDispose&&this.template.dispose()}}class Dd extends Cd{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll((e=>{if("clear"===e.type)mh(e.oldValues,(e=>{this._onRemoved(e)}));else if("push"===e.type)this._onInserted(e.newValue);else if("setIndex"===e.type)this._onRemoved(e.oldValue),this._onInserted(e.newValue,e.index);else if("insertIndex"===e.type)this._onInserted(e.newValue,e.index);else if("removeIndex"===e.type)this._onRemoved(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");this._onRemoved(e.value),this._onInserted(e.value,e.newIndex)}}))}_onInserted(e,t){e._setParent(this._container,!0);const i=this._container._childrenDisplay;void 0===t?i.addChild(e._display):i.addChildAt(e._display,t)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),mh(this.values,(e=>{e.dispose()})))}}function jd(e){return e}function Ld(e){return e*e*e}function Nd(e){return function(t){return 1-e(1-t)}}let Md=2*Math.PI,$d=.3/Md;Math.asin(1);class Fd{constructor(e,t){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=t,Dh(t,(e=>{this._userSettings[e]=!0}))}get(e,t){const i=this._settings[e];return void 0!==i?i:t}setRaw(e,t){this._settings[e]=t}set(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){Ch(e).forEach((t=>{this.set(t,e[t])}))}_eachSetting(e){Dh(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},t=this._entity.states.lookup("default");this._eachSetting(((i,r)=>{e[i]||(e[i]=!0,this!==t&&(i in t._settings||(t._settings[i]=this._entity.get(i))),this._entity.set(i,r))}))}applyAnimate(e){null==e&&(e=this._settings.stateAnimationDuration),null==e&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let t=this._settings.stateAnimationEasing;null==t&&(t=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",Ld)));const i=this._entity.states.lookup("default"),r={stateAnimationEasing:!0,stateAnimationDuration:!0},n={};return this._eachSetting(((a,s)=>{if(!r[a]){r[a]=!0,this!=i&&(a in i._settings||(i._settings[a]=this._entity.get(a)));const o=this._entity.animate({key:a,to:s,duration:e,easing:t});o&&(n[a]=o)}})),n}}class Bd{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,t){const i=this._states[e];if(i)return i.setAll(t),i;{const i=new Fd(this._entity,t);return this._states[e]=i,i}}remove(e){delete this._states[e]}apply(e){const t=this._states[e];t&&t.apply(),this._entity._applyState(e)}applyAnimate(e,t){let i;const r=this._states[e];return r&&(i=r.applyAnimate(t)),this._entity._applyStateAnimated(e,t),i}}const Ud=new class{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.12.1"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}};function zd(e,t){return e===t?0:e<t?-1:1}function Hd(e,t,i){const r=e.length,n=t.length,a=Math.min(r,n);for(let s=0;s<a;++s){const r=i(e[s],t[s]);if(0!==r)return r}return zd(r,n)}function Vd(e,t){return e===t?0:e<t?-1:1}class Gd{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,t){let i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),this._entity._markDirtyKey(e),new Nh((()=>{vh(i,t)&&this._entity._markDirtyKey(e)}))}remove(e){const t=this._callbacks[e];void 0!==t&&(delete this._callbacks[e],0!==t.length&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,t){if(!this._disabled[e]){const i=this._callbacks[e];if(void 0!==i)for(let r=0,n=i.length;r<n;++r)t=i[r](t,this._entity,e)}return t}}class Yd{constructor(e,t,i,r,n,a,s){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Td}),this._animation=e,this._from=t,this._to=i,this._duration=r,this._easing=n,this._loops=a,this._interpolate=function(e,t){return"number"===typeof e&&"number"===typeof t?Pd:e instanceof Jc&&t instanceof Jc?kd:e instanceof wd&&t instanceof wd?Sd:Ed}(t,i),this._oldTime=s}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise(((e,t)=>{if(this._stopped)e();else{const t=()=>{i.dispose(),e()},i=this.events.on("stopped",t)}}))}_checkEnded(){return!(this._loops>1)||(--this._loops,!1)}_run(e){null!==this._oldTime&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}}let Wd=0;class Xd{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++Wd}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"enableDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._settings=e}_checkDirty(){Ch(this._settings).forEach((e=>{this._userProperties[e]=!0,this._markDirtyKey(e)}))}resetUserSettings(){this._userProperties={}}_runAnimation(e){let t=Od.Stopped;if(!this.isDisposed()){let i=!1,r=!1;Dh(this._animatingSettings,((t,n)=>{if(n.stopped)this._stopAnimation(t);else if(n.playing){n._run(e);const r=n.percentage;r>=1?n._checkEnded()?this.set(t,n._value(1)):(i=!0,n._reset(e),this._set(t,n._value(1))):(i=!0,this._set(t,n._value(r)))}else r=!0})),Dh(this._animatingPrivateSettings,((t,n)=>{if(n.stopped)this._stopAnimationPrivate(t);else if(n.playing){n._run(e);const r=n.percentage;r>=1?n._checkEnded()?this.setPrivate(t,n._value(1)):(i=!0,n._reset(e),this._setPrivate(t,n._value(1))):(i=!0,this._setPrivate(t,n._value(r)))}else r=!0})),i?t=Od.Playing:r&&(t=Od.Paused)}return t}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,t){let i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Nh((()=>{vh(i,t),0===i.length&&delete this._settingEvents[e]}))}off(e,t){let i=this._settingEvents[e];void 0!==i&&void 0!==t?vh(i,t):delete this._settingEvents[e]}onPrivate(e,t){let i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Nh((()=>{vh(i,t),0===i.length&&delete this._privateSettingEvents[e]}))}offPrivate(e,t){let i=this._privateSettingEvents[e];void 0!==i&&void 0!==t?vh(i,t):delete this._privateSettingEvents[e]}getRaw(e,t){const i=this._settings[e];return void 0!==i?i:t}has(e){return e in this._settings}get(e,t){return this.getRaw(e,t)}_sendKeyEvent(e,t){const i=this._settingEvents[e];void 0!==i&&mh(i,(i=>{i(t,this,e)}))}_sendPrivateKeyEvent(e,t){const i=this._privateSettingEvents[e];void 0!==i&&mh(i,(i=>{i(t,this,e)}))}_setRaw(e,t,i){this._prevSettings[e]=t,this._sendKeyEvent(e,i)}setRaw(e,t){const i=this._settings[e];this._settings[e]=t,i!==t&&this._setRaw(e,i,t)}_set(e,t){const i=this._settings[e];this._settings[e]=t,i!==t&&(this._setRaw(e,i,t),this._markDirtyKey(e))}_stopAnimation(e){const t=this._animatingSettings[e];t&&(delete this._animatingSettings[e],t.stop())}set(e,t){return this._set(e,t),this._stopAnimation(e),t}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){mh(Ch(this._settings),(e=>{this.remove(e)}))}getPrivate(e,t){const i=this._privateSettings[e];return void 0!==i?i:t}_setPrivateRaw(e,t,i){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,i)}setPrivateRaw(e,t){const i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&this._setPrivateRaw(e,i,t)}_setPrivate(e,t){const i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&(this._setPrivateRaw(e,i,t),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const t=this._animatingPrivateSettings[e];t&&(t.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){Dh(e,((e,t)=>{this.set(e,t)}))}animate(e){const t=e.key,i=e.to,r=e.duration||0,n=e.loops||1,a=void 0===e.from?this.get(t):e.from,s=void 0===e.easing?jd:e.easing;if(0===r)this.set(t,i);else{if(void 0!==a&&a!==i){this.set(t,a);const e=this._animatingSettings[t]=new Yd(this,a,i,r,s,n,this._animationTime());return this._startAnimation(),e}this.set(t,i)}const o=new Yd(this,a,i,r,s,n,null);return o.stop(),o}animatePrivate(e){const t=e.key,i=e.to,r=e.duration||0,n=e.loops||1,a=void 0===e.from?this.getPrivate(t):e.from,s=void 0===e.easing?jd:e.easing;if(0===r)this.setPrivate(t,i);else{if(void 0!==a&&a!==i){this.setPrivate(t,a);const e=this._animatingPrivateSettings[t]=new Yd(this,a,i,r,s,n,this._animationTime());return this._startAnimation(),e}this.setPrivate(t,i)}const o=new Yd(this,a,i,r,s,n,null);return o.stop(),o}_dispose(){}isDisposed(){return this._disposed}dispose(){this.enableDispose&&!this._disposed&&(this._disposed=!0,this._dispose())}}class Zd extends Xd{constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(super(t),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Bd(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Gd(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=r,t.id&&this._registerId(t.id)}static new(e,t,i){const r=new this(e,t,!0);return r._template=i,r._afterNew(),r}static _new(e,t){const i=new this(e,t,!0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]);return i._afterNew(),i}_afterNew(){this._checkDirty();let e=!1;const t=this._template;t&&(e=!0,t._setObjectTemplate(this)),mh(this._internalTemplates,(t=>{e=!0,t._setObjectTemplate(this)})),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),mh(this._internalTemplates,(e=>{e._setObjectTemplate(this)})),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new Td}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefaultFn(e,t){const i=this.get(e);if(i)return i;{const i=t();return this.set(e,i),i}}_setDefault(e,t){this.has(e)||super.set(e,t)}_setRawDefault(e,t){this.has(e)||super.setRaw(e,t)}_clearDirty(){Ch(this._dirty).forEach((e=>{this._dirty[e]=!1})),Ch(this._dirtyPrivate).forEach((e=>{this._dirtyPrivate[e]=!1}))}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return-1!==this.classNames.indexOf(e)}_pushPropertyDisposer(e,t){let i=this._disposerProperties[e];return void 0===i&&(i=this._disposerProperties[e]=[]),i.push(t),t}_disposeProperty(e){const t=this._disposerProperties[e];void 0!==t&&(mh(t,(e=>{e.dispose()})),delete this._disposerProperties[e])}set template(e){const t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,t){}get(e,t){const i=this.adapters.fold(e,this._settings[e]);return void 0!==i?i:t}isUserSetting(e){return this._userProperties[e]||!1}set(e,t){return this._userProperties[e]=!0,super.set(e,t)}setRaw(e,t){this._userProperties[e]=!0,super.setRaw(e,t)}_setSoft(e,t){return this._userProperties[e]?t:super.set(e,t)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,t){return this._userPrivateProperties[e]=!0,super.setPrivate(e,t)}setPrivateRaw(e,t){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,t)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,t,i){if(!this._userProperties[t]){e===this._findTemplateByKey(t)&&super.set(t,i)}}_setTemplatePrivateProperty(e,t,i){if(!this._userPrivateProperties[t]){e===this._findTemplateByPrivateKey(t)&&super.setPrivate(t,i)}}_removeTemplateProperty(e){if(!this._userProperties[e]){const t=this._findTemplateByKey(e);t?super.set(e,t._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const t=this._findTemplateByPrivateKey(e);t?super.setPrivate(e,t._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const t=this.states.create(e,{}),i={};this._eachTemplate((r=>{const n=r.states.lookup(e);n&&n._apply(t,i)})),Dh(t._settings,(e=>{i[e]||t._userSettings[e]||t.remove(e)}))}_applyTemplate(e,t){this._templateDisposers.push(e._apply(this,t)),Dh(e._settings,((e,i)=>{t.settings[e]||this._userProperties[e]||(t.settings[e]=!0,super.set(e,i))})),Dh(e._privateSettings,((e,i)=>{t.privateSettings[e]||this._userPrivateProperties[e]||(t.privateSettings[e]=!0,super.setPrivate(e,i))})),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate((t=>(e(t),!1))),gh(this._internalTemplates,e),mh(this._templates,e)}_applyTemplates(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._disposeTemplates();const t={settings:{},privateSettings:{},states:{}};this._eachTemplate((e=>{this._applyTemplate(e,t)})),e&&(Dh(this._settings,(e=>{this._userProperties[e]||t.settings[e]||super.remove(e)})),Dh(this._privateSettings,(e=>{this._userPrivateProperties[e]||t.privateSettings[e]||super.removePrivate(e)})))}_findTemplate(e){const t=this._findStaticTemplate(e);if(void 0===t){const t=function(e,t){const i=function(e,t){let i=e.length;for(;i>0;)if(--i,t(e[i],i))return i;return-1}(e,t);if(-1!==i)return e[i]}(this._internalTemplates,e);return void 0===t?Sh(this._templates,e):t}return t}_findTemplateByKey(e){return this._findTemplate((t=>e in t._settings))}_findTemplateByPrivateKey(e){return this._findTemplate((t=>e in t._privateSettings))}_disposeTemplates(){mh(this._templateDisposers,(e=>{e.dispose()})),this._templateDisposers.length=0}_removeTemplates(){mh(this._templates,(e=>{e._removeObjectTemplate(this)})),this._templates.length=0}_applyThemes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;const i=[];let r=[];const n=new Set,a=this.get("themeTagsSelf");return a&&mh(a,(e=>{n.add(e)})),this._walkParents((e=>{e===this._root._rootContainer&&(t=!0),e._defaultThemes.length>0&&i.push(e._defaultThemes);const a=e.get("themes");a&&r.push(a);const s=e.get("themeTags");s&&mh(s,(e=>{n.add(e)}))})),r=i.concat(r),this._removeTemplates(),(t||e)&&gh(this.classNames,(e=>{const t=[];mh(r,(i=>{mh(i,(i=>{const r=i._lookupRules(e);r&&gh(r,(e=>{if(e.tags.every((e=>n.has(e)))){const i=Th(t,(t=>{const i=zd(e.tags.length,t.tags.length);return 0===i?Hd(e.tags,t.tags,zd):i}));t.splice(i.index,0,e)}}))}))})),mh(t,(e=>{this._templates.push(e.template),e.template._setObjectTemplate(this)}))})),this._applyTemplates(),(t||e)&&(this._runSetup=!1),t||e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const t=this._prevSettings.id;t&&(delete this._root.entitiesById[t],delete Ud.entitiesById[t])}}_registerId(e){if(this._root.entitiesById[e]&&this._root.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');this._root.entitiesById[e]=this,Ud.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),mh(this._internalTemplates,(e=>{e._removeObjectTemplate(this)})),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach((e=>{e.dispose()})),Dh(this._disposerProperties,((e,t)=>{mh(t,(e=>{e.dispose()}))}));const t=this.get("id");t&&(delete this._root.entitiesById[t],delete Ud.entitiesById[t])}setTimeout(e,t){const i=setTimeout((()=>{this.removeDispose(r),e()}),t),r=new Nh((()=>{clearTimeout(i)}));return this._disposers.push(r),r}removeDispose(e){if(!this.isDisposed()){let t=ph(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}hasTag(e){return-1!==ph(this.get("themeTags",[]),e)}addTag(e){if(!this.hasTag(e)){const t=this.get("themeTags",[]);t.push(e),this.set("themeTags",t)}}removeTag(e){if(this.hasTag(e)){const t=this.get("themeTags",[]);yh(t,e),this.set("themeTags",t)}}_t(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return this._root.language.translate(e,t,...r)}get root(){return this._root}}function qd(e){Dh(e,((e,t)=>{ch(t)&&"function"===typeof t.dispose&&(t.enableDispose=!0,t.dispose())}))}Object.defineProperty(Zd,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(Zd,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});class Kd{constructor(e,t,i){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=i}_dispose(){qd(this._settings)}get(e,t){const i=this._settings[e];return void 0!==i?i:t}set(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){Ch(e).forEach((t=>{this._settings[t]=e[t]})),this._template._stateChanged(this._name)}_apply(e,t){Dh(this._settings,((i,r)=>{t[i]||e._userSettings[i]||(t[i]=!0,e.setRaw(i,r))}))}}class Jd{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}_dispose(){Dh(this._states,((e,t)=>{t._dispose()}))}lookup(e){return this._states[e]}create(e,t){const i=this._states[e];if(i)return i.setAll(t),i;{const i=new Kd(e,this._template,t);return this._states[e]=i,this._template._stateChanged(e),i}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,t){Dh(this._states,((i,r)=>{let n=t.states[i];null==n&&(n=t.states[i]={});const a=e.states.create(i,{});r._apply(a,n)}))}}class Qd{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,t){let i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),new Nh((()=>{vh(i,t),0===i.length&&delete this._callbacks[e]}))}remove(e){void 0!==this._callbacks[e]&&delete this._callbacks[e]}_apply(e){const t=[];return Dh(this._callbacks,((i,r)=>{mh(r,(r=>{t.push(e.adapters.add(i,r))}))})),new $h(t)}}class ep{constructor(e,t){if(Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Jd(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Qd}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Td}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new ep(e,!0)}_dispose(){qd(this._settings),qd(this._privateSettings)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}_checkDisposed(){if(this._disposed)throw new Error("Template is disposed")}get entities(){return this._entities}get(e,t){this._checkDisposed();const i=this._settings[e];return void 0!==i?i:t}setRaw(e,t){this._checkDisposed(),this._settings[e]=t}set(e,t){this._checkDisposed(),this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach((i=>{i._setTemplateProperty(this,e,t)})))}remove(e){this._checkDisposed(),e in this._settings&&(delete this._settings[e],this._entities.forEach((t=>{t._removeTemplateProperty(e)})))}removeAll(){this._checkDisposed(),Dh(this._settings,((e,t)=>{this.remove(e)}))}getPrivate(e,t){this._checkDisposed();const i=this._privateSettings[e];return void 0!==i?i:t}setPrivateRaw(e,t){return this._checkDisposed(),this._privateSettings[e]=t,t}setPrivate(e,t){return this._checkDisposed(),this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach((i=>{i._setTemplatePrivateProperty(this,e,t)}))),t}removePrivate(e){this._checkDisposed(),e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach((t=>{t._removeTemplatePrivateProperty(e)})))}setAll(e){this._checkDisposed(),Dh(e,((e,t)=>{this.set(e,t)}))}on(e,t){this._checkDisposed();let i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Nh((()=>{vh(i,t),0===i.length&&delete this._settingEvents[e]}))}onPrivate(e,t){this._checkDisposed();let i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Nh((()=>{vh(i,t),0===i.length&&delete this._privateSettingEvents[e]}))}_apply(e,t){this._checkDisposed();const i=[];return Dh(this._settingEvents,((t,r)=>{mh(r,(r=>{i.push(e.on(t,r))}))})),Dh(this._privateSettingEvents,((t,r)=>{mh(r,(r=>{i.push(e.onPrivate(t,r))}))})),this.states._apply(e,t),i.push(this.adapters._apply(e)),i.push(e.events.copyFrom(this.events)),new $h(i)}_setObjectTemplate(e){this._checkDisposed(),this._entities.push(e)}_removeObjectTemplate(e){yh(this._entities,e)}_stateChanged(e){this._checkDisposed(),this._entities.forEach((t=>{t._applyStateByKey(e)}))}}const tp=Math.PI,ip=tp/180,rp=180/tp;function np(e,t,i){if(!uh(t)||t<=0){let t=Math.round(e);return i&&t-e==.5&&t--,t}{let i=Math.pow(10,t);return Math.round(e*i)/i}}function ap(e,t,i){return Math.min(Math.max(e,t),i)}function sp(e){return Math.sin(ip*e)}function op(e){return Math.cos(ip*e)}function lp(e){return(e%=360)<0&&(e+=360),e}function up(e,t){return{x:e*op(t),y:e*sp(t)}}class cp extends Td{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}_onRenderer(e,t){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let i=this._rendererDisposers[e];if(void 0===i){const r=this._sprite._display.on(e,(e=>{t.call(this,e)}));i=this._rendererDisposers[e]=new Fh((()=>{delete this._rendererDisposers[e],r.dispose()}))}return i.increment()}_on(e,t,i,r,n,a){const s=super._on(e,t,i,r,n,a),o=cp.RENDERER_EVENTS[t];return void 0!==o&&(s.disposer=new $h([s.disposer,this._onRenderer(t,o)])),s}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,t){const i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=i}}}Object.defineProperty(cp,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(e){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",e))&&this.dispatch("click",this._makePointerEvent("click",e))},rightclick:function(e){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",e))},middleclick:function(e){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",e))},dblclick:function(e){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",e))},pointerover:function(e){const t=this._sprite;let i=!0;if(t.getPrivate("trustBounds")){t._getBounds();const r=t.globalBounds();if(t.isType("Graphics")){const e=t.get("strokeWidth",1)/2;e>=1&&(r.left-=e,r.right+=e,r.top-=e,r.bottom+=e)}(function(e,t){return e.x>=t.left&&e.y>=t.top&&e.x<=t.right&&e.y<=t.bottom})(e.point,r)||(i=!1,t._root._renderer.removeHovering(t._display))}i&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",e))},pointerout:function(e){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",e))},pointerdown:function(e){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",e))},pointerup:function(e){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",e))},globalpointerup:function(e){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",e))},globalpointermove:function(e){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",e))},wheel:function(e){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:e.event,point:e.point})}}});class hp extends Zd{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}markDirtyKey(e){this._markDirtyKey(e)}_markDirtyKey(e){super._markDirtyKey(e),"x"!=e&&"y"!=e&&"dx"!=e&&"dy"!=e||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),"x"!=e&&"y"!=e||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new cp(this)}_processTemplateField(){let e;const t=this.get("templateField");if(t){const i=this.dataItem;if(i){const r=i.dataContext;r&&(e=r[t],e instanceof ep||!e||(e=ep.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const t=this._dataItem;this._dataItem=e,this._processTemplateField();const i="dataitemchanged";e!=t&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:t,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof Jc||this.get("height")instanceof Jc?wh(e._percentageSizeChildren,this):vh(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof Jc||this.get("y")instanceof Jc?wh(e._percentagePositionChildren,this):vh(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const t=this.get("centerX");null!=t&&(this._display.pivot.x=e.left+Jh(t,e.right-e.left));const i=this.get("centerY");null!=i&&(this._display.pivot.y=e.top+Jh(i,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const t=this._tooltipPointerDp;t&&(t.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",(e=>{this.showTooltip(e.point)}))),this._tooltipPointerDp=new $h([this.events.on("pointerover",(()=>{this._tooltipMoveDp=this.events.on("globalpointermove",(e=>{this.showTooltip(e.point)}))})),this.events.on("pointerout",(()=>{const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0)}))]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,t=this.events;if(this.isDirty("draggable")){const i=this.get("draggable");i?(this.set("interactive",!0),this._dragDp=new $h([t.on("pointerdown",(e=>{this.dragStart(e)})),t.on("globalpointermove",(e=>{this.dragMove(e)})),t.on("globalpointerup",(e=>{this.dragStop(e)}))])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!i}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const e=this.get("tooltipText"),i=this.get("tooltipHTML"),r=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(e||i)&&("click"==r?(this._tooltipDp=new $h([t.on("click",(()=>{this.setTimeout((()=>{const e=this.getTooltip();e&&!e.isHidden()&&e.get("tooltipTarget")===this?this.hideTooltip():this.showTooltip()}),10)})),Bh(document,"click",(e=>{this.hideTooltip()}))]),this._disposers.push(this._tooltipDp)):"always"==r||(this._tooltipDp=new $h([t.on("pointerover",(()=>{this.showTooltip()})),t.on("pointerout",(()=>{this.hideTooltip()}))]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let e=this.get("toggleKey");e&&"none"!=e?this._toggleDp=t.on("click",(()=>{this._isDragging||this.set(e,!this.get(e))})):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const e=this.parent;e&&(this.isDirty("width")&&this.get("width")instanceof Jc||this.isDirty("height")&&this.get("height")instanceof Jc)&&(e.markDirty(),e._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight")||this.isDirty("marginLeft")||this.isDirty("marginTop")||this.isDirty("marginRight")||this.isDirty("marginBottom"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const t=this.get("wheelable");t&&this.set("interactive",!0),e.wheelable=!!t}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter"));let i=this.get("filter","");if(this.isDirty("blur")){const e=this.get("blur",0);0!=e&&(i+=" blur("+e+"px)")}if(this.isDirty("saturate")){const e=this.get("saturate",1);1!=e&&(i+=" saturate("+e+")")}if(this.isDirty("brightness")){const e=this.get("brightness",1);1!=e&&(i+=" brightness("+e+")")}if(this.isDirty("contrast")){const e=this.get("contrast",1);1!=e&&(i+=" contrast("+e+")")}if(this.isDirty("sepia")){const e=this.get("sepia",0);0!=e&&(i+=" sepia("+e+")")}if(this.isDirty("hue")){const e=this.get("hue",0);0!=e&&(i+=" hue-rotate("+e+"deg)")}if(this.isDirty("invert")){const e=this.get("invert",0);0!=e&&(i+=" invert("+e+")")}if(i&&(e.filter=i),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new $h([t.on("focus",(()=>{this.showTooltip()})),t.on("blur",(()=>{this.hideTooltip()}))]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility(),this._disposers.push(t.on("blur",(()=>{this.setPrivateRaw("touchHovering",!1)}))),this._disposers.push(t.once("boundschanged",(()=>{this.markDirtyAccessibility()})))),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const e=this.events;this.get("interactive")&&!e.isDisposed()?this._hoverDp=new $h([e.on("click",(e=>{Gh(e.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout((()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}),10))})),e.on("globalpointerup",(e=>{Gh(e.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})),this._isDown&&this._handleUp(e)})),e.on("pointerover",(()=>{this._handleOver()})),e.on("pointerout",(()=>{this._handleOut()})),e.on("pointerdown",(e=>{this._handleDown(e)}))]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const t="dragstop";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const t=Hh(e.originalEvent);delete this._downPoints[t],0==Ch(this._downPoints).length&&(this._isDown=!1)}}_hasMoved(e){const t=Hh(e.originalEvent),i=this._downPoints[t];if(i){const t=Math.abs(i.x-e.point.x),r=Math.abs(i.y-e.point.y);return t>5||r>5}return!1}_hasDown(){return Ch(this._downPoints).length>0}_handleDown(e){const t=this.parent;if(t&&!this.get("draggable")&&t._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const t=Hh(e.originalEvent);this._downPoints[t]={x:e.point.x,y:e.point.y}}}dragMove(e){let t=this._dragEvent;if(t){if(t.simulated&&!e.simulated)return!0;let i=0,r=this.parent,n=1;for(;null!=r;)i+=r.get("rotation",0),r=r.parent,r&&(n*=r.get("scale",1));let a=(e.point.x-t.point.x)/n,s=(e.point.y-t.point.y)/n;const o=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const t="dragstart";o.isEnabled(t)&&o.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let t=this._dragPoint;this.set("x",t.x+a*op(i)+s*sp(i)),this.set("y",t.y+s*op(i)-a*sp(i));const r="dragged";o.isEnabled(r)&&o.dispatch(r,{type:r,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(a,s)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const t="dragstart";o.isEnabled(t)&&o.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,t=0;for(;;){if(!e)return t;++t,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const e=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const t=this.parent;t&&"absolute"!=this.get("position")&&(null==t.get("width")||null==t.get("height")||t.get("layout"))&&t.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let t;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),t=this._adjustedLocalBounds):(t={left:0,right:0,top:0,bottom:0},this._localBounds=t,this._adjustedLocalBounds=t),!e||e.left!==t.left||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom){const e="boundschanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate("showingTooltip")&&this.showTooltip()}}_fixMinBounds(e){let t=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));uh(t)&&e.right-e.left<t&&(e.right=e.left+t),uh(i)&&e.bottom-e.top<i&&(e.bottom=e.top+i);let r=this.getPrivate("width"),n=this.getPrivate("height");uh(r)&&(r>0?e.right=e.left+r:e.left=e.right+r),uh(n)&&(n>0?e.bottom=e.top+n:e.top=e.bottom+n)}_removeParent(e){e&&(e.children.removeValue(this),vh(e._percentageSizeChildren,this),vh(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.isDisposed()||(this.showTooltip(),this._handleOver())}unhover(){this.isDisposed()||(this.hideTooltip(),this._handleOut())}showTooltip(e){if(!this.isDisposed()){const t=this.getTooltip(),i=this.get("tooltipText"),r=this.get("tooltipHTML");if((i||r)&&t){const n=this.get("tooltipPosition"),a=this.getPrivate("tooltipTarget",this);if("fixed"!=n&&e||(this._display._setMatrix(),e=this.toGlobal(a._getTooltipPoint())),"pointer"==n){const t=this.getPrivate("lastTooltipCoords");if(t&&t.x==e.x&&t.y==e.y)return;this.setPrivate("lastTooltipCoords",e)}t.set("pointTo",e),t.set("tooltipTarget",a),t.get("x")||t.set("x",e.x),t.get("y")||t.set("y",e.y),i&&t.label.set("text",i),r&&t.label.set("html",r);const s=this.dataItem;if(s&&t.label._setDataItem(s),"always"==this.get("showTooltipOn")&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();t.label.text.markDirtyText();const o=t.show();return this.setPrivateRaw("showingTooltip",!0),o}}}hideTooltip(){const e=this.getTooltip();if(e&&(this.removePrivate("lastTooltipCoords"),e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==e)){let t=e.get("keepTargetHover")&&0==e.get("stateAnimationDuration",0)?400:void 0;const i=e.hide(t);return this.setPrivateRaw("showingTooltip",!1),i}}_getTooltipPoint(){const e=this._localBounds;if(e){let t=0,i=0;return this.get("isMeasured")?(t=e.left+Jh(this.get("tooltipX",0),e.right-e.left),i=e.top+Jh(this.get("tooltipY",0),e.bottom-e.top)):(t=Jh(this.get("tooltipX",0),this.width()),i=Jh(this.get("tooltipY",0),this.height())),{x:t,y:i}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let e=this.parent;if(e)return e.getTooltip()}}_updatePosition(){const e=this.parent;let t=this.get("dx",0),i=this.get("dy",0),r=this.get("x"),n=this.getPrivate("x"),a=0,s=0;const o=this.get("position");r instanceof Jc&&(r=e?e.innerWidth()*r.value+e.get("paddingLeft",0):0),uh(r)?a=r+t:null!=n?a=n:e&&"relative"==o&&(a=e.get("paddingLeft",0)+t);let l=this.get("y"),u=this.getPrivate("y");l instanceof Jc&&(l=e?e.innerHeight()*l.value+e.get("paddingTop",0):0),uh(l)?s=l+i:null!=u?s=u:e&&"relative"==o&&(s=e.get("paddingTop",0)+i);const c=this._display;if(c.x!=a||c.y!=s){c.invalidateBounds(),c.x=a,c.y=s;const e="positionchanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),t=this.getPrivate("x");const i=this.parent;return i?e instanceof Jc?Jh(e,i.innerWidth())+i.get("paddingLeft",0):uh(e)?e:null!=t?t:i.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(null!=e)return e;let t=this.get("y");const i=this.parent;return i?t instanceof Jc?Jh(t,i.innerHeight())+i.get("paddingTop",0):uh(t)?t:null!=e?e:i.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,t=this.x(),i=this.y();return{left:e.left+t,right:e.right+t,top:e.top+i,bottom:e.bottom+i}}globalBounds(){const e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),i=this.toGlobal({x:e.right,y:e.top}),r=this.toGlobal({x:e.right,y:e.bottom}),n=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,i.x,r.x,n.x),top:Math.min(t.y,i.y,r.y,n.y),right:Math.max(t.x,i.x,r.x,n.x),bottom:Math.max(t.y,i.y,r.y,n.y)}}_onShow(e){}_onHide(e){}appear(e,t){return Kc(this,void 0,void 0,(function*(){return yield this.hide(0),t?new Promise(((i,r)=>{this.setTimeout((()=>{i(this.show(e))}),t)})):this.show(e)}))}show(e){return Kc(this,void 0,void 0,(function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const t=this.states.applyAnimate("default",e);yield xd(t),this._isShowing=!1}}))}hide(e){return Kc(this,void 0,void 0,(function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let t=this.states.lookup("hidden");t||(t=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const i=this.states.applyAnimate("hidden",e);yield xd(i),this._isHiding=!1}}))}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}compositeScale(){const e=this.get("scale",1);return this._parent?this._parent.compositeScale()*e:e}compositeRotation(){const e=this.get("rotation",0);return this._parent?this._parent.compositeRotation()+e:e}width(){let e=this.get("width"),t=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),r=this.getPrivate("width"),n=0;if(uh(r))n=r;else if(null==e)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof Jc){const t=this.parent;n=t?t.innerWidth()*e.value:this._root.width()*e.value}else uh(e)&&(n=e);return uh(i)&&(n=Math.max(i,n)),uh(t)&&(n=Math.min(t,n)),n}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(uh(e))return e;{let e=this.get("width");if(uh(e))return e}const t=this.parent;return t?t.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(uh(e))return e;{let e=this.get("height");if(uh(e))return e}const t=this.parent;return t?t.innerHeight():this._root.height()}height(){let e=this.get("height"),t=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),r=this.getPrivate("height"),n=0;if(uh(r))n=r;else if(null==e)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof Jc){const t=this.parent;n=t?t.innerHeight()*e.value:this._root.height()*e.value}else uh(e)&&(n=e);return uh(i)&&(n=Math.max(i,n)),uh(t)&&(n=Math.min(t,n)),n}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._parent;e!==i&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(i),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return Rh(this._downPoints,((e,t)=>e>t?1:e<t?-1:0))[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}}Object.defineProperty(hp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(hp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([hp.className])});class dp extends Zd{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),t=this.get("width",100),i=this.get("height",100),r=this.get("fill"),n=this.get("fillOpacity",1),a=this._backgroundDisplay,s=this._display;s.clear(),a.clear(),r&&n>0&&(a.beginFill(r,n),a.drawRect(0,0,t,i),a.endFill()),s.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(s,a,e,t,i)}this._clear=!1}}Object.defineProperty(dp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(dp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([dp.className])});class pp extends dp{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const e=this.get("canvas");e&&(this.set("width",e.width),this.set("height",e.height))}_draw(){super._draw();const e=this.get("colorOpacity");void 0!==e&&(this._display.alpha=Math.max(0,e));const t=this._image;if(t){const e=this.get("width",100),i=this.get("height",100),r=this.get("fit","image");let n=0,a=0;"pattern"==r?(n=e,a=i,this.markDirty()):(n=t.width,a=t.height,"image"==r&&(this.set("width",n),this.set("height",a)));let s=0,o=0;this.get("centered",!0)&&(s=e/2-n/2,o=i/2-a/2),this._display.image(t,n,a,s,o)}const i=this.get("canvas");i&&this._display.image(i,i.width,i.height,0,0)}_load(){const e=this.get("src");if(e){const t=new Image;t.src=e,t.decode().then((()=>{this._image=t,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})})).catch((e=>{}))}}}var fp;Object.defineProperty(pp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(pp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dp.classNames.concat([pp.className])}),function(e){e.ADD="lighter",e.COLOR="color",e.COLOR_BURN="color-burn",e.COLOR_DODGE="color-dodge",e.DARKEN="darken",e.DIFFERENCE="difference",e.DST_OVER="destination-over",e.EXCLUSION="exclusion",e.HARD_LIGHT="hard-light",e.HUE="hue",e.LIGHTEN="lighten",e.LUMINOSITY="luminosity",e.MULTIPLY="multiply",e.NORMAL="source-over",e.OVERLAY="overlay",e.SATURATION="saturation",e.SCREEN="screen",e.SOFT_LIGHT="soft-light",e.SRC_ATOP="source-atop",e.XOR="xor"}(fp||(fp={}));class mp extends hp{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("lineCap")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",(()=>{this._markDirtyKey("fill")}))),this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("fill")}))))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",(()=>{this._markDirtyKey("stroke")}))),this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")}))))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");uh(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const t=this.get("strokeDashoffset");t&&this._display.setLineDashOffset(t);const i=this.get("blendMode",fp.NORMAL);this._display.blendMode=i;const r=this.get("draw");r&&"function"===typeof r&&r(this._display,this);const n=this.get("svgPath");null!=n&&this._display.svgPath(n)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),t=this.get("fillGradient"),i=this.get("fillPattern"),r=this.get("fillOpacity"),n=this.get("stroke"),a=this.get("strokeGradient"),s=this.get("strokePattern"),o=this.get("shadowColor"),l=this.get("shadowBlur"),u=this.get("shadowOffsetX"),c=this.get("shadowOffsetY"),h=this.get("shadowOpacity");if(o&&(l||u||c)&&this._display.shadow(o,l,u,c,h),e&&!t&&(this._display.beginFill(e,r),this._display.endFill()),t){if(e){const i=t.get("stops",[]);i.length&&mh(i,(t=>{t.color&&!t.colorInherited||!e||(t.color=e,t.colorInherited=!0),(null==t.opacity||t.opacityInherited)&&(t.opacity=r,t.opacityInherited=!0)}))}const i=t.getFill(this);i&&(this._display.beginFill(i,r),this._display.endFill())}if(i){const e=i.pattern;e&&(this._display.beginFill(e,r),this._display.endFill(),i instanceof pp&&i.events.once("loaded",(()=>{this._clear=!0,this.markDirty()})))}if(n||a||s){const e=this.get("strokeOpacity");let t=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(t/=this.get("scale",1)),this.get("crisp")&&(t/=this._root._renderer.resolution);const i=this.get("lineJoin"),r=this.get("lineCap");if(n&&!a&&(this._display.lineStyle(t,n,e,i,r),this._display.endStroke()),a){const s=a.get("stops",[]);s.length&&mh(s,(t=>{t.color&&!t.colorInherited||!n||(t.color=n,t.colorInherited=!0),(null==t.opacity||t.opacityInherited)&&(t.opacity=e,t.opacityInherited=!0)}));const o=a.getFill(this);o&&(this._display.lineStyle(t,o,e,i,r),this._display.endStroke())}if(s){let n=s.pattern;n&&(this._display.lineStyle(t,n,e,i,r),this._display.endStroke(),s instanceof pp&&s.events.once("loaded",(()=>{this._clear=!0,this.markDirty()})))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(mp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(mp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hp.classNames.concat([mp.className])});class gp extends mp{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}}function bp(e,t){e.get("reverseChildren",!1)?e.children.eachReverse(t):e.children.each(t)}Object.defineProperty(gp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(gp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([gp.className])});class yp extends Zd{}Object.defineProperty(yp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(yp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([yp.className])});class vp extends yp{updateContainer(e){let t=e.get("paddingLeft",0),i=e.innerWidth(),r=0;bp(e,(e=>{if(e.isVisible()&&"relative"==e.get("position")){let t=e.get("width");if(t instanceof Jc){r+=t.value;let n=i*t.value,a=e.get("minWidth",e.getPrivate("minWidth",-1/0));a>n&&(i-=a,r-=t.value);let s=e.get("maxWidth",e.getPrivate("maxWidth",1/0));n>s&&(i-=s,r-=t.value)}else uh(t)||(t=e.width()),i-=t+e.get("marginLeft",0)+e.get("marginRight",0)}})),(i<=0||i==1/0)&&(i=.1),bp(e,(e=>{if(e.isVisible()&&"relative"==e.get("position")){let t=e.get("width");if(t instanceof Jc){let n=i*t.value/r-e.get("marginLeft",0)-e.get("marginRight",0),a=e.get("minWidth",e.getPrivate("minWidth",-1/0)),s=e.get("maxWidth",e.getPrivate("maxWidth",1/0));n=Math.min(Math.max(a,n),s),e.setPrivate("width",n)}else e._prevSettings.width instanceof Jc&&e.setPrivate("width",void 0)}}));let n=t;bp(e,(e=>{if("relative"==e.get("position"))if(e.isVisible()){let t=e.adjustedLocalBounds(),i=e.get("marginLeft",0),r=e.get("marginRight",0),a=e.get("maxWidth"),s=t.left,o=t.right;a&&o-s>a&&(o=s+a);let l=n+i-s;e.setPrivate("x",l),n=l+o+r}else e.setPrivate("x",void 0)}))}}Object.defineProperty(vp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(vp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yp.classNames.concat([vp.className])});class _p extends yp{updateContainer(e){let t=e.get("paddingTop",0),i=e.innerHeight(),r=0;bp(e,(e=>{if(e.isVisible()&&"relative"==e.get("position")){let t=e.get("height");if(t instanceof Jc){r+=t.value;let n=i*t.value,a=e.get("minHeight",e.getPrivate("minHeight",-1/0));a>n&&(i-=a,r-=t.value);let s=e.get("maxHeight",e.getPrivate("maxHeight",1/0));n>s&&(i-=s,r-=t.value)}else uh(t)||(t=e.height()),i-=t+e.get("marginTop",0)+e.get("marginBottom",0)}})),(i<=0||i==1/0)&&(i=.1),bp(e,(e=>{if(e.isVisible()&&"relative"==e.get("position")){let t=e.get("height");if(t instanceof Jc){let n=i*t.value/r-e.get("marginTop",0)-e.get("marginBottom",0),a=e.get("minHeight",e.getPrivate("minHeight",-1/0)),s=e.get("maxHeight",e.getPrivate("maxHeight",1/0));n=Math.min(Math.max(a,n),s),e.setPrivate("height",n)}else e._prevSettings.height instanceof Jc&&e.setPrivate("height",void 0)}}));let n=t;bp(e,(e=>{if("relative"==e.get("position"))if(e.isVisible()){let t=e.adjustedLocalBounds(),i=e.get("marginTop",0),r=t.top,a=t.bottom,s=e.get("maxHeight");s&&a-r>s&&(a=r+s);let o=e.get("marginBottom",0),l=n+i-r;e.setPrivate("y",l),n=l+a+o}else e.setPrivate("y",void 0)}))}}Object.defineProperty(_p,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(_p,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yp.classNames.concat([_p.className])});class wp extends yp{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let t=e.get("paddingLeft",0),i=e.get("paddingRight",0),r=e.get("paddingTop",0),n=e.maxWidth()-t-i,a=n,s=1;bp(e,(e=>{if(e.get("visible")&&e.getPrivate("visible")&&!e.get("forceHidden")&&"absolute"!=e.get("position")){let t=e.width();t<a&&(a=t),t>s&&(s=t)}})),a=ap(a,1,n),s=ap(s,1,n);let o=1;o=this.get("fixedWidthGrid")?n/s:n/a,o=Math.max(1,Math.floor(o)),o=Math.min(this.get("maxColumns",Number.MAX_VALUE),o);let l=this.getColumnWidths(e,o,s,n),u=r,c=0,h=0;o=l.length;let d=t;bp(e,(e=>{if("relative"==e.get("position")&&e.isVisible()){const i=e.get("marginTop",0),r=e.get("marginBottom",0);let n=e.adjustedLocalBounds(),a=e.get("marginLeft",0),s=e.get("marginRight",0),p=d+a-n.left,f=u+i-n.top;e.setPrivate("x",p),e.setPrivate("y",f),d+=l[c]+s,h=Math.max(h,e.height()+i+r),c++,c>=o&&(c=0,d=t,u+=h)}}))}getColumnWidths(e,t,i,r){let n=0,a=[],s=0;return bp(e,(r=>{let n=r.adjustedLocalBounds();"absolute"!=r.get("position")&&r.isVisible()&&(this.get("fixedWidthGrid")?a[s]=i:a[s]=Math.max(0|a[s],n.right-n.left+r.get("marginLeft",0)+r.get("marginRight",0)),s<e.children.length-1&&(s++,s==t&&(s=0)))})),mh(a,(e=>{n+=e})),n>r?t>2?(t-=1,this.getColumnWidths(e,t,i,r)):[r]:a}}Object.defineProperty(wp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(wp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yp.classNames.concat([wp.className])});class xp{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];e=this.escape(e);let n=t?e.split("'"):[e];for(let a=0;a<n.length;a++){let e=n[a];if(""!==e)if(a%2===0){e=e.replace(/\]\[/g,"]"+hh+"["),e=e.replace(/\[\]/g,"[ ]");let t=e.split(/[\[\]]+/);for(let e=0;e<t.length;e++){let n=this.cleanUp(this.unescape(t[e]));n!==hh&&(""!==n&&(e%2===0?r.push({type:"value",text:n}):r.push({type:i?"value":"format",text:"["+n+"]"})))}}else{let t=e.split(/[\[\]]+/);for(let e=0;e<t.length;e++){let i=this.cleanUp(this.unescape(t[e]));""!==i&&(e%2===0?r.push({type:"text",text:i}):this.isImage(i)?r.push({type:"image",text:"["+i+"]"}):r.push({type:"format",text:"["+i+"]"}))}}}return r}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let t={};if(""==e||"[ ]"==e)return{};const i=e.match(/('[^']*')|("[^"]*")/gi);if(i)for(let n=0;n<i.length;n++)e=e.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let r=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!r)return{};for(let n=0;n<r.length;n++)if(r[n].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=r[n];else if(r[n].match(/^(underline|line-through)$/i))t.textDecoration=r[n];else if("/"==r[n]);else if(r[n].match(/:/)){const e=r[n].replace("+"," ").split(/:[ ]*/);t[e[0]]=e[1]}else t.fill=wd.fromString(r[n]);return t}}function Pp(e,t){if(null!=t){t=""+t;let i,r=(t=xp.escape(t)).match(/\{([^}]+)\}/g);if(r)for(i=0;i<r.length;i++){let n=Ep(e,r[i].replace(/\{([^}]+)\}/,"$1"),"");null==n&&(n=""),t=t.split(r[i]).join(n)}t=xp.unescape(t)}else t="";return t}function Ep(e,t,i){let r;const n=e.dataItem;let a,s=[],o=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;a=o.exec(t),null!==a;)if(a[3]){s.push({prop:a[3]});const t=e.getDateFormatter().get("dateFields",[]),i=e.getNumberFormatter().get("numericFields",[]),r=e.getDurationFormatter().get("durationFields",[]);-1!==t.indexOf(a[3])?s.push({method:"formatDate",params:[]}):-1!==i.indexOf(a[3])?s.push({method:"formatNumber",params:[]}):-1!==r.indexOf(a[3])&&s.push({method:"formatDuration",params:[]})}else{let e=[];if(""!=td(a[2])){let t,i=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;t=i.exec(a[2]),null!==t;)e.push(t[1]||t[2]||t[3])}s.push({method:a[1],params:e})}if(n){r=Sp(e,s,n._settings),(null==r||ch(r))&&(r=Sp(e,s,n));let a=n.dataContext;null==r&&a&&(r=Sp(e,s,a),null==r&&(r=Sp(e,[{prop:t}],a)),null==r&&a.dataContext&&(r=Sp(e,s,a.dataContext))),null==r&&n.component&&n.component.dataItem!==n&&(r=Ep(n.component,t,i))}return null==r&&(r=Sp(e,s,e)),null==r&&e.parent&&(r=Ep(e.parent,t,i)),r}function kp(e,t){const i=e.getPrivate("customData");if(ch(i))return i[t]}function Sp(e,t,i,r){let n=i,a=!1;for(let s=0,o=t.length;s<o;s++){let o=t[s];if(o.prop){if(n instanceof hp){let e=n.get(o.prop);null==e&&(e=n.getPrivate(o.prop)),null==e&&(e=kp(n,o.prop)),null==e&&(e=n[o.prop]),n=e}else if(n.get){let e=n.get(o.prop);null==e&&(e=n[o.prop]),n=e}else n=n[o.prop];if(null==n)return}else switch(o.method){case"formatNumber":let t=nh(n);null!=t&&(n=e.getNumberFormatter().format(t,r||o.params[0]||void 0),a=!0);break;case"formatDate":let s=ah(n);if(!oh(s)||rh(s.getTime()))return;null!=s&&(n=e.getDateFormatter().format(s,r||o.params[0]||void 0),a=!0);break;case"formatDuration":let l=nh(n);null!=l&&(n=e.getDurationFormatter().format(l,r||o.params[0]||void 0,o.params[1]||void 0),a=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[o.method]&&n[o.method].apply(i,o.params)}}if(!a){let t=[{method:"",params:r}];if(null==r)uh(n)?(t[0].method="formatNumber",t[0].params=""):oh(n)&&(t[0].method="formatDate",t[0].params="");else{let e=function(e){if("undefined"===typeof e)return"string";let t=(e=(e=(e=e.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return t?t[1]:"number"===e?"number":"date"===e?"date":"duration"===e?"duration":e.match(/[#0]/)?"number":e.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(r);"number"===e?t[0].method="formatNumber":"date"===e?t[0].method="formatDate":"duration"===e&&(t[0].method="formatDuration")}t[0].method&&(n=Sp(e,t,n))}return n}Object.defineProperty(xp,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});class Op extends hp{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new Dd(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){gh(this.allChildren(),(e=>{e.dispose()})),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each((e=>{e.removePrivate("x"),e.removePrivate("y")}))),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each((e=>{e.markDirtyPosition()})),this.isDirty("maskContent")){const e=this._childrenDisplay;let t=this._contentMask;this.get("maskContent")?t||(t=gp.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=t,e.addChildAt(t._display,0),e.mask=t._display):t&&(e.removeChild(t._display),e.mask=null,t.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),mh(this._percentageSizeChildren,(e=>{e._updateSize()})),mh(this._percentagePositionChildren,(e=>{e.markDirtyPosition(),e._updateSize()})),this.updateBackground()}updateBackground(){const e=this.get("background");let t=this._localBounds;if(t&&!this.isHidden()){let i=t.left,r=t.top,n=t.right-i,a=t.bottom-r,s=this.get("maxWidth"),o=this.get("maxHeight");o&&a>o&&(a=o),s&&n>s&&(n=s);let l=this.width(),u=this.height();e&&(e.setAll({width:n,height:a,x:i,y:r}),this._display.interactive&&(e._display.interactive=!0));const c=this._contentMask;c&&c.setAll({width:l+1,height:u+1});const h=this.get("verticalScrollbar");if(h){h.set("height",u),h.set("x",l-h.width()-h.get("marginRight",0)),h.set("end",h.get("start",0)+u/this._contentHeight);const e=h.get("background");e&&e.setAll({width:h.width(),height:u});let t=!0;this._contentHeight<=u&&(t=!1),h.setPrivate("visible",t)}}}_applyThemes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!super._applyThemes(e)&&(this.eachChildren((t=>{t._applyThemes(e)})),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren((t=>{t.states.apply(e)}))}_applyStateAnimated(e,t){super._applyStateAnimated(e,t),this.get("setStateOnChildren")&&this.eachChildren((i=>{i.states.applyAnimate(e,t)}))}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){if(this.get("html")){let e=this._localBounds;e&&(this._contentWidth=e.right-e.left,this._contentHeight=e.bottom-e.top)}else{let e=this.get("width"),t=this.get("height"),i=this.getPrivate("width"),r=this.getPrivate("height"),n={left:0,top:0,right:this.width(),bottom:this.height()},a=this.get("layout"),s=!1,o=!1;if((a instanceof vp||a instanceof wp)&&(s=!0),a instanceof _p&&(o=!0),null==e&&null==i||null==t&&null==r||this.get("verticalScrollbar")){let e=Number.MAX_VALUE,t=e,i=-e,r=e,a=-e;const l=this.get("paddingLeft",0),u=this.get("paddingTop",0),c=this.get("paddingRight",0),h=this.get("paddingBottom",0);this.children.each((e=>{if("absolute"!=e.get("position")&&e.get("isMeasured")){let n=e.adjustedLocalBounds(),l=e.x(),u=e.y(),c=l+n.left,h=l+n.right,d=u+n.top,p=u+n.bottom;s&&(c-=e.get("marginLeft",0),h+=e.get("marginRight",0)),o&&(d-=e.get("marginTop",0),p+=e.get("marginBottom",0)),c<t&&(t=c),h>i&&(i=h),d<r&&(r=d),p>a&&(a=p)}})),t==e&&(t=0),i==-e&&(i=0),r==e&&(r=0),a==-e&&(a=0),n.left=t-l,n.top=r-u,n.right=i+c,n.bottom=a+h;const d=this.get("minWidth");uh(d)&&d>0&&n.right-n.left<d&&(n.right>=d?n.left=n.right-d:n.right=n.left+d);const p=this.get("minHeight");uh(p)&&p>0&&n.bottom-n.top<p&&(n.bottom>=p?n.top=n.bottom-p:n.bottom=n.top+p)}else;this._contentWidth=n.right-n.left,this._contentHeight=n.bottom-n.top,uh(e)&&(n.left=0,n.right=e),uh(i)&&(n.left=0,n.right=i),uh(t)&&(n.top=0,n.bottom=t),uh(r)&&(n.top=0,n.bottom=r),this._localBounds=n}}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),t=this.innerHeight();if(e!=this._prevWidth||t!=this._prevHeight){let i=this.get("layout"),r=!1,n=!1;i&&((i instanceof vp||i instanceof wp)&&(r=!0),i instanceof _p&&(n=!0)),mh(this._percentageSizeChildren,(i=>{if(!r){let t=i.get("width");t instanceof Jc&&i.setPrivate("width",t.value*e)}if(!n){let e=i.get("height");e instanceof Jc&&i.setPrivate("height",e.value*t)}})),mh(this._percentagePositionChildren,(e=>{e.markDirtyPosition(),e.markDirtyBounds()})),this._prevWidth=e,this._prevHeight=t,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateHTMLContent(){const e=this.get("html","");e&&""!==e?this._root._setHTMLContent(this,Pp(this,e)):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}scrollToChild(e){const t=this.get("verticalScrollbar");if(t){let i=e.y(),r=this.innerHeight(),n=e.height(),a=this._contentHeight,s=1-(r-n/2)/a;if(i+.7*n+this._childrenDisplay.y>r||i-.3*n+this._childrenDisplay.y<0){let e=Math.max(0,Math.min(s,(i-n/2)/a));t.animate({key:"start",to:e,duration:t.get("animationDuration",0),easing:t.get("animationEasing")})}}}_updateChildren(){if(this.isDirty("html")&&this._updateHTMLContent(),this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.startGrip.setPrivate("visible",!1),e.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let t=this.get("background");t||(t=this.set("background",gp.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",(t=>{const i=t.originalEvent;if(!Xh(i,this))return;i.preventDefault();let r=i.deltaY/5e3;const n=e.get("start",0),a=e.get("end",1);n+r<=0&&(r=-n),a+r>=1&&(r=1-a),n+r>=0&&a+r<=1&&(e.set("start",n+r),e.set("end",a+r))})),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",(()=>{let t=this._contentHeight;const i=this._childrenDisplay,r=this._contentMask;i.y=-e.get("start",0)*t,i.markDirtyLayer(),r&&(r._display.y=-i.y,i.mask=r._display)})),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const e=this._prevSettings.verticalScrollbar;if(e){this._display.removeChild(e._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose();this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const t=this.get("background");t instanceof hp&&(t.set("isMeasured",!1),t._setParent(this),this._display.addChildAt(t._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),t=this._prevSettings.mask;if(t&&(this._display.removeChild(t._display),t!=e&&t.dispose()),e){const t=e.parent;t&&t.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each((e=>{e._processTemplateField()}))}walkChildren(e){this.children.each((t=>{t instanceof Op&&t.walkChildren(e),e(t)}))}eachChildren(e){const t=this.get("background");t&&e(t);const i=this.get("verticalScrollbar");i&&e(i);const r=this.get("mask");r&&e(r),this.children.values.forEach((t=>{e(t)}))}allChildren(){const e=[];return this.eachChildren((t=>{e.push(t)})),e}_setDataItem(e){const t=e!==this._dataItem;super._setDataItem(e);const i=this.get("html","");i&&""!==i&&t&&this._root._setHTMLContent(this,Pp(this,i))}}Object.defineProperty(Op,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(Op,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hp.classNames.concat([Op.className])});class Tp extends hp{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text")){super._updateBounds();let e=this.get("fillGradient");e&&(this._display.style.fill=e.getFill(this))}else{let e={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=e}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let e=this.get("opacity",1);this._display.alpha=e}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")){this.getPrivate("tooltipElement")&&this._disposers.push(new Nh((()=>{this._root._removeTooltipElement(this)})))}if(this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")||this.isDirty("fillGradient")){const t=this.get("fill"),i=this.get("fillGradient"),r=this.get("fillOpacity");if(i){if(t){const e=i.get("stops",[]);e.length&&mh(e,(e=>{e.color&&!e.colorInherited||!t||(e.color=t,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=r,e.opacityInherited=!0)}))}e.fill=i.getFill(this)}else t&&(e.fill=t)}if(this.isDirty("fillOpacity")){let t=this.get("fillOpacity",1);t&&(e.fillOpacity=t)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),mh(this._textStyles,(t=>{this._dirty[t]&&(e[t]=this.get(t),this.markDirtyBounds())})),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){let e=this.get("text","");return this.get("maxChars")&&(e=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"...";if(e.length>t){let n=t-1;for(;n>=0&&e.charAt(n).match(/\w/);)n--;return n>=0&&0==i?e.substring(0,n+1)+"...":e.substring(0,t)+r}return e}(e,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?Pp(this,e):e}_getAccessibleText(){const e=this.get("ariaLabel");return void 0!==e?this.get("populateText")?Pp(this,e):e:this._getText()}markDirtyText(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(Tp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(Tp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hp.classNames.concat([Tp.className])});class Ap{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver((e=>{mh(e,(e=>{mh(this._targets,(t=>{t.target===e.target&&t.callback()}))}))}))}addTarget(e,t){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:t})}removeTarget(e){this._observer.unobserve(e),Ah(this._targets,(t=>t.target!==e))}}class Cp{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,t){if(null===this._timer){let e=null;const t=()=>{const i=Date.now();(null===e||i>e+Cp.delay)&&(e=i,mh(this._targets,(e=>{let t=e.target.getBoundingClientRect();t.width===e.size.width&&t.height===e.size.height||(e.size=t,e.callback())}))),0===this._targets.length?this._timer=null:this._timer=requestAnimationFrame(t)};this._timer=requestAnimationFrame(t)}this._targets.push({target:e,callback:t,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(e){Ah(this._targets,(t=>t.target!==e)),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(Cp,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let Rp=null;class Ip{constructor(e,t){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=(null===Rp&&(Rp="undefined"!==typeof ResizeObserver?new Ap:new Cp),Rp),this._element=e,this._listener=Uh(t),this._sensor.addTarget(e,t)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class Dp extends Zd{}Object.defineProperty(Dp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(Dp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([Dp.className])});class jp extends Op{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillGradient","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars","ariaLabel"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),mh(this._textKeys,(e=>{const t=this.get(e);void 0!=t&&this._text.set(e,t)})),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",(()=>{this._setMaxDimentions()})),this.onPrivate("maxHeight",(()=>{this._setMaxDimentions()}))}_makeText(){this._text=this.children.push(Tp.new(this._root,{}))}_updateChildren(){super._updateChildren();const e=this._text;if(mh(this._textKeys,(e=>{this._text.set(e,this.get(e))})),(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isDirty("rotation"))&&this._setMaxDimentions(),""!==this.get("html","")?e.set("text",""):(e.set("text",this.get("text")),this._maybeUpdateHTMLColor()),(this.isDirty("fill")||this.isDirty("fillGradient"))&&this._maybeUpdateHTMLColor(),this.isDirty("textAlign")||this.isDirty("width")){const t=this.get("textAlign");let i;null!=this.get("width")?i="right"==t?eh:"center"==t?th:0:"left"==t||"start"==t?i=this.get("paddingLeft",0):"right"!=t&&"end"!=t||(i=-this.get("paddingRight",0)),e.set("x",i)}const t=this.get("background");t&&t.setPrivate("visible",e._display.textVisible)}_maybeUpdateHTMLColor(){const e=this.getPrivate("htmlElement");e&&this.get("fill")&&(e.style.color=this.get("fill").toCSSHex())}_setMaxDimentions(){const e=this.get("rotation"),t=90==e||270==e||-90==e,i=this._text,r=this.get("maxWidth",this.getPrivate("maxWidth",1/0));uh(r)?i.set(t?"maxHeight":"maxWidth",r-this.get("paddingTop",0)-this.get("paddingBottom",0)):i.set(t?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));uh(n)?i.set(t?"maxWidth":"maxHeight",n-this.get("paddingLeft",0)-this.get("paddingRight",0)):i.set(t?"maxWidth":"maxHeight",void 0),this.root.events.once("frameended",(()=>{i.markDirtyBounds()}))}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this._markDirtyKey("html");const t=this._text;t.get("populateText")&&t.markDirtyText();const i=this.get("html");i&&""!==i&&this._updateHTMLContent()}getText(){return this._text._getText()}getAccessibleText(){return this._text._getAccessibleText()}}Object.defineProperty(jp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(jp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([jp.className])});class Lp extends mp{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),t=this.height();if(e>0&&t>0){let i=this.get("cornerRadius",8);i=ap(i,0,Math.min(e/2,t/2));let r=this.get("pointerX",0),n=this.get("pointerY",0),a=this.get("pointerBaseWidth",15)/2,s=0,o=0,l=0,u=(r-s)*(t-o)-(n-o)*(e-s),c=(r-l)*(0-t)-(n-t)*(e-l);const h=this._display;if(h.moveTo(i,0),u>0&&c>0){let t=Math.round(ap(r,i+a,e-a-i));n=ap(n,-1/0,0),h.lineTo(t-a,0),h.lineTo(r,n),h.lineTo(t+a,0)}if(h.lineTo(e-i,0),h.arcTo(e,0,e,i,i),u>0&&c<0){let s=Math.round(ap(n,i+a,t-a-i));r=ap(r,e,1/0),h.lineTo(e,i),h.lineTo(e,Math.max(s-a,i)),h.lineTo(r,n),h.lineTo(e,s+a)}if(h.lineTo(e,t-i),h.arcTo(e,t,e-i,t,i),u<0&&c<0){let s=Math.round(ap(r,i+a,e-a-i));n=ap(n,t,1/0),h.lineTo(e-i,t),h.lineTo(s+a,t),h.lineTo(r,n),h.lineTo(s-a,t)}if(h.lineTo(i,t),h.arcTo(0,t,0,t-i,i),u<0&&c>0){let e=Math.round(ap(n,i+a,t-i-a));r=ap(r,-1/0,0),h.lineTo(0,t-i),h.lineTo(0,e+a),h.lineTo(r,n),h.lineTo(0,Math.max(e-a,i))}h.lineTo(0,i),h.arcTo(0,0,i,0,i),h.closePath()}}}}Object.defineProperty(Lp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(Lp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([Lp.className])});class Np extends Op{constructor(e,t,i){super(e,t,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["tooltip"]),super._afterNew();this._setDefaultFn("background",(()=>Lp.new(this._root,{}))).set("themeTags",["tooltip","background"]),this._label=this.children.push(jp.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",(()=>{this._updateBackground()}))),this._disposers.push(this.on("bounds",(()=>{this._updateBackground()}))),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",(e=>{e&&(this._disposers.push(Bh(e,"pointerover",(e=>{this._htmlContentHovered=!0}))),this._disposers.push(Bh(e,"pointerout",(e=>{this._htmlContentHovered=!1}))))}))),this.on("visible",(e=>{this._handleReaderAnnouncement()})),this.label.events.on("dataitemchanged",(e=>{this._handleReaderAnnouncement()})),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}_dispose(){super._dispose(),yh(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width");null!=this.get("labelText")&&this.label.set("text",this.get("labelText"));null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"));null!=this.get("labelAriaLabel")&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover")){if(this.get("keepTargetHover")){const e=this.get("background");this._keepHoverDp=new $h([e.events.on("pointerover",(e=>{let t=this.get("tooltipTarget");t&&(t.parent&&t.parent.getPrivate("tooltipTarget")==t&&(t=t.parent),t.hover())})),e.events.on("pointerout",(e=>{let t=this.get("tooltipTarget");t&&(t.parent&&t.parent.getPrivate("tooltipTarget")==t&&(t=t.parent),this._htmlContentHovered||t.unhover())}))]),this.label.onPrivate("htmlElement",(t=>{this._keepHoverDp&&t&&this._keepHoverDp.disposers.push(Bh(t,"pointerleave",(t=>{const i=this.root._renderer.getEvent(t);e.events.dispatch("pointerout",{type:"pointerout",originalEvent:i.event,point:i.point,simulated:!1,target:e})})))}))}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const t=this.get("background");let i,r;e&&t&&(i=e.get("fill"),r=e.get("stroke"),null==i&&(i=r),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=i&&t.set("fill",i),this._fillDp=e.on("fill",(e=>{null!=e&&(t.set("fill",e),this._updateTextColor(e))})),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=i&&t.set("stroke",i),this._strokeDp=e.on("fill",(e=>{null!=e&&t.set("stroke",e)})),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=i&&this.label.set("fill",i),this._labelDp=e.on("fill",(e=>{null!=e&&this.label.set("fill",e)})),this._disposers.push(this._labelDp))),this._updateTextColor(i)}_updateTextColor(e){this.get("autoTextColor")&&(null==e&&(e=this.get("background").get("fill")),null==e&&(e=this._root.interfaceColors.get("background")),e instanceof wd&&this.label.set("fill",wd.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let t=.5,i=.5,r=this.get("centerX");r instanceof Jc&&(t=r.value);let n=this.get("centerY");n instanceof Jc&&(i=n.value);let a=e.width(),s=e.height(),o=this.parent,l=0,u=0;if(o){l=o.x(),u=o.y();const e=o.get("layerMargin");e&&(l+=e.left||0,u+=e.top||0,a+=(e.left||0)+(e.right||0),s+=(e.top||0)+(e.bottom||0))}const c=this.get("bounds",{left:-l,top:-u,right:a-l,bottom:s-u});this._updateBounds();let h=this.width(),d=this.height();0===h&&(h=this._w),0===d&&(d=this._h);let p=this.get("pointTo",{x:a/2,y:s/2}),f=p.x,m=p.y,g=this.get("pointerOrientation"),b=this.get("background"),y=0,v=0,_=0;b instanceof Lp&&(y=b.get("pointerLength",0),v=b.get("strokeWidth",0)/2,_=v,b.set("width",h),b.set("height",d));let w=0,x=0,P=c.right-c.left,E=c.bottom-c.top;"horizontal"==g||"left"==g||"right"==g?(v=0,"horizontal"==g?f>c.left+P/2?(f-=h*(1-t)+y,_*=-1):f+=h*t+y:"left"==g?f+=h*(1-t)+y:(f-=h*t+y,_*=-1)):(_=0,"vertical"==g?m>c.top+d/2+y?m-=d*(1-i)+y:(m+=d*i+y,v*=-1):"down"==g?m-=d*(1-i)+y:(m+=d*i+y,v*=-1)),f=ap(f,c.left+h*t,c.left+P-h*(1-t))+_,m=ap(m,c.top+d*i,c.top+E-d*(1-i))-v,w=p.x-f+h*t+_,x=p.y-m+d*i-v,this._fx=f,this._fy=m;const k=this.get("animationDuration",0);if(k>0&&this.get("visible")&&this.get("opacity")>.1){const e=this.get("animationEasing");this.animate({key:"x",to:f,duration:k,easing:e}),this.animate({key:"y",to:m,duration:k,easing:e})}else this.set("x",f),this.set("y",m);b instanceof Lp&&(b.set("pointerX",w),b.set("pointerY",x)),h>0&&(this._w=h),d>0&&(this._h=d)}}}Object.defineProperty(Np,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(Np,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([Np.className])});class Mp extends Zd{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",t="_small_number_suffix_",i="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(t+"24")},{number:1e-21,suffix:this._t(t+"21")},{number:1e-18,suffix:this._t(t+"18")},{number:1e-15,suffix:this._t(t+"15")},{number:1e-12,suffix:this._t(t+"12")},{number:1e-9,suffix:this._t(t+"9")},{number:1e-6,suffix:this._t(t+"6")},{number:.001,suffix:this._t(t+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(i+"B")},{number:1024,suffix:this._t(i+"KB")},{number:1048576,suffix:this._t(i+"MB")},{number:1073741824,suffix:this._t(i+"GB")},{number:1099511627776,suffix:this._t(i+"TB")},{number:0x4000000000000,suffix:this._t(i+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,i){let r;(null==t||lh(t)&&"number"===t.toLowerCase())&&(t=this.get("numberFormat",""));let n=Number(e);if(ch(t))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),t).format(n):new Intl.NumberFormat(void 0,t).format(n)}catch(a){return"Invalid"}else{t=id(t);let e,a=this.parseFormat(t,this._root.language);e=n>this.get("negativeBase")?a.positive:n<this.get("negativeBase")?a.negative:a.zero,null==i||e.mod||(e=Ih(e),e.decimals.active=0==n?0:i),r=e.template.split(hh).join(this.applyFormat(n,e))}return!0===this.get("forceLTR")&&(r="\u200e"+r),r}parseFormat(e,t){const i=t.translateEmpty("_thousandSeparator"),r=t.translateEmpty("_decimalSeparator");let n={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1}},a=(e=e.replace("||",dh)).split("|");return n.positive.source=a[0],"undefined"===typeof a[2]?n.zero=n.positive:n.zero.source=a[2],"undefined"===typeof a[1]?n.negative=n.positive:n.negative.source=a[1],Dh(n,((e,t)=>{if(t.parsed)return;let i=t.source;"number"===i.toLowerCase()&&(i=this.get("numberFormat","#,###.#####"));let r=xp.chunk(i,!0);for(let n=0;n<r.length;n++){let e=r[n];if(e.text=e.text.replace(dh,"|"),"value"===e.type){let i=e.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(i)if(null===i||""===i[0])t.template+=e.text;else{let r=i[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);r&&(t.mod=r[0].toLowerCase(),t.modSpacing=!!i[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));let n=i[0].split(".");if(""===n[0]);else{t.thousands.active=(n[0].match(/0/g)||[]).length,t.thousands.passive=(n[0].match(/\#/g)||[]).length+t.thousands.active;let e=n[0].split(",");1===e.length||(t.thousands.interval=(e.pop()||"").length,0===t.thousands.interval&&(t.thousands.interval=-1))}"undefined"===typeof n[1]||(t.decimals.active=(n[1].match(/0/g)||[]).length,t.decimals.passive=(n[1].match(/\#/g)||[]).length+t.decimals.active),t.template+=e.text.split(i[0]).join(hh)}}else t.template+=e.text}t.parsed=!0})),n}applyFormat(e,t){let i=e<0;e=Math.abs(e);let r="",n="",a=t.mod?t.mod.split(""):[];if(-1!==a.indexOf("b")){let i=this.applyPrefix(e,this.get("bytePrefixes"),-1!==a.indexOf("!"));e=i[0],r=i[1],n=i[2],t.modSpacing&&(n=" "+n)}else if(-1!==a.indexOf("a")){let i=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==a.indexOf("!"));e=i[0],r=i[1],n=i[2],t.modSpacing&&(n=" "+n)}else if(-1!==a.indexOf("p")){let t=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(t)),r=this._root.language.translate("_percentPrefix"),n=this._root.language.translate("_percentSuffix"),""==r&&""==n&&(n="%")}else if(-1!==a.indexOf("%")){let t=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(t)),n="%"}else if(-1!==a.indexOf("\u2030")){let t=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(t)),n="\u2030"}if(-1!==a.indexOf("e")){let i;i=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(i[0]),n="e"+i[1],t.modSpacing&&(n=" "+n)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){const i=Qh(e);if(i>0){const r=Math.pow(10,t.decimals.passive);e=Math.round(parseFloat((e*r).toFixed(i)))/r}}let s="",o=function(e){if(rh(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(0===e&&1/e===-1/0)return"-0";let t=e<0;e=Math.abs(e);let i,r=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e),n=r[1],a=r[2]||"";if(void 0===r[3])i=""===a?n:n+"."+a;else{let t=+r[3];if(e<1)i="0."+sh("0",t-1)+n+a;else{let e=t-a.length;i=0===e?n+a:e<0?n+a.slice(0,e)+"."+a.slice(e):n+a+sh("0",e)}}return t?"-"+i:i}(e).split("."),l=o[0];if(l.length<t.thousands.active&&(l=Array(t.thousands.active-l.length+1).join("0")+l),t.thousands.interval>0){let e=[],i=l.split("").reverse().join("");for(let r=0,n=l.length;r<=n;r+=t.thousands.interval){let n=i.substr(r,t.thousands.interval).split("").reverse().join("");""!==n&&e.unshift(n)}l=e.join(t.thousands.separator)}s+=l,1===o.length&&o.push("");let u=o[1];return u.length<t.decimals.active&&(u+=Array(t.decimals.active-u.length+1).join("0")),""!==u&&(s+=t.decimals.separator+u),""===s&&(s="0"),0!==e&&i&&-1===a.indexOf("s")&&(s="-"+s),r&&(s=r+s),n&&(s+=n),s}applyPrefix(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,n="",a="",s=!1,o=1;for(let l=0,u=t.length;l<u;l++)t[l].number<=e&&(0===t[l].number?r=0:(r=e/t[l].number,o=t[l].number),n=t[l].prefix,a=t[l].suffix,s=!0);return!s&&i&&t.length&&0!=e&&(r=e/t[0].number,n=t[0].prefix,a=t[0].suffix,s=!0),s&&(r=parseFloat(r.toPrecision(Math.min(o.toString().length+Math.floor(r).toString().replace(/[^0-9]*/g,"").length,21)))),[r,n,a]}escape(e){return e.replace("||",dh)}unescape(e){return e.replace(dh,"|")}}function $p(e,t){let i=0,r=0,n=1,a=0,s=0,o=0,l=0,u=0;return e.formatToParts(t).forEach((e=>{switch(e.type){case"year":i=+e.value;break;case"month":r=+e.value-1;break;case"day":n=+e.value;break;case"hour":a=+e.value;break;case"minute":s=+e.value;break;case"second":o=+e.value;break;case"fractionalSecond":l=+e.value;break;case"weekday":switch(e.value){case"Sun":u=0;break;case"Mon":u=1;break;case"Tue":u=2;break;case"Wed":u=3;break;case"Thu":u=4;break;case"Fri":u=5;break;case"Sat":u=6}}})),24===a&&(a=0),{year:i,month:r,day:n,hour:a,minute:s,second:o,millisecond:l,weekday:u}}function Fp(e,t){const{year:i,month:r,day:n,hour:a,minute:s,second:o,millisecond:l}=$p(e,t);return Date.UTC(i,r,n,a,s,o,l)}class Bp{constructor(e,t){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const t=this.offsetUTC(e),i=e.getTimezoneOffset(),r=new Date(e);r.setUTCMinutes(r.getUTCMinutes()-(t-i));const n=r.getTimezoneOffset();return i!=n&&r.setUTCMinutes(r.getUTCMinutes()+n-i),r}offsetUTC(e){return(Fp(this._utc,e)-Fp(this._dtf,e))/6e4}parseDate(e){return $p(this._dtf,e)}}class Up extends Zd{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t){let i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"undefined"!==typeof t&&""!==t||(t=this.get("dateFormat","yyyy-MM-dd"));let n=e;if(ch(t))try{const e=this.get("intlLocales");return e?new Intl.DateTimeFormat(e,t).format(n):new Intl.DateTimeFormat(void 0,t).format(n)}catch(l){return"Invalid"}let a=this.parseFormat(t);const s=this._root.timezone;let o=n;return!s||this._root.utc||r||(n=s.convertLocal(n)),uh(n.getTime())?(i=this.applyFormat(n,a,r,o),this.get("capitalize")&&(i=i.replace(/^.{1}/,i.substr(0,1).toUpperCase())),i):"Invalid date"}applyFormat(e,t){let i,r,n,a,s,o,l,u,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=arguments.length>3?arguments[3]:void 0,d=t.template,p=e.getTime();this._root.utc&&!c?(i=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),a=e.getUTCDate(),s=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds(),u=e.getUTCMilliseconds()):(i=e.getFullYear(),r=e.getMonth(),n=e.getDay(),a=e.getDate(),s=e.getHours(),o=e.getMinutes(),l=e.getSeconds(),u=e.getMilliseconds());for(let f=0,m=t.parts.length;f<m;f++){let c="";switch(t.parts[f]){case"G":c=this._t(i<0?"_era_bc":"_era_ad");break;case"yyyy":c=Math.abs(i).toString(),i<0&&(c+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":c=Math.abs(i).toString().substr(-t.parts[f].length),i<0&&(c+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let d=od(e,this._root.utc);c="YYYY"==t.parts[f]?Math.abs(d).toString():Math.abs(d).toString().substr(-t.parts[f].length),d<0&&(c+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":c=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":c=this._t(this._getMonth(r)).substr(0,1);break;case"MMMM":c=this._t(this._getMonth(r));break;case"MMM":c=this._t(this._getShortMonth(r));break;case"MM":c=ed(r+1,2,"0");break;case"M":c=(r+1).toString();break;case"ww":c=ed(sd(e,this._root.utc),2,"0");break;case"w":c=sd(e,this._root.utc).toString();break;case"W":c=ld(e,this._root.utc).toString();break;case"dd":c=ed(a,2,"0");break;case"d":c=a.toString();break;case"DD":case"DDD":c=ed(ad(e,this._root.utc).toString(),t.parts[f].length,"0");break;case"D":c=ad(e,this._root.utc).toString();break;case"t":c=this._root.language.translateFunc("_dateOrd").call(this,a);break;case"E":c=(n||7).toString();break;case"EE":c=ed((n||7).toString(),2,"0");break;case"EEE":case"eee":c=this._t(this._getShortWeekday(n));break;case"EEEE":case"eeee":c=this._t(this._getWeekday(n));break;case"EEEEE":case"eeeee":c=this._t(this._getShortWeekday(n)).substr(0,1);break;case"e":case"ee":c=(n-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==t.parts[f]&&(c=ed(c,2,"0"));break;case"a":c=s>=12?this._t("PM"):this._t("AM");break;case"aa":c=s>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":c=s>=12?this._t("P"):this._t("A");break;case"h":c=ud(s).toString();break;case"hh":c=ed(ud(s),2,"0");break;case"H":c=s.toString();break;case"HH":c=ed(s,2,"0");break;case"K":c=ud(s,0).toString();break;case"KK":c=ed(ud(s,0),2,"0");break;case"k":c=(s+1).toString();break;case"kk":c=ed(s+1,2,"0");break;case"m":c=o.toString();break;case"mm":c=ed(o,2,"0");break;case"s":c=l.toString();break;case"ss":c=ed(l,2,"0");break;case"S":case"SS":case"SSS":c=Math.round(u/1e3*Math.pow(10,t.parts[f].length)).toString();break;case"x":c=p.toString();break;case"n":case"nn":case"nnn":c=ed(u,t.parts[f].length,"0");break;case"z":c=cd(h||e,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":c=cd(h||e,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":c=cd(h||e,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":c=cd(h||e,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let m=this._root.utc?"UTC":this._root.timezone;m instanceof Bp&&(m=m.name);const g=m?hd(m,h||e):e.getTimezoneOffset();let b=Math.abs(g)/60,y=Math.floor(b),v=60*b-60*y;this._root.utc&&(y=0,v=0),"Z"==t.parts[f]?(c="GMT",c+=g>0?"-":"+",c+=ed(y,2)+":"+ed(v,2)):(c=g>0?"-":"+",c+=ed(y,2)+ed(v,2));break;case"i":c=e.toISOString();break;case"I":c=e.toUTCString()}d=d.replace(hh,c)}return d}parseFormat(e){let t={template:"",parts:[]},i=xp.chunk(e,!0);for(let r=0;r<i.length;r++){let e=i[r];if("value"===e.type){if(e.text.match(/^date$/i)){let t=this.get("dateFormat","yyyy-MM-dd");lh(t)||(t="yyyy-MM-dd"),e.text=t}let i=e.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(i)for(let r=0;r<i.length;r++)t.parts.push(i[r]),e.text=e.text.replace(i[r],hh)}t.template+=e.text}return t}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,t,i){if("undefined"===typeof i&&(i=this._root.utc),e instanceof Date)return e;if(uh(e))return new Date(e);if("x"==t)return new Date(parseInt(e));let r;lh(e)||(e=e.toString());let n="";t=(t=id(t)).substr(0,e.length);let a=this.parseFormat(t),s={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},o={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:i},l=0,u=0;for(let d=0;d<a.parts.length;d++){switch(u=d+l+1,a.parts[d]){case"yyyy":case"YYYY":n+="([0-9]{4})",s.year=u;break;case"yyy":case"YYY":n+="([0-9]{3})",s.year3=u;break;case"yy":case"YY":n+="([0-9]{2})",s.year2=u;break;case"y":case"Y":n+="([0-9]{1})",s.year1=u;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",s.monthLong=u;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",s.monthShort=u;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",s.month=u;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",s.week=u;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",s.day=u;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.yearDay=u;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",s.weekdayLong=u;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",s.weekdayShort=u;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",s.am=u;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",s.hour12Base1=u;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",s.hourBase0=u;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",s.hour12Base0=u;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",s.hourBase1=u;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",s.minute=u;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",s.second=u;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.millisecond=u,s.millisecondDigits=a.parts[d].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",s.millisecond=u;break;case"x":n+="([0-9]{1,})",s.timestamp=u;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",s.zone=u;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",s.zone=u;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",s.iso=u,l+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":l--}n+="[^0-9]*"}let c=new RegExp(n),h=e.match(c);if(h){if(s.year>-1&&(o.year=parseInt(h[s.year])),s.year3>-1){let e=parseInt(h[s.year3]);e+=1e3,o.year=e}if(s.year2>-1){let e=parseInt(h[s.year2]);e+=e>50?1e3:2e3,o.year=e}if(s.year1>-1){let e=parseInt(h[s.year1]);e=10*Math.floor((new Date).getFullYear()/10)+e,o.year=e}if(s.monthLong>-1&&(o.month=this.resolveMonth(h[s.monthLong])),s.monthShort>-1&&(o.month=this.resolveShortMonth(h[s.monthShort])),s.month>-1&&(o.month=parseInt(h[s.month])-1),s.week>-1&&-1===s.day&&(o.month=0,o.day=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new Date(t,0,4,0,0,0,0);return r&&n.setUTCFullYear(t),7*e+i-((n.getDay()||7)+3)}(parseInt(h[s.week]),o.year,1,i)),s.day>-1&&(o.day=parseInt(h[s.day])),s.yearDay>-1&&(o.month=0,o.day=parseInt(h[s.yearDay])),s.hourBase0>-1&&(o.hour=parseInt(h[s.hourBase0])),s.hourBase1>-1&&(o.hour=parseInt(h[s.hourBase1])-1),s.hour12Base0>-1){let e=parseInt(h[s.hour12Base0]);11==e&&(e=0),s.am>-1&&!this.isAm(h[s.am])&&(e+=12),o.hour=e}if(s.hour12Base1>-1){let e=parseInt(h[s.hour12Base1]);12==e&&(e=0),s.am>-1&&!this.isAm(h[s.am])&&(e+=12),o.hour=e}if(s.minute>-1&&(o.minute=parseInt(h[s.minute])),s.second>-1&&(o.second=parseInt(h[s.second])),s.millisecond>-1){let e=parseInt(h[s.millisecond]);2==s.millisecondDigits?e*=10:1==s.millisecondDigits&&(e*=100),o.millisecond=e}if(s.timestamp>-1){o.timestamp=parseInt(h[s.timestamp]);const e=new Date(o.timestamp);o.year=e.getUTCFullYear(),o.month=e.getUTCMonth(),o.day=e.getUTCDate(),o.hour=e.getUTCHours(),o.minute=e.getUTCMinutes(),o.second=e.getUTCSeconds(),o.millisecond=e.getUTCMilliseconds()}s.zone>-1&&(o.offset=this.resolveTimezoneOffset(new Date(o.year,o.month,o.day),h[s.zone])),s.iso>-1&&(o.year=nh(h[s.iso+0]),o.month=nh(h[s.iso+1])-1,o.day=nh(h[s.iso+2]),o.hour=nh(h[s.iso+3]),o.minute=nh(h[s.iso+4]),o.second=nh(h[s.iso+5]),o.millisecond=nh(h[s.iso+6]),"Z"==h[s.iso+7]||"z"==h[s.iso+7]?o.utc=!0:""!=h[s.iso+7]&&(o.offset=this.resolveTimezoneOffset(new Date(o.year,o.month,o.day),h[s.iso+7]))),r=o.utc?new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)):new Date(o.year,o.month,o.day,o.hour,o.minute+o.offset,o.second,o.millisecond)}else r=new Date(e);return r}resolveTimezoneOffset(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let i=t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),r=i[1],n=i[2],a=i[3],s=60*parseInt(n)+parseInt(a);return"+"==r&&(s*=-1),s-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let t=this._months().indexOf(e);return t>-1||!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._months()).indexOf(e),t>-1)?t:0}resolveShortMonth(e){let t=this._shortMonths().indexOf(e);return t>-1?t:(t=this._months().indexOf(e),t>-1||this._root.language&&!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._shortMonths()).indexOf(e),t>-1)?t:0)}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let t=[];for(let i=0;i<e.length;i++)this._root.language?t.push(nd(this._t(e[i]))):t.push(nd(e[i]));return t}}class zp extends Zd{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",t="_duration_second",i="_duration_minute",r="_duration_hour",n="_duration_day",a="_duration_week",s="_duration_month",o="_minute",l="_hour",u="_day",c="_week",h="_week",d="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+"_second"),minute:this._t(e+o),hour:this._t(e+l),day:this._t(e+u),week:this._t(e+c),month:this._t(e+h),year:this._t(e+d)},second:{second:this._t(t),minute:this._t(t+o),hour:this._t(t+l),day:this._t(t+u),week:this._t(t+c),month:this._t(t+h),year:this._t(t+d)},minute:{minute:this._t(i),hour:this._t(i+l),day:this._t(i+u),week:this._t(i+c),month:this._t(i+h),year:this._t(i+d)},hour:{hour:this._t(r),day:this._t(r+u),week:this._t(r+c),month:this._t(r+h),year:this._t(r+d)},day:{day:this._t(n),week:this._t(n+c),month:this._t(n+h),year:this._t(n+d)},week:{week:this._t(a),month:this._t(a+h),year:this._t(a+d)},month:{month:this._t(s),year:this._t(s+d)},year:{year:this._t("_duration_year")}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,i){let r=i||this.get("baseUnit");"undefined"!==typeof t&&""!==t||(t=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(nh(e),void 0,r)),t=id(t);let n,a=this.parseFormat(t,r),s=Number(e);n=s>this.get("negativeBase")?a.positive:s<this.get("negativeBase")?a.negative:a.zero;let o=this.applyFormat(s,n);return""!==n.color&&(o="["+n.color+"]"+o+"[/]"),o}parseFormat(e,t){let i=t||this.get("baseUnit"),r={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}},n=(e=e.replace("||",dh)).split("|");return r.positive.source=n[0],"undefined"===typeof n[2]?r.zero=r.positive:r.zero.source=n[2],"undefined"===typeof n[1]?r.negative=r.positive:r.negative.source=n[1],Dh(r,((e,t)=>{if(t.parsed)return;let i=t.source,r=[];r=t.source.match(/^\[([^\]]*)\]/),r&&r.length&&""!==r[0]&&(i=t.source.substr(r[0].length),t.color=r[1]);let n=xp.chunk(i,!0);for(let a=0;a<n.length;a++){let e=n[a];if(e.text=e.text.replace(dh,"|"),"value"===e.type){e.text.match(/[yYMdDwhHKkmsSn]+a/)&&(t.absolute=!0,e.text=e.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let i=e.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(i)for(let r=0;r<i.length;r++)null==i[r]&&(i[r]=this._unitAliases[i[r]]),t.parts.push(i[r]),e.text=e.text.replace(i[r],hh)}t.template+=e.text}t.parsed=!0})),r}applyFormat(e,t){let i=!t.absolute&&e<this.get("negativeBase");e=Math.abs(e);let r=this.toTimeStamp(e,t.baseUnit),n=t.template;const a={millisecond:0,second:0,minute:0,hour:0,day:0,week:0,month:0,year:0};for(let s=0,o=t.parts.length;s<o;s++){let e,i=t.parts[s],n=this._toTimeUnit(i.substr(0,1));const l=this._getUnitValue(n);e=s<o-1?Math.floor(r/l):Math.round(r/l),a[n]+=e,r-=e*l}Dh(a,((e,t)=>{"millisecond"==e&&1e3==t?(a.second++,a.millisecond=0):"second"==e&&60==t?(a.minute++,a.second=0):"minute"==e&&60==t?(a.hour++,a.minute=0):"hour"==e&&24==t?(a.day++,a.hour=0):"day"==e&&7==t?(a.week++,a.day=0):"day"==e&&30==t?(a.month++,a.day=0):"month"==e&&12==t&&(a.year++,a.month=0)}));for(let s=0,o=t.parts.length;s<o;s++){let e=t.parts[s],i=this._toTimeUnit(e.substr(0,1)),r=e.length;n=n.replace(hh,ed(a[i],r,"0"))}return i&&(n="-"+n),n}toTimeStamp(e,t){return e*this._getUnitValue(t)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,t,i){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(i||(i=this.get("baseUnit")),null!=t&&e!=t){e=Math.abs(e),t=Math.abs(t);let r=this.getValueUnit(Math.max(e,t),i);return this.get("durationFormats")[i][r]}{let t=this.getValueUnit(e,i);return this.get("durationFormats")[i][t]}}getValueUnit(e,t){let i;t||(t=this.get("baseUnit"));let r=this.getMilliseconds(e,t);return function(e,t){for(let i in e)if(jh(e,i)&&!t(i,e[i]))break}(this._getUnitValues(),((e,n)=>{if(e==t||i){if(r/n<=1)return i||(i=e),!1;i=e}return!0})),i}getMilliseconds(e,t){return t||(t=this.get("baseUnit")),e*this._getUnitValue(t)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const Hp={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){let t="th";if(e<11||e>13)switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class Vp extends Zd{_setDefaults(){this.setPrivate("defaultLocale",Hp),super._setDefaults()}translate(e,t){t||(t=this._root.locale||this.getPrivate("defaultLocale"));let i=e,r=t[e];for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(null===r)i="";else if(null!=r)r&&(i=r);else if(t!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...a);if(a.length)for(let o=a.length,l=0;l<o;++l)i=i.split("%"+(l+1)).join(a[l]);return i}translateAny(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return this.translate(e,t,...r)}setTranslationAny(e,t,i){(i||this._root.locale)[e]=t}setTranslationsAny(e,t){Dh(e,((e,i)=>{this.setTranslationAny(e,i,t)}))}translateEmpty(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];let a=this.translate(e,t,...r);return a==e?"":a}translateFunc(e,t){return this._root.locale[e]?this._root.locale[e]:t!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,t){return this.isDefault()?e:fh(e,(e=>this.translate(e,t)))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class Gp{constructor(e,t){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const t=new this(e,!0);return t.setupDefaultRules(),t}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this._rules[e];i||(i=this._rules[e]=[]),t.sort(zd);const{index:r,found:n}=Oh(i,(e=>{const i=zd(e.tags.length,t.length);return 0===i?Hd(e.tags,t,zd):i}));if(n)return i[r].template;{const e=ep.new({});return i.splice(r,0,{tags:t,template:e}),e}}rule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ruleRaw(e,t)}}function Yp(e,t,i,r){e.set(t,i.get(r)),i.on(r,(i=>{e.set(t,i)}))}class Wp extends Gp{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,t=this._root.interfaceColors,i=this._root.horizontalLayout,r=this._root.verticalLayout,n=this.rule.bind(this);n("InterfaceColors").setAll({stroke:wd.fromHex(15066597),fill:wd.fromHex(15987699),primaryButton:wd.fromHex(6788316),primaryButtonHover:wd.fromHex(6779356),primaryButtonDown:wd.fromHex(6872182),primaryButtonActive:wd.fromHex(6872182),primaryButtonDisabled:wd.fromHex(14342874),primaryButtonTextDisabled:wd.fromHex(16777215),primaryButtonText:wd.fromHex(16777215),primaryButtonStroke:wd.fromHex(16777215),secondaryButton:wd.fromHex(14277081),secondaryButtonHover:wd.fromHex(10724259),secondaryButtonDown:wd.fromHex(9276813),secondaryButtonActive:wd.fromHex(15132390),secondaryButtonText:wd.fromHex(0),secondaryButtonStroke:wd.fromHex(16777215),grid:wd.fromHex(0),background:wd.fromHex(16777215),alternativeBackground:wd.fromHex(0),text:wd.fromHex(0),alternativeText:wd.fromHex(16777215),disabled:wd.fromHex(11382189),positive:wd.fromHex(5288704),negative:wd.fromHex(11730944)});{const e=n("ColorSet");e.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[wd.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),e.setPrivate("currentStep",0),e.setPrivate("currentPass",0)}n("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:Nd(Ld)}),n("Component").setAll({interpolationDuration:0,interpolationEasing:Nd(Ld)}),n("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:th,tooltipY:th,tooltipPosition:"fixed",isMeasured:!0}),n("Sprite").states.create("default",{visible:!0,opacity:1}),n("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),n("Graphics").setAll({strokeWidth:1}),n("Chart").setAll({width:eh,height:eh,interactiveChildren:!1}),n("ZoomableContainer").setAll({width:eh,height:eh,wheelable:!0,pinchZoom:!0,maxZoomLevel:32,minZoomLevel:1,zoomStep:2,animationEasing:Nd(Ld),animationDuration:600,maxPanOut:.4}),n("Sprite",["horizontal","center"]).setAll({centerX:th,x:th}),n("Sprite",["vertical","center"]).setAll({centerY:th,y:th}),n("Container",["horizontal","layout"]).setAll({layout:i}),n("Container",["vertical","layout"]).setAll({layout:r}),n("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),n("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),n("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),n("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),n("GrainPattern").setAll({width:200,height:200,colors:[wd.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2});{const e=n("PatternSet");e.setAll({step:1}),Yp(e,"color",t,"stroke")}n("LinearGradient").setAll({rotation:90}),n("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:wp.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),n("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:i,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const e=n("Rectangle",["legend","item","background"]);e.setAll({fillOpacity:0}),Yp(e,"fill",t,"background")}n("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:th,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),n("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:eh,height:eh,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const e=n("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});Yp(e,"fill",t,"disabled"),Yp(e,"stroke",t,"disabled")}n("Label",["legend","label"]).setAll({centerY:th,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});Yp(n("Label",["legend","label"]).states.create("disabled",{}),"fill",t,"disabled");n("Label",["legend","value","label"]).setAll({centerY:th,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:eh,populateText:!0});Yp(n("Label",["legend","value","label"]).states.create("disabled",{}),"fill",t,"disabled");n("HeatLegend").setAll({stepCount:1}),n("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),n("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:eh,width:15}),n("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:eh,height:15}),n("HeatLegend",["vertical"]).setAll({height:eh}),n("HeatLegend",["horizontal"]).setAll({width:eh}),n("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),n("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const e=n("Label");e.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),Yp(e,"fill",t,"text")}n("RadialLabel").setAll({textType:"regular",centerY:th,centerX:th,inside:!1,radius:0,baseRadius:eh,orientation:"auto",textAlign:"center"}),n("EditableLabel").setAll({editOn:"click",themeTags:["editablelabel"],multiLine:!0}),n("RoundedRectangle",["editablelabel","background"]).setAll({fillOpacity:0,fill:wd.fromHex(0),cornerRadiusBL:3,cornerRadiusBR:3,cornerRadiusTL:3,cornerRadiusTR:3,strokeOpacity:0,stroke:wd.fromHex(0)}),n("RoundedRectangle",["editablelabel","background"]).states.create("active",{strokeOpacity:.2}),n("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),n("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),n("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const e=n("Tick");e.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),Yp(e,"stroke",t,"grid")}n("Bullet").setAll({locationX:.5,locationY:.5}),n("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:th,centerY:th,animationEasing:Nd(Ld),exportable:!1}),n("Polygon").setAll({animationEasing:Nd(Ld)});n("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:wd.fromHex(16777215)});{const e=n("Label",["tooltip"]);e.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),Yp(e,"fill",t,"alternativeText")}n("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:i,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),n("Button").states.create("hover",{}),n("Button").states.create("down",{stateAnimationDuration:0}),n("Button").states.create("active",{}),n("Button").states.create("disabled",{forceInactive:!0});{const e=n("RoundedRectangle",["button","background"]);Yp(e,"fill",t,"primaryButton"),Yp(e,"stroke",t,"primaryButtonStroke")}Yp(n("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",t,"primaryButtonHover");Yp(n("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown");Yp(n("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",t,"primaryButtonActive");Yp(n("RoundedRectangle",["button","background"]).states.create("disabled",{}),"fill",t,"primaryButtonDisabled");Yp(n("Graphics",["button","icon"]).states.create("disabled",{}),"fill",t,"primaryButtonTextDisabled");Yp(n("Label",["button"]).states.create("disabled",{}),"fill",t,"primaryButtonTextDisabled");{const e=n("Graphics",["button","icon"]);e.setAll({forceInactive:!0}),Yp(e,"stroke",t,"primaryButtonText")}Yp(n("Label",["button"]),"fill",t,"primaryButtonText");n("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:eh,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const e=n("RoundedRectangle",["background","button","zoom"]);e.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Yp(e,"fill",t,"primaryButton")}Yp(n("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",t,"primaryButtonHover");Yp(n("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown");{const e=n("Graphics",["icon","button","zoom"]);e.setAll({crisp:!0,strokeOpacity:.7,draw:e=>{e.moveTo(0,0),e.lineTo(12,0)}}),Yp(e,"stroke",t,"primaryButtonText")}n("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:th,centerY:th,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const e=n("RoundedRectangle",["background","resize","button"]);e.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),Yp(e,"fill",t,"secondaryButton"),Yp(e,"stroke",t,"secondaryButtonStroke")}Yp(n("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",t,"secondaryButtonHover");Yp(n("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown");{const e=n("Graphics",["resize","button","icon"]);e.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:e=>{e.moveTo(0,.5),e.lineTo(0,12.5),e.moveTo(4,.5),e.lineTo(4,12.5)}}),Yp(e,"stroke",t,"secondaryButtonText")}n("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),n("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),n("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const e=n("RoundedRectangle",["play","background"]);e.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Yp(e,"fill",t,"primaryButton")}{const e=n("Graphics",["play","icon"]);e.setAll({stateAnimationDuration:0,dx:1,draw:e=>{e.moveTo(0,-5),e.lineTo(8,0),e.lineTo(0,5),e.lineTo(0,-5)}}),Yp(e,"fill",t,"primaryButtonText")}n("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),n("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:e=>{e.moveTo(-4,-5),e.lineTo(-1,-5),e.lineTo(-1,5),e.lineTo(-4,5),e.lineTo(-4,-5),e.moveTo(4,-5),e.lineTo(1,-5),e.lineTo(1,5),e.lineTo(4,5),e.lineTo(4,-5)}}),n("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const e=n("RoundedRectangle",["switch","background"]);e.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),Yp(e,"fill",t,"primaryButton")}{const e=n("Circle",["switch","icon"]);e.setAll({radius:8,centerY:0,centerX:0,dx:0}),Yp(e,"fill",t,"primaryButtonText")}n("Graphics",["switch","icon"]).states.create("active",{dx:16}),n("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:Nd(Ld)}),n("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:eh}),n("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:eh}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const e=n("RoundedRectangle",["scrollbar","main","background"]);e.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),Yp(e,"fill",t,"fill")}{const e=n("RoundedRectangle",["scrollbar","thumb"]);e.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),Yp(e,"fill",t,"secondaryButton")}Yp(n("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",t,"secondaryButtonHover");Yp(n("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown");n("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:th,width:eh,centerX:th,ariaLabel:e.translate("Use up and down arrows to move selection")}),n("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:th,centerY:th,height:eh,ariaLabel:e.translate("Use left and right arrows to move selection")});{const e=n("PointedRectangle",["axis","tooltip","background"]);e.setAll({cornerRadius:0}),Yp(e,"fill",t,"alternativeBackground")}n("Label",["axis","tooltip"]).setAll({role:void 0}),n("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),n("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),n("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),n("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),n("Star").setAll({spikes:5,innerRadius:5,radius:10}),n("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),n("Tooltip",["indicator"]).setAll({forceHidden:!0}),n("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),n("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),n("SpriteResizer").setAll({rotationStep:10,isMeasured:!1});n("Container",["resizer","grip"]).states.create("hover",{});{const e=n("RoundedRectangle",["resizer","grip"]);e.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),Yp(e,"fill",t,"background"),Yp(e,"stroke",t,"alternativeBackground")}{const e=n("RoundedRectangle",["resizer","grip","outline"]);e.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),e.states.create("hover",{fillOpacity:.3}),Yp(e,"fill",t,"alternativeBackground")}n("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),n("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const e=n("Rectangle",["resizer","rectangle"]);e.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),Yp(e,"stroke",t,"alternativeBackground")}n("Graphics",["button","plus","icon"]).setAll({x:th,y:th,draw:e=>{e.moveTo(-4,0),e.lineTo(4,0),e.moveTo(0,-4),e.lineTo(0,4)}}),n("Graphics",["button","minus","icon"]).setAll({x:th,y:th,draw:e=>{e.moveTo(-4,0),e.lineTo(4,0)}}),n("Graphics",["button","home","icon"]).setAll({x:th,y:th,svgPath:"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1"}),n("Button",["zoomtools"]).setAll({marginTop:1,marginBottom:2}),n("ZoomTools").setAll({x:eh,centerX:eh,y:eh,centerY:eh,paddingRight:10,paddingBottom:10})}}class Xp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=a}setTransform(e,t,i,r,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.a=Math.cos(n)*a,this.b=Math.sin(n)*a,this.c=-Math.sin(n)*a,this.d=Math.cos(n)*a,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const t=1/(this.a*this.d+this.c*-this.b);return{x:this.d*t*e.x+-this.c*t*e.y+(this.ty*this.c-this.tx*this.d)*t,y:this.a*t*e.y+-this.b*t*e.x+(-this.ty*this.a+this.tx*this.b)*t}}append(e){const t=this.a,i=this.b,r=this.c,n=this.d;this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*n+this.ty}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,i=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var Zp=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(l){n=!0,a=l}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},qp=2*Math.PI,Kp=function(e,t,i,r,n,a,s){var o=e.x,l=e.y;return{x:r*(o*=t)-n*(l*=i)+a,y:n*o+r*l+s}},Jp=function(e,t){var i=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),s=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:a+s*i,y:s-a*i},{x:a,y:s}]},Qp=function(e,t,i,r){var n=e*i+t*r;return n>1&&(n=1),n<-1&&(n=-1),(e*r-t*i<0?-1:1)*Math.acos(n)};const ef=function(e){var t=e.px,i=e.py,r=e.cx,n=e.cy,a=e.rx,s=e.ry,o=e.xAxisRotation,l=void 0===o?0:o,u=e.largeArcFlag,c=void 0===u?0:u,h=e.sweepFlag,d=void 0===h?0:h,p=[];if(0===a||0===s)return[];var f=Math.sin(l*qp/360),m=Math.cos(l*qp/360),g=m*(t-r)/2+f*(i-n)/2,b=-f*(t-r)/2+m*(i-n)/2;if(0===g&&0===b)return[];a=Math.abs(a),s=Math.abs(s);var y=Math.pow(g,2)/Math.pow(a,2)+Math.pow(b,2)/Math.pow(s,2);y>1&&(a*=Math.sqrt(y),s*=Math.sqrt(y));var v=function(e,t,i,r,n,a,s,o,l,u,c,h){var d=Math.pow(n,2),p=Math.pow(a,2),f=Math.pow(c,2),m=Math.pow(h,2),g=d*p-d*m-p*f;g<0&&(g=0),g/=d*m+p*f;var b=(g=Math.sqrt(g)*(s===o?-1:1))*n/a*h,y=g*-a/n*c,v=u*b-l*y+(e+i)/2,_=l*b+u*y+(t+r)/2,w=(c-b)/n,x=(h-y)/a,P=(-c-b)/n,E=(-h-y)/a,k=Qp(1,0,w,x),S=Qp(w,x,P,E);return 0===o&&S>0&&(S-=qp),1===o&&S<0&&(S+=qp),[v,_,k,S]}(t,i,r,n,a,s,c,d,f,m,g,b),_=Zp(v,4),w=_[0],x=_[1],P=_[2],E=_[3],k=Math.abs(E)/(qp/4);Math.abs(1-k)<1e-7&&(k=1);var S=Math.max(Math.ceil(k),1);E/=S;for(var O=0;O<S;O++)p.push(Jp(P,E)),P+=E;return p.map((function(e){var t=Kp(e[0],a,s,m,f,w,x),i=t.x,r=t.y,n=Kp(e[1],a,s,m,f,w,x),o=n.x,l=n.y,u=Kp(e[2],a,s,m,f,w,x);return{x1:i,y1:r,x2:o,y2:l,x:u.x,y:u.y}}))};function tf(e,t,i){if(t!==i)throw new Error("Required "+i+" arguments for "+e+" but got "+t)}function rf(e,t,i){if(t<i)throw new Error("Required at least "+i+" arguments for "+e+" but got "+t)}function nf(e,t,i){if(rf(e,t,i),t%i!==0)throw new Error("Arguments for "+e+" must be in pairs of "+i)}function af(e){for(let t=0;t<e.length;t+=7){let i=t+3,r=e[i];if(r.length>1){const t=/^([01])([01])(.*)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),++i,e.splice(i,0,t[2]),++i,t[3].length>0?e[i]=t[3]:e.splice(i,1))}if(++i,r=e[i],r.length>1){const t=/^([01])(.+)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),++i,e[i]=t[2])}}}function sf(e){if(0===e||1===e)return e;throw new Error("Flag must be 0 or 1")}function of(e,t){for(;(!e.interactive||t(e))&&e._parent;)e=e._parent}function lf(e,t,i){return Bh(e,Vh(t),(e=>{const t=Wh(e);let r=e.touches;r?(0==r.length&&(r=e.changedTouches),i(xh(r),t)):i([e],t)}))}function uf(e){const t=document.createElement("canvas");t.width=1,t.height=1;const i=t.getContext("2d",{willReadFrequently:!0});i.drawImage(e,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch(r){return console.warn('Image "'+e.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function cf(e){e.width=0,e.height=0,e.style.width="0px",e.style.height="0px"}function hf(e){return Math.floor(e)+.5}class df{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class pf extends Lh{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new df}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new Xp}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new Xp}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new Xp}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}subStatus(e){return{inactive:null==this.inactive?e.inactive:this.inactive,layer:this._layer||e.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,t){if(null==e)this._layer=void 0;else{const i=!0;this._layer=this._renderer.getLayer(e,i),this._layer.visible=i,this._layer.margin=t,t&&Zh(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost()}}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(e){return!e.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(e){return this._isInteractive(e)}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){if(!this._localBounds){const e=1e7;this._localBounds={left:e,top:e,right:-e,bottom:-e},this._addBounds(this._localBounds)}return this._localBounds}getAdjustedBounds(e){this._setMatrix();const t=this.getLocalMatrix(),i=t.apply({x:e.left,y:e.top}),r=t.apply({x:e.right,y:e.top}),n=t.apply({x:e.right,y:e.bottom}),a=t.apply({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,n.x,a.x),top:Math.min(i.y,r.y,n.y,a.y),right:Math.max(i.x,r.x,n.x,a.x),bottom:Math.max(i.y,r.y,n.y,a.y)}}on(e,t,i){return this.interactive?this._renderer._addEvent(this,e,t,i):new Nh((()=>{}))}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,t){const i=this._matrix;let r=i.tx*t,n=i.ty*t;this.crisp&&(r=hf(r),n=hf(n)),e.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,r,n)}_transformMargin(e,t,i){const r=this._matrix;e.setTransform(r.a*t,r.b*t,r.c*t,r.d*t,(r.tx+i.left)*t,(r.ty+i.top)*t)}_transformLayer(e,t,i){i.margin?this._transformMargin(e,i.scale||t,i.margin):this._transform(e,i.scale||t)}render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const i=this.subStatus(e),r=this._renderer.resolution,n=this._renderer.layers,a=this._renderer._ghostLayer,s=a.context,o=this.mask;o&&o._setMatrix(),mh(n,(e=>{if(e){const t=e.context;t.save(),o&&(o._transformLayer(t,r,e),o._runPath(t),t.clip()),t.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(t,r,e),this.filter&&(t.filter=this.filter)}})),s.save(),o&&this._isInteractiveMask(i)&&(o._transformMargin(s,r,a.margin),o._runPath(s),s.clip()),this._transformMargin(s,r,a.margin),i.layer.order>0&&!t&&_h(this._renderer._deferredGhostLayers,i.layer.order),this._render(i,t),s.restore(),mh(n,(e=>{e&&e.context.restore()}))}}_render(e){!1===this.exportable&&(e.layer.tainted=!0)}_ghostOnly(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)>0}_drawGhost(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this._isInteractive(e),r=e.layer.order||0;return!(!i||(0!=r||this._ghostOnly(t))&&r!=t)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some((e=>e.value===this))}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class ff extends pf{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(e){return this.interactiveChildren||super._isInteractiveMask(e)}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,vh(this._children,e)}_render(e,t){super._render(e);const i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive,mh(this._children,(i=>{i.compoundAlpha=this.compoundAlpha*this.alpha,i.render(e,t)})),this.interactive&&this.interactiveChildren&&--i._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),wh(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.markDirtyLayer(),e&&this._childLayers&&mh(this._childLayers,(e=>e.dirty=!0))}_dispose(){super._dispose(),this._childLayers&&mh(this._childLayers,(e=>{e.dirty=!0}))}}function mf(e,t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x),e.bottom=Math.max(e.bottom,t.y)}class gf{colorize(e,t){}colorizeGhost(e,t){this.colorize(e,t)}path(e){}pathGhost(e){this.path(e)}addBounds(e){}}class bf extends gf{colorize(e,t){e.beginPath()}}class yf extends gf{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fillStyle=void 0!==t?t:this.color}}class vf extends gf{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class _f extends gf{colorize(e,t){e.stroke()}}class wf extends gf{constructor(e,t,i,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"lineCap",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,t){e.strokeStyle=void 0!==t?t:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin),this.lineCap&&(e.lineCap=this.lineCap)}}class xf extends gf{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.setLineDash(this.dash)}}class Pf extends gf{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.lineDashOffset=this.dashOffset}}class Ef extends gf{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const t=this.x,i=this.y,r=t+this.width,n=i+this.height;mf(e,{x:t,y:i}),mf(e,{x:r,y:i}),mf(e,{x:t,y:n}),mf(e,{x:r,y:n})}}class kf extends gf{constructor(e,t,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){mf(e,{x:this.x-this.radius,y:this.y-this.radius}),mf(e,{x:this.x+this.radius,y:this.y+this.radius})}}class Sf extends gf{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){mf(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),mf(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class Of extends gf{constructor(e,t,i,r,n,a){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let t=function(e,t,i,r,n){let a=Number.MAX_VALUE,s=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=-Number.MAX_VALUE,u=[];u.push(up(n,i)),u.push(up(n,r));let c=Math.min(90*Math.floor(i/90),90*Math.floor(r/90)),h=Math.max(90*Math.ceil(i/90),90*Math.ceil(r/90));for(let d=c;d<=h;d+=90)d>=i&&d<=r&&u.push(up(n,d));for(let d=0;d<u.length;d++){let e=u[d];e.x<a&&(a=e.x),e.y<s&&(s=e.y),e.x>o&&(o=e.x),e.y>l&&(l=e.y)}return{left:e+a,top:t+s,right:e+o,bottom:t+l}}(this.cx,this.cy,this.startAngle*rp,this.endAngle*rp,this.radius);mf(e,{x:t.left,y:t.top}),mf(e,{x:t.right,y:t.bottom})}}class Tf extends gf{constructor(e,t,i,r,n){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class Af extends gf{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.lineTo(this.x,this.y)}addBounds(e){mf(e,{x:this.x,y:this.y})}}class Cf extends gf{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.moveTo(this.x,this.y)}addBounds(e){mf(e,{x:this.x,y:this.y})}}class Rf extends gf{path(e){e.closePath()}}class If extends gf{constructor(e,t,i,r,n,a){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){mf(e,{x:this.cpX,y:this.cpY}),mf(e,{x:this.cpX2,y:this.cpY2}),mf(e,{x:this.toX,y:this.toY})}}class Df extends gf{constructor(e,t,i,r){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){mf(e,{x:this.cpX,y:this.cpY}),mf(e,{x:this.toX,y:this.toY})}}class jf extends gf{constructor(e,t,i,r,n){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:n})}colorize(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}colorizeGhost(e,t){}}class Lf extends gf{constructor(e,t,i,r,n){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){mf(e,{x:this.x,y:this.y}),mf(e,{x:this.width,y:this.height})}}class Nf extends pf{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:fp.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fillAlpha=t,e?e instanceof wd?this._pushOp(new yf(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new yf(e))):this._pushOp(new yf("rgba(0, 0, 0, "+t+")"))}endFill(){this._pushOp(new vf(this._hasShadows))}endStroke(){this._pushOp(new _f)}beginPath(){this._pushOp(new bf)}lineStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;this._strokeAlpha=i,t?t instanceof wd?this._pushOp(new wf(e,t.toCSS(i),r,n)):this._pushOp(new wf(e,t,r,n)):this._pushOp(new wf(e,"rgba(0, 0, 0, "+i+")",r,n))}setLineDash(e){this._pushOp(new xf(e||[]))}setLineDashOffset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._pushOp(new Pf(e))}drawRect(e,t,i,r){this._pushOp(new Ef(e,t,i,r))}drawCircle(e,t,i){this._pushOp(new kf(e,t,i))}drawEllipse(e,t,i,r){this._pushOp(new Sf(e,t,i,r))}arc(e,t,i,r,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this._pushOp(new Of(e,t,i,r,n,a))}arcTo(e,t,i,r,n){this._pushOp(new Tf(e,t,i,r,n))}lineTo(e,t){this._pushOp(new Af(e,t))}moveTo(e,t){this._pushOp(new Cf(e,t))}bezierCurveTo(e,t,i,r,n,a){this._pushOp(new If(e,t,i,r,n,a))}quadraticCurveTo(e,t,i,r){this._pushOp(new Df(e,t,i,r))}closePath(){this._pushOp(new Rf)}shadow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0;this._hasShadows=!0,this._pushOp(new jf(n?e.toCSS(n):e.toCSS(this._fillAlpha||this._strokeAlpha),t,i,r))}image(e,t,i,r,n){this._pushOp(new Lf(e,t,i,r,n))}svgPath(e){let t=0,i=0,r=null,n=null,a=null,s=null;const o=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,l=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let u;for(;null!==(u=o.exec(e));){const e=u[1],o=u[2],c=[];for(;null!==(u=l.exec(o));)c.push(u[1]);switch("S"!==e&&"s"!==e&&"C"!==e&&"c"!==e&&(r=null,n=null),"Q"!==e&&"q"!==e&&"T"!==e&&"t"!==e&&(a=null,s=null),e){case"M":nf(e,c.length,2),t=+c[0],i=+c[1],this.moveTo(t,i);for(let e=2;e<c.length;e+=2)t=+c[e],i=+c[e+1],this.lineTo(t,i);break;case"m":nf(e,c.length,2),t+=+c[0],i+=+c[1],this.moveTo(t,i);for(let e=2;e<c.length;e+=2)t+=+c[e],i+=+c[e+1],this.lineTo(t,i);break;case"L":nf(e,c.length,2);for(let e=0;e<c.length;e+=2)t=+c[e],i=+c[e+1],this.lineTo(t,i);break;case"l":nf(e,c.length,2);for(let e=0;e<c.length;e+=2)t+=+c[e],i+=+c[e+1],this.lineTo(t,i);break;case"H":rf(e,c.length,1);for(let e=0;e<c.length;++e)t=+c[e],this.lineTo(t,i);break;case"h":rf(e,c.length,1);for(let e=0;e<c.length;++e)t+=+c[e],this.lineTo(t,i);break;case"V":rf(e,c.length,1);for(let e=0;e<c.length;++e)i=+c[e],this.lineTo(t,i);break;case"v":rf(e,c.length,1);for(let e=0;e<c.length;++e)i+=+c[e],this.lineTo(t,i);break;case"C":nf(e,c.length,6);for(let e=0;e<c.length;e+=6){const a=+c[e],s=+c[e+1];r=+c[e+2],n=+c[e+3],t=+c[e+4],i=+c[e+5],this.bezierCurveTo(a,s,r,n,t,i)}break;case"c":nf(e,c.length,6);for(let e=0;e<c.length;e+=6){const a=+c[e]+t,s=+c[e+1]+i;r=+c[e+2]+t,n=+c[e+3]+i,t+=+c[e+4],i+=+c[e+5],this.bezierCurveTo(a,s,r,n,t,i)}break;case"S":nf(e,c.length,4),null!==r&&null!==n||(r=t,n=i);for(let e=0;e<c.length;e+=4){const a=2*t-r,s=2*i-n;r=+c[e],n=+c[e+1],t=+c[e+2],i=+c[e+3],this.bezierCurveTo(a,s,r,n,t,i)}break;case"s":nf(e,c.length,4),null!==r&&null!==n||(r=t,n=i);for(let e=0;e<c.length;e+=4){const a=2*t-r,s=2*i-n;r=+c[e]+t,n=+c[e+1]+i,t+=+c[e+2],i+=+c[e+3],this.bezierCurveTo(a,s,r,n,t,i)}break;case"Q":nf(e,c.length,4);for(let e=0;e<c.length;e+=4)a=+c[e],s=+c[e+1],t=+c[e+2],i=+c[e+3],this.quadraticCurveTo(a,s,t,i);break;case"q":nf(e,c.length,4);for(let e=0;e<c.length;e+=4)a=+c[e]+t,s=+c[e+1]+i,t+=+c[e+2],i+=+c[e+3],this.quadraticCurveTo(a,s,t,i);break;case"T":nf(e,c.length,2),null!==a&&null!==s||(a=t,s=i);for(let e=0;e<c.length;e+=2)a=2*t-a,s=2*i-s,t=+c[e],i=+c[e+1],this.quadraticCurveTo(a,s,t,i);break;case"t":nf(e,c.length,2),null!==a&&null!==s||(a=t,s=i);for(let e=0;e<c.length;e+=2)a=2*t-a,s=2*i-s,t+=+c[e],i+=+c[e+1],this.quadraticCurveTo(a,s,t,i);break;case"A":case"a":const o="a"===e;af(c),nf(e,c.length,7);for(let e=0;e<c.length;e+=7){let r=+c[e+5],n=+c[e+6];o&&(r+=t,n+=i);mh(ef({px:t,py:i,rx:+c[e],ry:+c[e+1],xAxisRotation:+c[e+2],largeArcFlag:sf(+c[e+3]),sweepFlag:sf(+c[e+4]),cx:r,cy:n}),(e=>{this.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),t=e.x,i=e.y}))}break;case"Z":case"z":tf(e,c.length,0),this.closePath()}}}_runPath(e){e.beginPath(),mh(this._operations,(t=>{t.path(e)}))}_render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super._render(e);const i=e.layer.dirty,r=this._isInteractive(e),n=this._ghostOnly(t),a=this._drawGhost(e,t);if(i||r||n){const t=e.layer.context,r=this._renderer._ghostLayer.context;let s;i&&!n&&(t.globalCompositeOperation=this.blendMode,t.beginPath()),a&&(r.beginPath(),s=this._getColorId()),mh(this._operations,(e=>{i&&!n&&(e.path(t),e.colorize(t,void 0)),a&&(e.pathGhost(r),e.colorizeGhost(r,s))}))}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),mh(this._operations,(t=>{t.path(e),t.colorize(e,void 0)})),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&mh(this._operations,(t=>{t.addBounds(e)}))}}class Mf extends pf{constructor(e,t,i){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"truncated",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=t,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super._render(e);const r=e.layer.context,n=this._renderer._ghostLayer.context,a=this.style;let s=this._getFontStyle(void 0,i);r.font=s,this._isInteractive(e)&&!t&&(n.font=s),a.fill&&(a.fill instanceof wd?r.fillStyle=a.fill.toCSS(void 0!=a.fillOpacity?a.fillOpacity:1):r.fillStyle=a.fill),a.shadowColor&&(e.layer.context.shadowColor=a.shadowColor.toCSS(a.shadowOpacity||1)),a.shadowBlur&&(e.layer.context.shadowBlur=a.shadowBlur),a.shadowOffsetX&&(e.layer.context.shadowOffsetX=a.shadowOffsetX),a.shadowOffsetY&&(e.layer.context.shadowOffsetY=a.shadowOffsetY),this._shared(r),this._isInteractive(e)&&!t&&(n.fillStyle=this._getColorId(),this._shared(n))}_getFontStyle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.style;let r=[];return e&&e.fontVariant?r.push(e.fontVariant):i.fontVariant&&r.push(i.fontVariant),t||(e&&e.fontWeight?r.push(e.fontWeight):i.fontWeight&&r.push(i.fontWeight)),e&&e.fontStyle?r.push(e.fontStyle):i.fontStyle&&r.push(i.fontStyle),e&&e.fontSize?(uh(e.fontSize)&&(e.fontSize=e.fontSize+"px"),r.push(e.fontSize)):i.fontSize&&(uh(i.fontSize)&&(i.fontSize=i.fontSize+"px"),r.push(i.fontSize)),e&&e.fontFamily?r.push(e.fontFamily):i.fontFamily?r.push(i.fontFamily):r.length&&r.push("Arial"),r.join(" ")}_render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._textInfo||this._measure(e),this.textVisible){const i=this._isInteractive(e),r=e.layer.context,n=e.layer.dirty,a=this._renderer._ghostLayer.context,s=this._ghostOnly(t),o=this._drawGhost(e,t);r.save(),a.save(),this._prerender(e),mh(this._textInfo,((t,l)=>{mh(t.textChunks,((l,u)=>{if(l.style&&(r.save(),a.save(),s||(r.font=l.style),this._isInteractive(e)&&(a.font=l.style)),l.fill&&(r.save(),s||(r.fillStyle=l.fill.toCSS())),n&&!s&&r.fillText(l.text,l.offsetX,t.offsetY+l.offsetY),"underline"==l.textDecoration||"line-through"==l.textDecoration){let e=1,i=1,n=l.height;const a=this.style.oversizedBehavior||"";if(["truncate","wrap","wrap-no-break"].indexOf(a)>-1){const e=this._measureText(l.text,r);l.width=e.actualBoundingBoxLeft+e.actualBoundingBoxRight}let o,u=l.offsetX;switch(this.style.textAlign){case"right":case"end":u-=l.width;break;case"center":u-=l.width/2}if(l.style){switch(xp.getTextStyle(l.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":e=2}}n&&(i=n/20),o="line-through"==l.textDecoration?e+t.offsetY+l.offsetY-l.height/2:e+1.5*i+t.offsetY+l.offsetY,s||(r.save(),r.beginPath(),l.fill?r.strokeStyle=l.fill.toCSS():this.style.fill&&this.style.fill instanceof wd&&(r.strokeStyle=this.style.fill.toCSS()),r.lineWidth=e*i,r.moveTo(u,o),r.lineTo(u+l.width,o),r.stroke(),r.restore())}i&&this.interactive&&o&&a.fillText(l.text,l.offsetX,t.offsetY+l.offsetY),l.fill&&r.restore(),l.style&&(r.restore(),a.restore())}))})),r.restore(),a.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const t=this._measure({inactive:this.inactive,layer:this.getLayer()});mf(e,{x:t.left,y:t.top}),mf(e,{x:t.right,y:t.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const t=e.layer.context,i=this._renderer._ghostLayer.context,r="rtl"==this.style.direction;this._textInfo=[];const n=this.style.oversizedBehavior,a=this.style.maxWidth,s=uh(a)&&"truncate"==n,o=uh(a)&&("wrap"==n||"wrap-no-break"==n);t.save(),i.save(),this._prerender(e,!0,this._ignoreFontWeight());const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",u=this.text.toString().replace(/\r/g,"").split(/\n/);let c,h=!0,d=0,p=0,f=0;mh(u,((e,r)=>{let n;for(n=""==e?[{type:"value",text:""}]:xp.chunk(e,!1,this.style.ignoreFormatting);n.length>0;){let e={offsetY:f,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const r=this._measureText(l,t),u=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;let m;e.height=u,e.ascent=r.actualBoundingBoxAscent;let g,b,y,v=this.style.textDecoration,_=!1,w=!0,x=[];bh(n,((r,u)=>{if("format"==r.type)if("[/]"==r.text)h||(t.restore(),i.restore(),h=!0),g=void 0,c=void 0,b=void 0,v=this.style.textDecoration,y=void 0,m=r.text;else{h||(t.restore(),i.restore());let n=xp.getTextStyle(r.text);const a=this._getFontStyle(n);t.save(),i.save(),t.font=a,c=a,m=r.text,n.textDecoration&&(v=n.textDecoration),n.fill&&(g=n.fill),n.width&&(b=nh(n.width)),n.verticalAlign&&(y=n.verticalAlign),h=!1;const s=this._measureText(l,t),o=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent;o>e.height&&(e.height=o),s.actualBoundingBoxAscent>e.ascent&&(e.ascent=s.actualBoundingBoxAscent)}else if("value"==r.type&&!_){const i=this._measureText(r.text,t);let l=i.actualBoundingBoxLeft+i.actualBoundingBoxRight;if(s){this.truncated=void 0;let i=w||this.style.breakWords||!1;const n=this.style.ellipsis||"",s=this._measureText(n,t),o=s.actualBoundingBoxLeft+s.actualBoundingBoxRight;if(e.width+l>a){const s=a-e.width-o;r.text=this._truncateText(t,r.text,s,i),r.text+=n,_=!0,this.truncated=!0}}else if(o&&e.width+l>a){const i=a-e.width,s=this._truncateText(t,r.text,i,!1,w&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==s)return this.textVisible=!0,!1;x=n.slice(u+1),td(s)!=td(r.text)&&(x.unshift({type:"value",text:r.text.substr(s.length)}),m&&x.unshift({type:"format",text:m})),r.text=td(s),n=[],_=!0}let h=1,d=1;if(c&&b&&b>l){const e=l/b;switch(this.style.textAlign){case"right":case"end":h=e;break;case"center":h=e,d=e;break;default:d=e}l=b}const p=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;p>e.height&&(e.height=p),i.actualBoundingBoxAscent>e.ascent&&(e.ascent=i.actualBoundingBoxAscent),e.width+=l,e.left+=i.actualBoundingBoxLeft/h,e.right+=i.actualBoundingBoxRight/d,e.textChunks.push({style:c,fill:g,text:r.text,width:l,height:p,left:i.actualBoundingBoxLeft,right:i.actualBoundingBoxRight,ascent:i.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:v,verticalAlign:y}),w=!1}return!0})),this.style.lineHeight instanceof Jc?(e.height*=this.style.lineHeight.value,e.ascent*=this.style.lineHeight.value):(e.height*=this.style.lineHeight||1.2,e.ascent*=this.style.lineHeight||1.2),d<e.left&&(d=e.left),p<e.right&&(p=e.right),this._textInfo.push(e),f+=e.height,n=x||[]}})),h||(t.restore(),i.restore()),mh(this._textInfo,((e,t)=>{let i=0;mh(e.textChunks,(t=>{if(t.offsetX=i+t.left-e.left,t.offsetY+=e.height-e.height*(this.style.baselineRatio||.19),i+=t.width,t.verticalAlign)switch(t.verticalAlign){case"super":t.offsetY-=e.height/2-t.height/2;break;case"sub":t.offsetY+=t.height/2}}))}));const m={left:r?-p:-d,top:0,right:r?d:p,bottom:f};if("none"!==n){const e=this._fitRatio(m);if(e<1)if("fit"==n)uh(this.style.minScale)&&e<this.style.minScale?(this.textVisible=!1,m.left=0,m.top=0,m.right=0,m.bottom=0):(this._originalScale||(this._originalScale=this.scale),this.scale=e,this.textVisible=!0);else if("hide"==n)this.textVisible=!1,m.left=0,m.top=0,m.right=0,m.bottom=0;else{switch(this.style.textAlign){case"right":case"end":m.left=r?a:-a,m.right=0;break;case"center":m.left=-a/2,m.right=a/2;break;default:m.left=0,m.right=r?-a:a}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return t.restore(),i.restore(),m}_fitRatio(e){const t=this.style.maxWidth,i=this.style.maxHeight;if(!uh(t)&&!uh(i))return 1;const r=e.right-e.left,n=e.bottom-e.top;return Math.min(t/r||1,i/n||1)}_truncateText(e,t,i){let r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];do{if(n)t=t.slice(0,-1);else{let e=t.replace(/[^,;:!?\\\/\s\u200b]+[,;:!?\\\/\s\u200b]*$/g,"");if(""!=e&&e!==t||!a){if(""==e)return t;t=e}else n=!0}const i=this._measureText(t,e);r=i.actualBoundingBoxLeft+i.actualBoundingBoxRight}while(r>i&&""!=t);return t}_measureText(e,t){let i=t.measureText(e),r={};if(null==i.actualBoundingBoxAscent){const t=document.createElement("div");t.innerText=e,t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000000px;",t.style.fontFamily=this.style.fontFamily||"",t.style.fontSize=this.style.fontSize+"",document.body.appendChild(t);const n=t.getBoundingClientRect();document.body.removeChild(t);const a=n.height,s=i.width;r={actualBoundingBoxAscent:a,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:s,fontBoundingBoxAscent:a,fontBoundingBoxDescent:0,width:s}}else r={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};const n=i.width;switch(this.style.textAlign){case"right":case"end":r.actualBoundingBoxLeft=n,r.actualBoundingBoxRight=0;break;case"center":r.actualBoundingBoxLeft=n/2,r.actualBoundingBoxRight=n/2;break;default:r.actualBoundingBoxLeft=0,r.actualBoundingBoxRight=n}return r}}class $f{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:Qc(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class Ff extends Mf{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("circular"===this.textType)this._renderCircular(e,t);else super._render(e,t)}_renderCircular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.textVisible){this._prerender(e);const i=this._isInteractive(e),r=e.layer.context,n=e.layer.dirty,a=this._renderer._ghostLayer.context;r.save(),i&&a.save(),this._textInfo||this._measure(e);let s=this.radius||0,o=this.startAngle||0,l=0,u=this.orientation,c="auto"==u?"auto":"inward"==u;const h=this.inside,d=this.style.textAlign||"left",p=this.kerning||0;let f="left"==d?1:-1;const m=!this._textReversed,g=this._ghostOnly(t),b=this._drawGhost(e,t);if("auto"==c){let e=0,t=0;mh(this._textInfo,((t,i)=>{const r=o+t.width/(s-t.height)/2*-f;r>e&&(e=r)})),t="left"==d?(e+l/2)*rp:"right"==d?(e-l/2)*rp:o*rp,t=lp(t),c=t>=270||t<=90}1==c&&m&&(this._textInfo.reverse(),this._textReversed=!0),mh(this._textInfo,((e,t)=>{const u=e.height;h||(s+=u),(-1==f&&c||1==f&&!c)&&m&&e.textChunks.reverse();let y=o;l=0,"center"==d&&(y+=e.width/(s-u)/2*-f,l=y-o),y+=Math.PI*(c?0:1),r.save(),i&&a.save(),g||r.rotate(y),i&&a.rotate(y);let v=0;mh(e.textChunks,((e,t)=>{const o=e.text,l=e.width;v=l/2/(s-u)*f,g||r.rotate(v),i&&a.rotate(v),e.style&&(r.save(),a.save(),g||(r.font=e.style),i&&(a.font=e.style)),e.fill&&(r.save(),g||(r.fillStyle=e.fill.toCSS())),g||(r.textBaseline="middle",r.textAlign="center"),i&&(a.textBaseline="middle",a.textAlign="center"),n&&!g&&r.fillText(o,0,(c?1:-1)*(0-s+u/2)),i&&b&&a.fillText(o,0,(c?1:-1)*(0-s+u/2)),e.fill&&r.restore(),e.style&&(r.restore(),a.restore()),v=(l/2+p)/(s-u)*f,g||r.rotate(v),i&&a.rotate(v)})),r.restore(),i&&a.restore(),h&&(s-=u)})),r.restore(),i&&a.restore()}}_measure(e){return"circular"===this.textType?this._measureCircular(e):super._measure(e)}_measureCircular(e){const t=e.layer.context,i=this._renderer._ghostLayer.context,r="rtl"==this.style.direction,n=this.style.oversizedBehavior,a=this.style.maxWidth,s=uh(a)&&"truncate"==n,o=this.style.ellipsis||"";let l;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,t.save(),i.save(),this._prerender(e,!0);const u=this.text.toString().replace(/\r/g,"").split(/\n/);let c=!0,h=0,d=0;return mh(u,((e,n)=>{let u,p,f,m=xp.chunk(e,!1,this.style.ignoreFormatting),g={offsetY:d,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};mh(m,((e,n)=>{if("format"==e.type){if("[/]"==e.text)c||(t.restore(),i.restore(),c=!0),p=void 0,u=void 0,f=void 0;else{let r=xp.getTextStyle(e.text);const n=this._getFontStyle(r);t.save(),i.save(),t.font=n,u=n,r.fill&&(p=r.fill),r.width&&(f=nh(r.width)),c=!1}s&&(l=this._measureText(o,t))}else if("value"==e.type){let i=e.text.match(/./gu)||[];r&&(i=function(e){const t=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,i=/([^\u0627\u0623\u062f\u0630\u0631\u0632\u0648]*[\u0627\u0623\u062f\u0630\u0631\u0632\u0648])/gi;let r=e.split(/(\s+)/),n=[];return r.forEach((e=>{if(e.match(/^\s+$/))(e=" ")&&(e="  "),n.push(e);else if(t.test(e)){let t=e.split(i).filter((e=>""!==e));n=n.concat(t)}else n=n.concat([...e])})),n}(e.text),i.reverse());for(let e=0;e<i.length;e++){const r=i[e],n=this._measureText(r,t);let c=n.width;u&&f&&f>c&&(c=f);const d=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;if(d>g.height&&(g.height=d),n.actualBoundingBoxAscent>g.ascent&&(g.ascent=n.actualBoundingBoxAscent),h+=c,s){l||(l=this._measureText(o,t));const e=l.actualBoundingBoxLeft+l.actualBoundingBoxRight;if(h+e>a){1==g.textChunks.length?this.textVisible=!1:(g.width+=e,g.left+=l.actualBoundingBoxLeft,g.right+=l.actualBoundingBoxRight,g.textChunks.push({style:u,fill:p,text:o,width:e,height:d+l.actualBoundingBoxDescent,left:l.actualBoundingBoxLeft,right:l.actualBoundingBoxRight,ascent:l.actualBoundingBoxAscent,offsetX:0,offsetY:d,textDecoration:void 0}));break}}g.width+=c,g.left+=n.actualBoundingBoxLeft,g.right+=n.actualBoundingBoxRight,g.textChunks.push({style:u,fill:p,text:r,width:c,height:d+n.actualBoundingBoxDescent,left:n.actualBoundingBoxLeft,right:n.actualBoundingBoxRight,ascent:n.actualBoundingBoxAscent,offsetX:0,offsetY:d,textDecoration:void 0})}}})),this.style.lineHeight instanceof Jc?g.height*=this.style.lineHeight.value:g.height*=this.style.lineHeight||1.2,this._textInfo.push(g),d+=g.height})),c||(t.restore(),i.restore()),"hide"==n&&h>a&&(this.textVisible=!1),mh(this._textInfo,(e=>{mh(e.textChunks,(t=>{t.offsetY+=Math.round((e.height-t.height+(e.ascent-t.ascent))/2)}))})),t.restore(),i.restore(),{left:0,top:0,right:0,bottom:0}}}class Bf extends pf{constructor(e,t){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=t}_dispose(){super._dispose(),this._imageMask&&cf(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}_render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(super._render(e),this.image){if(void 0===this.tainted&&(this.tainted=uf(this.image),e.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;const i=this._ghostOnly(t),r=this._drawGhost(e,t);if(e.layer.dirty&&!i){this.shadowColor&&(e.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(e.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(e.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(e.layer.context.shadowOffsetY=this.shadowOffsetY);const t=this.width||this.image.naturalWidth,i=this.height||this.image.naturalHeight;e.layer.context.drawImage(this.image,0,0,t,i)}if(this.interactive&&this._isInteractive(e)&&r){const e=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(e,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(void 0===this._imageMask){const t=this.width||e.naturalWidth,i=this.height||e.naturalHeight,r=document.createElement("canvas");r.width=t,r.height=i;const n=r.getContext("2d");n.imageSmoothingEnabled=!1,n.fillStyle=this._getColorId(),n.fillRect(0,0,t,i),uf(e)||(n.globalCompositeOperation="destination-in",n.drawImage(e,0,0,t,i)),this._imageMask=r}return this._imageMask}}class Uf{constructor(e,t,i,r){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),zh("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class zf extends Mh{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Hf}),Object.defineProperty(this,"_deferredGhostLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=null==e?window.devicePixelRatio:e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new Nh((()=>{Dh(this._events,((e,t)=>{t.disposer.dispose()})),mh(this.layers,(e=>{cf(e.view),e.exportableView&&cf(e.exportableView)})),cf(this._ghostLayer.view),cf(this._patternCanvas)}))),this._disposers.push(Uh((()=>{null==e&&(this.resolution=window.devicePixelRatio)}))),zh("touchevents")){const e=e=>{0!==this._dragging.length&&bh(this._dragging,(t=>!t.value.shouldCancelTouch()||(e.preventDefault(),!1))),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(Bh(window,"touchstart",e,{passive:!1})),this._disposers.push(Bh(this.view,"touchstart",e,{passive:!1})),this._disposers.push(Bh(this.view,"touchmove",(()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()}),{passive:!0})),this._disposers.push(Bh(window,"click",(e=>{this._touchActive=!1}),{passive:!0})),this._disposers.push(Bh(this.view,"click",(e=>{window.setTimeout((()=>{this._touchActive=!0,this._delayTouchDeactivate()}),100)}),{passive:!0}))}zh("wheelevents")&&this._disposers.push(Bh(this.view,"wheel",(e=>{let t=!1;this._hovering.forEach((e=>{if(e.wheelable)return t=!0,!1})),t&&e.preventDefault()}),{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout((()=>{this._touchActive=!1}),this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,t,i,r){return this.defaultLayer.context.createLinearGradient(e,t,i,r)}createRadialGradient(e,t,i,r,n,a){return this.defaultLayer.context.createRadialGradient(e,t,i,r,n,a)}createPattern(e,t,i,r,n){return this._patternCanvas.width=r,this._patternCanvas.height=n,this._patternContext.clearRect(0,0,r,n),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new ff(this)}makeGraphics(){return new Nf(this)}makeText(e,t){return new Mf(this,e,t)}makeTextStyle(){return new $f}makeRadialText(e,t){return new Ff(this,e,t)}makePicture(e){return new Bf(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,t,i,r){this._realWidth=e,this._realHeight=t,this._calculatedWidth=i,this._calculatedHeight=r,mh(this.layers,(e=>{e&&(e.dirty=!0,this.resizeLayer(e))})),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=r+"px"}createDetachedLayer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:e}),r=new Vf(t,i);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",r}getLayerByOrder(e){const t=this.layers,i=t.length;for(let r=0;r<i;r++){const i=t[r];if(i.order==e)return i}}getLayer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getLayerByOrder(e);if(i)return i;const r=this.createDetachedLayer(99==e);r.order=e,r.visible=t,r.view.className="am5-layer-"+e,r.visible&&this.resizeLayer(r);const n=this.layers;n.push(r),n.sort(((e,t)=>e.order>t.order?1:e.order<t.order?-1:0));const a=n.length;let s;for(let o=ph(n,r)+1;o<a;o++)if(n[o].visible){s=n[o];break}return r.visible&&(void 0===s?this._layerDom.appendChild(r.view):this._layerDom.insertBefore(r.view,s.view)),r}render(e){this._dirtyLayers.length=0,this._deferredGhostLayers=[],mh(this.layers,(e=>{e&&e.dirty&&e.visible&&(this._dirtyLayers.push(e),e.clear())})),this._ghostLayer.clear(),e.render({inactive:null,layer:this.defaultLayer});const t=this._deferredGhostLayers;if(t.length&&(t.sort(((e,t)=>e-t)),mh(t,(t=>{e.render({inactive:null,layer:this.defaultLayer},t)}))),this._ghostLayer.context.restore(),mh(this.layers,(e=>{if(e){const t=e.context;t.beginPath(),t.moveTo(0,0),t.stroke()}})),mh(this._dirtyLayers,(e=>{e.context.restore(),e.dirty=!1})),this._hovering.size&&this._lastPointerMoveEvent){const{events:e,target:t,native:i}=this._lastPointerMoveEvent;mh(e,(e=>{this._dispatchGlobalMousemove(e,t,i)}))}}paintId(e){const t=function(e){const t=[0,0,0];for(let i=0;i<24;i++)t[i%3]<<=1,t[i%3]|=1&e,e>>=1;return(0|t[0])+(t[1]<<8)+(t[2]<<16)}(++this._colorId),i=wd.fromHex(t).toCSS();return this._colorMap[i]=e,i}_removeObject(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const t=this._ghostLayer.margin;return new DOMRect(-t.left,-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}getEvent(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.view.getBoundingClientRect(),r=e.clientX||0,n=e.clientY||0,a=this._calculatedWidth/this._realWidth,s=this._calculatedHeight/this._realHeight,o={x:r-i.left,y:n-i.top},l={x:(r-(t?i.left:0))*a,y:(n-(t?i.top:0))*s};return new Uf(e,o,l,this._adjustBoundingBox(i))}_getHitTarget(e,t,i){if(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom)return;if(!i||!this._layerDom.contains(i))return;const r=this._ghostLayer.getImageData(e,t);if(0===r.data[0]&&0===r.data[1]&&0===r.data[2])return!1;const n=wd.fromRGB(r.data[0],r.data[1],r.data[2]).toCSS();return this._colorMap[n]}getObjectAtPoint(e){const t=this._ghostLayer.getImageArray(e);if(0===t[0]&&0===t[1]&&0===t[2])return;const i=wd.fromRGB(t[0],t[1],t[2]).toCSS();return this._colorMap[i]}_withEvents(e,t){const i=this._events[e];if(void 0!==i){i.dispatching=!0;try{t(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,Ah(i.callbacks,(e=>!e.disposed)),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,t){this.interactionsEnabled&&this._withEvents(e,(e=>{mh(e.callbacks,(e=>{e.disposed||e.callback.call(e.context,t)}))}))}_dispatchEvent(e,t,i){if(!this.interactionsEnabled)return!1;let r=!1;return this._withEvents(e,(e=>{mh(e.callbacks,(e=>{e.disposed||e.object!==t||(e.callback.call(e.context,i),r=!0)}))})),r}_dispatchMousedown(e,t){const i=e.button;if(0!=i&&2!=i&&1!=i&&void 0!==i)return;const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,t);if(n){const e=r.id;let t=!1;of(n,(i=>{const n={id:e,value:i};if(this._mousedown.push(n),!t&&this._dispatchEvent("pointerdown",i,r)){t=!0;this._dragging.some((t=>t.value===i&&t.id===e))||this._dragging.push(n)}return!0}))}}_dispatchGlobalMousemove(e,t,i){const r=this.getEvent(e),n=this._getHitTarget(r.originalPoint,r.bbox,t);r.native=i,n?(this._hovering.forEach((e=>{e.contains(n)||(this._hovering.delete(e),e.cursorOverStyle&&Yh(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r))})),r.native&&of(n,(e=>{var t,i;return this._hovering.has(e)||(this._hovering.add(e),e.cursorOverStyle&&(e._replacedCursorStyle=(t=document.body,i="cursor",t.style[i]),Yh(document.body,"cursor",e.cursorOverStyle)),this._dispatchEvent("pointerover",e,r)),!0}))):(this._hovering.forEach((e=>{e.cursorOverStyle&&Yh(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r)})),this._hovering.clear()),this._dispatchEventAll("globalpointermove",r)}removeHovering(e){this._hovering.delete(e),e.cursorOverStyle&&Yh(document.body,"cursor",e._replacedCursorStyle)}_dispatchGlobalMouseup(e,t){const i=this.getEvent(e);i.native=t,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(e){if(0!==this._dragging.length){const t=this.getEvent(e),i=t.id;this._dragging.forEach((e=>{e.id===i&&this._dispatchEvent("pointermove",e.value,t)}))}}_dispatchDragEnd(e,t){const i=e.button;let r;if(0==i||void 0===i)r="click";else if(2==i)r="rightclick";else{if(1!=i)return;r="middleclick"}const n=this.getEvent(e),a=n.id;if(0!==this._mousedown.length){const e=this._getHitTarget(n.originalPoint,n.bbox,t);e&&this._mousedown.forEach((t=>{t.id===a&&t.value.contains(e)&&this._dispatchEvent(r,t.value,n)})),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach((e=>{e.id===a&&this._dispatchEvent("pointerup",e.value,n)})),this._dragging.length=0)}_dispatchDoubleClick(e,t){const i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&of(r,(e=>!this._dispatchEvent("dblclick",e,i)))}_dispatchWheel(e,t){const i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&of(r,(e=>!this._dispatchEvent("wheel",e,i)))}_makeSharedEvent(e,t){if(void 0===this._listeners[e]){const i=t();this._listeners[e]=new Fh((()=>{delete this._listeners[e],i.dispose()}))}return this._listeners[e].increment()}_onPointerEvent(e,t){let i=!1,r=null;function n(){r=null,i=!1}return new $h([new Nh((()=>{null!==r&&clearTimeout(r),n()})),Bh(this.view,Vh(e),(e=>{i=!0,null!==r&&clearTimeout(r),r=window.setTimeout(n,0)})),lf(window,e,((e,n)=>{null!==r&&(clearTimeout(r),r=null),t(e,n,i),i=!1}))])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",(()=>{const e=(e,t,i)=>{this._lastPointerMoveEvent={events:e,target:t,native:i},mh(e,(e=>{this._dispatchGlobalMousemove(e,t,i)}))};return new $h([this._onPointerEvent("pointerdown",e),this._onPointerEvent("pointermove",e)])}));case"globalpointerup":return this._makeSharedEvent("pointerup",(()=>{const e=this._onPointerEvent("pointerup",((e,t,i)=>{mh(e,(e=>{this._dispatchGlobalMouseup(e,i)})),this._lastPointerMoveEvent={events:e,target:t,native:i}})),t=this._onPointerEvent("pointercancel",((e,t,i)=>{mh(e,(e=>{this._dispatchGlobalMouseup(e,i)})),this._lastPointerMoveEvent={events:e,target:t,native:i}}));return new Nh((()=>{e.dispose(),t.dispose()}))}));case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",(()=>{const e=this._onPointerEvent("pointerdown",((e,t)=>{mh(e,(e=>{this._dispatchMousedown(e,t)}))})),t=this._onPointerEvent("pointermove",(e=>{mh(e,(e=>{this._dispatchDragMove(e)}))})),i=this._onPointerEvent("pointerup",((e,t)=>{mh(e,(e=>{this._dispatchDragEnd(e,t)}))})),r=this._onPointerEvent("pointercancel",((e,t)=>{mh(e,(e=>{this._dispatchDragEnd(e,t)}))}));return new Nh((()=>{e.dispose(),t.dispose(),i.dispose(),r.dispose()}))}));case"dblclick":return this._makeSharedEvent("dblclick",(()=>this._onPointerEvent("dblclick",((e,t)=>{mh(e,(e=>{this._dispatchDoubleClick(e,t)}))}))));case"wheel":return this._makeSharedEvent("wheel",(()=>Bh(this.view,Vh("wheel"),(e=>{this._dispatchWheel(e,Wh(e))}),{passive:!1})))}}_addEvent(e,t,i,r){let n=this._events[t];void 0===n&&(n=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});const a={object:e,context:r,callback:i,disposed:!1};return n.callbacks.push(a),new Nh((()=>{a.disposed=!0,n.dispatching?n.cleanup=!0:(vh(n.callbacks,a),0===n.callbacks.length&&(n.disposer.dispose(),delete this._events[t]))}))}getCanvas(e,t){this.render(e),t||(t={});let i=this.resolution,r=Math.floor(this._calculatedWidth*this.resolution),n=Math.floor(this._calculatedHeight*this.resolution);if(t.minWidth&&t.minWidth>r){let e=t.minWidth/r;e>i&&(i=e*this.resolution)}if(t.minHeight&&t.minHeight>n){let e=t.minHeight/n;e>i&&(i=e*this.resolution)}if(t.maxWidth&&t.maxWidth<r){let e=t.maxWidth/r;e<i&&(i=e*this.resolution)}if(t.maxHeight&&t.maxHeight>n){let e=t.maxHeight/n;e<i&&(i=e*this.resolution)}t.maintainPixelRatio&&(i/=this.resolution);const a=[];let s=!1;const o=document.createElement("canvas");i!=this.resolution&&(s=!0,r=r*i/this.resolution,n=n*i/this.resolution),o.width=r,o.height=n,o.style.position="fixed",o.style.top="-10000px",this.view.appendChild(o),a.push(o);const l=o.getContext("2d");let u=0,c=0,h=!1;return mh(this.layers,(e=>{if(e&&e.visible&&(e.tainted||s)){h=!0,e.exportableView=e.view,e.exportableContext=e.context,e.view=document.createElement("canvas"),e.view.style.position="fixed",e.view.style.top="-10000px",this.view.appendChild(e.view),a.push(e.view);let t=0,s=0;e.margin&&(t+=e.margin.left||0+e.margin.right||0,s+=e.margin.top||0+e.margin.bottom||0),e.view.width=r+t,e.view.height=n+s,e.context=e.view.getContext("2d"),e.dirty=!0,e.scale=i}})),h&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),mh(this.layers,(e=>{if(e&&e.visible){let t=0,i=0;e.margin&&(t=-(e.margin.left||0)*this.resolution,i=-(e.margin.top||0)*this.resolution),l.drawImage(e.view,t,i),e.exportableView&&(e.view=e.exportableView,e.exportableView=void 0),e.exportableContext&&(e.context=e.exportableContext,e.exportableContext=void 0),u<e.view.clientWidth&&(u=e.view.clientWidth),c<e.view.clientHeight&&(c=e.view.clientHeight),e.scale=void 0}})),o.style.width=u+"px",o.style.height=c+"px",mh(a,(e=>{e.style.position="",e.style.top="",this.view.removeChild(e)})),o}}class Hf{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"imageArray",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,t,i,r,n){this._resolution=n,e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*n),this._height=Math.floor(t*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}getImageData(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}getImageArray(e){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);const t=this.imageArray,i=Math.round(e.x*this._resolution),r=4*(Math.round(e.y*this._resolution)*this._width+i);return[t[r],t[r+1],t[r+2],t[r+3]]}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,mh(e,(e=>{e.margin&&(this.margin.left=Math.max(this.margin.left,e.margin.left),this.margin.right=Math.max(this.margin.right,e.margin.right),this.margin.top=Math.max(this.margin.top,e.margin.top),this.margin.bottom=Math.max(this.margin.bottom,e.margin.bottom))}))}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class Vf{constructor(e,t){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=t}resize(e,t,i,r,n){null!=this.width&&(e=this.width,i=this.width),null!=this.height&&(t=this.height,r=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*n),this._height=Math.floor(t*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function Gf(e,t){null==e?requestAnimationFrame(t):setTimeout((()=>{requestAnimationFrame(t)}),1e3/e)}class Yf{constructor(e){let t,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyAnimation",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Td}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:Vp.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Hp}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Mp.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Up.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:zp.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:_p.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:vp.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:wp.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!n)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");if(this._settings=r,0==r.accessible&&(this._a11yD=!0),null==r.useSafeResolution&&(r.useSafeResolution=!0),r.useSafeResolution&&(t=Kh()),this._renderer=new zf(t),i=e instanceof HTMLElement?e:document.getElementById(e),mh(Ud.rootElements,(e=>{if(e.dom===i)throw new Error("You cannot have multiple Roots on the same DOM node")})),this.interfaceColors=Dp.new(this,{}),null===i)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=i;let a=document.createElement("div");a.style.position="relative",a.style.width="100%",a.style.height="100%",i.appendChild(a);const s=r.tooltipContainerBounds;s&&(this._tooltipContainerSettings=s),this._inner=a,this._updateComputedStyles(),Ud.rootElements.push(this)}static new(e,t){const i=new Yf(e,t,!0);return i._init(),i}moveDOM(e){let t;if(t=e instanceof HTMLElement?e:document.getElementById(e),t){for(;this.dom.childNodes.length>0;)t.appendChild(this.dom.childNodes[0]);this.dom=t,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const e=this.dom.offsetWidth,t=this.dom.offsetHeight;e<=150||t<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(Op.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Qc(100),centerY:eh,tooltipText:"Created using amCharts 5",tooltipX:eh,cursorOverStyle:"pointer",background:gp.new(this,{fill:_d(4671320),fillOpacity:0,tooltipY:5})})),t=Np.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});t.label.setAll({fontSize:12}),t.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",t),e.events.on("click",(()=>{window.open("https://www.amcharts.com/","_blank")})),e.states.create("hover",{});e.children.push(mp.new(this,{stroke:_d(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:_d(3976191)});e.children.push(mp.new(this,{stroke:_d(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:_d(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._settings;!1!==e.accessible&&(e.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),e.ariaLabel&&this._inner.setAttribute("aria-label",e.ariaLabel),e.role&&this._inner.setAttribute("role",e.role));const t=this._renderer,i=this._getRealSize(),r=this._getCalculatedSize(i),n=Math.floor(r.width),a=Math.floor(r.height),s=Math.floor(i.width),o=Math.floor(i.height),l=Op.new(this,{visible:!0,width:n,height:a});this._rootContainer=l,this._rootContainer._defaultThemes.push(Wp.new(this));const u=l.children.push(Op.new(this,{visible:!0,width:eh,height:eh}));this.container=u,t.resize(s,o,n,a),this._inner.appendChild(t.view),this._initResizeSensor();const c=document.createElement("div");if(this._htmlElementContainer=c,c.className="am5-html-container",c.style.position="absolute",c.style.pointerEvents="none",this._tooltipContainerSettings||(c.style.overflow="hidden"),this._inner.appendChild(c),!0!==this._a11yD){const e=document.createElement("div");e.className="am5-reader-container",e.setAttribute("role","alert"),e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=e,this._inner.appendChild(this._readerAlertElement);const i=document.createElement("div");i.className="am5-focus-container",i.style.position="absolute",i.style.pointerEvents="none",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden",i.style.width=n+"px",i.style.height=a+"px",i.setAttribute("role","graphics-document"),Zh(i,!1),this._focusElementContainer=i,this._inner.appendChild(this._focusElementContainer);const r=document.createElement("div");this._tooltipElementContainer=r,r.className="am5-tooltip-container",this._inner.appendChild(r),zh("keyboardevents")&&(this._disposers.push(Bh(window,"keydown",(e=>{const t=qh(e);"Shift"==t?this._isShift=!0:"Tab"==t&&(this._isShift=e.shiftKey)}))),this._disposers.push(Bh(window,"keyup",(e=>{"Shift"==qh(e)&&(this._isShift=!1)}))),this._disposers.push(Bh(i,"click",(()=>{const e=this._focusedSprite;if(e){const i=e.get("clickAnnounceText","");""!==i&&this.readerAlert(i);const r=t.getEvent(new MouseEvent("click"));e.events.dispatch("click",{type:"click",originalEvent:r.event,point:r.point,simulated:!0,target:e})}}))),this._disposers.push(Bh(i,"keydown",(e=>{const i=this._focusedSprite;if(i){"Escape"==e.key&&(!function(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}(),this._focusedSprite=void 0);let r=0,n=0;const a=qh(e);switch(a){case"Enter":case" ":const s=i.get("clickAnnounceText","");if(""!==s&&this.readerAlert(s)," "==a&&"checkbox"!=i.get("role"))return;e.preventDefault();const o=t.getEvent(new MouseEvent("mouse"));return void i.events.dispatch("click",{type:"click",originalEvent:o.event,point:o.point,simulated:!0,target:i});case"ArrowLeft":r=-6;break;case"ArrowRight":r=6;break;case"ArrowUp":n=-6;break;case"ArrowDown":n=6;break;default:return}if(0!=r||0!=n){if(e.preventDefault(),!i.isDragging()){this._keyboardDragPoint={x:0,y:0};const e=t.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));e.point={x:0,y:0},i.events.isEnabled("pointerdown")&&i.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:e.event,point:e.point,simulated:!0,target:i})}const a=this._keyboardDragPoint;a.x+=r,a.y+=n;const s=t.getEvent(new MouseEvent("mousemove",{clientX:a.x,clientY:a.y}),!1);i.events.isEnabled("globalpointermove")&&i.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:s.event,point:s.point,simulated:!0,target:i})}}}))),this._disposers.push(Bh(i,"keyup",(e=>{if(this._focusedSprite){const r=this._focusedSprite,n=qh(e);switch(n){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":if(r.isDragging()){const e=this._keyboardDragPoint,i=t.getEvent(new MouseEvent("mouseup",{clientX:e.x,clientY:e.y}));return r.events.isEnabled("globalpointerup")&&r.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:i.event,point:i.point,simulated:!0,target:r}),void(this._keyboardDragPoint=void 0)}if(r.get("focusableGroup")){const e=r.get("focusableGroup"),t=this._tabindexes.filter((t=>!(t.get("focusableGroup")!=e||!1===t.getPrivate("focusable")||!t.isVisibleDeep())));let a=t.indexOf(r);const s=t.length-1;a+="ArrowRight"==n||"ArrowDown"==n?1:-1,a<0?a=s:a>s&&(a=0),(i=t[a].getPrivate("focusElement").dom)&&i.focus()}break;case"Tab":const e=r.get("focusableGroup");if(e&&this._isShift)return void this._focusNext(r.getPrivate("focusElement").dom,-1,e)}}var i}))))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new Ip(this.dom,(()=>{this.autoResize&&this.resize()})),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),t=this._getCalculatedSize(e),i=Math.floor(t.width),r=Math.floor(t.height);if(i>0&&r>0){const t=Math.floor(e.width),n=Math.floor(e.height),a=this._htmlElementContainer;if(a.style.width=i+"px",a.style.height=r+"px",!0!==this._a11yD){const e=this._focusElementContainer;e.style.width=i+"px",e.style.height=r+"px"}this._renderer.resize(t,n,i,r);const s=this._rootContainer;s.setPrivate("width",i),s.setPrivate("height",r),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){mh(this._tickers,(t=>{t(e)}))}_runAnimations(e){let t=0;return Ah(this._animations,(i=>{const r=i._runAnimation(e);return r!==Od.Stopped&&(r!==Od.Playing||(++t,!0))})),this._isDirtyAnimation=!1,0===t}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,Ch(this._dirtyParents).forEach((t=>{const i=this._dirtyParents[t];delete this._dirtyParents[t],i.isDisposed()||(e[i.uid]=i,i._prepareChildren())}));Ch(e).forEach((t=>{e[t]._updateChildren()}));const t=[];Ch(this._dirty).forEach((e=>{const i=this._dirty[e];i.isDisposed()?delete this._dirty[i.uid]:(t.push(i),i._beforeChanged())})),t.forEach((e=>{e._changed(),delete this._dirty[e.uid],e._clearDirty()})),this._isDirty=!1;const i={},r=[];Ch(this._dirtyBounds).forEach((e=>{const t=this._dirtyBounds[e];delete this._dirtyBounds[e],t.isDisposed()||(i[t.uid]=t.depth(),r.push(t))})),this._positionHTMLElements(),r.sort(((e,t)=>zd(i[t.uid],i[e.uid]))),r.forEach((e=>{e._updateBounds()}));const n=this._dirtyPositions;Ch(n).forEach((e=>{const t=n[e];delete n[e],t.isDisposed()||t._updatePosition()})),t.forEach((e=>{e._afterChanged()}))}_renderFrame(e){if(this._updateTick){this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e);const t=this._runAnimations(e);return this._runDirties(),this._render(),this._renderer.resetImageArray(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),0===this._tickers.length&&t&&!this._isDirtyAnimation&&!this._isDirty}return!0}_runTicker(e,t){if(!this.isDisposed()){this.animationTime=e;this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(t?this._ticker:Gf(this.fps,this._ticker))}}_runTickerNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(!this.isDisposed()){const t=performance.now()+e;for(;;){const e=performance.now();if(e>=t){this.animationTime=null;break}this.animationTime=e;if(this._renderFrame(e)){this.animationTime=null;break}}}}_startTicker(){null===this._ticker&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},Gf(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){this._isDirty=!0,void 0===this._dirty[e.uid]&&(this._dirty[e.uid]=e),this._startTicker()}_addDirtyParent(e){this._isDirty=!0,this._isDirtyParents=!0,void 0===this._dirtyParents[e.uid]&&(this._dirtyParents[e.uid]=e),this._startTicker()}_addDirtyBounds(e){this._isDirty=!0,void 0===this._dirtyBounds[e.uid]&&(this._dirtyBounds[e.uid]=e),this._startTicker()}_addDirtyPosition(e){this._isDirty=!0,void 0===this._dirtyPositions[e.uid]&&(this._dirtyPositions[e.uid]=e),this._startTicker()}_addAnimation(e){this._isDirtyAnimation=!0,-1===this._animations.indexOf(e)&&this._animations.push(e),this._startTicker()}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",(()=>{this._isDirty=!0,this._startTicker()}))}eachFrame(e){return this._tickers.push(e),this._startTicker(),new Nh((()=>{vh(this._tickers,e)}))}markDirtyGlobal(e){e||(e=this.container),e.walkChildren((e=>{e instanceof Op&&this.markDirtyGlobal(e),e.markDirty(),e.markDirtyBounds()}))}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){var e;this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),mh(this._disposers,(e=>{e.dispose()})),this._inner&&(e=this._inner).parentNode&&e.parentNode.removeChild(e),yh(Ud.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){if(!0!==this._a11yD){const t=this._readerAlertElement;e=rd(e),t.innerHTML==e&&(t.innerHTML=""),t.innerHTML=e}}setThemes(e){this._rootContainer.set("themes",e);const t=this.tooltipContainer;t&&t._applyThemes();const i=this.interfaceColors;i&&i._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,t=this._rootContainer.children.push(Op.new(this,{position:"absolute",isMeasured:!1,width:eh,height:eh,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=t;const i=Np.new(this,{});this.container.set("tooltip",i),i.hide(0),this._tooltip=i}}_registerTabindexOrder(e){1!=this._a11yD&&(e.get("focusable")?wh(this._tabindexes,e):yh(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){1!=this._a11yD&&(yh(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(1==this._a11yD)return;this._tabindexes.sort(((e,t)=>{const i=e.get("tabindexOrder",0),r=t.get("tabindexOrder",0);return i==r?0:i>r?1:-1}));const e=[];mh(this._tabindexes,((t,i)=>{t.getPrivate("focusElement")?this._moveFocusElement(i,t):this._makeFocusElement(i,t);const r=t.get("focusableGroup");r&&!1!==t.getPrivate("focusable")&&(-1!==e.indexOf(r)?t.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(r))}))}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,t){if(1==this._a11yD)return;if(t||(t=e.getPrivate("focusElement").dom),!t)return;const i=e.get("role");i?t.setAttribute("role",i):t.removeAttribute("role");const r=e.get("ariaLabel");if(r){const i=Pp(e,r);t.setAttribute("aria-label",i)}else t.removeAttribute("aria-label");const n=e.get("ariaLive");n?t.setAttribute("aria-live",n):t.removeAttribute("aria-live");const a=e.get("ariaChecked");null!=a&&i&&-1!==["checkbox","option","radio","menuitemcheckbox","menuitemradio","treeitem"].indexOf(i)?t.setAttribute("aria-checked",a?"true":"false"):t.removeAttribute("aria-checked");const s=e.get("ariaCurrent");null!=s?t.setAttribute("aria-current",s):t.removeAttribute("aria-current");const o=e.get("ariaSelected");null!=o&&i&&-1!==["gridcell","option","row","tab","columnheader","rowheader","treeitem"].indexOf(i)?t.setAttribute("aria-selected",o?"true":"false"):t.removeAttribute("aria-selected"),e.get("ariaHidden")?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden");const l=e.get("ariaOrientation");l?t.setAttribute("aria-orientation",l):t.removeAttribute("aria-orientation");const u=e.get("ariaValueNow");u?t.setAttribute("aria-valuenow",u):t.removeAttribute("aria-valuenow");const c=e.get("ariaValueMin");c?t.setAttribute("aria-valuemin",c):t.removeAttribute("aria-valuemin");const h=e.get("ariaValueMax");h?t.setAttribute("aria-valuemax",h):t.removeAttribute("aria-valuemax");const d=e.get("ariaValueText");d?t.setAttribute("aria-valuetext",d):t.removeAttribute("aria-valuetext");const p=e.get("ariaControls");p?t.setAttribute("aria-controls",p):t.removeAttribute("aria-controls"),e.get("visible")&&0!==e.get("opacity")&&"tooltip"!=e.get("role")&&!e.isHidden()&&!1!==e.getPrivate("focusable")&&(e.height()||e.width())?("-1"!=t.getAttribute("tabindex")&&t.setAttribute("tabindex",""+this.tabindex),t.removeAttribute("aria-hidden")):(t.removeAttribute("tabindex"),t.setAttribute("aria-hidden","true"))}_makeFocusElement(e,t){if(t.getPrivate("focusElement")||1==this._a11yD)return;const i=document.createElement("div");"tooltip"!=t.get("role")&&(i.tabIndex=this.tabindex),i.style.position="absolute",Zh(i,!1);const r=[];t.setPrivate("focusElement",{dom:i,disposers:r}),this._decorateFocusElement(t),r.push(Bh(i,"focus",(e=>{this._handleFocus(e)}))),r.push(Bh(i,"blur",(e=>{this._handleBlur(e)}))),this._moveFocusElement(e,t)}_removeFocusElement(e){if(1==this._a11yD)return;yh(this._tabindexes,e);const t=e.getPrivate("focusElement");if(t){this._focusElementContainer.removeChild(t.dom),mh(t.disposers,(e=>{e.dispose()}))}}_hideFocusElement(e){if(1==this._a11yD)return;e.getPrivate("focusElement").dom.style.display="none"}_moveFocusElement(e,t){if(1==this._a11yD)return;const i=this._focusElementContainer,r=t.getPrivate("focusElement").dom;if(r===this._focusElementContainer.children[e])return;const n=this._focusElementContainer.children[e+1];n?i.insertBefore(r,n):i.append(r)}_positionFocusElement(e){if(1==this._a11yD||void 0==e)return;const t=e.globalBounds();let i=t.right==t.left?e.width():t.right-t.left,r=t.top==t.bottom?e.height():t.bottom-t.top;const n=void 0!==this._settings.focusPadding?this._settings.focusPadding:2;let a=t.left-n,s=t.top-n;i<0&&(a+=i,i=Math.abs(i)),r<0&&(s+=r,r=Math.abs(r));const o=e.getPrivate("focusElement").dom;o.style.top=s+"px",o.style.left=a+"px",o.style.width=i+2*n+"px",o.style.height=r+2*n+"px"}_getSpriteByFocusElement(e){let t;return bh(this._tabindexes,((i,r)=>i.getPrivate("focusElement").dom!==e||(t=i,!1))),t}_handleFocus(e){if(1==this._a11yD)return;const t=this._getSpriteByFocusElement(e.target);t&&(t.isVisibleDeep()?(this._positionFocusElement(t),this._focusedSprite=t,t.events.isEnabled("focus")&&t.events.dispatch("focus",{type:"focus",originalEvent:e,target:t})):this._focusNext(e.target,this._isShift?-1:1))}_focusNext(e,t,i){if(1==this._a11yD)return;const r=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let n=r.indexOf(e)+t;n<0?n=r.length-1:n>=r.length&&(n=0);const a=r[n];if(i&&-1==t){const e=this._getSpriteByFocusElement(a);if(e&&e.get("focusableGroup")==i)return void this._focusNext(a,t)}a.focus()}_handleBlur(e){if(1==this._a11yD)return;const t=this._focusedSprite;t&&!t.isDisposed()&&t.events.isEnabled("blur")&&t.events.dispatch("blur",{type:"blur",originalEvent:e,target:t}),this._focusedSprite=void 0}updateTooltip(e){if(1==this._a11yD)return;const t=rd(e._getText());let i=e.getPrivate("tooltipElement");"tooltip"==e.get("role")&&""!=t?(i||(i=this._makeTooltipElement(e)),i.innerHTML!=t&&(i.innerHTML=t),i.setAttribute("aria-hidden",e.isVisibleDeep()?"false":"true")):i&&(i.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const t=this._tooltipElementContainer,i=document.createElement("div");return i.style.position="absolute",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",i.style.clip="rect(1px, 1px, 1px, 1px)",Zh(i,!1),this._decorateFocusElement(e,i),t.append(i),e.setPrivate("tooltipElement",i),i}_removeTooltipElement(e){if(1==this._a11yD)return;const t=e.getPrivate("tooltipElement");if(t){const e=t.parentElement;e&&e.removeChild(t)}}_invalidateAccessibility(e){if(1==this._a11yD)return;this._focusElementDirty=!0;const t=e.getPrivate("focusElement");e.get("focusable")?t&&(this._decorateFocusElement(e),this._positionFocusElement(e)):t&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const t=this._getRealSize(),i=this._getCalculatedSize(t),r=i.width/t.width,n=i.height/t.height;return{x:(e.x-t.left)*r,y:(e.y-t.top)*n}}rootPointToDocument(e){const t=this._getRealSize(),i=this._getCalculatedSize(t),r=i.width/t.width,n=i.height/t.height;return{x:e.x/r+t.left,y:e.y/n+t.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let t="";Dh(e,((e,i)=>{lh(e)&&e.match(/^font/)&&(t+=i)}));const i=t!=this._fontHash;return i&&(this._fontHash=t),i}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof Op?e.children.each((e=>{this._invalidateLabelBounds(e)})):e instanceof Tp&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<Ud.licenses.length;e++)if(Ud.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const t=this._htmlElementContainer,i=document.createElement("div");e.setPrivate("htmlElement",i);let r,n,a=!1;return e._walkParents((e=>{if(e.get("verticalScrollbar"))return a=!0,r=e,!1})),a&&(n=document.createElement("div"),e.setPrivate("htmlElementWrapper",n),e.setPrivate("wrapperContainer",r),n.style.position="absolute",n.style.overflow="hidden",n.style.boxSizing="border-box",n.style.top="0px",n.style.left="0px",n.style.width="100%",n.style.height="100%",r.events.on("boundschanged",(()=>{this._positionHTMLElement(e)}))),i.style.position="absolute",i.style.overflow="auto",i.style.boxSizing="border-box",Zh(i,e.get("interactive",!1)),e.events.isEnabled("click")&&(Zh(i,!0),this._disposers.push(Bh(i,"click",(t=>{const i=this._renderer.getEvent(t);e.events.dispatch("click",{type:"click",originalEvent:i.event,point:i.point,simulated:!1,target:e})})))),this._positionHTMLElement(e),a?(n.append(i),t.append(n)):t.append(i),wh(this._htmlEnabledContainers,e),i}_positionHTMLElements(){mh(this._htmlEnabledContainers,(e=>{this._positionHTMLElement(e)}))}_positionHTMLElement(e){const t=e.getPrivate("htmlElementWrapper");if(t){const i=e.getPrivate("wrapperContainer");if(i){const e=i.globalBounds();t.style.clipPath="rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"}}const i=e.getPrivate("htmlElement");if(i){mh(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],(t=>{const r=e.get(t);i.style[t]=r?r+"px":""}));mh(["fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration"],(t=>{const r=e.get(t);r?"fontSize"!=t||lh(r)?i.style[t]=r+"":i.style[t]=r+"px":i.style[t]=""}));const t=e.compositeScale()||1,r=e.compositeRotation()||0;i.style.transform="",i.style.transformOrigin="";const n=e.compositeOpacity();setTimeout((()=>{i.style.opacity=n+""}),10);const a=e.isVisibleDeep();a&&(i.style.display="block");let s={x:e.x()+e.get("dx",0),y:e.y()+e.get("dy",0)};e.parent&&(s=e.parent.toGlobal(s)),i.style.top=s.y+"px",i.style.left=s.x+"px";const o=e.get("width"),l=e.get("height");let u=0,c=0;if(o&&(u=e.width()),l&&(c=e.height()),!o||!l){i.style.position="fixed",i.style.width="",i.style.height="";const r=i.getBoundingClientRect();i.style.position="absolute",o||(u=r.width),l||(c=r.height);let n=u/t,a=c/t,s=e.get("centerX",0),h=e.get("centerY",0),d=0,p=0,f=0,m=0;s instanceof Jc?(d=-s.value*n,p=(1-s.value)*n):(d=-s,p=n-s),h instanceof Jc?(f=-h.value*a,m=(1-h.value)*a):(f=-h,m=a-h),e._localBounds={left:d,right:p,top:f,bottom:m};let g=e._adjustedLocalBounds,b=e._display.getAdjustedBounds(e._localBounds);e._adjustedLocalBounds=b,g.left===b.left&&g.right===b.right&&g.top===b.top&&g.bottom===b.bottom||e.markDirtyBounds()}u>0&&(i.style.minWidth=u+"px"),c>0&&(i.style.minHeight=c+"px"),a&&0!=n||(i.style.display="none");const h=e.get("centerX",0),d=ih(h)?h.percent+"%":h+"px",p=e.get("centerY",0),f=ih(p)?p.percent+"%":p+"px";(h||p)&&(i.style.transform="translate(-"+d+", -"+f+")"+i.style.transform),1!=t&&(i.style.transform+="scale("+t+")"),0!=r&&(i.style.transform+=" rotate("+r+"deg)"),""!=i.style.transform&&(i.style.transformOrigin=d+" "+f)}}_setHTMLContent(e,t){let i=e.getPrivate("htmlElement");i||(i=this._makeHTMLElement(e)),i.innerHTML!=t&&(i.innerHTML=t)}_removeHTMLContent(e){const t=e.getPrivate("htmlElementWrapper"),i=e.getPrivate("htmlElement");t?(this._htmlElementContainer.removeChild(t),e.removePrivate("htmlElement"),e.removePrivate("htmlElementWrapper"),e.removePrivate("wrapperContainer")):i&&(this._htmlElementContainer.removeChild(i),e.removePrivate("htmlElement"),e.removePrivate("wrapperContainer")),yh(this._htmlEnabledContainers,e)}}class Wf extends Zd{constructor(){super(...arguments),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}_beforeChanged(){if(super._beforeChanged(),this.isDirty("sprite")){const e=this.get("sprite");e&&(e.setAll({position:"absolute",role:"figure"}),this._disposers.push(e))}(this.isDirty("locationX")||this.isDirty("locationY"))&&this.series&&this.series._positionBullet(this)}}Object.defineProperty(Wf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Bullet"}),Object.defineProperty(Wf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([Wf.className])});class Xf extends mp{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),this.isDirty("radius")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawCircle(0,0,Math.abs(this.get("radius",10)))}}Object.defineProperty(Xf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Circle"}),Object.defineProperty(Xf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([Xf.className])});class Zf extends Zd{constructor(){super(...arguments),Object.defineProperty(this,"_checkDates",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkNumbers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkColors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkDeep",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._checkFeatures(),this.on("dateFields",(()=>this._checkFeatures())),this.on("dateFormat",(()=>this._checkFeatures())),this.on("numericFields",(()=>this._checkFeatures())),this.on("colorFields",(()=>this._checkFeatures())),this.on("emptyAs",(()=>this._checkFeatures()))}_checkFeatures(){(this.isDirty("dateFields")||this.isDirty("dateFormat"))&&(this._checkDates=this.get("dateFields")&&this.get("dateFields").length>0),this.isDirty("numericFields")&&(this._checkNumbers=this.get("numericFields")&&this.get("numericFields").length>0),this.isDirty("colorFields")&&(this._checkColors=this.get("colorFields")&&this.get("colorFields").length>0),this.isDirty("emptyAs")&&(this._checkEmpty=null!=this.get("emptyAs")),this._checkDeepFeatures()}_checkDeepFeatures(){const e=[];mh(["dateFields","numericFields","colorFields"],(t=>{mh(this.get(t,[]),(t=>{const i=t.split(".");for(i.pop();i.length>0;)e.push(i.join(".")),i.pop()}))})),this._checkDeep=e.length>0,this.setPrivate("deepFields",e)}processMany(e){(function(e){return Array.isArray(e)})(e)&&(this._checkDates||this._checkNumbers||this._checkColors||this._checkEmpty)&&mh(e,(e=>{this.processRow(e)}))}processRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Dh(e,((i,r)=>{const n=t+i;this._checkEmpty&&(e[i]=this._maybeToEmpty(e[i])),this._checkNumbers&&(e[i]=this._maybeToNumber(n,e[i])),this._checkDates&&(e[i]=this._maybeToDate(n,e[i])),this._checkColors&&(e[i]=this._maybeToColor(n,e[i])),this._checkDeep&&-1!==this.getPrivate("deepFields",[]).indexOf(n)&&ch(e[i])&&this.processRow(e[i],n+".")}))}_maybeToNumber(e,t){return-1!==this.get("numericFields").indexOf(e)?nh(t):t}_maybeToDate(e,t){return-1!==this.get("dateFields").indexOf(e)?this._root.dateFormatter.parse(t,this.get("dateFormat","")).getTime():t}_maybeToEmpty(e){return null!=e&&""!=e||null==this.get("emptyAs")?e:this.get("emptyAs")}_maybeToColor(e,t){return-1!==this.get("colorFields").indexOf(e)?wd.fromAny(t):t}}class qf extends gp{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let e=this.width(),t=this.height(),i=e,r=t,n=i/Math.abs(e),a=r/Math.abs(t);if(uh(i)&&uh(r)){let e=Math.min(i,r)/2,t=Jh(this.get("cornerRadiusTL",8),e),s=Jh(this.get("cornerRadiusTR",8),e),o=Jh(this.get("cornerRadiusBR",8),e),l=Jh(this.get("cornerRadiusBL",8),e),u=Math.min(Math.abs(i/2),Math.abs(r/2));t=ap(t,0,u),s=ap(s,0,u),o=ap(o,0,u),l=ap(l,0,u);const c=this._display;c.moveTo(t*n,0),c.lineTo(i-s*n,0),s>0&&c.arcTo(i,0,i,s*a,s),c.lineTo(i,r-o*a),o>0&&c.arcTo(i,r,i-o*n,r,o),c.lineTo(l*n,r),l>0&&c.arcTo(0,r,0,r-l*a,l),c.lineTo(0,t*a),t>0&&c.arcTo(0,0,t*n,0,t),c.closePath()}}}Object.defineProperty(qf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(qf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gp.classNames.concat([qf.className])});class Kf extends Op{_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",qf.new(this._root,{themeTags:bd(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const e=this._prevSettings.icon,t=this.get("icon");t!==e&&(this._disposeProperty("icon"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.icon=t)}if(this.isDirty("label")){const e=this._prevSettings.label,t=this.get("label");t!==e&&(this._disposeProperty("label"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.label=t)}}}Object.defineProperty(Kf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(Kf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([Kf.className])});class Jf extends Op{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=bd(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=qf.new(this._root,{themeTags:bd(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(Kf.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:mp.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(qf.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(e){e&&this._disposers.push(e.events.on("stopped",(()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1})))}_afterNew(){this._addOrientationClass(),super._afterNew();const e=this.startGrip,t=this.endGrip,i=this.thumb,r=this.get("background");r&&this._disposers.push(r.events.on("click",(e=>{this.setPrivateRaw("isBusy",!0);const t=this._display.toLocal(e.point),r=this.width(),n=this.height(),a=this.get("orientation");let s,o,l;s="vertical"==a?(t.y-i.height()/2)/n:(t.x-i.width()/2)/r,"vertical"==a?(o=s*n,l="y"):(o=s*r,l="x");const u=this.get("animationDuration",0);u>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:l,to:o,duration:u,easing:this.get("animationEasing")}))):(this.thumb.set(l,o),this._root.events.once("frameended",(()=>{this.setPrivateRaw("isBusy",!1)})))}))),this._disposers.push(i.events.on("dblclick",(e=>{if(!Xh(e.originalEvent,this))return;const t=this.get("animationDuration",0),i=this.get("animationEasing");this.animate({key:"start",to:0,duration:t,easing:i}),this.animate({key:"end",to:1,duration:t,easing:i})}))),this._disposers.push(e.events.on("pointerdown",(()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"}))),this._disposers.push(t.events.on("pointerdown",(()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"}))),this._disposers.push(i.events.on("pointerdown",(()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0}))),this._disposers.push(e.events.on("globalpointerup",(()=>{this._startDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._startDown=!1}))),this._disposers.push(t.events.on("globalpointerup",(()=>{this._endDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._endDown=!1}))),this._disposers.push(i.events.on("globalpointerup",(()=>{this._thumbDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._thumbDown=!1}))),this._disposers.push(e.on("x",(()=>{this._updateThumb()}))),this._disposers.push(t.on("x",(()=>{this._updateThumb()}))),this._disposers.push(e.on("y",(()=>{this._updateThumb()}))),this._disposers.push(t.on("y",(()=>{this._updateThumb()}))),this._disposers.push(i.events.on("positionchanged",(()=>{this._updateGripsByThumb()}))),"vertical"==this.get("orientation")?(e.set("x",0),t.set("x",0),this._disposers.push(i.adapters.add("y",(e=>Math.max(Math.min(Number(e),this.height()-i.height()),0)))),this._disposers.push(i.adapters.add("x",(e=>this.width()/2))),this._disposers.push(e.adapters.add("x",(e=>this.width()/2))),this._disposers.push(t.adapters.add("x",(e=>this.width()/2))),this._disposers.push(e.adapters.add("y",(e=>Math.max(Math.min(Number(e),this.height()),0)))),this._disposers.push(t.adapters.add("y",(e=>Math.max(Math.min(Number(e),this.height()),0))))):(e.set("y",0),t.set("y",0),this._disposers.push(i.adapters.add("x",(e=>Math.max(Math.min(Number(e),this.width()-i.width()),0)))),this._disposers.push(i.adapters.add("y",(e=>this.height()/2))),this._disposers.push(e.adapters.add("y",(e=>this.height()/2))),this._disposers.push(t.adapters.add("y",(e=>this.height()/2))),this._disposers.push(e.adapters.add("x",(e=>Math.max(Math.min(Number(e),this.width()),0)))),this._disposers.push(t.adapters.add("x",(e=>Math.max(Math.min(Number(e),this.width()),0)))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){const e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}_released(){const e="released";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}updateGrips(){const e=this.startGrip,t=this.endGrip,i=this.get("orientation"),r=this.height(),n=this.width();"vertical"==i?(e.set("y",r*this.get("start",0)),t.set("y",r*this.get("end",1))):(e.set("x",n*this.get("start",0)),t.set("x",n*this.get("end",1)));const a=this.getPrivate("positionTextFunction"),s=Math.round(100*this.get("start",0)),o=Math.round(100*this.get("end",0));let l,u;a?(l=a.call(this,this.get("start",0)),u=a.call(this,this.get("end",0))):(l=s+"%",u=o+"%"),e.set("ariaLabel",this._t("From %1",void 0,l)),e.set("ariaValueNow",""+s),e.set("ariaValueText",s+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,u)),t.set("ariaValueNow",""+o),t.set("ariaValueText",o+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}_updateThumb(){const e=this.thumb,t=this.startGrip,i=this.endGrip,r=this.height(),n=this.width();let a=t.x(),s=i.x(),o=t.y(),l=i.y(),u=0,c=1;"vertical"==this.get("orientation")?uh(o)&&uh(l)&&(this._thumbBusy||e.isDragging()||(e.set("height",l-o),e.set("y",o)),u=o/r,c=l/r):uh(a)&&uh(s)&&(this._thumbBusy||e.isDragging()||(e.set("width",s-a),e.set("x",a)),u=a/n,c=s/n),!this.getPrivate("isBusy")||this.get("start")==u&&this.get("end")==c||(this.set("start",u),this.set("end",c));const h=this.getPrivate("positionTextFunction"),d=Math.round(100*this.get("start",0)),p=Math.round(100*this.get("end",0));let f,m;h?(f=h.call(this,this.get("start",0)),m=h.call(this,this.get("end",0))):(f=d+"%",m=p+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,f,m)),e.set("ariaValueNow",""+d),e.set("ariaValueText",d+"%")}_updateGripsByThumb(){const e=this.thumb,t=this.startGrip,i=this.endGrip;if("vertical"==this.get("orientation")){const r=e.height();t.set("y",e.y()),i.set("y",e.y()+r)}else{const r=e.width();t.set("x",e.x()),i.set("x",e.x()+r)}}}Object.defineProperty(Jf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"}),Object.defineProperty(Jf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([Jf.className])});class Qf extends Zd{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const e=this.getPrivate("currentPass"),t=this.get("colors",[this.get("baseColor",wd.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",t.length);const i=this.getPrivate("numColors"),r=this.get("passOptions"),n=this.get("reuse");for(let a=0;a<i;a++)if(n)t.push(t[a]);else{const i=t[a].toHSL();let n=i.h+(r.hue||0)*e;for(;n>1;)n-=1;let s=i.s+(r.saturation||0)*e;s>1&&(s=1),s<0&&(s=0);let o=i.l+(r.lightness||0)*e;for(;o>1;)o-=1;t.push(wd.fromHSL(n,s,o))}}getIndex(e){const t=this.get("colors",[]),i=this.get("saturation");return e>=t.length?(this.generateColors(),this.getIndex(e)):null!=i?wd.saturate(t[e],i):t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(Qf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(Qf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zd.classNames.concat([Qf.className])});let em={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2629742400,year:31536e6};function tm(e){switch(e){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function im(e,t){return null==t&&(t=1),em[e]*t}function rm(e){return e?em[e.timeUnit]*e.count:0}function nm(e,t,i,r,n){const a=e.timeUnit,s=e.count;if("hour"==a||"minute"==a||"second"==a||"millisecond"==a)return em[e.timeUnit]*e.count;{const e=om(new Date(t.getTime()),a,s,i,r,void 0,n).getTime();let o=e+s*im(a)*1.05;return o=om(new Date(o),a,1,i,r,void 0,n).getTime(),o-e}}function am(e,t,i,r,n){if(t-e>im(i,1.2))return!0;let a=new Date(e),s=new Date(t);n&&(a=n.convertLocal(a),s=n.convertLocal(s));let o=0,l=0;r||"millisecond"==i||(o=a.getTimezoneOffset(),a.setUTCMinutes(a.getUTCMinutes()-o),l=s.getTimezoneOffset(),s.setUTCMinutes(s.getUTCMinutes()-l));let u=!1;switch(i){case"year":a.getUTCFullYear()!=s.getUTCFullYear()&&(u=!0);break;case"month":(a.getUTCFullYear()!=s.getUTCFullYear()||a.getUTCMonth()!=s.getUTCMonth())&&(u=!0);break;case"day":(a.getUTCMonth()!=s.getUTCMonth()||a.getUTCDate()!=s.getUTCDate())&&(u=!0);break;case"hour":a.getUTCHours()!=s.getUTCHours()&&(u=!0);break;case"minute":a.getUTCMinutes()!=s.getUTCMinutes()&&(u=!0);break;case"second":a.getUTCSeconds()!=s.getUTCSeconds()&&(u=!0);break;case"millisecond":a.getTime()!=s.getTime()&&(u=!0)}if(u)return u;let c=tm(i);return!!c&&am(e,t,c,r,n)}function sm(e,t,i,r,n){let a;return null!=n&&(a=new Date(n)),om(new Date(e),t,i,r.locale.firstDayOfWeek,r.utc,a,r.timezone).getTime()}function om(e,t,i,r,n,a,s){if(!s||n){let s=0;switch(n||"millisecond"==t||(s=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-s)),t){case"day":let t=e.getUTCDate();if(i>1){if(a){a=om(a,"day",1);let t=e.getTime()-a.getTime(),r=Math.floor(t/im("day")/i),n=im("day",r*i);e.setTime(a.getTime()+n-s*im("minute"))}}else e.setUTCDate(t);e.setUTCHours(0,0,0,0);break;case"second":let n=e.getUTCSeconds();i>1&&(n=Math.floor(n/i)*i),e.setUTCSeconds(n,0);break;case"millisecond":if(1==i)return e;let o=e.getUTCMilliseconds();o=Math.floor(o/i)*i,e.setUTCMilliseconds(o);break;case"hour":let l=e.getUTCHours();i>1&&(l=Math.floor(l/i)*i),e.setUTCHours(l,0,0,0);break;case"minute":let u=e.getUTCMinutes();i>1&&(u=Math.floor(u/i)*i),e.setUTCMinutes(u,0,0);break;case"month":let c=e.getUTCMonth();i>1&&(c=Math.floor(c/i)*i),e.setUTCMonth(c,1),e.setUTCHours(0,0,0,0);break;case"year":let h=e.getUTCFullYear();i>1&&(h=Math.floor(h/i)*i),e.setUTCFullYear(h,0,1),e.setUTCHours(0,0,0,0);break;case"week":if(i>1&&a){a=om(a,"week",1);let t=e.getTime()-a.getTime(),r=Math.floor(t/im("week")/i),n=im("week",r*i);e.setTime(a.getTime()+n-s*im("minute"))}let d=e.getUTCDate(),p=e.getUTCDay();uh(r)||(r=1),d=p>=r?d-p+r:d-(7+p)+r,e.setUTCDate(d),e.setUTCHours(0,0,0,0)}if(!n&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+s),"day"==t||"week"==t||"month"==t||"year"==t)){let t=e.getTimezoneOffset();if(t!=s){let i=t-s;e.setUTCMinutes(e.getUTCMinutes()+i)}}return e}{if(isNaN(e.getTime()))return e;let o=e.getTime(),l=s.offsetUTC(e),u=e.getTimezoneOffset(),c=s.parseDate(e),h=c.year,d=c.month,p=c.day,f=c.hour,m=c.minute,g=c.second,b=c.millisecond,y=c.weekday,v=l-u;switch(t){case"day":if(i>1&&a){a=om(a,"day",1,r,n,void 0,s);let t=e.getTime()-a.getTime(),o=Math.floor(t/im("day")/i),l=im("day",o*i);e.setTime(a.getTime()+l),c=s.parseDate(e),h=c.year,d=c.month,p=c.day}f=0,m=v,g=0,b=0;break;case"second":m+=v,i>1&&(g=Math.floor(g/i)*i),b=0;break;case"millisecond":m+=v,i>1&&(b=Math.floor(b/i)*i);break;case"hour":i>1&&(f=Math.floor(f/i)*i),m=v,g=0,b=0;break;case"minute":i>1&&(m=Math.floor(m/i)*i),m+=v,g=0,b=0;break;case"month":i>1&&(d=Math.floor(d/i)*i),p=1,f=0,m=v,g=0,b=0;break;case"year":i>1&&(h=Math.floor(h/i)*i),d=0,p=1,f=0,m=v,g=0,b=0;break;case"week":uh(r)||(r=1),p=y>=r?p-y+r:p-(7+y)+r,f=0,m=v,g=0,b=0}const _=(e=new Date(h,d,p,f,m,g,b)).getTime();let w=36e5;"hour"==t&&(w=36e5*i),_+w<=o&&("hour"!=t&&"minute"!=t&&"second"!=t&&"millisecond"!=t||(e=new Date(_+w)));let x=e.getTimezoneOffset(),P=s.offsetUTC(e)-x;return P!=v&&e.setTime(e.getTime()+6e4*(P-v)),e}}function lm(e,t,i,r){let n=rm(r[e]),a=r.length-1;if(e>=a)return Object.assign({},r[a]);let s=Math.ceil(t/n);return t<n&&e>0?Object.assign({},r[e-1]):s<=i?Object.assign({},r[e]):e+1<r.length?lm(e+1,t,i,r):Object.assign({},r[e])}class um extends Gp{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this._root.language,i=this.rule.bind(this);i("XYChart").setAll({colors:Qf.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),i("XYSeries").setAll({legendLabelText:"{name}"}),i("Rectangle",["plotbackground","xy","background"]).setAll({fill:wd.fromHex(0),fillOpacity:0}),i("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:Qf.new(this._root,{saturation:0})});{const t=i("Graphics",["scrollbar","overlay"]);t.setAll({fillOpacity:.5}),Yp(t,"fill",e,"background")}i("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),i("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4}),i("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),i("RoundedRectangle",["xy","scrollbar","chart","background","resize","button"]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),i("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0}),i("AxisRendererY",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),i("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:eh,minPosition:.01,maxPosition:.99,fontSize:"0.8em"}),i("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0}),i("AxisLabel",["x"]).setAll({centerY:0}),i("AxisLabel",["x","inside"]).setAll({centerY:eh}),i("AxisLabel",["x","inside","opposite"]).setAll({centerY:0}),i("AxisLabel",["x","opposite"]).setAll({centerY:eh}),i("AxisLabel",["y"]).setAll({centerX:eh}),i("AxisLabel",["y","inside"]).setAll({centerX:0}),i("AxisLabel",["y","inside","opposite"]).setAll({centerX:eh}),i("AxisLabel",["y","opposite"]).setAll({centerX:0}),i("AxisLabel",["minor"]).setAll({fontSize:"0.6em"}),i("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1}),i("Grid",["xy","scrollbar","y"]).setAll({visible:!1}),i("Grid",["xy","scrollbar","x"]).setAll({opacity:.5}),i("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy",moveThreshold:1});{const r=i("Grid",["cursor","x"]);r.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:"slider",ariaLabel:t.translate("Use left and right arrows to move selection")}),Yp(r,"stroke",e,"alternativeBackground")}{const r=i("Grid",["cursor","y"]);r.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:"slider",ariaLabel:t.translate("Use up and down arrows to move selection")}),Yp(r,"stroke",e,"alternativeBackground")}{const t=i("Graphics",["cursor","selection"]);t.setAll({fillOpacity:.15}),Yp(t,"fill",e,"alternativeBackground")}i("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),i("AxisLabel").setAll({location:.5,multiLocation:0,centerX:th,centerY:th,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),i("Container",["axis","header"]).setAll({layer:30}),i("Rectangle",["axis","header","background"]).setAll({crisp:!0});{const t=i("AxisRenderer");t.setAll({crisp:!0,strokeOpacity:0}),Yp(t,"stroke",e,"grid")}i("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:eh}),i("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:eh});{const t=i("Rectangle",["axis","thumb"]);t.setAll({fillOpacity:0}),Yp(t,"fill",e,"alternativeBackground"),t.states.create("hover",{fillOpacity:.1})}i("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"}),i("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"});{const t=i("Grid");t.setAll({location:0,strokeOpacity:.15,crisp:!0}),Yp(t,"stroke",e,"grid")}{const t=i("Grid",["minor"]);t.setAll({location:0,strokeOpacity:.07,crisp:!0}),Yp(t,"stroke",e,"grid")}i("Grid",["base"]).setAll({strokeOpacity:.3});{const t=i("Graphics",["axis","fill"]);t.setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05}),Yp(t,"fill",e,"alternativeBackground")}i("Graphics",["axis","fill","range"]).setAll({isMeasured:!0}),i("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0}),i("Grid",["series","range"]).setAll({visible:!1}),i("AxisTick",["series","range"]).setAll({visible:!1}),i("AxisLabel",["series","range"]).setAll({visible:!1});{const t=i("AxisTick");t.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1}),Yp(t,"stroke",e,"grid")}i("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:(e,t)=>{const i=e.get("axisFill");i&&(uh(t)&&t%2!=0?i.setPrivate("visible",!1):i.setPrivate("visible",!0))}});const r=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}],n={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_hour"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month"),year:t.translate("_date_year")},a={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_day"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month")+" "+t.translate("_date_year"),year:t.translate("_date_year")},s={millisecond:t.translate("_date_millisecond_full"),second:t.translate("_date_second_full"),minute:t.translate("_date_minute_full"),hour:t.translate("_date_hour_full"),day:t.translate("_date_day_full"),week:t.translate("_date_week_full"),month:t.translate("_date_month_full"),year:t.translate("_date_year")};i("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:xh(r),dateFormats:Ih(n),periodChangeDateFormats:Ih(a)}),i("DateAxis").setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:xh(r),dateFormats:Ih(n),periodChangeDateFormats:Ih(a),tooltipDateFormats:s,groupIntervals:[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:e=>{const t=e.get("axisFill");if(t){const i=e.component,r=e.get("value"),n=e.get("endValue"),a=i.intervalDuration(),s=i.getPrivate("baseInterval"),o=i.getPrivate("gridInterval",s);let l=i.getPrivate("min",0);if(l=om(new Date(l),o.timeUnit,o.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),null!=r&&null!=n){const e=Math.round(Math.round((r-l)/a))/2;e==Math.round(e)?t.setPrivate("visible",!0):t.setPrivate("visible",!1)}}}}),i("GaplessDateAxis").setAll({fillRule:e=>{const t=e.get("axisFill");if(t){const i=e.get("index");let r=!1;uh(i)&&i%2!=0||(r=!0),t.setPrivate("visible",r)}}}),i("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,autoZoom:!0,fillRule:e=>{const t=e.get("axisFill");if(t){const i=e.component,r=e.get("value"),n=i.getPrivate("step");uh(r)&&uh(n)&&(np(r/n/2,5)==Math.round(r/n/2)?t.setPrivate("visible",!1):t.setPrivate("visible",!0))}}}),i("DurationAxis").setAll({baseUnit:"second"}),i("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"}),i("BaseColumnSeries").setAll({adjustBulletPosition:!0}),i("ColumnSeries").setAll({clustered:!0}),i("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:Qc(70),height:Qc(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),i("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),i("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,isMeasured:!1}),i("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1}),i("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:(e,t)=>{const i=t.parent;if(i){const t=i.height(),r=i.width();e.moveTo(0,t/2),e.lineTo(r,t/2)}}});Yp(i("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{}),"stroke",e,"disabled");i("Graphics",["line","series","legend","marker","fill"]).setAll({draw:(e,t)=>{const i=t.parent;if(i){const t=i.height(),r=i.width();e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,t),e.lineTo(0,t),e.lineTo(0,0)}}});Yp(i("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{}),"stroke",e,"disabled");i("SmoothedXYLineSeries").setAll({tension:.5}),i("SmoothedXLineSeries").setAll({tension:.5}),i("SmoothedYLineSeries").setAll({tension:.5}),i("Candlestick").setAll({position:"absolute",isMeasured:!1,width:Qc(50),height:Qc(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),i("OHLC").setAll({width:Qc(80),height:Qc(80)}),i("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"});{const t=i("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{});Yp(t,"fill",e,"positive"),Yp(t,"stroke",e,"positive")}{const t=i("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{});Yp(t,"fill",e,"negative"),Yp(t,"stroke",e,"negative")}i("Rectangle",["column","autocolor","pro"]).states.create("riseFromOpen",{fillOpacity:0}),i("Rectangle",["column","autocolor","pro"]).states.create("dropFromOpen",{fillOpacity:1});{const t=i("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{});Yp(t,"fill",e,"positive"),Yp(t,"stroke",e,"positive")}{const t=i("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{});Yp(t,"fill",e,"negative"),Yp(t,"stroke",e,"negative")}i("RoundedRectangle",["rangegrip"]).setAll({strokeOpacity:0,fillOpacity:0,strokeWidth:1,width:12,height:12});{const t=i("Graphics",["rangegrip","button","icon"]);t.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:e=>{e.moveTo(0,.5),e.lineTo(0,12.5),e.moveTo(2,.5),e.lineTo(2,12.5),e.moveTo(4,.5),e.lineTo(4,12.5)}}),Yp(t,"stroke",e,"secondaryButtonText")}i("Button",["rangegrip"]).setAll({draggable:!0,paddingTop:0,paddingBottom:0}),i("Button",["rangegrip","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize",centerX:th}),i("Button",["rangegrip","horizontal"]).setAll({cursorOverStyle:"ew-resize",centerX:th}),i("Button",["rangegrip","vertical","left"]).setAll({centerY:eh}),i("Button",["rangegrip","vertical","right"]).setAll({centerY:0}),i("Button",["rangegrip","horizontal","top"]).setAll({centerY:0}),i("Button",["rangegrip","horizontal","bottom"]).setAll({centerY:eh})}}class cm extends Op{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Op.new(this._root,{width:eh,height:eh,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:eh,height:eh})})}}Object.defineProperty(cm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(cm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([cm.className])});class hm extends cm{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{width:eh,height:eh,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new Rd})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const e=this.seriesContainer.children;this._disposers.push(this.series.events.onAll((t=>{if("clear"===t.type){mh(t.oldValues,(e=>{this._removeSeries(e)}));const e=this.get("colors");e&&e.reset();const i=this.get("patterns");i&&i.reset()}else if("push"===t.type)e.moveValue(t.newValue),this._processSeries(t.newValue);else if("setIndex"===t.type)e.setIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("insertIndex"===t.type)e.insertIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("removeIndex"===t.type)this._removeSeries(t.oldValue);else if("moveIndex"===t.type)e.moveValue(t.value,t.newIndex),this._processSeries(t.value);else{if("swap"!==t.type)throw new Error("Unknown IListEvent type");{const i=t.a,r=t.b,n=this.series.indexOf(i),a=this.series.indexOf(r);e.moveValue(i,a),e.moveValue(r,n),this.series.each((e=>{this._processSeries(e),e.markDirtyValues()}))}}})))}_processSeries(e){e.chart=this,e._placeBulletsContainer(this)}_removeSeries(e){e._handleRemoved(),e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}Object.defineProperty(hm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(hm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cm.classNames.concat([hm.className])});class dm extends hm{constructor(){super(...arguments),Object.defineProperty(this,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Rd}),Object.defineProperty(this,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Rd}),Object.defineProperty(this,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(Op.new(this._root,{width:eh,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(Op.new(this._root,{width:eh,height:eh,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(Op.new(this._root,{width:eh,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"leftAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(Op.new(this._root,{height:eh,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(Op.new(this._root,{width:eh,height:eh,maskContent:!1}))}),Object.defineProperty(this,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(Op.new(this._root,{width:eh,height:eh}))}),Object.defineProperty(this,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(Op.new(this._root,{width:eh,height:eh}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(Op.new(this._root,{width:eh,height:eh,isMeasured:!1}))}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{width:eh,height:eh,isMeasured:!1})}),Object.defineProperty(this,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(Op.new(this._root,{height:eh,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(Op.new(this._root,{}))}),Object.defineProperty(this,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(Kf.new(this._root,{themeTags:["zoom"],icon:mp.new(this._root,{themeTags:["button","icon"]})}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(um.new(this._root)),super._afterNew(),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);const e=this._root;let t=this._root.verticalLayout;const i=this.zoomOutButton;i.events.on("click",(()=>{this.zoomOut()})),i.hide(0),i.states.lookup("default").set("opacity",1),this.chartContainer.set("layout",t);const r=this.plotContainer;r.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),r.children.push(this.topGridContainer),r.children.push(this.bulletsContainer),r.set("interactive",!0),r.set("interactiveChildren",!1),r.set("background",gp.new(e,{themeTags:["plotbackground","xy","background"]})),this._disposers.push(r.events.on("pointerdown",(e=>{this._handlePlotDown(e)}))),this._disposers.push(r.events.on("globalpointerup",(e=>{this._handlePlotUp(e)}))),this._disposers.push(r.events.on("globalpointermove",(e=>{this._handlePlotMove(e)}))),this._maskGrid(),this._setUpTouch()}_beforeChanged(){super._beforeChanged(),(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")))}_maskGrid(){this.gridContainer.set("maskContent",!0),this.topGridContainer.set("maskContent",!0)}_removeSeries(e){e._unstack(),e._posXDp&&e._posXDp.dispose(),e._posYDp&&e._posYDp.dispose(),e.set("baseAxis",void 0);const t=e.get("xAxis");t&&(yh(t.series,e),t.markDirtyExtremes());const i=e.get("yAxis");i&&(yh(i.series,e),i.markDirtyExtremes());const r=this.get("cursor");if(r){const t=r.get("snapToSeries");t&&yh(t,e)}super._removeSeries(e)}handleWheel(e){const t=this.get("wheelX"),i=this.get("wheelY"),r=this.plotContainer,n=e.originalEvent;let a=!1;if(!Xh(n,this))return;a=!0;const s=r.toLocal(e.point),o=this.get("wheelStep",.2),l=n.deltaY/100,u=n.deltaX/100,c=this.get("wheelZoomPositionX"),h=this.get("wheelZoomPositionY");"zoomX"!==t&&"zoomXY"!==t||0==u||this.xAxes.each((e=>{if(e.get("zoomX")){let t=e.get("start"),i=e.get("end"),n=e.fixPosition(s.x/r.width());null!=c&&(n=c);let l=e.get("maxDeviation",0),h=Math.min(1+l,Math.max(-l,t-o*(i-t)*u*n)),d=Math.max(-l,Math.min(1+l,i+o*(i-t)*u*(1-n)));h==t&&d==i&&(a=!1),1/(d-h)<e.getPrivate("maxZoomFactor",1/0)/e.get("minZoomCount",1)?this._handleWheelAnimation(e.zoom(h,d)):a=!1}})),"zoomX"!==i&&"zoomXY"!==i||0==l||this.xAxes.each((e=>{if(e.get("zoomX")){let t=e.get("start"),i=e.get("end"),n=e.fixPosition(s.x/r.width());null!=c&&(n=c);let u=e.get("maxDeviation",0),h=Math.min(1+u,Math.max(-u,t-o*(i-t)*l*n)),d=Math.max(-u,Math.min(1+u,i+o*(i-t)*l*(1-n)));h==t&&d==i&&(a=!1),1/(d-h)<e.getPrivate("maxZoomFactor",1/0)/e.get("minZoomCount",1)?this._handleWheelAnimation(e.zoom(h,d)):a=!1}})),"zoomY"!==t&&"zoomXY"!==t||0==u||this.yAxes.each((e=>{if(e.get("zoomY")){let t=e.get("start"),i=e.get("end"),n=e.fixPosition(s.y/r.height());null!=h&&(n=h);let l=e.get("maxDeviation",0),c=Math.min(1+l,Math.max(-l,t-o*(i-t)*u*n)),d=Math.max(-l,Math.min(1+l,i+o*(i-t)*u*(1-n)));c==t&&d==i&&(a=!1),1/(d-c)<e.getPrivate("maxZoomFactor",1/0)/e.get("minZoomCount",1)?this._handleWheelAnimation(e.zoom(c,d)):a=!1}})),"zoomY"!==i&&"zoomXY"!==i||0==l||this.yAxes.each((e=>{if(e.get("zoomY")){let t=e.get("start"),i=e.get("end"),n=e.fixPosition(s.y/r.height());null!=h&&(n=h);let u=e.get("maxDeviation",0),c=Math.min(1+u,Math.max(-u,t-o*(i-t)*l*n)),d=Math.max(-u,Math.min(1+u,i+o*(i-t)*l*(1-n)));c==t&&d==i&&(a=!1),1/(d-c)<e.getPrivate("maxZoomFactor",1/0)/e.get("minZoomCount",1)?this._handleWheelAnimation(e.zoom(c,d)):a=!1}})),"panX"!==t&&"panXY"!==t||0==u||this.xAxes.each((e=>{if(e.get("panX")){let t=e.get("start"),i=e.get("end"),r=this._getWheelSign(e)*o*(i-t)*u,n=t+r,s=i+r,l=this._fixWheel(n,s);n=l[0],s=l[1],n==t&&s==i&&(a=!1),this._handleWheelAnimation(e.zoom(n,s))}})),"panX"!==i&&"panXY"!==i||0==l||this.xAxes.each((e=>{if(e.get("panX")){let t=e.get("start"),i=e.get("end"),r=this._getWheelSign(e)*o*(i-t)*l,n=t+r,s=i+r,u=this._fixWheel(n,s);n=u[0],s=u[1],n==t&&s==i&&(a=!1),this._handleWheelAnimation(e.zoom(n,s))}})),"panY"!==t&&"panXY"!==t||0==u||this.yAxes.each((e=>{if(e.get("panY")){let t=e.get("start"),i=e.get("end"),r=this._getWheelSign(e)*o*(i-t)*u,n=t+r,s=i+r,l=this._fixWheel(n,s);n=l[0],s=l[1],n==t&&s==i&&(a=!1),this._handleWheelAnimation(e.zoom(n,s))}})),"panY"!==i&&"panXY"!==i||0==l||this.yAxes.each((e=>{if(e.get("panY")){let t=e.get("start"),i=e.get("end"),r=this._getWheelSign(e)*o*(i-t)*l,n=t-r,s=i-r,u=this._fixWheel(n,s);n=u[0],s=u[1],n==t&&s==i&&(a=!1),this._handleWheelAnimation(e.zoom(n,s))}})),a&&n.preventDefault()}_handleSetWheel(){const e=this.get("wheelX"),t=this.get("wheelY"),i=this.plotContainer;"none"!==e||"none"!==t?(this._wheelDp=i.events.on("wheel",(i=>{const r=i.originalEvent;("none"!==e&&0!=Math.abs(r.deltaX)||"none"!==t&&0!=Math.abs(r.deltaY))&&this.handleWheel(i)})),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(e){let t=1;return e.get("renderer").get("inversed")&&(t=-1),t}_fixWheel(e,t){const i=t-e;return e<0&&(t=(e=0)+i),t>1&&(e=(t=1)-i),[e,t]}_handlePlotDown(e){const t=e.originalEvent;if(2==t.button)return;const i=this.plotContainer;let r=i.toLocal(e.point);if(this.get("pinchZoomX")||this.get("pinchZoomY")){if(t.pointerId&&Ch(i._downPoints).length>0){const e=this.xAxes.getIndex(0),t=this.yAxes.getIndex(0);e&&(this._downStartX=e.get("start",0),this._downEndX=e.get("end",1)),t&&(this._downStartY=t.get("start",0),this._downEndY=t.get("end",1))}}if((this.get("panX")||this.get("panY"))&&r.x>=0&&r.y>=0&&r.x<=i.width()&&r.y<=this.height()){this._downPoint={x:t.clientX,y:t.clientY};const i=this.get("panX"),r=this.get("panY");i&&this.xAxes.each((e=>{e._panStart=e.get("start"),e._panEnd=e.get("end")})),r&&this.yAxes.each((e=>{e._panStart=e.get("start"),e._panEnd=e.get("end")}));const n="panstarted";this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this,originalEvent:e.originalEvent})}}_handleWheelAnimation(e){e?e.events.on("stopped",(()=>{this._dispatchWheelAnimation()})):this._dispatchWheelAnimation()}_dispatchWheelAnimation(){const e="wheelended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}_handlePlotUp(e){const t=this._downPoint;if(t&&(this.get("panX")||this.get("panY"))){if(e.originalEvent.clientX==t.x&&e.originalEvent.clientY==t.y){const t="pancancelled";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}const i="panended";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,originalEvent:e.originalEvent})}this._downPoint=void 0,this.xAxes.each((e=>{e._isPanning=!1})),this.yAxes.each((e=>{e._isPanning=!1}))}_handlePlotMove(e){const t=this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){const i=e.originalEvent.pointerId;if(i&&(this._movePoints[i]=e.point,Ch(t._downPoints).length>1))return void this._handlePinch()}let i=this._downPoint;if(i){i=t.toLocal(this._root.documentPointToRoot(i));let r=t.toLocal(e.point);const n=this.get("panX"),a=this.get("panY");if(n){let e=this.get("scrollbarX");e&&e.events.disableType("rangechanged"),this.xAxes.each((e=>{if(e.get("panX")){e._isPanning=!0;let n=e._panStart,a=e._panEnd,s=(a-n)*(i.x-r.x)/t.width();e.get("renderer").get("inversed")&&(s*=-1);let o=n+s,l=a+s;l-o<1+2*e.get("maxDeviation",1)&&(e.set("start",o),e.set("end",l))}})),e&&e.events.enableType("rangechanged")}if(a){let e=this.get("scrollbarY");e&&e.events.disableType("rangechanged"),this.yAxes.each((e=>{if(e.get("panY")){e._isPanning=!0;let n=e._panStart,a=e._panEnd,s=(a-n)*(i.y-r.y)/t.height();e.get("renderer").get("inversed")&&(s*=-1);let o=n-s,l=a-s;l-o<1+2*e.get("maxDeviation",1)&&(e.set("start",o),e.set("end",l))}})),e&&e.events.enableType("rangechanged")}}}_handlePinch(){const e=this.plotContainer;let t=0,i=[],r=[];if(Dh(e._downPoints,((e,n)=>{i[t]=n;let a=this._movePoints[e];a&&(r[t]=a),t++})),i.length>1&&r.length>1){const t=e.width(),n=e.height();let a=i[0],s=i[1],o=r[0],l=r[1];if(a&&s&&o&&l){if(o=e.toLocal(o),l=e.toLocal(l),a=e.toLocal(a),s=e.toLocal(s),this.get("pinchZoomX")){const e=this._downStartX,i=this._downEndX;if(null!=e&&null!=i){a.x>s.x&&([a,s]=[s,a],[o,l]=[l,o]);let r=e+a.x/t*(i-e),n=e+s.x/t*(i-e),u=e+o.x/t*(i-e),c=e+l.x/t*(i-e),h=Math.max(.001,n-r)/Math.max(.001,c-u),d=e*h+r-u*h,p=i*h+n-c*h;this.xAxes.each((e=>{let t=e.fixPosition(d),i=e.fixPosition(p);e.zoom(t,i,0)}))}}if(this.get("pinchZoomY")){const e=this._downStartY,t=this._downEndY;if(null!=e&&null!=t){a.y<s.y&&([a,s]=[s,a],[o,l]=[l,o]);let i=e+(1-a.y/n)*(t-e),r=e+(1-s.y/n)*(t-e),u=e+(1-o.y/n)*(t-e),c=e+(1-l.y/n)*(t-e),h=Math.max(.001,r-i)/Math.max(.001,c-u),d=e*h+i-u*h,p=t*h+r-c*h;this.yAxes.each((e=>{let t=e.fixPosition(d),i=e.fixPosition(p);e.zoom(t,i,0)}))}}}}}_handleCursorPosition(){const e=this.get("cursor");if(e){const t=e.getPrivate("point");let i=e.get("snapToSeries");if(e._downPoint&&(i=void 0),i&&t){const r=e.get("snapToSeriesBy"),n=[];mh(i,(e=>{if(!e.isHidden()&&!e.isHiding())if("x!"!=r&&"y!"!=r){const t=e.startIndex(),i=e.endIndex();for(let r=t;r<i;r++){const t=e.dataItems[r];t&&!t.isHidden()&&n.push(t)}}else{const t=e.get("tooltipDataItem");t&&n.push(t)}}));let a,s=1/0;if(mh(n,(e=>{const i=e.get("point");if(i){let n=0;n="x"==r||"x!"==r?Math.abs(t.x-i.x):"y"==r||"y!"==r?Math.abs(t.y-i.y):Math.hypot(t.x-i.x,t.y-i.y),n<s&&(s=n,a=e)}})),mh(i,(e=>{const t=e.get("tooltip");t&&t._setDataItem(void 0)})),a){let t=a.component;t.showDataItemTooltip(a),t.setRaw("tooltipDataItem",a);const i=a.get("point");i&&e.handleMove(t.toGlobal({x:i.x-t.x(),y:i.y-t.y()}),!0)}}}}_updateCursor(){let e=this.get("cursor");e&&e.updateCursor()}_addCursor(e){this.plotContainer.children.push(e)}_prepareChildren(){if(super._prepareChildren(),this.series.each((e=>{this._colorize(e)})),(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this.isDirty("cursor")){const e=this._prevSettings.cursor,t=this.get("cursor");t!==e&&(this._disposeProperty("cursor"),e&&e.dispose(),t&&(t._setChart(this),this._addCursor(t),this._pushPropertyDisposer("cursor",t.events.on("selectended",(()=>{this._handleCursorSelectEnd()})))),this._prevSettings.cursor=t)}if(this.isDirty("scrollbarX")){const e=this._prevSettings.scrollbarX,t=this.get("scrollbarX");t!==e&&(this._disposeProperty("scrollbarX"),e&&e.dispose(),t&&(t.parent||this.topAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarX",t.events.on("rangechanged",(e=>{this._handleScrollbar(this.xAxes,e.start,e.end,e.grip)}))),this._pushPropertyDisposer("scrollbarX",t.events.on("released",(()=>{this.xAxes.each((e=>{e.get("zoomable")&&this._handleAxisSelection(e)}))}))),t.setPrivate("positionTextFunction",(e=>{const t=this.xAxes.getIndex(0);return t&&t.getTooltipText(e,!1)||""}))),this._prevSettings.scrollbarX=t)}if(this.isDirty("scrollbarY")){const e=this._prevSettings.scrollbarY,t=this.get("scrollbarY");t!==e&&(this._disposeProperty("scrollbarY"),e&&e.dispose(),t&&(t.parent||this.rightAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarY",t.events.on("rangechanged",(e=>{this._handleScrollbar(this.yAxes,e.start,e.end,e.grip)}))),this._pushPropertyDisposer("scrollbarY",t.events.on("released",(()=>{this.yAxes.each((e=>{e.get("zoomable")&&this._handleAxisSelection(e)}))}))),t.setPrivate("positionTextFunction",(e=>{const t=this.yAxes.getIndex(0);return t&&t.getTooltipText(e,!1)||""}))),this._prevSettings.scrollbarY=t)}this._handleZoomOut()}_processSeries(e){super._processSeries(e);const t=e.get("xAxis"),i=e.get("yAxis");_h(t.series,e),_h(i.series,e),e._posXDp=e.addDisposer(t.events.on("positionchanged",(()=>{e._fixPosition()}))),e._posXDp=e.addDisposer(i.events.on("positionchanged",(()=>{e._fixPosition()}))),e.get("baseAxis")||(i.isType("CategoryAxis")||i.isType("DateAxis")?e.set("baseAxis",i):e.set("baseAxis",t)),e.get("stacked")&&(e._markDirtyKey("stacked"),mh(e.dataItems,(e=>{e.set("stackToItemY",void 0),e.set("stackToItemX",void 0)}))),e._markDirtyAxes(),i.markDirtyExtremes(),t.markDirtyExtremes(),t._seriesAdded=!0,i._seriesAdded=!0,this._colorize(e)}_colorize(e){const t=this.get("colors");if(t&&null==e.get("fill")){const i=t.next();e._setSoft("stroke",i),e._setSoft("fill",i)}const i=this.get("patterns");if(i&&null==e.get("fillPattern")){const t=i.next();e._setSoft("fillPattern",t)}}_handleCursorSelectEnd(){const e=this.get("cursor"),t=e.get("behavior"),i=e.getPrivate("downPositionX",0),r=e.getPrivate("downPositionY",0),n=Math.min(1,Math.max(0,e.getPrivate("positionX",.5))),a=Math.min(1,Math.max(0,e.getPrivate("positionY",.5)));this.xAxes.each((e=>{if("zoomX"===t||"zoomXY"===t){let t=e.toAxisPosition(i),r=e.toAxisPosition(n);e.zoom(t,r)}e.setPrivate("updateScrollbar",!0)})),this.yAxes.each((e=>{if("zoomY"===t||"zoomXY"===t){let t=e.toAxisPosition(r),i=e.toAxisPosition(a);e.zoom(t,i)}e.setPrivate("updateScrollbar",!0)}))}_handleScrollbar(e,t,i,r){e.each((e=>{let n=e.fixPosition(t),a=e.fixPosition(i),s=e.zoom(n,a,void 0,r);const o="updateScrollbar";e.setPrivateRaw(o,!1),s?s.events.on("stopped",(()=>{e.setPrivateRaw(o,!0)})):e.setPrivateRaw(o,!0)}))}_processAxis(e,t){return e.events.onAll((e=>{if("clear"===e.type)mh(e.oldValues,(e=>{this._removeAxis(e)}));else if("push"===e.type)t.children.push(e.newValue),e.newValue.processChart(this);else if("setIndex"===e.type)t.children.setIndex(e.index,e.newValue),e.newValue.processChart(this);else if("insertIndex"===e.type)t.children.insertIndex(e.index,e.newValue),e.newValue.processChart(this);else if("removeIndex"===e.type)this._removeAxis(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");t.children.moveValue(e.value,e.newIndex),e.value.processChart(this)}}))}_removeAxis(e){if(!e.isDisposed()){const t=e.parent;t&&t.children.removeValue(e);const i=e.gridContainer,r=i.parent;r&&r.children.removeValue(i);const n=e.topGridContainer,a=n.parent;a&&a.children.removeValue(n)}}_updateChartLayout(){const e=this.leftAxesContainer.width(),t=this.rightAxesContainer.width(),i=this.bottomAxesContainer;i.set("paddingLeft",e),i.set("paddingRight",t);const r=this.topAxesContainer;r.set("paddingLeft",e),r.set("paddingRight",t)}processAxis(e){this.get("cursor")&&(this.addDisposer(e.on("start",(()=>{this._updateCursor()}))),this.addDisposer(e.on("end",(()=>{this._updateCursor()}))))}_handleAxisSelection(e,t){let i=e.fixPosition(e.get("start",0)),r=e.fixPosition(e.get("end",1));if(i>r&&([i,r]=[r,i]),-1!=this.xAxes.indexOf(e)){if(t||e.getPrivate("updateScrollbar")){let e=this.get("scrollbarX");!e||e.getPrivate("isBusy")&&!t||(e.setRaw("start",i),e.setRaw("end",r),e.updateGrips())}}else if(-1!=this.yAxes.indexOf(e)&&(t||e.getPrivate("updateScrollbar"))){let e=this.get("scrollbarY");!e||e.getPrivate("isBusy")&&!t||(e.setRaw("start",i),e.setRaw("end",r),e.updateGrips())}this._handleZoomOut()}_handleZoomOut(){let e=this.zoomOutButton;if(e&&e.parent){let t=!1;this.xAxes.each((e=>{0==np(e.get("start",0),6)&&1==np(e.get("end",1),6)||(t=!0)})),this.yAxes.each((e=>{0==np(e.get("start",0),6)&&1==np(e.get("end",1),6)||(t=!0)})),t?e.isHidden()&&e.show():e.hide()}}inPlot(e){const t=this.plotContainer,i=this.getPrivate("otherCharts",this._otherCharts),r=t.toGlobal(e);if(e.x>=-.5&&e.y>=-.5&&e.x<=t.width()+.5&&e.y<=t.height()+.5)return!0;if(i)for(let n=i.length-1;n>=0;n--){const e=i[n];if(e!=this){const t=e.plotContainer,i=this._root.rootPointToDocument(r),n=e._root.documentPointToRoot(i),a=t.toLocal(n);if(a.x>=-.1&&a.y>=-.1&&a.x<=t.width()+.1&&a.y<=t.height()+.1)return!0}}return!1}arrangeTooltips(){const e=this.plotContainer,t=e.width(),i=e.height();let r=this.height();const n=this._root.tooltipContainer.get("layerMargin");n&&n.bottom>r&&(r=n.bottom);let a=e._display.toGlobal({x:0,y:0}),s=e._display.toGlobal({x:t,y:i});const o=[];let l,u,c=0,h=1/0,d=this._movePoint,p=this.get("maxTooltipDistance"),f=this.get("maxTooltipDistanceBy","xy");uh(p)&&this.series.each((e=>{if(!e.isHidden()){const t=e.get("tooltip");if(t){let i=t.get("pointTo");if(i){let t=Math.hypot(d.x-i.x,d.y-i.y);"x"==f?t=Math.abs(d.x-i.x):"y"==f&&(t=Math.abs(d.y-i.y)),t<h&&(h=t,l=e,u=i)}}}}));const m=[];if(this.series.each((e=>{const t=e.get("tooltip");if(t&&!t.get("forceHidden")){let i=!1,r=t.get("pointTo");if(r){if(p>=0){let r=t.get("pointTo");if(r&&u&&e!=l){let e=Math.hypot(u.x-r.x,u.y-r.y);"x"==f?e=Math.abs(u.x-r.x):"y"==f&&(e=Math.abs(u.y-r.y)),e>p&&(i=!0)}}else-1==p&&e!=l&&(i=!0);this.inPlot(this._tooltipToLocal(r))&&t.dataItem?i||(c+=r.y):i=!0,i||e.isHidden()||e.isHiding()?t.hide(0):(t.show(),o.push(t),m.push(e))}}})),this.setPrivate("tooltipSeries",m),this.get("arrangeTooltips")){const e=this._root.tooltipContainer,t=o.length;if(c/t>i/2+a.y){o.sort(((e,t)=>Vd(t.get("pointTo").y,e.get("pointTo").y)));let t=s.y;if(mh(o,(i=>{let r=i.height(),n=i.get("centerY");n instanceof Jc&&(r*=n.value),r+=i.get("marginBottom",0),i.set("bounds",{left:a.x,top:a.y,right:s.x,bottom:t}),i.setPrivate("customData",{left:a.x,top:a.y,right:s.x,bottom:t}),t=Math.min(t-r,i._fy-r),i.parent==e&&e.children.moveValue(i,0)})),t<0){o.reverse();let e=t;mh(o,(i=>{let r=i.get("bounds");if(r){let n=r.top-t,a=r.bottom-t;n<e&&(n=e,a=n+i.height()),i.set("bounds",{left:r.left,top:n,right:r.right,bottom:a}),e=r.bottom-t+i.get("marginBottom",0)}}))}}else{o.reverse(),o.sort(((e,t)=>Vd(e.get("pointTo").y,t.get("pointTo").y)));let t=0;if(mh(o,(i=>{let n=i.height(),o=i.get("centerY");o instanceof Jc&&(n*=o.value),n+=i.get("marginBottom",0),i.set("bounds",{left:a.x,top:t,right:s.x,bottom:Math.max(a.y+r,t+n)}),i.parent==e&&e.children.moveValue(i,0),t=Math.max(t+n,i._fy+n)})),t>r){o.reverse();let e=r;mh(o,(i=>{let n=i.get("bounds");if(n){let a=n.top-(r-t),s=n.bottom-(r-t);s>e&&(s=e,a=s-i.height()),i.set("bounds",{left:n.left,top:a,right:n.right,bottom:s}),e=s-i.height()-i.get("marginBottom",0)}}))}}}}_tooltipToLocal(e){return this.plotContainer.toLocal(e)}zoomOut(){this.xAxes.each((e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)})),this.yAxes.each((e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)}))}_dispose(){super._dispose();const e=this.get("cursor");e&&e.dispose()}}Object.defineProperty(dm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"}),Object.defineProperty(dm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hm.classNames.concat([dm.className])});class pm extends Cd{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(e){this.processor&&this.processor.processRow(e),super._onPush(e)}_onInsertIndex(e,t){this.processor&&this.processor.processRow(t),super._onInsertIndex(e,t)}_onSetIndex(e,t,i){this.processor&&this.processor.processRow(i),super._onSetIndex(e,t,i)}}class fm extends Xd{constructor(e,t,i){super(i),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=t,this.component=e,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}hide(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}isHidden(){return!this.get("visible")}}class mm extends Op{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new pm}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(e){e.incrementRef(),this._data.decrementRef(),this._data=e}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll((e=>{const t=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,"clear"===e.type)mh(t,(e=>{e.dispose()})),t.length=0,this._onDataClear();else if("push"===e.type){const i=new fm(this,e.newValue,this._makeDataItem(e.newValue));t.push(i),this.processDataItem(i)}else if("setIndex"===e.type){const i=t[e.index],r=this._makeDataItem(e.newValue);i.bullets&&0==i.bullets.length&&(i.bullets=void 0),Ch(r).forEach((e=>{i.animate({key:e,to:r[e],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})})),i.dataContext=e.newValue}else if("insertIndex"===e.type){const i=new fm(this,e.newValue,this._makeDataItem(e.newValue));t.splice(e.index,0,i),this.processDataItem(i)}else if("removeIndex"===e.type){t[e.index].dispose(),t.splice(e.index,1)}else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");{const i=t[e.oldIndex];t.splice(e.oldIndex,1),t.splice(e.newIndex,0,i)}}this._afterDataChange()})))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},mh(this.valueFields,(e=>{this.get(e+"Field")&&(this._valueFields.push(e),this._valueFieldsF[e]={fieldKey:e+"Field",workingKey:e+"Working"})}))),this.fields&&(this._fields=[],this._fieldsF={},mh(this.fields,(e=>{this.get(e+"Field")&&(this._fields.push(e),this._fieldsF[e]=e+"Field")})))}get dataItems(){return this._dataItems}processDataItem(e){}_makeDataItem(e){const t={};return this._valueFields&&mh(this._valueFields,(i=>{const r=this.get(this._valueFieldsF[i].fieldKey);t[i]=e[r],t[this._valueFieldsF[i].workingKey]=t[i]})),this._fields&&mh(this._fields,(i=>{const r=this.get(this._fieldsF[i]);t[i]=e[r]})),t}makeDataItem(e,t){let i=new fm(this,t,e);return this.processDataItem(i),i}pushDataItem(e,t){const i=this.makeDataItem(e,t);return this._mainDataItems.push(i),i}disposeDataItem(e){}showDataItem(e,t){return Kc(this,void 0,void 0,(function*(){e.set("visible",!0)}))}hideDataItem(e,t){return Kc(this,void 0,void 0,(function*(){e.set("visible",!1)}))}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const e="datavalidated";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this._dataChanged=!1}this.inited=!0}markDirtyValues(e){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}}Object.defineProperty(mm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(mm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([mm.className])});class gm extends mm{constructor(){super(...arguments),Object.defineProperty(this,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"minorDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Op.new(this._root,{}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{width:eh,height:eh})}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{width:eh,height:eh})}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Op.new(this._root,{isMeasured:!1,width:eh,height:eh,position:"absolute"}))}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_eAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Cd}),Object.defineProperty(this,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_seriesAdded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Op.new(this._root,{themeTags:["axis","header"],position:"absolute",background:gp.new(this._root,{themeTags:["header","background"],fill:this._root.interfaceColors.get("background")})}))}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),super._dispose()}_afterNew(){super._afterNew(),this.setPrivate("updateScrollbar",!0),this._disposers.push(this.axisRanges.events.onAll((e=>{if("clear"===e.type)mh(e.oldValues,(e=>{this.disposeDataItem(e)}));else if("push"===e.type)this._processAxisRange(e.newValue,["range"]);else if("setIndex"===e.type)this._processAxisRange(e.newValue,["range"]);else if("insertIndex"===e.type)this._processAxisRange(e.newValue,["range"]);else if("removeIndex"===e.type)this.disposeDataItem(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(e.value,["range"])}})));const e=this.get("renderer");e&&(e.axis=this,e.processAxis()),this.children.push(e),this.ghostLabel=e.makeLabel(new fm(this,void 0,{}),[]),this.ghostLabel.adapters.disable("text"),this.ghostLabel.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1}),this.ghostLabel.events.disable()}_updateFinals(e,t){}zoom(e,t,i,r){if(this.get("zoomable",!0))if(this._updateFinals(e,t),this.get("start")!==e||this.get("end")!=t){let n=this._sAnimation,a=this._eAnimation,s=this.get("maxDeviation",.5)*Math.min(1,t-e);e<-s&&(e=-s),t>1+s&&(t=1+s),e>t&&([e,t]=[t,e]),uh(i)||(i=this.get("interpolationDuration",0)),r||(r="end");let o=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100)),l=o;1===t&&0!==e&&(r=e<this.get("start",0)?"start":"end"),0===e&&1!==t&&(r=t>this.get("end",1)?"end":"start");let u=this.get("minZoomCount",0),c=this.get("maxZoomCount",1/0);uh(u)&&(o=l/u);let h=1;if(uh(c)&&(h=l/c),"start"===r?(c>0&&1/(t-e)<h&&(t=e+1/h),1/(t-e)>o&&(t=e+1/o),t>1&&t-e<1/o&&(e=t-1/o)):(c>0&&1/(t-e)<h&&(e=t-1/h),1/(t-e)>o&&(e=t-1/o),e<0&&t-e<1/o&&(t=e+1/o)),1/(t-e)>o&&(t=e+1/o),1/(t-e)>o&&(e=t-1/o),null!=c&&null!=u&&e==this.get("start")&&t==this.get("end")){const e=this.chart;e&&e._handleAxisSelection(this,!0)}if((n&&n.playing&&n.to==e||this.get("start")==e)&&(a&&a.playing&&a.to==t||this.get("end")==t))return;if(i>0){let r,n,a=this.get("interpolationEasing");if(this.get("start")!=e&&(r=this.animate({key:"start",to:e,duration:i,easing:a})),this.get("end")!=t&&(n=this.animate({key:"end",to:t,duration:i,easing:a})),this._sAnimation=r,this._eAnimation=n,r)return r;if(n)return n}else this.set("start",e),this.set("end",t)}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(e,t){e.setRaw("isRange",!0),this._createAssets(e,t),this._rangesDirty=!0,this._prepareDataItem(e);const i=e.get("above"),r=this.topGridContainer,n=e.get("grid");i&&n&&r.children.moveValue(n);const a=e.get("axisFill");i&&a&&r.children.moveValue(a)}_prepareDataItem(e,t){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets={},this.axisRanges.each((e=>{this._prepareDataItem(e)})),mh(this._seriesAxisRanges,(e=>{this._prepareDataItem(e)}))}_prepareChildren(){if(super._prepareChildren(),this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1),this.isDirty("start")||this.isDirty("end")){const e=this.chart;e&&e._updateCursor();let t=this.get("start",0),i=this.get("end",1),r=this.get("maxDeviation",.5)*Math.min(1,i-t);if(t<-r){let e=t+r;t=-r,this.setRaw("start",t),this.isDirty("end")&&this.setRaw("end",i-e)}if(i>1+r){let e=i-1-r;i=1+r,this.setRaw("end",i),this.isDirty("start")&&this.setRaw("start",t-e)}}const e=this.get("renderer");if(e._start=this.get("start"),e._end=this.get("end"),e._inversed=e.get("inversed",!1),e._axisLength=e.axisLength()/(e._end-e._start),e._updateLC(),this.isDirty("tooltip")){const t=this.get("tooltip");if(t){const i=e.get("themeTags");t.addTag("axis"),t.addTag(this.className.toLowerCase()),t._applyThemes(),i&&(t.set("themeTags",bd(t.get("themeTags"),i)),t.label._applyThemes())}}}_updateTooltipBounds(){const e=this.get("tooltip");e&&this.get("renderer").updateTooltipBounds(e)}_updateBounds(){super._updateBounds(),this._updateTooltipBounds()}processChart(e){this.chart=e;this.get("renderer").chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on("start",(()=>{e._handleAxisSelection(this)})),this.on("end",(()=>{e._handleAxisSelection(this)})),e.plotContainer.onPrivate("width",(()=>{this.markDirtySize()})),e.plotContainer.onPrivate("height",(()=>{this.markDirtySize()})),e.processAxis(this)}hideDataItem(e){return this._toggleFHDataItem(e,!0),super.hideDataItem(e)}showDataItem(e){return this._toggleFHDataItem(e,!1),super.showDataItem(e)}_toggleFHDataItem(e,t){const i="forceHidden",r=e.get("label");r&&r.set(i,t);const n=e.get("grid");n&&n.set(i,t);const a=e.get("tick");a&&a.set(i,t);const s=e.get("axisFill");s&&s.set(i,t);const o=e.get("bullet");if(o){const e=o.get("sprite");e&&e.set(i,t)}}_toggleDataItem(e,t){const i=e.get("label"),r="visible";i&&i.setPrivate(r,t);const n=e.get("grid");n&&n.setPrivate(r,t);const a=e.get("tick");a&&a.setPrivate(r,t);const s=e.get("axisFill");s&&s.setPrivate(r,t);const o=e.get("bullet");if(o){const e=o.get("sprite");e&&e.setPrivate(r,t)}}_createAssets(e,t,i){var r,n,a;const s=this.get("renderer");let o="minor";const l=e.get("label");if(l){let n=l.get("themeTags"),a=!1;i?-1==(null===n||void 0===n?void 0:n.indexOf(o))&&(a=!0):-1!=(null===n||void 0===n?void 0:n.indexOf(o))&&(a=!0),a&&(null===(r=l.parent)||void 0===r||r.children.removeValue(l),s.makeLabel(e,t),l.dispose(),s.labels.removeValue(l))}else s.makeLabel(e,t);const u=e.get("grid");if(u){let r=u.get("themeTags"),a=!1;i?-1==(null===r||void 0===r?void 0:r.indexOf(o))&&(a=!0):-1!=(null===r||void 0===r?void 0:r.indexOf(o))&&(a=!0),a&&(null===(n=u.parent)||void 0===n||n.children.removeValue(u),s.makeGrid(e,t),u.dispose(),s.grid.removeValue(u))}else s.makeGrid(e,t);const c=e.get("tick");if(c){let r=!1,n=c.get("themeTags");i?-1==(null===n||void 0===n?void 0:n.indexOf(o))&&(r=!0):-1!=(null===n||void 0===n?void 0:n.indexOf(o))&&(r=!0),r&&(null===(a=c.parent)||void 0===a||a.children.removeValue(c),s.makeTick(e,t),c.dispose(),s.ticks.removeValue(c))}else s.makeTick(e,t);i||e.get("axisFill")||s.makeAxisFill(e,t),this._processBullet(e)}_processBullet(e){let t=e.get("bullet"),i=this.get("bullet");if(t||!i||e.get("isRange")||(t=i(this._root,this,e)),t){t.axis=this;const i=t.get("sprite");i&&(i._setDataItem(e),e.setRaw("bullet",t),i.parent||this.bulletsContainer.children.push(i))}}_afterChanged(){super._afterChanged();const e=this.chart;e&&(e._updateChartLayout(),e.axisHeadersContainer.markDirtySize()),this.get("renderer")._updatePositions(),this._seriesAdded=!1}disposeDataItem(e){super.disposeDataItem(e);const t=this.get("renderer"),i=e.get("label");i&&(t.labels.removeValue(i),i.dispose());const r=e.get("tick");r&&(t.ticks.removeValue(r),r.dispose());const n=e.get("grid");n&&(t.grid.removeValue(n),n.dispose());const a=e.get("axisFill");a&&(t.axisFills.removeValue(a),a.dispose());const s=e.get("bullet");s&&s.dispose()}_updateGhost(){this.setPrivate("cellWidth",this.getCellWidthPosition()*this.get("renderer").axisLength());const e=this.ghostLabel;if(!e.isHidden()){const t=e.localBounds(),i=Math.ceil(t.right-t.left);let r=e.get("text");mh(this.dataItems,(e=>{const t=e.get("label");if(t&&!t.isHidden()){const e=t.localBounds();Math.ceil(e.right-e.left)>i&&(r=t.text._getText())}})),e.set("text",r)}let t=this.get("start",0),i=this.get("end",1);this.get("renderer").updateLabel(e,t+.5*(i-t))}_handleCursorPosition(e,t){e=this.get("renderer").toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=t,this.updateTooltip()}updateTooltip(){const e=this._snapToSeries;let t=this._cursorPosition;const i=this.get("tooltip"),r=this.get("renderer");uh(t)&&(mh(this.series,(i=>{if(i.get("baseAxis")===this){const r=this.getSeriesItem(i,t,this.get("tooltipLocation"));e&&-1!=e.indexOf(i)?(i.updateLegendMarker(r),i.updateLegendValue(r),i._settings.tooltipDataItem=r):(i.showDataItemTooltip(r),i.setRaw("tooltipDataItem",r))}})),this.get("snapTooltip")&&(t=this.roundAxisPosition(t,this.get("tooltipLocation",.5))),this.setPrivateRaw("tooltipPosition",t),i&&(r.updateTooltipBounds(i),rh(t)?i.hide(0):(this._updateTooltipText(i,t),r.positionTooltip(i,t),t<this.get("start",0)||t>this.get("end",1)?i.hide(0):i.show(0))))}_updateTooltipText(e,t){e.label.set("text",this.getTooltipText(t))}roundAxisPosition(e,t){return e}_handleSeriesRemoved(){}handleCursorShow(){let e=this.get("tooltip");e&&e.show()}handleCursorHide(){let e=this.get("tooltip");e&&e.hide()}processSeriesDataItem(e,t){}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._rangesDirty=!1}coordinateToPosition(e){const t=this.get("renderer");return t.toAxisPosition(e/t.axisLength())}toAxisPosition(e){return this.get("renderer").toAxisPosition(e)}toGlobalPosition(e){return this.get("renderer").toGlobalPosition(e)}fixPosition(e){return this.get("renderer").fixPosition(e)}shouldGap(e,t,i,r){return!1}createAxisRange(e){return this.axisRanges.push(e)}_groupSeriesData(e){}getCellWidthPosition(){return.05}}Object.defineProperty(gm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"}),Object.defineProperty(gm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mm.classNames.concat([gm.className])});class bm extends gm{constructor(){super(...arguments),Object.defineProperty(this,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dseHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_minRealLog",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0,this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0,this.markDirty()}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["axis"]),this.setPrivateRaw("name","value"),this.addTag("value"),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();let e=this.get("syncWithAxis");e&&(this._syncDp=new $h([e.onPrivate("selectionMinFinal",(()=>{this._dirtySelectionExtremes=!0})),e.onPrivate("selectionMaxFinal",(()=>{this._dirtySelectionExtremes=!0}))]))}let e=!1;if((this.isDirty("min")||this.isDirty("max")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))&&(e=!0,this.ghostLabel.set("text","")),(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||e||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection"))&&(this._getMinMax(),this._dirtyExtremes=!1),this._handleSizeDirty(),this._dirtySelectionExtremes&&!this._isPanning&&this.get("autoZoom",!0)){const e=this.chart;let t=!1;if(e){const i=this.get("renderer").getPrivate("letter");"Y"==i?e.xAxes.each((e=>{"ValueAxis"!=e.className&&(t=!0)})):"X"==i&&e.yAxes.each((e=>{"ValueAxis"!=e.className&&(t=!0)}))}t&&this._getSelectionMinMax(),this._dirtySelectionExtremes=!1}this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("logarithmic"))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}_handleSizeDirty(){this._sizeDirty&&!this._dseHandled&&(this._dirtySelectionExtremes=!0,this._dseHandled=!0)}_clearDirty(){super._clearDirty(),this._dseHandled=!1}_groupData(){}_formatText(e){const t=this.get("numberFormat"),i=this.getNumberFormatter();let r="";return r=t?i.format(e,t):i.format(e,void 0,this.getPrivate("stepDecimalPlaces")),r}_prepareAxisItems(){const e=this.getPrivate("min"),t=this.getPrivate("max");if(uh(e)&&uh(t)){const t=this.get("logarithmic"),i=this.getPrivate("step"),r=this.getPrivate("selectionMin"),n=this.getPrivate("selectionMax")+i;let a=r-i,s=1,o=e;if(t){if(a=this._minLogAdjusted,a<r)for(;a<r;)a+=i;o=a,o<=0&&(o=1,i<1&&(o=uh(this._minRealLog)?this._minRealLog:Math.pow(10,-50))),s=Math.log(n-i)*Math.LOG10E-Math.log(o)*Math.LOG10E,s>2&&(a=Math.pow(10,Math.log(o)*Math.LOG10E-50))}const l=this.get("renderer"),u=l.get("minorLabelsEnabled"),c=l.get("minorGridEnabled",u);let h=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E));const d=Math.round(i/h);let p=2;np(d/5,10)%1==0&&(p=5),np(d/10,10)%1==0&&(p=10);let f=i/p,m=0,g=0,b=-1/0;for(;a<n;){let e;this.dataItems.length<m+1?(e=new fm(this,void 0,{}),this._dataItems.push(e),this.processDataItem(e)):e=this.dataItems[m],this._createAssets(e,[]),this._toggleDataItem(e,!0),e.setRaw("value",a);const r=e.get("label");r&&r.set("text",this._formatText(a)),this._prepareDataItem(e);let n=a;if(t&&s>2?n=Math.pow(10,Math.log(o)*Math.LOG10E+m-50):n+=i,c){let e=a+f;if(t){if(s>2){f=this._adjustMinMax(a,n,10).step}e=a+f}for(;e<n-1e-11*i;){let t;this.minorDataItems.length<g+1?(t=new fm(this,void 0,{}),this.minorDataItems.push(t),this.processDataItem(t)):t=this.minorDataItems[g],this._createAssets(t,["minor"],!0),this._toggleDataItem(t,!0),t.setRaw("value",e);const i=t.get("label");i&&(u?i.set("text",this._formatText(e)):i.setPrivate("visible",!1)),this._prepareDataItem(t),e+=f,g++}}if(a=n,b==a)break;let l=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E));if(l<1&&!t){a=np(a,Math.round(Math.abs(Math.log(Math.abs(l))*Math.LOG10E))+2)}m++,b=a}for(let e=m;e<this.dataItems.length;e++)this._toggleDataItem(this.dataItems[e],!1);for(let e=g;e<this.minorDataItems.length;e++)this._toggleDataItem(this.minorDataItems[e],!1);mh(this.series,(e=>{e.inited&&e._markDirtyAxes()})),this._updateGhost()}}_prepareDataItem(e,t){let i=this.get("renderer"),r=e.get("value"),n=e.get("endValue"),a=this.valueToPosition(r),s=a,o=this.valueToPosition(r+this.getPrivate("step"));uh(n)&&(s=this.valueToPosition(n),o=s),e.get("isRange")&&null==n&&(o=a);let l=s,u=e.get("labelEndValue");null!=u&&(l=this.valueToPosition(u)),i.updateLabel(e.get("label"),a,l,t);const c=e.get("grid");if(i.updateGrid(c,a,s),c&&(r==this.get("baseValue",0)?(c.addTag("base"),c._applyThemes()):c.hasTag("base")&&(c.removeTag("base"),c._applyThemes())),i.updateTick(e.get("tick"),a,l,t),i.updateFill(e.get("axisFill"),a,o),this._processBullet(e),i.updateBullet(e.get("bullet"),a,s),!e.get("isRange")){const t=this.get("fillRule");t&&t(e)}}_handleRangeChange(){let e=this.positionToValue(this.get("start",0)),t=this.positionToValue(this.get("end",1));const i=this.get("renderer").gridCount();let r=this._adjustMinMax(e,t,i,!0),n=Qh(r.step);this.setPrivateRaw("stepDecimalPlaces",n),e=np(e,n),t=np(t,n),r=this._adjustMinMax(e,t,i,!0);let a=r.step;e=r.min,t=r.max,this.getPrivate("selectionMin")===e&&this.getPrivate("selectionMax")===t&&this.getPrivate("step")===a||(this.setPrivateRaw("selectionMin",e),this.setPrivateRaw("selectionMax",t),this.setPrivateRaw("step",a))}positionToValue(e){const t=this.getPrivate("min"),i=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(e*(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)+Math.log(t)*Math.LOG10E)/Math.LOG10E):e*(i-t)+t}valueToPosition(e){const t=this.getPrivate("min"),i=this.getPrivate("max");if(this.get("logarithmic")){if(e<=0){let t=this.get("treatZeroAs");uh(t)&&(e=t)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(i-t)}valueToFinalPosition(e){const t=this.getPrivate("minFinal"),i=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(e<=0){let t=this.get("treatZeroAs");uh(t)&&(e=t)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(i-t)}getX(e,t,i){e=i+(e-i)*t;const r=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(r)}getY(e,t,i){e=i+(e-i)*t;const r=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(r)}getDataItemCoordinateX(e,t,i,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,i,r))}getDataItemPositionX(e,t,i,r){let n=e.get(t);if(e.get("stackToItemX")){n=n*r+e.component.getStackedXValueWorking(e,t)}else n=this._baseValue+(n-this._baseValue)*r;return this.valueToPosition(n)}getDataItemCoordinateY(e,t,i,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,i,r))}getDataItemPositionY(e,t,i,r){let n=e.get(t);if(e.get("stackToItemY")){n=n*r+e.component.getStackedYValueWorking(e,t)}else n=this._baseValue+(n-this._baseValue)*r;return this.valueToPosition(n)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){const e=Math.min(this.getPrivate("minFinal",-1/0),this.getPrivate("selectionMin",-1/0)),t=Math.max(this.getPrivate("maxFinal",1/0),this.getPrivate("selectionMax",1/0));let i=this.get("baseValue",0);return i<e&&(i=e),i>t&&(i=t),i}cellEndValue(e){return e}fixSmallStep(e){return 1+e===1?(e*=2,this.fixSmallStep(e)):e}_fixMin(e){return e}_fixMax(e){return e}_calculateTotals(){if(this.get("calculateTotals")){let e=this.series[0];if(e){let t=e.startIndex();if(e.dataItems.length>0){t>0&&t--;let i,r,n=e.endIndex();n<e.dataItems.length&&n++,e.get("yAxis")==this?(i="valueY",r="vcy"):e.get("xAxis")==this&&(i="valueX",r="vcx");let a=i+"Working";if(i)for(let e=t;e<n;e++){let t=0,n=0;mh(this.series,(i=>{if(!i.get("excludeFromTotal")){let s=i.dataItems[e];if(s){let e=s.get(a)*i.get(r);rh(e)||(t+=e,n+=Math.abs(e))}}})),mh(this.series,(s=>{if(!s.get("excludeFromTotal")){let o=s.dataItems[e];if(o){let e=o.get(a)*s.get(r);rh(e)||(o.set(i+"Total",n),o.set(i+"Sum",t),o.set(i+"TotalPercent",e/n*100))}}}))}}}}}_getSelectionMinMax(){const e=this.getPrivate("minFinal"),t=this.getPrivate("maxFinal"),i=this.get("min"),r=this.get("max");let n=this.get("extraMin",0),a=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(n=.1),null==this.get("extraMax")&&(a=.2));const s=this.get("renderer").gridCount(),o=this.get("strictMinMaxSelection");let l=this.get("strictMinMax");if(uh(e)&&uh(t)){let u=t,c=e;if(mh(this.series,(e=>{if(!e.get("ignoreMinMax")){let t,i;const r=e.getPrivate("outOfSelection");if(e.get("xAxis")===this){if(!r){let r=e.getPrivate("minX"),n=e.getPrivate("maxX");0==e.startIndex()&&e.endIndex()==e.dataItems.length||(r=void 0,n=void 0),t=e.getPrivate("selectionMinX",r),i=e.getPrivate("selectionMaxX",n)}}else if(e.get("yAxis")===this&&!r){let r=e.getPrivate("minY"),n=e.getPrivate("maxY");0==e.startIndex()&&e.endIndex()==e.dataItems.length||(r=void 0,n=void 0),t=e.getPrivate("selectionMinY",r),i=e.getPrivate("selectionMaxY",n)}e.isHidden()||e.isShowing()||(uh(t)&&(u=Math.min(u,t)),uh(i)&&(c=Math.max(c,i)))}})),this.axisRanges.each((e=>{if(e.get("affectsMinMax")){let t=e.get("value");null!=t&&(u=Math.min(u,t),c=Math.max(c,t)),t=e.get("endValue"),null!=t&&(u=Math.min(u,t),c=Math.max(c,t))}})),u>c&&([u,c]=[c,u]),uh(i)?u=l?i:e:l&&uh(this._minReal)&&(u=this._minReal),uh(r)?c=l?r:t:l&&uh(this._maxReal)&&(c=this._maxReal),u===c){let t=u;if(u-=this._deltaMinMax,c+=this._deltaMinMax,u<e){let i=t-e;0==i&&(i=this._deltaMinMax),u=t-i,c=t+i,l=!0}let i=this._adjustMinMax(u,c,s,l);u=i.min,c=i.max}let h=u,d=c,p=c-u;u-=p*n,c+=p*a;let f=this._adjustMinMax(u,c,s);u=f.min,c=f.max,u=ap(u,e,t),c=ap(c,e,t),f=this._adjustMinMax(u,c,s,!0),l||(u=f.min,c=f.max);const m=this.get("syncWithAxis");if(m&&(f=this._syncAxes(u,c,f.step,m.getPrivate("selectionMinFinal",m.getPrivate("minFinal",0)),m.getPrivate("selectionMaxFinal",m.getPrivate("maxFinal",1)),m.getPrivate("selectionStepFinal",m.getPrivate("step",1))),f.min<e&&(f.min=e),f.max>t&&(f.max=t),u=f.min,c=f.max),l&&(uh(i)&&(u=Math.max(u,i)),uh(r)&&(c=Math.min(c,r))),o&&(u=h-(d-h)*n,c=d+(d-h)*a),l){u=uh(i)?i:h,c=uh(r)?r:d,c-u<=1e-8&&(u-=this._deltaMinMax,c+=this._deltaMinMax);let e=c-u;u-=e*n,c+=e*a}this.get("logarithmic")&&(u<=0&&(u=h*(1-Math.min(n,.99))),u<e&&(u=e),c>t&&(c=t));let g=Math.min(20,Math.ceil(Math.log(this.getPrivate("maxZoomFactor",100)+1)/Math.LN10)+2),b=np(this.valueToFinalPosition(u),g),y=np(this.valueToFinalPosition(c),g);this.setPrivateRaw("selectionMinFinal",u),this.setPrivateRaw("selectionMaxFinal",c),this.setPrivateRaw("selectionStepFinal",f.step),this.zoom(b,y)}}_getMinMax(){let e=this.get("min"),t=this.get("max"),i=1/0,r=-1/0,n=this.get("extraMin",0),a=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(n=.1),null==this.get("extraMax")&&(a=.2));let s=1/0;if(mh(this.series,(e=>{if(!e.get("ignoreMinMax")){let t,n;if(e.get("xAxis")===this?(t=e.getPrivate("minX"),n=e.getPrivate("maxX")):e.get("yAxis")===this&&(t=e.getPrivate("minY"),n=e.getPrivate("maxY")),uh(t)&&uh(n)){i=Math.min(i,t),r=Math.max(r,n);let e=n-t;e<=0&&(e=Math.abs(n/100)),e<s&&(s=e)}}})),this.axisRanges.each((e=>{if(e.get("affectsMinMax")){let t=e.get("value");null!=t&&(i=Math.min(i,t),r=Math.max(r,t)),t=e.get("endValue"),null!=t&&(i=Math.min(i,t),r=Math.max(r,t))}})),this.get("logarithmic")){let e=this.get("treatZeroAs");uh(e)&&i<=0&&(i=e),i<=0&&new Error("Logarithmic value axis can not have values <= 0.")}if(0===i&&0===r&&(r=.9,i=-.9),uh(e)&&(i=e),uh(t)&&(r=t),i===1/0||r===-1/0)return this.setPrivate("minFinal",void 0),void this.setPrivate("maxFinal",void 0);i>r&&([i,r]=[r,i]);const o=i,l=r;let u=this.adapters.fold("min",i),c=this.adapters.fold("max",r);this._minRealLog=i,uh(u)&&(i=u),uh(c)&&(r=c),i=this._fixMin(i),r=this._fixMax(r),r-i<=1/Math.pow(10,15)&&(r-i!==0?this._deltaMinMax=(r-i)/2:this._getDelta(r),i-=this._deltaMinMax,r+=this._deltaMinMax),i-=(r-i)*n,r+=(r-i)*a,this.get("logarithmic")&&(i<0&&o>=0&&(i=0),r>0&&l<=0&&(r=0)),this._minReal=i,this._maxReal=r;let h=this.get("strictMinMax"),d=this.get("strictMinMaxSelection",!1);d&&(h=d);let p=h;uh(t)&&(p=!0);let f=this.get("renderer").gridCount(),m=this._adjustMinMax(i,r,f,p);if(i=m.min,r=m.max,m=this._adjustMinMax(i,r,f,!0),i=m.min,r=m.max,h){i=uh(e)?e:this._minReal,r=uh(t)?t:this._maxReal,r-i<=1e-8&&(i-=this._deltaMinMax,r+=this._deltaMinMax);let s=r-i;i-=s*n,r+=s*a}u=this.adapters.fold("min",i),c=this.adapters.fold("max",r),uh(u)&&(i=u),uh(c)&&(r=c),s==1/0&&(s=r-i);let g=Math.round(Math.abs(Math.log(Math.abs(r-i))*Math.LOG10E))+5;i=np(i,g),r=np(r,g);const b=this.get("syncWithAxis");if(b&&(m=this._syncAxes(i,r,m.step,b.getPrivate("minFinal",b.getPrivate("min",0)),b.getPrivate("maxFinal",b.getPrivate("max",1)),b.getPrivate("step",1)),i=m.min,r=m.max),this.setPrivateRaw("maxZoomFactor",Math.max(1,Math.ceil((r-i)/s*this.get("maxZoomFactor",100)))),this._fixZoomFactor(),this.get("logarithmic")&&(this._minLogAdjusted=i,i=this._minReal,r=this._maxReal,i<=0&&(i=o*(1-Math.min(n,.99)))),uh(i)&&uh(r)&&(this.getPrivate("minFinal")!==i||this.getPrivate("maxFinal")!==r)){this.setPrivate("minFinal",i),this.setPrivate("maxFinal",r),this._saveMinMax(i,r);const e=this.get("interpolationDuration",0),t=this.get("interpolationEasing");this.animatePrivate({key:"min",to:i,duration:e,easing:t}),this.animatePrivate({key:"max",to:r,duration:e,easing:t})}}_fixZoomFactor(){}_getDelta(e){let t=Math.log(Math.abs(e))*Math.LOG10E,i=Math.pow(10,Math.floor(t));i/=10,this._deltaMinMax=i}_saveMinMax(e,t){}_adjustMinMax(e,t,i,r){i<=1&&(i=1),i=Math.round(i);let n=e,a=t,s=t-e;0===s&&(s=Math.abs(t));let o=Math.log(Math.abs(s))*Math.LOG10E,l=Math.pow(10,Math.floor(o));l/=10;let u=l;r&&(u=0),r?(e=Math.floor(e/l)*l,t=Math.ceil(t/l)*l):(e=Math.ceil(e/l)*l-u,t=Math.floor(t/l)*l+u),e<0&&n>=0&&(e=0),t>0&&a<=0&&(t=0),o=Math.log(Math.abs(s))*Math.LOG10E,l=Math.pow(10,Math.floor(o)),l/=100;let c=Math.ceil(s/i/l)*l,h=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E)),d=Math.ceil(c/h);d>5?d=10:d<=5&&d>2&&(d=5),c=Math.ceil(c/(h*d))*h*d;let p=this.get("maxPrecision");if(uh(p)){let e=function(e,t){if(!uh(t)||t<=0)return Math.ceil(e);{let i=Math.pow(10,t);return Math.ceil(e*i)/i}}(c,p);p<Number.MAX_VALUE&&c!==e&&(c=e,0==c&&(c=1))}let f=0;h<1&&(f=Math.round(Math.abs(Math.log(Math.abs(h))*Math.LOG10E))+1,c=np(c,f));let m,g=Math.floor(e/c);return e=np(c*g,f),m=r?Math.floor(t/c):Math.ceil(t/c),m===g&&m++,(t=np(c*m,f))<a&&(t+=c),e>n&&(e-=c),c=this.fixSmallStep(c),{min:e,max:t,step:c}}getTooltipText(e,t){const i=this.get("tooltipNumberFormat",this.get("numberFormat")),r=this.getNumberFormatter(),n=this.get("extraTooltipPrecision",0),a=this.getPrivate("stepDecimalPlaces",0)+n,s=np(this.positionToValue(e),a);return i?r.format(s,i):r.format(s,void 0,a)}getSeriesItem(e,t){let i,r,n=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),a=this.positionToValue(t);if(mh(e.dataItems,((e,t)=>{const s=Math.abs(e.get(n)-a);(void 0===i||s<r)&&(i=t,r=s)})),null!=i)return e.dataItems[i]}zoomToValues(e,t,i){const r=this.getPrivate("minFinal",0),n=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((e-r)/(n-r),(t-r)/(n-r),i)}_syncAxes(e,t,i,r,n,a){if(this.get("syncWithAxis")){let s=Math.round(n-r)/a,o=Math.round((t-e)/i),l=this.get("renderer").gridCount();if(uh(s)&&uh(o)){let r=!1,n=0,a=.01*(t-e),o=e,u=t,c=i;for(;1!=r;)if(r=this._checkSync(o,u,c,s),n++,n>500&&(r=!0),r)e=o,t=u,i=c;else{n/3==Math.round(n/3)?(o=e-a*n,e>=0&&o<0&&(o=0)):(u=t+a*n,u<=0&&u>0&&(u=0));let i=this._adjustMinMax(o,u,l,!0);o=i.min,u=i.max,c=i.step}}}return{min:e,max:t,step:i}}_checkSync(e,t,i,r){let n=(t-e)/i;for(let a=1;a<r;a++)if(np(n/a,1)==r||n*a==r)return!0;return!1}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),t=this.getPrivate("selectionMin",this.getPrivate("min"));return uh(e)&&uh(t)?this.getPrivate("step",1)/(e-t):.05}nextPosition(e){null==e&&(e=1),"Y"==this.get("renderer").getPrivate("letter")&&(e*=-1);let t=this.positionToValue(this.getPrivate("tooltipPosition",0));return t+=this.getPrivate("step",1)*e,t=ap(t,this.getPrivate("selectionMin",0),this.getPrivate("selectionMax",1)),this.toGlobalPosition(this.valueToPosition(t))}}Object.defineProperty(bm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"}),Object.defineProperty(bm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gm.classNames.concat([bm.className])});class ym extends bm{constructor(){super(...arguments),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_seriesDataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_baseDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_intervalMax",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_intervalMin",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["axis"]),super._afterNew(),this._setBaseInterval(this.get("baseInterval")),this.on("baseInterval",(()=>{this._setBaseInterval(this.get("baseInterval"))}))}_setBaseInterval(e){this.setPrivateRaw("baseInterval",e),this._baseDuration=rm(e)}_fixZoomFactor(){const e=this.get("maxZoomFactor");null!=e&&e!=1/0?this.setPrivateRaw("maxZoomFactor",e):this.setPrivateRaw("maxZoomFactor",Math.round((this.getPrivate("max",0)-this.getPrivate("min",0))/this.baseMainDuration()))}_groupData(){const e=this.getPrivate("min"),t=this.getPrivate("max");if(uh(e)&&uh(t)){this._fixZoomFactor();const e=this.getPrivate("groupInterval");if(e?this._setBaseInterval(e):this._setBaseInterval(this.get("baseInterval")),this.isDirty("groupInterval")){let e=this.get("groupInterval");e&&(this.setRaw("groupIntervals",[e]),this._handleRangeChange())}if(this.isDirty("groupData")&&!this._dataGrouped){if(this.get("groupData"))mh(this.series,(e=>{this._groupSeriesData(e)})),this._handleRangeChange();else{let e=this.get("baseInterval"),t=e.timeUnit+e.count;mh(this.series,(e=>{e.setDataSet(t),e.resetGrouping()})),this._setBaseInterval(e),this.setPrivateRaw("groupInterval",void 0),this.markDirtyExtremes()}this._dataGrouped=!0}}}_groupSeriesData(e){if(this.get("groupData")&&!e.get("groupDataDisabled")){this._dataGrouped=!0,this._seriesDataGrouped=!0;let t=[],i=this.baseMainDuration(),r=this.get("groupIntervals");mh(r,(e=>{rm(e)>i&&t.push(e)})),e._dataSets={};const n=this.getPrivate("name")+this.get("renderer").getPrivate("letter");let a;const s=e.get("baseAxis");e.get("xAxis")===s?a=e._valueYFields:e.get("yAxis")===s&&(a=e._valueXFields);let o=e._mainDataItems,l=this.get("baseInterval"),u=l.timeUnit+l.count;e._dataSets[u]=o;const c=e.get("groupDataCallback");let h=e.get("groupDataWithOriginals",!1);c&&(h=!0),mh(t,(t=>{let i,r=-1/0,s=t.timeUnit+t.count;e._dataSets[s]=[];let l={},u={},d={},p={};mh(a,(t=>{l[t]=0,u[t]=0,d[t]=e.get(t+"Grouped"),p[t]=t+"Working"}));let f,m,g=im(t.timeUnit);o[0]&&(f=o[0].get(n)),mh(o,(o=>{let b,y=sm(o.get(n),t.timeUnit,t.count,this._root,f);r<y-g/24?(b=Ih(o.dataContext),i=new fm(e,b,e._makeDataItem(b)),i.setRaw(n,y),e._dataSets[s].push(i),mh(a,(e=>{let t=o.get(e);uh(t)?(i.setRaw(e,t),i.setRaw(p[e],t),u[e]=1,l[e]=t):(l[e]=0,u[e]=0)})),h&&i.set("originals",[o]),c&&m&&c(m,t),m=i):(mh(a,(e=>{let t=d[e],r=o.get(e);if(null!=r){let a=i.get(e);switch(t){case"close":i.setRaw(e,r);break;case"sum":i.setRaw(e,a+r);break;case"open":break;case"low":r<a&&i.setRaw(e,r);break;case"high":r>a&&i.setRaw(e,r);break;case"average":u[e]++,l[e]+=r;let t=l[e]/u[e];i.setRaw(e,t);break;case"extreme":Math.abs(r)>Math.abs(a)&&i.setRaw(e,r)}i.setRaw(p[e],i.get(e));let s=Ih(o.dataContext);s[n]=y,i.dataContext=s}})),h&&i.get("originals").push(o)),r=y})),c&&m&&c(m,t)})),e._dataSetId&&e.setDataSet(e._dataSetId),this.markDirtySize(),this._seriesAdded&&this._root.events.once("frameended",(()=>{this.markDirtySize()}))}}_clearDirty(){super._clearDirty(),this._groupingCalculated=!1,this._dataGrouped=!1}getGroupInterval(e){let t=this.get("baseInterval"),i=lm(0,e,this.get("groupCount",1/0),this.get("groupIntervals"));return rm(i)<rm(t)&&(i=Object.assign({},t)),i}getIntervalMax(e){return this._intervalMax[e.timeUnit+e.count]}getIntervalMin(e){return this._intervalMin[e.timeUnit+e.count]}_handleRangeChange(){super._handleRangeChange();let e=Math.round(this.getPrivate("selectionMin")),t=Math.round(this.getPrivate("selectionMax"));if(uh(e)&&uh(t)){if(0==this.get("endLocation")&&(t+=1),this.get("groupData")&&!this._groupingCalculated){this._groupingCalculated=!0;let i=this.get("groupInterval"),r=this.getPrivate("groupInterval"),n=t-e+(this.get("startLocation",0)+(1-this.get("endLocation",1))*this.baseDuration());if(r){let e=rm(r);n=Math.ceil(n/e)*e}if(i||(i=this.getGroupInterval(n)),i&&(!r||r.timeUnit!==i.timeUnit||r.count!==i.count||this._seriesDataGrouped)){this._seriesDataGrouped=!1,this.setPrivateRaw("groupInterval",i),this._setBaseInterval(i);let e=i.timeUnit+i.count;mh(this.series,(t=>{t.get("baseAxis")===this&&t.setDataSet(e)})),this.markDirtyExtremes(),this._root.events.once("frameended",(()=>{this._root.events.once("frameended",(()=>{const e="groupintervalchanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}))}))}}mh(this.series,(i=>{if(i.get("baseAxis")===this){let r=this.getPrivate("name")+this.get("renderer").getPrivate("letter");let n=Th(i.dataItems,(t=>zd(t.get(r),e))).index;n>0&&(n-=1),t+=this.baseDuration()*(1-this.get("endLocation",1));let a=Oh(i.dataItems,(e=>zd(e.get(r),t))).index,s=a;s>1&&s--;const o=i.dataItems[n],l=i.dataItems[s];let u,c;o&&(c=o.get(r)),l&&(u=l.get(r));let h=!1;null!=u&&null!=c&&(u<e||c>t)&&(h=!0),i.setPrivate("outOfSelection",h),i.setPrivate("startIndex",n),i.setPrivate("adjustedStartIndex",i._adjustStartIndex(n)),i.setPrivate("endIndex",a),this.root.events.once("frameended",(()=>{i._markDirtyPrivateKey("adjustedStartIndex")}))}}))}}_adjustMinMax(e,t,i,r){return{min:e,max:t,step:(t-e)/i}}intervalDuration(){return this._intervalDuration}_saveMinMax(e,t){let i=this.getPrivate("groupInterval");i||(i=this.get("baseInterval"));let r=i.timeUnit+i.count;this._intervalMin[r]=e,this._intervalMax[r]=t}_getM(e){return"month"==e||"year"==e||"day"==e?1.05:1.01}_getMinorInterval(e){var t;let i,r=e.count,n=e.timeUnit;return r>1&&(10==r||15==r?r=5:12==r?r=2:6==r?r=1:30==r?r=10:r<10&&(r=1),i={timeUnit:n,count:r}),"week"==n&&(i="week"!=(null===(t=this.getPrivate("baseInterval"))||void 0===t?void 0:t.timeUnit)?{timeUnit:"day",count:1}:{timeUnit:"week",count:1}),i}_prepareAxisItems(){const e=this.getPrivate("min"),t=this.getPrivate("max");if(uh(e)&&uh(t)){const t=this._root,i=Math.round(this.getPrivate("selectionMin")),r=Math.round(this.getPrivate("selectionMax")),n=this.get("renderer"),a=this.getPrivate("baseInterval");let s=i,o=0;const l=this.get("gridIntervals");let u=lm(0,r-i,n.gridCount(),l);rm(u)<this.baseDuration()&&(u=Object.assign({},a));const c=rm(u);this._intervalDuration=c;const h=tm(u.timeUnit),d=t.utc,p=t.timezone;s=sm(i-c,u.timeUnit,u.count,t,e);let f,m=s-c;const g=this.get("dateFormats");this.setPrivateRaw("gridInterval",u);const b=n.get("minorLabelsEnabled"),y=n.get("minorGridEnabled",b);let v,_=0;y&&(v=this._getMinorInterval(u),_=rm(v));let w=0;for(;s<r+c;){let e;this.dataItems.length<o+1?(e=new fm(this,void 0,{}),this._dataItems.push(e),this.processDataItem(e)):e=this.dataItems[o],this._createAssets(e,[]),this._toggleDataItem(e,!0),e.setRaw("value",s),e.setRaw("labelEndValue",void 0);let i=s+im(u.timeUnit,u.count*this._getM(u.timeUnit));i=sm(i,u.timeUnit,1,t),e.setRaw("endValue",i);let r=new Date(s);f=g[u.timeUnit],h&&this.get("markUnitChange")&&uh(m)&&"year"!=u.timeUnit&&am(s,m,h,d,p)&&(f=this.get("periodChangeDateFormats")[u.timeUnit]);const n=e.get("label");n&&n.set("text",t.dateFormatter.format(r,f));let a=u.count;if("week"==u.timeUnit&&e.setRaw("labelEndValue",s),y){a=1;let i=u.timeUnit;"week"==i&&(i="day");let r=s+im(i,this._getM(i));r=sm(r,i,1,t),e.setRaw("labelEndValue",r)}if(this._prepareDataItem(e,a),m=s,s=i,v){const e=v.timeUnit,i=v.count,r=this._getM(e);let n,a=sm(m+_*r,e,i,t,m),o=this.get("minorDateFormats",this.get("dateFormats"));for(;a<s-.01*_;){let s;this.minorDataItems.length<w+1?(s=new fm(this,void 0,{}),this.minorDataItems.push(s),this.processDataItem(s)):s=this.minorDataItems[w],this._createAssets(s,["minor"],!0),this._toggleDataItem(s,!0),s.setRaw("value",a);let l=a+im(e,i*r);l=sm(l,e,1,t),s.setRaw("endValue",l);let u=new Date(a);f=o[e];const c=s.get("label");if(c&&(b?c.set("text",t.dateFormatter.format(u,f)):c.setPrivate("visible",!1)),this._prepareDataItem(s,1),a==n)break;n=a,a=l,w++}}if(s==m)break;o++}for(let e=o;e<this.dataItems.length;e++)this._toggleDataItem(this.dataItems[e],!1);for(let e=w;e<this.minorDataItems.length;e++)this._toggleDataItem(this.minorDataItems[e],!1);mh(this.series,(e=>{e.inited&&e._markDirtyAxes()}))}this._updateGhost()}_updateFinals(e,t){this.setPrivateRaw("selectionMinFinal",this.positionToValue(e)),this.setPrivateRaw("selectionMaxFinal",this.positionToValue(t))}_getDelta(){this._deltaMinMax=this.baseDuration()/2}_fixMin(e){const t=this.getPrivate("baseInterval"),i=t.timeUnit;let r=sm(e,i,t.count,this._root),n=r+im(i,t.count*this._getM(i));return n=sm(n,i,1,this._root),r+(n-r)*this.get("startLocation",0)}_fixMax(e){const t=this.getPrivate("baseInterval"),i=t.timeUnit;let r=sm(e,i,t.count,this._root),n=r+im(i,t.count*this._getM(i));return n=sm(n,i,1,this._root),r+(n-r)*this.get("endLocation",1)}_updateDates(e,t){}_handleSeriesRemoved(){this.setPrivate("baseInterval",this.get("baseInterval")),this.setPrivate("min",void 0),this.setPrivate("minFinal",void 0)}baseDuration(){return this._baseDuration}baseMainDuration(){return rm(this.get("baseInterval"))}processSeriesDataItem(e,t){const i=this.getPrivate("baseInterval");e.open||(e.open={}),e.close||(e.close={}),mh(t,(t=>{let r=e.get(t);if(uh(r)){let n=e.open[t],a=e.close[t];if(r>=n&&r<=a);else{const s=i.timeUnit,o=i.count;n=sm(r,s,o,this._root),a=n+im(s,o*this._getM(s)),a=sm(a,s,1,this._root),e.open[t]=n,e.close[t]=a}this._updateDates(n,e.component)}}))}_handleSizeDirty(){}getDataItemPositionX(e,t,i,r){let n,a;e.open&&e.close?(n=e.open[t],a=e.close[t]):(n=e.get(t),a=n);let s=n+(a-n)*i;return s=this._baseValue+(s-this._baseValue)*r,this.valueToPosition(s)}getDataItemCoordinateX(e,t,i,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,i,r))}getDataItemPositionY(e,t,i,r){let n,a;e.open&&e.close?(n=e.open[t],a=e.close[t]):(n=e.get(t),a=n);let s=n+(a-n)*i;return s=this._baseValue+(s-this._baseValue)*r,this.valueToPosition(s)}getDataItemCoordinateY(e,t,i,r){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,i,r))}roundAxisPosition(e,t){let i=this.positionToValue(e);i-=(t-.5)*this.baseDuration();let r=this.getPrivate("baseInterval");if(!rh(i)){const e=this._root.locale.firstDayOfWeek,n=r.timeUnit,a=this._root.utc,s=this._root.timezone,o=r.count;i=sm(i,n,o,this._root,this.getPrivate("min",0));let l=nm(r,new Date(i),e,a,s);return s&&(i=sm(i+.05*this.baseDuration(),n,o,this._root,this.getPrivate("min",0)),l=nm(r,new Date(i+l*t),e,a,s)),this.valueToPosition(i+l*t)}return NaN}getTooltipText(e,t){if(null!=this.getPrivate("min")){let i=this.get("tooltipDateFormats")[this.getPrivate("baseInterval").timeUnit],r=this.positionToValue(e);if(uh(r)){let e=new Date(r),n=nm(this.getPrivate("baseInterval"),e,this._root.locale.firstDayOfWeek,this._root.utc,this._root.timezone);return!1!==t&&(e=new Date(r+this.get("tooltipIntervalOffset",-this.get("tooltipLocation",.5))*n)),this._root.dateFormatter.format(e,this.get("tooltipDateFormat",i))}}return""}getSeriesItem(e,t,i,r){let n=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),a=this.positionToValue(t);null==i&&(i=.5),a-=(i-.5)*this.baseDuration();const s=Oh(e.dataItems,(e=>{let t=0;return e.open&&(t=e.open[n]),zd(t,a)}));if(r||e.get("snapTooltip")){let t=e.dataItems[s.index-1],i=e.dataItems[s.index];if(t&&i&&t.open&&i.close){let e=t.open[n],r=i.close[n];if(Math.abs(a-e)>Math.abs(a-r))return i}if(t)return t;if(i)return i}else{const t=e.dataItems[s.index-1];if(t&&t.open&&t.close){let e=t.open[n],i=t.close[n];if(a>=e&&a<=i)return t}}}shouldGap(e,t,i,r){const n=e.get(r);return t.get(r)-n>this.baseDuration()*i}zoomToDates(e,t,i){this.zoomToValues(e.getTime(),t.getTime(),i)}zoomToValues(e,t,i){const r=this.getPrivate("minFinal",0),n=this.getPrivate("maxFinal",0);if(null!=this.getPrivate("min")&&null!=this.getPrivate("max"))if(this.get("groupData")){const r=this.getGroupInterval(t-e),n=this.get("baseInterval");let a=this.getIntervalMin(n),s=this.getIntervalMax(n)-1;s=sm(s,r.timeUnit,r.count,this.root),s+=this._getM(r.timeUnit)*rm(r),s=sm(s,r.timeUnit,r.count,this.root);let o=sm(a,r.timeUnit,r.count,this.root),l=sm(s,r.timeUnit,r.count,this.root),u=(e-o)/(l-o),c=(t-o)/(l-o);this.zoom(u,c,i)}else this.zoom((e-r)/(n-r),(t-r)/(n-r),i)}positionToDate(e){return new Date(this.positionToValue(e))}dateToPosition(e){return this.valueToPosition(e.getTime())}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),t=this.getPrivate("selectionMin",this.getPrivate("min"));return uh(e)&&uh(t)?this._intervalDuration/(e-t):.05}nextPosition(e){null==e&&(e=1);let t=this.get("tooltipLocation",.5)*this.baseDuration();"Y"==this.get("renderer").getPrivate("letter")&&(e*=-1);let i=this.positionToValue(this.getPrivate("tooltipPosition",0));const r=this.getPrivate("baseInterval");let n=this._nextTime(i,e,r),a=this.getPrivate("selectionMin",0),s=this.getPrivate("selectionMax",0);return n+=t,n=ap(n,sm(a,r.timeUnit,r.count,this._root)+t,sm(s,r.timeUnit,r.count,this._root)-t),this.toGlobalPosition(this.valueToPosition(n))}_nextTime(e,t,i){return sm(e+t*this.baseDuration(),i.timeUnit,i.count,this._root)}}function vm(e,t){for(let i=0,r=t.length;i<r;i++){const r=t[i];if(r.length>0){let t=r[0];if(t.length>0){let i=t[0];e.moveTo(i.x,i.y);for(let t=0,n=r.length;t<n;t++)_m(e,r[t])}}}}function _m(e,t){for(let i=0,r=t.length;i<r;i++){const r=t[i];e.lineTo(r.x,r.y)}}Object.defineProperty(ym,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DateAxis"}),Object.defineProperty(ym,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:bm.classNames.concat([ym.className])});class wm extends mp{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),t=this.get("segments");if(e&&e.length>0){let t=e[0];this._display.moveTo(t.x,t.y),vm(this._display,[[e]])}else if(t)vm(this._display,t);else if(!this.get("draw")){let e=this.width(),t=this.height();this._display.moveTo(0,0),this._display.lineTo(e,t)}}}}Object.defineProperty(wm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(wm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([wm.className])});class xm extends wm{}Object.defineProperty(xm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(xm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:wm.classNames.concat([xm.className])});class Pm extends xm{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(Pm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"}),Object.defineProperty(Pm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xm.classNames.concat([Pm.className])});class Em extends mp{_beforeChanged(){super._beforeChanged(),(this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}Object.defineProperty(Em,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"}),Object.defineProperty(Em,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([Em.className])});class km extends jp{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(km,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"}),Object.defineProperty(km,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jp.classNames.concat([km.className])});class Sm extends mp{constructor(){super(...arguments),Object.defineProperty(this,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_thumbDownPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>Pm._new(this._root,{themeTags:bd(this.ticks.template.get("themeTags",[]),this.get("themeTags",[]))},[this.ticks.template]))))}),Object.defineProperty(this,"grid",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>Em._new(this._root,{themeTags:bd(this.grid.template.get("themeTags",[]),this.get("themeTags",[]))},[this.grid.template]))))}),Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>mp._new(this._root,{themeTags:bd(this.axisFills.template.get("themeTags",["axis","fill"]),this.get("themeTags",[]))},[this.axisFills.template]))))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>km._new(this._root,{themeTags:bd(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template]))))}),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeTick(e,t){const i=this.ticks.make();return i._setDataItem(e),e.setRaw("tick",i),i.set("themeTags",bd(i.get("themeTags"),t)),this.axis.labelsContainer.children.push(i),this.ticks.push(i),i}makeGrid(e,t){const i=this.grid.make();return i._setDataItem(e),e.setRaw("grid",i),i.set("themeTags",bd(i.get("themeTags"),t)),this.axis.gridContainer.children.push(i),this.grid.push(i),i}makeAxisFill(e,t){const i=this.axisFills.make();return i._setDataItem(e),i.set("themeTags",bd(i.get("themeTags"),t)),this.axis.gridContainer.children.push(i),e.setRaw("axisFill",i),this.axisFills.push(i),i}makeLabel(e,t){const i=this.labels.make();return i.set("themeTags",bd(i.get("themeTags"),t)),this.axis.labelsContainer.children.moveValue(i,0),i._setDataItem(e),e.setRaw("label",i),this.labels.push(i),i}axisLength(){return 0}gridCount(){return this.axisLength()/this.get("minGridDistance",50)}_updatePositions(){}_afterNew(){super._afterNew(),this.set("isMeasured",!1);const e=this.thumb;e&&(this._disposers.push(e.events.on("pointerdown",(e=>{this._handleThumbDown(e)}))),this._disposers.push(e.events.on("globalpointerup",(e=>{this._handleThumbUp(e)}))),this._disposers.push(e.events.on("globalpointermove",(e=>{this._handleThumbMove(e)}))))}_beforeChanged(){super._beforeChanged(),this.isDirty("minGridDistance")&&this.root.events.once("frameended",(()=>{this.axis.markDirtySize()}))}_changed(){if(super._changed(),this.isDirty("pan")){const e=this.thumb;if(e){const t=this.axis.labelsContainer,i=this.get("pan");"zoom"==i?t.children.push(e):"none"==i&&t.children.removeValue(e)}}}_handleThumbDown(e){this._thumbDownPoint=this.toLocal(e.point);const t=this.axis;this._downStart=t.get("start"),this._downEnd=t.get("end")}_handleThumbUp(e){this._thumbDownPoint=void 0}_handleThumbMove(e){const t=this._thumbDownPoint;if(t){const i=this.toLocal(e.point),r=this._downStart,n=this._downEnd,a=this._getPan(i,t)*Math.min(1,n-r)/2*this.get("panSensitivity",1);this.axis.zoom(r-a,n+a,0)}}_getPan(e,t){return 0}positionToCoordinate(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}updateTooltipBounds(e){}_updateSize(){this.markDirty(),this._clear=!0}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e*=i-t,e=this.get("inversed")?i-e:t+e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e=i-e:e-=t,e/=i-t}fixPosition(e){return this.get("inversed")?1-e:e}_updateLC(){}toggleVisibility(e,t,i,r){let n=this.axis;const a=n.get("start",0),s=n.get("end",1);t<a+(s-a)*(i-1e-4)||t>a+(s-a)*(r+1e-4)?e.setPrivate("visible",!1):e.setPrivate("visible",!0)}_positionTooltip(e,t){const i=this.chart;i&&(e.set("pointTo",this._display.toGlobal(t)),i.inPlot(t)||e.hide())}processAxis(){}}Object.defineProperty(Sm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"}),Object.defineProperty(Sm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mp.classNames.concat([Sm.className])});class Om extends Sm{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:gp.new(this._root,{width:eh,isMeasured:!1,themeTags:["axis","x","thumb"]})})}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["renderer","x"]),super._afterNew(),this.setPrivateRaw("letter","X");const e=this.grid.template;e.set("height",eh),e.set("width",0),e.set("draw",((e,t)=>{e.moveTo(0,0),e.lineTo(0,t.height())})),this.set("draw",((e,t)=>{e.moveTo(0,0),e.lineTo(t.width(),0)}))}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("x",-1e3);const t="opposite",i="inside";if(this.isDirty(t)||this.isDirty(i)){const r=this.chart,n=e.children;if(this.get(i)?e.addTag(i):e.removeTag(i),r){if(this.get(t)){const i=r.topAxesContainer.children;-1==i.indexOf(e)&&i.insertIndex(0,e),e.addTag(t),n.moveValue(this)}else{const i=r.bottomAxesContainer.children;-1==i.indexOf(e)&&i.moveValue(e),e.removeTag(t),n.moveValue(this,0)}e.ghostLabel._applyThemes(),this.labels.each((e=>{e._applyThemes()})),this.root._markDirtyRedraw()}e.markDirtySize()}this.thumb.setPrivate("height",e.labelsContainer.height())}_getPan(e,t){return(t.x-e.x)/this.width()}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e=(e-=this._ls)*(i-t)/this._lc,e=this.get("inversed")?i-e:t+e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e=i-e:e-=t,e=e/(i-t)*this._lc,e+=this._ls}_updateLC(){const e=this.axis,t=e.parent;if(t){const i=t.innerWidth();this._lc=this.axisLength()/i,this._ls=(e.x()-t.get("paddingLeft",0))/i}}_updatePositions(){const e=this.axis,t=e.x()-Jh(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0);e.gridContainer.set("x",t),e.topGridContainer.set("x",t),e.bulletsContainer.set("y",this.y());const i=e.chart;if(i){const t=i.plotContainer,r=e.axisHeader;let n=e.get("marginLeft",0),a=e.x()-n;const s=e.parent;s&&(a-=s.get("paddingLeft",0)),r.children.length>0?(n=e.axisHeader.width(),e.set("marginLeft",n+1)):r.set("width",n),r.setAll({x:a,y:-1,height:t.height()+2})}}processAxis(){super.processAxis();const e=this.axis;null==e.get("width")&&e.set("width",eh);const t=this._root.verticalLayout;e.set("layout",t),e.labelsContainer.set("width",eh),e.axisHeader.setAll({layout:t})}axisLength(){return this.axis.width()}positionToPoint(e){return{x:this.positionToCoordinate(e),y:0}}updateTick(e,t,i,r){if(e){uh(t)||(t=0);let n=.5;n=uh(r)&&r>1?e.get("multiLocation",n):e.get("location",n),uh(i)&&i!=t&&(t+=(i-t)*n),e.set("x",this.positionToCoordinate(t));let a=e.get("length",0);const s=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("y",eh),s||(a*=-1)):(e.set("y",0),s&&(a*=-1)),e.set("draw",(e=>{e.moveTo(0,0),e.lineTo(0,a)})),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateLabel(e,t,i,r){if(e){let n=.5;n=uh(r)&&r>1?e.get("multiLocation",n):e.get("location",n),uh(t)||(t=0);const a=e.get("inside",this.get("inside",!1));this.get("opposite")?a?(e.set("position","absolute"),e.set("y",0)):(e.set("position","relative"),e.set("y",eh)):a?(e.set("y",0),e.set("position","absolute")):(e.set("y",void 0),e.set("position","relative")),uh(i)&&i!=t&&(t+=(i-t)*n),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,i){if(e){uh(t)||(t=0);let r=e.get("location",.5);uh(i)&&i!=t&&(t+=(i-t)*r),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateBullet(e,t,i){if(e){const r=e.get("sprite");if(r){uh(t)||(t=0);let n=e.get("location",.5);uh(i)&&i!=t&&(t+=(i-t)*n);let a=this.axis.roundAxisPosition(t,n),s=this.axis._bullets[a],o=-1;if(this.get("opposite")&&(o=1),e.get("stacked"))if(s){let e=s.get("sprite");e&&r.set("y",e.y()+e.height()*o)}else r.set("y",0);this.axis._bullets[a]=e,r.set("x",this.positionToCoordinate(t)),this.toggleVisibility(r,t,0,1)}}}updateFill(e,t,i){if(e){uh(t)||(t=0),uh(i)||(i=1);let r=this.positionToCoordinate(t),n=this.positionToCoordinate(i);this.fillDrawMethod(e,r,n)}}fillDrawMethod(e,t,i){e.set("draw",(e=>{const r=this.axis.gridContainer.height(),n=this.width();i<t&&([i,t]=[t,i]),t>n||i<0||(e.moveTo(t,0),e.lineTo(i,0),e.lineTo(i,r),e.lineTo(t,r),e.lineTo(t,0))}))}positionTooltip(e,t){this._positionTooltip(e,{x:this.positionToCoordinate(t),y:0})}updateTooltipBounds(e){const t=this.get("inside"),i=1e5;let r=this._display.toGlobal({x:0,y:0}),n=r.x,a=0,s=this.axisLength(),o=i,l="up";this.get("opposite")?t?(l="up",a=r.y,o=i):(l="down",a=r.y-i,o=i):t?(l="down",a=r.y-i,o=i):(l="up",a=r.y,o=i);const u={left:n,right:n+s,top:a,bottom:a+o};yd(u,e.get("bounds"))||(e.set("bounds",u),e.set("pointerOrientation",l))}}Object.defineProperty(Om,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"}),Object.defineProperty(Om,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sm.classNames.concat([Om.className])});class Tm extends Sm{constructor(){super(...arguments),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:gp.new(this._root,{height:eh,isMeasured:!1,themeTags:["axis","y","thumb"]})})}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["renderer","y"]),this._settings.opposite&&this._settings.themeTags.push("opposite"),super._afterNew(),this.setPrivateRaw("letter","Y");const e=this.grid.template;e.set("width",eh),e.set("height",0),e.set("draw",((e,t)=>{e.moveTo(0,0),e.lineTo(t.width(),0)})),this.set("draw",((e,t)=>{e.moveTo(0,0),e.lineTo(0,t.height())}))}_getPan(e,t){return(e.y-t.y)/this.height()}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("y",-1e3);const t=this.thumb,i="opposite",r="inside",n=this.chart;if(this.isDirty(i)||this.isDirty(r)){const t=e.children;if(this.get(r)?e.addTag(r):e.removeTag(r),n){if(this.get(i)){const r=n.rightAxesContainer.children;-1==r.indexOf(e)&&r.moveValue(e,0),e.addTag(i),t.moveValue(this,0)}else{const r=n.leftAxesContainer.children;-1==r.indexOf(e)&&r.moveValue(e),e.removeTag(i),t.moveValue(this)}e.ghostLabel._applyThemes(),this.labels.each((e=>{e._applyThemes()})),this.root._markDirtyRedraw()}e.markDirtySize()}const a=e.labelsContainer.width();n&&(this.get(i)?t.set("centerX",0):t.set("centerX",a)),t.setPrivate("width",a)}processAxis(){super.processAxis();const e=this.axis;null==e.get("height")&&e.set("height",eh);const t=this._root.horizontalLayout;e.set("layout",t),e.labelsContainer.set("height",eh),e.axisHeader.set("layout",t)}_updatePositions(){const e=this.axis,t=e.y()-Jh(e.get("centerY",0),e.height());e.gridContainer.set("y",t),e.topGridContainer.set("y",t),e.bulletsContainer.set("x",this.x());const i=e.chart;if(i){const t=i.plotContainer,r=e.axisHeader;let n=e.get("marginTop",0);r.children.length>0?(n=e.axisHeader.height(),e.set("marginTop",n+1)):r.set("height",n),r.setAll({y:e.y()-n,x:-1,width:t.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(e){return{x:0,y:this.positionToCoordinate(e)}}updateLabel(e,t,i,r){if(e){uh(t)||(t=0);let n=.5;n=uh(r)&&r>1?e.get("multiLocation",n):e.get("location",n);const a=this.get("opposite"),s=e.get("inside",this.get("inside",!1));a?(e.set("x",0),s?e.set("position","absolute"):e.set("position","relative")):s?(e.set("x",0),e.set("position","absolute")):(e.set("x",void 0),e.set("position","relative")),uh(i)&&i!=t&&(t+=(i-t)*n),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,i){if(e){uh(t)||(t=0);let r=e.get("location",.5);uh(i)&&i!=t&&(t+=(i-t)*r),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateTick(e,t,i,r){if(e){uh(t)||(t=0);let n=.5;n=uh(r)&&r>1?e.get("multiLocation",n):e.get("location",n),uh(i)&&i!=t&&(t+=(i-t)*n),e.set("y",this.positionToCoordinate(t));let a=e.get("length",0);const s=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("x",0),s&&(a*=-1)):s||(a*=-1),e.set("draw",(e=>{e.moveTo(0,0),e.lineTo(a,0)})),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateBullet(e,t,i){if(e){const r=e.get("sprite");if(r){uh(t)||(t=0);let n=e.get("location",.5);uh(i)&&i!=t&&(t+=(i-t)*n);let a=this.axis.roundAxisPosition(t,n),s=this.axis._bullets[a],o=1;if(this.get("opposite")&&(o=-1),e.get("stacked"))if(s){let e=s.get("sprite");e&&r.set("x",e.x()+e.width()*o)}else r.set("x",0);this.axis._bullets[a]=e,r.set("y",this.positionToCoordinate(t)),this.toggleVisibility(r,t,0,1)}}}updateFill(e,t,i){if(e){uh(t)||(t=0),uh(i)||(i=1);let r=this.positionToCoordinate(t),n=this.positionToCoordinate(i);this.fillDrawMethod(e,r,n)}}fillDrawMethod(e,t,i){e.set("draw",(e=>{const r=this.axis.gridContainer.width(),n=this.height();i<t&&([i,t]=[t,i]),t>n||i<0||(e.moveTo(0,t),e.lineTo(r,t),e.lineTo(r,i),e.lineTo(0,i),e.lineTo(0,t))}))}positionToCoordinate(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}positionTooltip(e,t){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(t)})}updateTooltipBounds(e){const t=this.get("inside"),i=1e5;let r=this._display.toGlobal({x:0,y:0}),n=r.y,a=0,s=this.axisLength(),o=i,l="right";this.get("opposite")?t?(l="right",a=r.x-i,o=i):(l="left",a=r.x,o=i):t?(l="left",a=r.x,o=i):(l="right",a=r.x-i,o=i);const u={left:a,right:a+o,top:n,bottom:n+s};yd(u,e.get("bounds"))||(e.set("bounds",u),e.set("pointerOrientation",l))}_updateLC(){const e=this.axis,t=e.parent;if(t){const i=t.innerHeight();this._lc=this.axisLength()/i,this._ls=e.y()/i}}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e=(e-=this._ls)*(i-t)/this._lc,e=this.get("inversed")?t+e:i-e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e-=t:e=i-e,e=e/(i-t)*this._lc,e+=this._ls}fixPosition(e){return this.get("inversed")?e:1-e}}Object.defineProperty(Tm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"}),Object.defineProperty(Tm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sm.classNames.concat([Tm.className])});class Am extends mm{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new Cd}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:Op.new(this._root,{width:eh,height:eh,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll((e=>{if("clear"===e.type)this._handleBullets(this.dataItems);else if("push"===e.type)this._handleBullets(this.dataItems);else if("setIndex"===e.type)this._handleBullets(this.dataItems);else if("insertIndex"===e.type)this._handleBullets(this.dataItems);else if("removeIndex"===e.type)this._handleBullets(this.dataItems);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");this._handleBullets(this.dataItems)}})))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}endIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("endIndex",e),e)}_handleBullets(e){mh(e,(e=>{const t=e.bullets;t&&(mh(t,(e=>{e.dispose()})),e.bullets=void 0)})),this.markDirtyValues()}getDataItemById(e){return Sh(this.dataItems,(t=>t.get("id")==e))}_makeBullets(e){this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each((t=>{this._makeBullet(e,t)})))}_shouldMakeBullet(e){return!0}_makeBullet(e,t,i){const r=t(this._root,this,e);return r&&(r._index=i,this._makeBulletReal(e,r)),r}_makeBulletReal(e,t){let i=t.get("sprite");i&&(i._setDataItem(e),i.setRaw("position","absolute"),this.bulletsContainer.children.push(i)),t.series=this,e.bullets.push(t)}addBullet(e,t){e.bullets||(e.bullets=[]),t&&this._makeBulletReal(e,t)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let e=this.startIndex(),t=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const e=this.getPrivate("baseValueSeries");e&&this._disposers.push(e.onPrivate("startIndex",(()=>{this.markDirtyValues()})))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,0!=e&&(this._psi=void 0))),this._psi==e&&this._pei==t&&!this.isPrivateDirty("adjustedStartIndex")||this._selectionAggregatesCalculated||(0===e&&t===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(e,t),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let e=this.get("tooltip");e&&(e.hide(0),e.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let e;const t=this.get("legendDataItem");if(t&&(e=t.get("markerRectangle"),e&&this.isVisible())){if(this.isDirty("stroke")){let t=this.get("stroke");e.set("stroke",t)}if(this.isDirty("fill")){let t=this.get("fill");e.set("fill",t)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let e=this.startIndex(),t=this.endIndex();t<this.dataItems.length&&t++;for(let i=e;i<t;i++){let e=this.dataItems[i];e.bullets||this._makeBullets(e)}}}_handleRemoved(){}_adjustStartIndex(e){return e}_calculateAggregates(e,t){let i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");const r={},n={},a={},s={},o={},l={},u={},c={},h={};mh(i,(e=>{r[e]=0,n[e]=0,a[e]=0})),mh(i,(i=>{let d=i+"Change",p=i+"ChangePercent",f=i+"ChangePrevious",m=i+"ChangePreviousPercent",g=i+"ChangeSelection",b=i+"ChangeSelectionPercent",y="valueY";"valueX"!=i&&"openValueX"!=i&&"lowValueX"!=i&&"highValueX"!=i||(y="valueX");const v=this.getPrivate("baseValueSeries"),_=this.getPrivate("adjustedStartIndex",e);for(let w=_;w<t;w++){const t=this.dataItems[w];if(t){let _=t.get(i);null!=_&&(a[i]++,r[i]+=_,n[i]+=Math.abs(_),c[i]=r[i]/a[i],(s[i]>_||null==s[i])&&(s[i]=_),(o[i]<_||null==o[i])&&(o[i]=_),u[i]=_,null==l[i]&&(l[i]=_,h[i]=_,v&&(l[y]=v._getBase(y))),0===e&&(t.setRaw(d,_-l[y]),t.setRaw(p,(_-l[y])/l[y]*100)),t.setRaw(f,_-h[y]),t.setRaw(m,(_-h[y])/h[y]*100),t.setRaw(g,_-l[y]),t.setRaw(b,(_-l[y])/l[y]*100),h[i]=_)}}if(t<this.dataItems.length-1){const e=this.dataItems[t];if(e){let t=e.get(i);e.setRaw(f,t-h[y]),e.setRaw(m,(t-h[y])/h[y]*100),e.setRaw(g,t-l[y]),e.setRaw(b,(t-l[y])/l[y]*100)}}e>0&&e--,delete h[i];for(let t=e;t<_;t++){const e=this.dataItems[t];if(e){let t=e.get(i);null==h[i]&&(h[i]=t),null!=t&&(e.setRaw(f,t-h[y]),e.setRaw(m,(t-h[y])/h[y]*100),e.setRaw(g,t-l[y]),e.setRaw(b,(t-l[y])/l[y]*100),h[i]=t)}}})),mh(i,(e=>{this.setPrivate(e+"AverageSelection",c[e]),this.setPrivate(e+"CountSelection",a[e]),this.setPrivate(e+"SumSelection",r[e]),this.setPrivate(e+"AbsoluteSumSelection",n[e]),this.setPrivate(e+"LowSelection",s[e]),this.setPrivate(e+"HighSelection",o[e]),this.setPrivate(e+"OpenSelection",l[e]),this.setPrivate(e+"CloseSelection",u[e])})),0===e&&t===this.dataItems.length&&mh(i,(e=>{this.setPrivate(e+"Average",c[e]),this.setPrivate(e+"Count",a[e]),this.setPrivate(e+"Sum",r[e]),this.setPrivate(e+"AbsoluteSum",n[e]),this.setPrivate(e+"Low",s[e]),this.setPrivate(e+"High",o[e]),this.setPrivate(e+"Open",l[e]),this.setPrivate(e+"Close",u[e])}))}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const e=this.get("heatRules");if(this._valuesDirty&&e&&e.length>0&&mh(e,(e=>{const t=e.minValue||this.getPrivate(e.dataField+"Low")||0,i=e.maxValue||this.getPrivate(e.dataField+"High")||0;mh(e.target._entities,(r=>{const n=r.dataItem.get(e.dataField);if(!uh(n)){e.neutral&&r.set(e.key,e.neutral);const t=r.states;if(t){const i=t.lookup("default");i&&e.neutral&&i.set(e.key,e.neutral)}if(!e.customFunction)return}if(e.customFunction)e.customFunction.call(this,r,t,i,n);else{let a,s;a=e.logarithmic?(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E):(n-t)/(i-t),!uh(n)||uh(a)&&Math.abs(a)!=1/0||(a=.5),uh(e.min)?s=e.min+(e.max-e.min)*a:e.min instanceof wd?s=wd.interpolate(a,e.min,e.max):e.min instanceof Jc&&(s=kd(a,e.min,e.max)),r.set(e.key,s);const o=r.states;if(o){const t=o.lookup("default");t&&t.set(e.key,s)}}}))})),this.get("visible")){let e=this.dataItems.length,t=this.startIndex(),i=this.endIndex();i<e&&i++,t>0&&t--;for(let r=0;r<t;r++)this._hideBullets(this.dataItems[r]);for(let r=t;r<i;r++)this._positionBullets(this.dataItems[r]);for(let r=i;r<e;r++)this._hideBullets(this.dataItems[r])}}_positionBullets(e){e.bullets&&mh(e.bullets,(e=>{this._positionBullet(e);const t=e.get("sprite");e.get("dynamic")&&(t&&(t._markDirtyKey("fill"),t.markDirtySize()),t instanceof Op&&t.walkChildren((e=>{e._markDirtyKey("fill"),e.markDirtySize(),e instanceof jp&&e.text.markDirtyText()}))),t instanceof jp&&t.get("populateText")&&t.text.markDirtyText()}))}_hideBullets(e){e.bullets&&mh(e.bullets,(e=>{let t=e.get("sprite");t&&t.setPrivate("visible",!1)}))}_positionBullet(e){}_placeBulletsContainer(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}disposeDataItem(e){const t=e.bullets;t&&mh(t,(e=>{e.dispose()}))}_getItemReaderLabel(){return""}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return Kc(this,void 0,void 0,(function*(){const r=[i.showDataItem.call(this,e,t)],n=e.bullets;n&&mh(n,(e=>{const i=e.get("sprite");i&&r.push(i.show(t))})),yield Promise.all(r)}))}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return Kc(this,void 0,void 0,(function*(){const r=[i.hideDataItem.call(this,e,t)],n=e.bullets;n&&mh(n,(e=>{const i=e.get("sprite");i&&r.push(i.hide(t))})),yield Promise.all(r)}))}_sequencedShowHide(e,t){return Kc(this,void 0,void 0,(function*(){if(this.get("sequencedInterpolation"))if(uh(t)||(t=this.get("interpolationDuration",0)),t>0){const i=this.startIndex(),r=this.endIndex();yield Promise.all(fh(this.dataItems,((n,a)=>Kc(this,void 0,void 0,(function*(){let s=t||0;(a<i-10||a>r+10)&&(s=0);let o=this.get("sequencedDelay",0)+s/(r-i);var l;yield(l=o*(a-i),new Promise(((e,t)=>{setTimeout(e,l)}))),e?yield this.showDataItem(n,s):yield this.hideDataItem(n,s)})))))}else yield Promise.all(fh(this.dataItems,(t=>e?this.showDataItem(t,0):this.hideDataItem(t,0))))}))}updateLegendValue(e){if(e){const t=e.get("legendDataItem");if(t){const i=t.get("valueLabel");if(i){const t=i.text;let r="";i._setDataItem(e),r=this.get("legendValueText",t.get("text","")),i.set("text",r),t.markDirtyText()}const r=t.get("label");if(r){const t=r.text;let i="";r._setDataItem(e),i=this.get("legendLabelText",t.get("text","")),r.set("text",i),t.markDirtyText()}}}}updateLegendMarker(e){}_onHide(){super._onHide();const e=this.getTooltip();e&&e.hide()}hoverDataItem(e){}unhoverDataItem(e){}_getBase(e){const t=this.dataItems[this.startIndex()];return t?t.get(e):0}}Object.defineProperty(Am,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(Am,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mm.classNames.concat([Am.className])});class Cm extends Am{constructor(){super(...arguments),Object.defineProperty(this,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_stackDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Op.new(this._root,{}))}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Cd}),Object.defineProperty(this,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_couldStackTo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]}),Object.defineProperty(this,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]}),Object.defineProperty(this,"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new fm(this,void 0,{})}),Object.defineProperty(this,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posXDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posYDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY"),this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY"),this._setRawDefault("vcx",1),this._setRawDefault("vcy",1),this._setRawDefault("valueXShow","valueXWorking"),this._setRawDefault("valueYShow","valueYWorking"),this._setRawDefault("openValueXShow","openValueXWorking"),this._setRawDefault("openValueYShow","openValueYWorking"),this._setRawDefault("lowValueXShow","lowValueXWorking"),this._setRawDefault("lowValueYShow","lowValueYWorking"),this._setRawDefault("highValueXShow","highValueXWorking"),this._setRawDefault("highValueYShow","highValueYWorking"),this._setRawDefault("lowValueXGrouped","low"),this._setRawDefault("lowValueYGrouped","low"),this._setRawDefault("highValueXGrouped","high"),this._setRawDefault("highValueYGrouped","high"),super._afterNew(),this.set("maskContent",!0),this._disposers.push(this.axisRanges.events.onAll((e=>{if("clear"===e.type)mh(e.oldValues,(e=>{this._removeAxisRange(e)}));else if("push"===e.type)this._processAxisRange(e.newValue);else if("setIndex"===e.type)this._processAxisRange(e.newValue);else if("insertIndex"===e.type)this._processAxisRange(e.newValue);else if("removeIndex"===e.type)this._removeAxisRange(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(e.value)}}))),this.states.create("hidden",{opacity:1,visible:!1}),this.onPrivate("startIndex",(()=>{this.root.events.once("frameended",(()=>{this.updateLegendValue()}))})),this.onPrivate("endIndex",(()=>{this.root.events.once("frameended",(()=>{this.updateLegendValue()}))})),this._makeFieldNames()}_processAxisRange(e){const t=Op.new(this._root,{});e.container=t,this.children.push(t),e.series=this;const i=e.axisDataItem;i.setRaw("isRange",!0);const r=i.component;if(r){r._processAxisRange(i,["range","series"]);const e=i.get("bullet");if(e){const t=e.get("sprite");t&&t.setPrivate("visible",!1)}const n=i.get("axisFill");n&&t.set("mask",n),r._seriesAxisRanges.push(i)}}_removeAxisRange(e){const t=e.axisDataItem,i=t.component;i.disposeDataItem(t),yh(i._seriesAxisRanges,t);const r=e.container;r&&r.dispose()}_updateFields(){super._updateFields(),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&mh(this.valueXFields,(e=>{if(this.get(e+"Field")){this._valueXFields.push(e);let t=this.get(e+"Show");this.__valueXShowFields.push(t),-1!=t.indexOf("Working")?this._valueXShowFields.push(t.split("Working")[0]):this._valueXShowFields.push(t)}})),this.valueYFields&&mh(this.valueYFields,(e=>{if(this.get(e+"Field")){this._valueYFields.push(e);let t=this.get(e+"Show");this.__valueYShowFields.push(t),-1!=t.indexOf("Working")?this._valueYShowFields.push(t.split("Working")[0]):this._valueYShowFields.push(t)}}))}_dispose(){super._dispose(),this._bullets={};const e=this.chart;e&&e.series.removeValue(this),vh(this.get("xAxis").series,this),vh(this.get("yAxis").series,this)}_min(e,t){let i=(r=this.getPrivate(e),n=t,null==r?n:null==n?r:n<r?n:r);var r,n;this.setPrivate(e,i)}_max(e,t){let i=(r=this.getPrivate(e),n=t,null==r?n:null==n?r:n>r?n:r);var r,n;this.setPrivate(e,i)}_shouldMakeBullet(e){const t=this.get("xAxis"),i=this.get("yAxis"),r=this.get("baseAxis");if(!t.inited||!i.inited)return!1;const n=this.get("minBulletDistance",0);if(n>0){let e=this.startIndex(),a=this.endIndex()-e;if(t==r){if(t.get("renderer").axisLength()/a<n/5)return!1}else if(i==r&&i.get("renderer").axisLength()/a<n/5)return!1}return null!=e.get(this._xField)&&null!=e.get(this._yField)}_makeFieldNames(){const e=this.get("xAxis"),t=this.get("yAxis"),i=e.getPrivate("name"),r=dd(i),n=t.getPrivate("name"),a=dd(n),s=e.get("renderer").getPrivate("letter"),o=t.get("renderer").getPrivate("letter"),l="open",u="low",c="high",h="Show";"ValueAxis"===e.className?(this._xField=this.get(i+s+h),this._xOpenField=this.get(l+r+s+h),this._xLowField=this.get(u+r+s+h),this._xHighField=this.get(c+r+s+h)):(this._xField=i+s,this._xOpenField=l+r+s,this._xLowField=u+r+s,this._xHighField=c+r+s),"ValueAxis"===t.className?(this._yField=this.get(n+o+h),this._yOpenField=this.get(l+a+o+h),this._yLowField=this.get(u+a+o+h),this._yHighField=this.get(c+a+o+h)):(this._yField=n+o,this._yOpenField=l+a+o,this._yLowField=u+a+o,this._yHighField=c+a+o)}_fixVC(){const e=this.get("xAxis"),t=this.get("yAxis"),i=this.get("baseAxis"),r=this.states.lookup("hidden"),n=this.get("sequencedInterpolation");if(r){let a=0;n&&(a=.999999999999),e===i?r.set("vcy",a):(t===i||r.set("vcy",a),r.set("vcx",a))}}_handleMaskBullets(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}_fixPosition(){const e=this.get("xAxis"),t=this.get("yAxis");this.set("x",e.x()-Jh(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0)),this.set("y",t.y()-Jh(t.get("centerY",0),t.height())-t.parent.get("paddingTop",0)),this.bulletsContainer.set("y",this.y()),this.bulletsContainer.set("x",this.x())}_prepareChildren(){super._prepareChildren(),this._bullets={},(this.isDirty("valueYShow")||this.isDirty("valueXShow")||this.isDirty("openValueYShow")||this.isDirty("openValueXShow")||this.isDirty("lowValueYShow")||this.isDirty("lowValueXShow")||this.isDirty("highValueYShow")||this.isDirty("highValueXShow"))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),(this.isDirty("xAxis")||this.isDirty("yAxis"))&&(this._valuesDirty=!0),this.set("width",this.get("xAxis").width()),this.set("height",this.get("yAxis").height()),this._handleMaskBullets();const e=this.get("xAxis"),t=this.get("yAxis"),i=this.get("baseAxis");let r;switch(this.get("tooltipPositionX")){case"open":r=this._xOpenField;break;case"low":r=this._xLowField;break;case"high":r=this._xHighField;break;default:r=this._xField}this._tooltipFieldX=r;let n;switch(this.get("tooltipPositionY")){case"open":n=this._yOpenField;break;case"low":n=this._yLowField;break;case"high":n=this._yHighField;break;default:n=this._yField}this._tooltipFieldY=n,this.isDirty("baseAxis")&&this._fixVC(),this._fixPosition();const a=this.get("stacked");if(this.isDirty("stacked")&&(a?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,a&&this._stack(),mh(this.dataItems,(i=>{mh(this._valueXShowFields,(e=>{let t=i.get(e);null!=t&&(a&&(t+=this.getStackedXValue(i,e)),this._min("minX",t),this._max("maxX",t))})),mh(this._valueYShowFields,(e=>{let t=i.get(e);null!=t&&(a&&(t+=this.getStackedYValue(i,e)),this._min("minY",t),this._max("maxY",t))})),e.processSeriesDataItem(i,this._valueXFields),t.processSeriesDataItem(i,this._valueYFields)})),e._seriesValuesDirty=!0,t._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&e.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&t.markDirtyExtremes()),this._markStakedDirtyStack(),this.get("tooltipDataItem")||this.updateLegendValue(void 0)),(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack(),this._dataGrouped||(e._groupSeriesData(this),t._groupSeriesData(this),this._dataGrouped=!0),this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("adjustedStartIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._sizeDirty){let r=this.startIndex(),n=this.endIndex(),a=this.get("minBulletDistance",0);if(a>0&&i&&(i.get("renderer").axisLength()/(n-r)>a?this._showBullets=!0:this._showBullets=!1),(this._psi!=r||this._pei!=n||this.isDirty("vcx")||this.isDirty("vcy")||this.isPrivateDirty("adjustedStartIndex")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;const a=this.get("vcx",1),s=this.get("vcy",1),o=this.get("stacked",!1),l=this.getPrivate("outOfSelection");if(i===e||!i)if(t._calculateTotals(),this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),l)t.markDirtySelectionExtremes();else for(let e=r;e<n;e++)this.processYSelectionDataItem(this.dataItems[e],s,o);if(i===t||!i)if(e._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),l)t.markDirtySelectionExtremes();else for(let e=r;e<n;e++)this.processXSelectionDataItem(this.dataItems[e],a,o);if((i===e||!i)&&("valueYWorking"!==this.get("valueYShow")||this.get("useSelectionExtremes"))){const e=this.getPrivate("selectionMinY");null!=e&&(this.setPrivateRaw("minY",e),t.markDirtyExtremes());const i=this.getPrivate("selectionMaxY");null!=i&&(this.setPrivateRaw("maxY",i),t.markDirtyExtremes())}if((i===t||!i)&&("valueXWorking"!==this.get("valueXShow")||this.get("useSelectionExtremes"))){const i=this.getPrivate("selectionMinX");null!=i&&(this.setPrivateRaw("minX",i),t.markDirtyExtremes());const r=this.getPrivate("selectionMaxX");null!=r&&(this.setPrivateRaw("maxX",r),e.markDirtyExtremes())}(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&e.markDirtySelectionExtremes(),(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&t.markDirtySelectionExtremes()}}}_makeRangeMask(){if(this.axisRanges.length>0){let e=this._mainContainerMask;null==e&&(e=this.children.push(mp.new(this._root,{})),this._mainContainerMask=e,e.set("draw",((t,i)=>{const r=this.parent;if(r){const e=this._root.container.width(),n=this._root.container.height();t.moveTo(-e,-n),t.lineTo(-e,2*n),t.lineTo(2*e,2*n),t.lineTo(2*e,-n),t.lineTo(-e,-n),this.axisRanges.each((e=>{const n=e.axisDataItem.get("axisFill");if(r&&n){let e=n.get("draw");e&&e(t,i)}}))}this.mainContainer._display.mask=e._display}))),e.markDirty(),e._markDirtyKey("fill")}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren(),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}_stack(){const e=this.chart;if(e){const t=e.series.indexOf(this);if(this._couldStackTo=[],t>0){let i;for(let r=t-1;r>=0&&(i=e.series.getIndex(r),i.get("xAxis")!==this.get("xAxis")||i.get("yAxis")!==this.get("yAxis")||i.className!==this.className||(this._couldStackTo.push(i),i.get("stacked")));r--);}this._stackDataItems()}}_unstack(){Dh(this._reallyStackedTo,((e,t)=>{delete t._stackedSeries[this.uid]})),this._reallyStackedTo={},mh(this.dataItems,(e=>{e.setRaw("stackToItemY",void 0),e.setRaw("stackToItemX",void 0)}))}_handleRemoved(){const e=this.get("xAxis");e&&e._handleSeriesRemoved();const t=this.get("yAxis");t&&t._handleSeriesRemoved()}_stackDataItems(){const e=this.get("baseAxis"),t=this.get("xAxis"),i=this.get("yAxis");let r,n;e===t?(r="valueY",n="stackToItemY"):e===i&&(r="valueX",n="stackToItemX");let a=this._couldStackTo.length,s=0;const o=this.get("stackToNegative");this._reallyStackedTo={},mh(this.dataItems,(e=>{for(let t=0;t<a;t++){let i=this._couldStackTo[t],l=i.dataItems[s],u=e.get(r);if(l){let s=l.get(r);if(o){if(!uh(u))break;if(uh(s)){if(t==a-1&&e.setRaw(n,void 0),u>=0&&s>=0){e.setRaw(n,l),this._reallyStackedTo[i.uid]=i,i._stackedSeries[this.uid]=this;break}if(u<0&&s<0){e.setRaw(n,l),this._reallyStackedTo[i.uid]=i,i._stackedSeries[this.uid]=this;break}}}else if(uh(u)&&uh(s)){e.setRaw(n,l),this._reallyStackedTo[i.uid]=i,i._stackedSeries[this.uid]=this;break}}}s++}))}processXSelectionDataItem(e,t,i){mh(this.__valueXShowFields,(r=>{let n=e.get(r);null!=n&&(i&&(n+=this.getStackedXValueWorking(e,r)),this._min("selectionMinX",n),this._max("selectionMaxX",n*t))}))}processYSelectionDataItem(e,t,i){mh(this.__valueYShowFields,(r=>{let n=e.get(r);null!=n&&(i&&(n+=this.getStackedYValueWorking(e,r)),this._min("selectionMinY",n),this._max("selectionMaxY",n*t))}))}getStackedYValueWorking(e,t){const i=e.get("stackToItemY");if(i){const e=i.component;return i.get(t,0)*e.get("vcy",1)+this.getStackedYValueWorking(i,t)}return 0}getStackedXValueWorking(e,t){const i=e.get("stackToItemX");if(i){const e=i.component;return i.get(t,0)*e.get("vcx",1)+this.getStackedXValueWorking(i,t)}return 0}getStackedYValue(e,t){const i=e.get("stackToItemY");return i?i.get(t,0)+this.getStackedYValue(i,t):0}getStackedXValue(e,t){const i=e.get("stackToItemX");return i?i.get(t,0)+this.getStackedXValue(i,t):0}createLegendMarker(e){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0,this.markDirty()}_markDataSetDirty(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}_clearDirty(){super._clearDirty(),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}_positionBullet(e){let t=e.get("sprite");if(t){let i=t.dataItem,r=e.get("locationX",i.get("locationX",.5)),n=e.get("locationY",i.get("locationY",.5)),a=this.get("xAxis"),s=this.get("yAxis"),o=a.getDataItemPositionX(i,this._xField,r,this.get("vcx",1)),l=s.getDataItemPositionY(i,this._yField,n,this.get("vcy",1)),u=this.getPoint(o,l),c=i.get("left",u.x),h=i.get("right",u.x),d=i.get("top",u.y),p=i.get("bottom",u.y),f=0,m=0,g=h-c,b=p-d;if(this._shouldShowBullet(o,l)){t.setPrivate("visible",!e.getPrivate("hidden"));let a=e.get("field");const s=this.get("baseAxis"),h=this.get("xAxis"),d=this.get("yAxis");if(void 0!=a){let e;s==h?("value"==a?e=this._yField:"open"==a?e=this._yOpenField:"high"==a?e=this._yHighField:"low"==a&&(e=this._yLowField),e&&(l=d.getDataItemPositionY(i,e,0,this.get("vcy",1)),u=d.get("renderer").positionToPoint(l),m=u.y,f=c+g*r)):("value"==a?e=this._xField:"open"==a?e=this._xOpenField:"high"==a?e=this._xHighField:"low"==a&&(e=this._xLowField),e&&(o=h.getDataItemPositionX(i,e,0,this.get("vcx",1)),u=h.get("renderer").positionToPoint(o),f=u.x,m=p-b*n))}else f=c+g*r,m=p-b*n;const y=e.get("stacked");if(y){const e=this.chart;if(s==h){let i=this._bullets[o+"_"+l];if(i){let r=i.bounds(),n=t.localBounds(),a=m;m=r.top,"down"==y?m=r.bottom-n.top:"auto"==y?e&&(a<e.plotContainer.height()/2?m=r.bottom-n.top:m+=n.bottom):m+=n.bottom}this._bullets[o+"_"+l]=t}else{let i=this._bullets[o+"_"+l];if(i){let r=i.bounds(),n=t.localBounds(),a=f;f=r.right,"down"==y?f=r.left-n.right:"auto"==y?e&&(a<e.plotContainer.width()/2?f=r.left-n.right:f-=n.left):f-=n.left}this._bullets[o+"_"+l]=t}}t.isType("Label")&&(t.setPrivate("maxWidth",Math.abs(g)),t.setPrivate("maxHeight",Math.abs(b))),t.setAll({x:f,y:m})}else t.setPrivate("visible",!1)}}_shouldShowBullet(e,t){return this._showBullets}setDataSet(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;const t="datasetchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,id:e})}}resetGrouping(){Dh(this._dataSets,((e,t)=>{t!=this._mainDataItems&&mh(t,(e=>{this.disposeDataItem(e)}))})),this._dataSets={},this._dataItems=this.mainDataItems}_handleDataSetChange(){mh(this._dataItems,(e=>{let t=e.bullets;t&&mh(t,(e=>{if(e){let t=e.get("sprite");t&&t.setPrivate("visible",!1)}}))})),this._selectionProcessed=!1}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return Kc(this,void 0,void 0,(function*(){this._fixVC();let i=[];i.push(t.show.call(this,e).then((()=>{this._isShowing=!1;let e=this.get("xAxis"),t=this.get("yAxis"),i=this.get("baseAxis");t!==i&&t.markDirtySelectionExtremes(),e!==i&&e.markDirtySelectionExtremes()}))),i.push(this.bulletsContainer.show(e)),i.push(this._sequencedShowHide(!0,e)),yield Promise.all(i)}))}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return Kc(this,void 0,void 0,(function*(){this._fixVC();let i=[];i.push(t.hide.call(this,e).then((()=>{this._isHiding=!1}))),i.push(this.bulletsContainer.hide(e)),i.push(this._sequencedShowHide(!1,e)),yield Promise.all(i)}))}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return Kc(this,void 0,void 0,(function*(){const r=[i.showDataItem.call(this,e,t)];uh(t)||(t=this.get("stateAnimationDuration",0));const n=this.get("stateAnimationEasing");mh(this._valueFields,(i=>{r.push(e.animate({key:i+"Working",to:e.get(i),duration:t,easing:n}).waitForStop())})),yield Promise.all(r)}))}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return Kc(this,void 0,void 0,(function*(){const r=[i.hideDataItem.call(this,e,t)],n=this.states.create("hidden",{});uh(t)||(t=n.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const a=n.get("stateAnimationEasing",this.get("stateAnimationEasing")),s=this.get("xAxis"),o=this.get("yAxis"),l=this.get("baseAxis"),u=this.get("stacked");if(l!==s&&l||mh(this._valueYFields,(i=>{let n=o.getPrivate("min"),s=o.baseValue();uh(n)&&n>s&&(s=n),u&&(s=0),null!=e.get(i)&&r.push(e.animate({key:i+"Working",to:s,duration:t,easing:a}).waitForStop())})),l===o||!l){let i=s.getPrivate("min"),n=s.baseValue();uh(i)&&i>n&&(n=i),u&&(n=0),mh(this._valueXFields,(i=>{null!=e.get(i)&&r.push(e.animate({key:i+"Working",to:n,duration:t,easing:a}).waitForStop())}))}yield Promise.all(r)}))}_markDirtyStack(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}_markStakedDirtyStack(){const e=this._stackedSeries;e&&Dh(e,((e,t)=>{t._stackDirty||t._markDirtyStack()}))}_afterChanged(){super._afterChanged(),this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}showDataItemTooltip(e){this.getPrivate("doNotUpdateLegend")||(this.updateLegendMarker(e),this.updateLegendValue(e));const t=this.get("tooltip");if(t)if(!this.isHidden()&&this.get("visible")){if(t._setDataItem(e),e){let i=this.get("locationX",0),r=this.get("locationY",1),n=e.get("locationX",i),a=e.get("locationY",r);const s=this.get("xAxis"),o=this.get("yAxis"),l=this.get("vcx",1),u=this.get("vcy",1),c=s.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*n,l),h=o.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*a,u),d=this.getPoint(c,h);let p=!0;if(mh(this._valueFields,(t=>{null==e.get(t)&&(p=!1)})),p){const i=this.chart;i&&i.inPlot(d)?(t.label.text.markDirtyText(),t.set("tooltipTarget",this._getTooltipTarget(e)),t.set("pointTo",this._display.toGlobal({x:d.x,y:d.y}))):t._setDataItem(void 0)}else t._setDataItem(void 0)}}else this.hideTooltip()}hideTooltip(){const e=this.get("tooltip");return e&&e.set("tooltipTarget",this),super.hideTooltip()}_getTooltipTarget(e){if("bullet"==this.get("seriesTooltipTarget")){const t=e.bullets;if(t&&t.length>0){const e=t[0].get("sprite");if(e)return e}}return this}updateLegendValue(e){const t=this.get("legendDataItem");if(t){const i=t.get("label");if(i){let t="";e?(i._setDataItem(e),t=this.get("legendLabelText",i.get("text",this.get("name","")))):(i._setDataItem(this._emptyDataItem),t=this.get("legendRangeLabelText",this.get("legendLabelText",i.get("text",this.get("name",""))))),i.set("text",t)}const r=t.get("valueLabel");if(r){let t="";e?(r._setDataItem(e),t=this.get("legendValueText",r.get("text",""))):(r._setDataItem(this._emptyDataItem),t=this.get("legendRangeValueText",r.get("text",""))),r.set("text",t)}}}_getItemReaderLabel(){let e="X: {"+this._xField;return this.get("xAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}; Y: {"+this._yField,this.get("yAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}",e}getPoint(e,t){let i=this.get("xAxis").get("renderer").positionToCoordinate(e),r=this.get("yAxis").get("renderer").positionToCoordinate(t),n=999999999;return r<-n&&(r=-n),r>n&&(r=n),i<-n&&(i=-n),i>n&&(i=n),{x:i,y:r}}_shouldInclude(e){return!0}handleCursorHide(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange(),this.get("xAxis")._markDirtyKey("start"),this.get("yAxis")._markDirtyKey("start"),this.resetExtremes()}resetExtremes(){this.setPrivate("selectionMinX",void 0),this.setPrivate("selectionMaxX",void 0),this.setPrivate("selectionMinY",void 0),this.setPrivate("selectionMaxY",void 0),this.setPrivate("minX",void 0),this.setPrivate("minY",void 0),this.setPrivate("maxX",void 0),this.setPrivate("maxY",void 0)}createAxisRange(e){return this.axisRanges.push({axisDataItem:e})}get mainDataItems(){return this._mainDataItems}_adjustStartIndex(e){const t=this.get("xAxis");if(this.get("baseAxis")==t&&t.isType("DateAxis")){const i=t.baseDuration(),r=t.getPrivate("selectionMin",t.getPrivate("min",0)),n=i*this.get("locationX",.5);let a=-1/0;for(;a<r;){const t=this.dataItems[e];if(!t)break;{const i=t.open;if(a=i?i.valueX:t.get("valueX",0),a+=n,!(a<r))break;e++}}}return e}}Object.defineProperty(Cm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"}),Object.defineProperty(Cm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Am.classNames.concat([Cm.className])});Array.prototype.slice;function Rm(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Im(e){return function(){return e}}function Dm(e){this._context=e}function jm(e){return new Dm(e)}Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};const Lm=Math.PI,Nm=2*Lm,Mm=1e-6,$m=Nm-Mm;function Fm(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}class Bm{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Fm:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Fm;const i=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*i)/i+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,n,a){this._append`C${+e},${+t},${+i},${+r},${this._x1=+n},${this._y1=+a}`}arcTo(e,t,i,r,n){if(e=+e,t=+t,i=+i,r=+r,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=this._x1,s=this._y1,o=i-e,l=r-t,u=a-e,c=s-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Mm)if(Math.abs(c*o-l*u)>Mm&&n){let d=i-a,p=r-s,f=o*o+l*l,m=d*d+p*p,g=Math.sqrt(f),b=Math.sqrt(h),y=n*Math.tan((Lm-Math.acos((f+h-m)/(2*g*b)))/2),v=y/b,_=y/g;Math.abs(v-1)>Mm&&this._append`L${e+v*u},${t+v*c}`,this._append`A${n},${n},0,0,${+(c*d>u*p)},${this._x1=e+_*o},${this._y1=t+_*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,i,r,n,a){if(e=+e,t=+t,a=!!a,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),o=i*Math.sin(r),l=e+s,u=t+o,c=1^a,h=a?r-n:n-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Mm||Math.abs(this._y1-u)>Mm)&&this._append`L${l},${u}`,i&&(h<0&&(h=h%Nm+Nm),h>$m?this._append`A${i},${i},0,1,${c},${e-s},${t-o}A${i},${i},0,1,${c},${this._x1=l},${this._y1=u}`:h>Mm&&this._append`A${i},${i},0,${+(h>=Lm)},${c},${this._x1=e+i*Math.cos(n)},${this._y1=t+i*Math.sin(n)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Um(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(null==i)t=null;else{const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);t=e}return e},()=>new Bm(t)}function zm(e){return e[0]}function Hm(e){return e[1]}function Vm(e,t){var i=Im(!0),r=null,n=jm,a=null,s=Um(o);function o(o){var l,u,c,h=(o=Rm(o)).length,d=!1;for(null==r&&(a=n(c=s())),l=0;l<=h;++l)!(l<h&&i(u=o[l],l,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,l,o),+t(u,l,o));if(c)return a=null,c+""||null}return e="function"===typeof e?e:void 0===e?zm:Im(e),t="function"===typeof t?t:void 0===t?Hm:Im(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Im(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Im(+e),o):t},o.defined=function(e){return arguments.length?(i="function"===typeof e?e:Im(!!e),o):i},o.curve=function(e){return arguments.length?(n=e,null!=r&&(a=n(r)),o):n},o.context=function(e){return arguments.length?(null==e?r=a=null:a=n(r=e),o):r},o}function Gm(e,t,i){var r=null,n=Im(!0),a=null,s=jm,o=null,l=Um(u);function u(u){var c,h,d,p,f,m=(u=Rm(u)).length,g=!1,b=new Array(m),y=new Array(m);for(null==a&&(o=s(f=l())),c=0;c<=m;++c){if(!(c<m&&n(p=u[c],c,u))===g)if(g=!g)h=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=c-1;d>=h;--d)o.point(b[d],y[d]);o.lineEnd(),o.areaEnd()}g&&(b[c]=+e(p,c,u),y[c]=+t(p,c,u),o.point(r?+r(p,c,u):b[c],i?+i(p,c,u):y[c]))}if(f)return o=null,f+""||null}function c(){return Vm().defined(n).curve(s).context(a)}return e="function"===typeof e?e:void 0===e?zm:Im(+e),t="function"===typeof t?t:Im(void 0===t?0:+t),i="function"===typeof i?i:void 0===i?Hm:Im(+i),u.x=function(t){return arguments.length?(e="function"===typeof t?t:Im(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"===typeof t?t:Im(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Im(+e),u):r},u.y=function(e){return arguments.length?(t="function"===typeof e?e:Im(+e),i=null,u):t},u.y0=function(e){return arguments.length?(t="function"===typeof e?e:Im(+e),u):t},u.y1=function(e){return arguments.length?(i=null==e?null:"function"===typeof e?e:Im(+e),u):i},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(i)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(e){return arguments.length?(n="function"===typeof e?e:Im(!!e),u):n},u.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),u):s},u.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),u):a},u}class Ym extends Cm{constructor(){super(...arguments),Object.defineProperty(this,"_endIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Vm()}),Object.defineProperty(this,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Gm()}),Object.defineProperty(this,"_legendStroke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_legendFill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"strokes",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>mp._new(this._root,{themeTags:bd(this.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template]))))}),Object.defineProperty(this,"fills",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new Id(ep.new({}),(()=>mp._new(this._root,{themeTags:bd(this.strokes.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template]))))}),Object.defineProperty(this,"_fillTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousPoint",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]}),Object.defineProperty(this,"_dindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_sindex",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this._fillGenerator.y0((function(e){return e[3]})),this._fillGenerator.x0((function(e){return e[2]})),this._fillGenerator.y1((function(e){return e[1]})),this._fillGenerator.x1((function(e){return e[0]})),super._afterNew()}makeStroke(e){const t=this.mainContainer.children.push(e.make());return e.push(t),t}makeFill(e){const t=this.mainContainer.children.push(e.make());return e.push(t),t}_updateChildren(){this._strokeTemplate=void 0,this._fillTemplate=void 0;let e=this.get("xAxis"),t=this.get("yAxis");if(this.isDirty("stroke")){const e=this.get("stroke");this.strokes.template.set("stroke",e);const t=this._legendStroke;t&&t.states.lookup("default").set("stroke",e)}if(this.isDirty("fill")){const e=this.get("fill");this.fills.template.set("fill",e);const t=this._legendFill;t&&t.states.lookup("default").set("fill",e)}if(this.isDirty("fillPattern")){const e=this.get("fillPattern");this.fills.template.set("fillPattern",e);const t=this._legendFill;t&&t.states.lookup("default").set("fillPattern",e)}if(this.isDirty("curveFactory")){const e=this.get("curveFactory");e&&(this._strokeGenerator.curve(e),this._fillGenerator.curve(e))}if(e.inited&&t.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty||this.isDirty("connect")||this.isDirty("curveFactory")){this.fills.each((e=>{e.setPrivate("visible",!1)})),this.strokes.each((e=>{e.setPrivate("visible",!1)})),this.axisRanges.each((e=>{let t=e.fills;t&&t.each((e=>{e.setPrivate("visible",!1)}));let i=e.strokes;i&&i.each((e=>{e.setPrivate("visible",!1)}))}));let e=this.startIndex(),t=this.strokes.template.get("templateField"),i=this.fills.template.get("templateField"),r=!0,n=!0;t&&(r=!1),i&&(n=!1);for(let o=e-1;o>=0;o--){let a=this.dataItems[o],s=!0,l=a.dataContext;if(t&&l[t]&&(r=!0),i&&l[i]&&(n=!0),mh(this._valueFields,(e=>{uh(a.get(e))||(s=!1)})),s&&r&&n){e=o;break}}let a=this.dataItems.length,s=this.endIndex();if(s<a){s++;for(let e=s;e<a;e++){let t=this.dataItems[e],i=!0;if(mh(this._valueFields,(e=>{uh(t.get(e))||(i=!1)})),i){s=e+1;break}}}if(e>0&&e--,this._endIndex=s,this._clearGraphics(),this._sindex=0,this._dindex=e,1==this.dataItems.length)this._startSegment(0);else for(;this._dindex<s-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;super._updateChildren()}_clearGraphics(){this.strokes.clear(),this.fills.clear(),this.axisRanges.each((e=>{e.fills.clear(),e.strokes.clear()}))}_startSegment(e){let t=this._endIndex,i=t;const r=this.get("autoGapCount"),n=this.get("connect"),a=this.makeFill(this.fills),s=this._fillTemplate,o=this.fills.template;s&&s!=o&&(a.template=s),a.setPrivate("visible",!0);const l=this.makeStroke(this.strokes),u=this._strokeTemplate;u&&u!=this.strokes.template&&(l.template=u),l.setPrivate("visible",!0);let c=this.get("xAxis"),h=this.get("yAxis"),d=this.get("baseAxis"),p=this.get("vcx",1),f=this.get("vcy",1),m=this._xField,g=this._yField,b=this._xOpenField,y=this._yOpenField;const v=this.get("openValueXField"),_=this.get("openValueYField");v||(b=this._xField),_||(y=this._yField);const w=this.get("stacked"),x=c.basePosition(),P=h.basePosition();let E;E=d===h?this._yField:this._xField;const k=[];let S=[];k.push(S);const O=this.strokes.template.get("templateField"),T=this.fills.template.get("templateField");let A=this.get("locationX",.5),C=this.get("locationY",.5),R=this.get("openLocationX",A),I=this.get("openLocationY",C);const D=this.get("minDistance",0);let j,L=this.fills.template.get("visible");this.axisRanges.length>0&&(L=!0);let N=!1;(w||v||_)&&(N=!0);const M={points:S,segments:k,stacked:w,getOpen:N,basePosX:x,basePosY:P,fillVisible:L,xField:m,yField:g,xOpenField:b,yOpenField:y,vcx:p,vcy:f,baseAxis:d,xAxis:c,yAxis:h,locationX:A,locationY:C,openLocationX:R,openLocationY:I,minDistance:D};let $=this._strokeTemplate,F=this._fillTemplate;for(j=e;j<i;j++){this._dindex=j;const t=this._dataItems[j];let s=t.get(m),o=t.get(g);if(null==s||null==o?n||(S=[],k.push(S),M.points=S):this._getPoints(t,M),O){let r=t.dataContext[O];if(r){if(r instanceof ep||(r=ep.new(r)),this._strokeTemplate=r,j>e){i=j;break}$=r,l.template=r}}if(T){let r=t.dataContext[T];if(r){if(r instanceof ep||(r=ep.new(r)),this._fillTemplate=r,j>e){i=j;break}F=r,a.template=r}}if(!n){let e=this.dataItems[j+1];e&&d.shouldGap(t,e,r,E)&&(S=[],k.push(S),M.points=S)}}a.setRaw("userData",[e,j]),l.setRaw("userData",[e,j]),j===t&&this._endLine(S,k[0][0]),l&&this._drawStroke(l,k),a&&this._drawFill(a,k),this.axisRanges.each((t=>{const i=t.container,r=t.fills,n=this.makeFill(r);i&&i.children.push(n),n.setPrivate("visible",!0),this._drawFill(n,k);const a=t.strokes,s=this.makeStroke(a);i&&i.children.push(s),$&&$!=this.strokes.template&&(s.template=$),F&&F!=this.fills.template&&(n.template=F),s.setPrivate("visible",!0),this._drawStroke(s,k),n.setRaw("userData",[e,j]),s.setRaw("userData",[e,j])}))}_getPoints(e,t){let i=t.points,r=e.get("locationX",t.locationX),n=e.get("locationY",t.locationY),a=t.xAxis.getDataItemPositionX(e,t.xField,r,t.vcx),s=t.yAxis.getDataItemPositionY(e,t.yField,n,t.vcy);if(this._shouldInclude(a)){const r=this.getPoint(a,s),n=[r.x,r.y];if(r.x+=this._x,r.y+=this._y,e.set("point",r),t.fillVisible){let i=a,r=s;if(t.baseAxis===t.xAxis?r=t.basePosY:t.baseAxis===t.yAxis&&(i=t.basePosX),t.getOpen){let n=e.get(t.xOpenField),a=e.get(t.yOpenField);if(null!=n&&null!=a){let n=e.get("openLocationX",t.openLocationX),a=e.get("openLocationY",t.openLocationY);if(t.stacked){let s=e.get("stackToItemX"),o=e.get("stackToItemY");s?(i=t.xAxis.getDataItemPositionX(s,t.xField,n,s.component.get("vcx")),rh(i)&&(i=t.basePosX)):i=t.yAxis===t.baseAxis?t.basePosX:t.xAxis.getDataItemPositionX(e,t.xOpenField,n,t.vcx),o?(r=t.yAxis.getDataItemPositionY(o,t.yField,a,o.component.get("vcy")),rh(r)&&(r=t.basePosY)):r=t.xAxis===t.baseAxis?t.basePosY:t.yAxis.getDataItemPositionY(e,t.yOpenField,a,t.vcy)}else i=t.xAxis.getDataItemPositionX(e,t.xOpenField,n,t.vcx),r=t.yAxis.getDataItemPositionY(e,t.yOpenField,a,t.vcy)}}let o=this.getPoint(i,r);n[2]=o.x,n[3]=o.y}if(t.minDistance>0){const e=n[0],r=n[1],a=n[2],s=n[3],o=this._previousPoint,l=o[0],u=o[1],c=o[2],h=o[3];(Math.hypot(e-l,r-u)>t.minDistance||a&&s&&Math.hypot(a-c,s-h)>t.minDistance)&&(i.push(n),this._previousPoint=n)}else i.push(n)}}_endLine(e,t){}_drawStroke(e,t){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",(e=>{mh(t,(t=>{this._strokeGenerator.context(e),this._strokeGenerator(t)}))}))}_drawFill(e,t){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",(e=>{mh(t,(t=>{this._fillGenerator.context(e),this._fillGenerator(t)}))}))}_processAxisRange(e){super._processAxisRange(e),e.fills=new Id(ep.new({}),(()=>mp._new(this._root,{themeTags:bd(e.fills.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template,e.fills.template]))),e.strokes=new Id(ep.new({}),(()=>mp._new(this._root,{themeTags:bd(e.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template,e.strokes.template])))}createLegendMarker(e){const t=this.get("legendDataItem");if(t){const e=t.get("marker"),i=t.get("markerRectangle");i&&i.setPrivate("visible",!1),e.set("background",gp.new(e._root,{fillOpacity:0,fill:_d(0)}));const r=e.children.push(mp._new(e._root,{themeTags:["line","series","legend","marker","stroke"],interactive:!1},[this.strokes.template]));this._legendStroke=r;const n=e.children.push(mp._new(e._root,{themeTags:["line","series","legend","marker","fill"]},[this.fills.template]));this._legendFill=n;const a=this._root.interfaceColors.get("disabled");if(r.states.create("disabled",{fill:a,stroke:a}),n.states.create("disabled",{fill:a,stroke:a}),this.bullets.length>0){const t=this.bullets.getIndex(0);if(t){const i=t(e._root,this,new fm(this,{legend:!0},{}));if(i){const t=i.get("sprite");t instanceof mp&&t.states.create("disabled",{fill:a,stroke:a}),t&&(t.set("tooltipText",void 0),t.set("tooltipHTML",void 0),e.children.push(t),t.setAll({x:e.width()/2,y:e.height()/2}),e.events.on("boundschanged",(()=>{t.setAll({x:e.width()/2,y:e.height()/2})})))}}}}}}Object.defineProperty(Ym,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineSeries"}),Object.defineProperty(Ym,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Cm.classNames.concat([Ym.className])});class Wm extends Op{constructor(){super(...arguments),Object.defineProperty(this,"_alwaysShow",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Em.new(this._root,{themeTags:["x"]}))}),Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Em.new(this._root,{themeTags:["y"]}))}),Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(mp.new(this._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_lastPoint2",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=bd(this._settings.themeTags,["xy","cursor"]),super._afterNew(),this.setAll({width:eh,height:eh,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout((()=>{this.setPrivate("visible",!0)}),500)),this._disposers.push(this.lineX.events.on("positionchanged",(()=>{this._handleXLine()}))),this._disposers.push(this.lineY.events.on("positionchanged",(()=>{this._handleYLine()}))),this._disposers.push(this.lineX.events.on("focus",(()=>this._handleLineFocus()))),this._disposers.push(this.lineX.events.on("blur",(()=>this._handleLineBlur()))),this._disposers.push(this.lineY.events.on("focus",(()=>this._handleLineFocus()))),this._disposers.push(this.lineY.events.on("blur",(()=>this._handleLineBlur()))),zh("keyboardevents")&&this._disposers.push(Bh(document,"keydown",(e=>{this._handleLineMove(qh(e),e.ctrlKey)})))}_setUpTouch(){const e=this.chart;e&&(e.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}_handleXLine(){let e=this.lineX.x(),t=!0;(e<0||e>this.width())&&(t=!1),this.lineX.setPrivate("visible",t)}_handleYLine(){let e=this.lineY.y(),t=!0;(e<0||e>this.height())&&(t=!1),this.lineY.setPrivate("visible",t)}_handleLineMove(e,t){let i="";const r=this.chart;let n;if(r&&r.xAxes.length){this._root.focused(this.lineX)?(i="positionX",n=r.xAxes.getIndex(0)):this._root.focused(this.lineY)&&(n=r.yAxes.getIndex(0),i="positionY");let a=1;if(t&&(a=5),n){let t,r=n.get("renderer").get("inversed",!1);"ArrowRight"==e||"ArrowDown"==e?t=1:"ArrowLeft"==e||"ArrowUp"==e?t=-1:"Tab"==e&&(t=0),null!=t&&(r&&(t*=-1),this.set(i,n.nextPosition(t*a)))}}}_handleLineFocus(){this._alwaysShow=this.get("alwaysShow",!1),this.setAll({positionX:this.getPrivate("positionX",0),positionY:this.getPrivate("positionY",0),alwaysShow:!0}),this._handleLineMove("Tab")}_handleLineBlur(){(this.lineX.isFocus()||this.lineY.isFocus())&&this.setAll({positionX:void 0,positionY:void 0,alwaysShow:this._alwaysShow})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("xAxis")){this._tooltipX=!1;const e=this.get("xAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipX=!0,this._disposers.push(t.on("pointTo",(()=>{this._updateXLine(t)}))))}}if(this.isDirty("yAxis")){this._tooltipY=!1;const e=this.get("yAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipY=!0,this._disposers.push(t.on("pointTo",(()=>{this._updateYLine(t)}))))}}}_handleSyncWith(){const e=this.chart;if(e){const t=this.get("syncWith"),i=[];t&&mh(t,(e=>{const t=e.chart;t&&i.push(t)})),e._otherCharts=i}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){const e=this.get("positionX"),t=this.get("positionY");null==e&&null==t?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(e){let t=np(this._display.toLocal(e.get("pointTo",{x:0,y:0})).x,3);this._toX!=t&&(this.lineX.animate({key:"x",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toX=t)}_updateYLine(e){let t=np(this._display.toLocal(e.get("pointTo",{x:0,y:0})).y,3);this._toY!=t&&(this.lineY.animate({key:"y",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toY=t)}_drawLines(){this.lineX.set("draw",(e=>{e.moveTo(0,0),e.lineTo(0,this.height())})),this.lineY.set("draw",(e=>{e.moveTo(0,0),e.lineTo(this.width(),0)}))}updateCursor(){this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0)))),this.handleMove()}_setChart(e){this.chart=e,this._handleSyncWith();const t=e.plotContainer;this.events.on("boundschanged",(()=>{this._disposers.push(this.setTimeout((()=>{this.updateCursor()}),50))})),zh("touchevents")&&(this._disposers.push(t.events.on("click",(e=>{Gh(e.originalEvent)&&this._handleMove(e)}))),this._setUpTouch()),this._disposers.push(t.events.on("pointerdown",(e=>{this._handleCursorDown(e)}))),this._disposers.push(t.events.on("globalpointerup",(e=>{this._handleCursorUp(e),e.native||this.isHidden()||this._handleMove(e)}))),this._disposers.push(t.events.on("globalpointermove",(e=>{(this.get("syncWith")||0!=Ch(t._downPoints).length||e.native||!this.isHidden())&&(this._handleMove(e),Math.hypot(this._lastPoint2.x-e.point.x,this._lastPoint2.y-e.point.y)>1&&(this._handleLineBlur(),this._lastPoint2=e.point))})));const i=this.parent;i&&i.children.moveValue(this.selection)}_inPlot(e){const t=this.chart;return!!t&&t.inPlot(e)}_handleCursorDown(e){if(2==e.originalEvent.button)return;const t=e.point;let i=this._display.toLocal(t);const r=this.chart;if(this.selection.set("draw",(()=>{})),r&&this._inPlot(i)){if(this._downPoint=i,"none"!=this.get("behavior")){this.selection.show();const t="selectstarted";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}let t=this._getPosition(i).x,r=this._getPosition(i).y;this.setPrivate("downPositionX",t),this.setPrivate("downPositionY",r)}}_handleCursorUp(e){if(this._downPoint){const t=this.get("behavior","none");if("none"!=t){"z"===t.charAt(0)&&this.selection.hide();const i=e.point;let r=this._display.toLocal(i);const n=this._downPoint,a=this.get("moveThreshold",1);if(r&&n){let i=!1;if("zoomX"!==t&&"zoomXY"!==t&&"selectX"!==t&&"selectXY"!==t||Math.abs(r.x-n.x)>a&&(i=!0),"zoomY"!==t&&"zoomXY"!==t&&"selectY"!==t&&"selectXY"!==t||Math.abs(r.y-n.y)>a&&(i=!0),i){const t="selectended";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}else{const t="selectcancelled";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent})}}}}this._downPoint=void 0}_handleMove(e){if(this.getPrivate("visible")){const t=this.chart;if(t&&Ch(t.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);const i=e.point,r=this._lastPoint;if(Math.round(r.x)===Math.round(i.x)&&Math.round(r.y)===Math.round(i.y))return;this._lastPoint=i,this.setPrivate("lastPoint",i),this.handleMove({x:i.x,y:i.y},!1,e.originalEvent)}}_getPosition(e){return{x:e.x/this.width(),y:e.y/this.height()}}handleMove(e,t,i){e||(e=this._movePoint);const r=this.get("alwaysShow");if(!e)return void this.hide(0);this._movePoint=e;let n=this._display.toLocal(e),a=this.chart;if(a&&(this._inPlot(n)||this._downPoint)){if(a._movePoint=e,this.isHidden()){this.show();"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",(()=>{}))}let s=n.x,o=n.y,l=this._getPosition(n);this.setPrivate("point",n);let u=this.get("snapToSeries");this._downPoint&&(u=void 0);let c=this.get("positionX"),h=l.x;uh(c)&&(h=c);let d=this.get("positionY"),p=l.y;uh(d)&&(p=d),this.setPrivate("positionX",h),this.setPrivate("positionY",p);const f=this._getPoint(h,p);if(s=f.x,o=f.y,a.xAxes.each((e=>{e._handleCursorPosition(h,u),r&&e.handleCursorShow()})),a.yAxes.each((e=>{e._handleCursorPosition(p,u),r&&e.handleCursorShow()})),!t){a._handleCursorPosition();const t="cursormoved";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,point:e,originalEvent:i})}this._updateLines(s,o),a.arrangeTooltips()}else if(!this._downPoint&&!r){this.hide(0);const e="cursorhidden";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(n)}_getPoint(e,t){return{x:this.width()*e,y:this.height()*t}}_updateLines(e,t){this._tooltipX||this.lineX.set("x",e),this._tooltipY||this.lineY.set("y",t),this._drawLines()}_updateSelection(e){const t=this.selection,i=this.get("behavior"),r=this.width(),n=this.height();e.x<0&&(e.x=0),e.x>r&&(e.x=r),e.y<0&&(e.y=0),e.y>n&&(e.y=n),t.set("draw",(t=>{const a=this._downPoint;a&&("zoomXY"===i||"selectXY"===i?(t.moveTo(a.x,a.y),t.lineTo(a.x,e.y),t.lineTo(e.x,e.y),t.lineTo(e.x,a.y),t.lineTo(a.x,a.y)):"zoomX"===i||"selectX"===i?(t.moveTo(a.x,0),t.lineTo(a.x,n),t.lineTo(e.x,n),t.lineTo(e.x,0),t.lineTo(a.x,0)):"zoomY"!==i&&"selectY"!==i||(t.moveTo(0,a.y),t.lineTo(r,a.y),t.lineTo(r,e.y),t.lineTo(0,e.y),t.lineTo(0,a.y)))}))}_onHide(){if(this.isHidden()){let e=this.chart;e&&(e.xAxes.each((e=>{e.handleCursorHide()})),e.yAxes.each((e=>{e.handleCursorHide()})),e.series.each((e=>{e.handleCursorHide()})))}super._onHide()}_onShow(){if(!this.isHidden()){let e=this.chart;e&&(e.xAxes.each((e=>{e.handleCursorShow()})),e.yAxes.each((e=>{e.handleCursorShow()})))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}}Object.defineProperty(Wm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(Wm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Op.classNames.concat([Wm.className])});const Xm=class extends Gp{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}};const Zm=function(e){let{data:t}=e;const i=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(!t||0===t.length)return;let e=Yf.new(i.current);e.setThemes([Xm.new(e)]);let r=e.container.children.push(dm.new(e,{panX:!0,panY:!1,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0,paddingLeft:0})),n=r.xAxes.push(ym.new(e,{maxDeviation:.1,baseInterval:{timeUnit:"day",count:1},renderer:Om.new(e,{minorGridEnabled:!0,minGridDistance:70}),tooltip:Np.new(e,{})})),a=r.yAxes.push(bm.new(e,{maxDeviation:.2,renderer:Tm.new(e,{})})),s=r.series.push(Ym.new(e,{name:"Requests",xAxis:n,yAxis:a,valueYField:"value",valueXField:"date",tooltip:Np.new(e,{labelText:"{valueY} requests on {valueX.formatDate('yyyy-MM-dd')}"})}));s.fills.template.setAll({fillOpacity:.3,visible:!0}),s.strokes.template.setAll({strokeWidth:2}),s.bullets.push((function(){return Wf.new(e,{sprite:Xf.new(e,{radius:3,fill:s.get("stroke"),stroke:e.interfaceColors.get("background"),strokeWidth:1})})}));const o=t.map((e=>({date:e.date,value:e.requests_num})));return s.data.processor=Zf.new(e,{dateFormat:"yyyy-MM-dd",dateFields:["date"]}),s.data.setAll(o),r.set("cursor",Wm.new(e,{xAxis:n,behavior:"zoomX"})),r.set("scrollbarX",Jf.new(e,{orientation:"horizontal"})),s.appear(1e3),r.appear(1e3,100),()=>{e.dispose()}}),[t]),(0,Xc.jsx)("div",{ref:i,style:{width:"100%",height:"300px"}})};i(4358);var qm="popstate";function Km(){return ng((function(e,t){let{pathname:i,search:r,hash:n}=e.location;return tg("",{pathname:i,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ig(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function Jm(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Qm(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function eg(e,t){return{usr:e.state,key:e.key,idx:t}}function tg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?rg(t):t,state:i,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function ig(e){let{pathname:t="/",search:i="",hash:r=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function rg(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function ng(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:a=!1}=r,s=n.history,o="POP",l=null,u=c();function c(){return(s.state||{idx:null}).idx}function h(){o="POP";let e=c(),t=null==e?null:e-u;u=e,l&&l({action:o,location:p.location,delta:t})}function d(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,i="string"===typeof e?e:ig(e);return i=i.replace(/ $/,"%20"),Jm(t,`No window.location.(origin|href) available to create URL for href: ${i}`),new URL(i,t)}null==u&&(u=0,s.replaceState({...s.state,idx:u},""));let p={get action(){return o},get location(){return e(n,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(qm,h),l=e,()=>{n.removeEventListener(qm,h),l=null}},createHref:e=>t(n,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=tg(p.location,e,t);i&&i(r,e),u=c()+1;let h=eg(r,u),d=p.createHref(r);try{s.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;n.location.assign(d)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=tg(p.location,e,t);i&&i(r,e),u=c();let n=eg(r,u),h=p.createHref(r);s.replaceState(n,"",h),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>s.go(e)};return p}new WeakMap;function ag(e,t){return sg(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function sg(e,t,i,r){let n=_g(("string"===typeof t?rg(t):t).pathname||"/",i);if(null==n)return null;let a=og(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=vg(n);s=bg(a[o],e,r)}return s}function og(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=(e,n,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};s.relativePath.startsWith("/")&&(Jm(s.relativePath.startsWith(r),`Absolute route path "${s.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(r.length));let o=kg([r,s.relativePath]),l=i.concat(s);e.children&&e.children.length>0&&(Jm(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),og(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:gg(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let i of lg(e.path))n(e,t,i);else n(e,t)})),t}function lg(e){let t=e.split("/");if(0===t.length)return[];let[i,...r]=t,n=i.endsWith("?"),a=i.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let s=lg(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),n&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var ug=/^:[\w-]+$/,cg=3,hg=2,dg=1,pg=10,fg=-2,mg=e=>"*"===e;function gg(e,t){let i=e.split("/"),r=i.length;return i.some(mg)&&(r+=fg),t&&(r+=hg),i.filter((e=>!mg(e))).reduce(((e,t)=>e+(ug.test(t)?cg:""===t?dg:pg)),r)}function bg(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,n={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===a?t:t.slice(a.length)||"/",c=yg({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&i&&!r[r.length-1].route.index&&(c=yg({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(n,c.params),s.push({params:n,pathname:kg([a,c.pathname]),pathnameBase:Sg(kg([a,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(a=kg([a,c.pathnameBase]))}return s}function yg(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Qm("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(r.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let a=n[0],s=a.replace(/(.)\/+$/,"$1"),o=n.slice(1),l=r.reduce(((e,t,i)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=o[i]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[i];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function vg(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Qm(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _g(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&"/"!==r?null:e.slice(i)||"/"}function wg(e,t,i,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xg(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Pg(e){let t=xg(e);return t.map(((e,i)=>i===t.length-1?e.pathname:e.pathnameBase))}function Eg(e,t,i){let r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=rg(e):(r={...e},Jm(!r.pathname||!r.pathname.includes("?"),wg("?","pathname","search",r)),Jm(!r.pathname||!r.pathname.includes("#"),wg("#","pathname","hash",r)),Jm(!r.search||!r.search.includes("#"),wg("#","search","hash",r)));let a,s=""===e||""===r.pathname,o=s?"/":r.pathname;if(null==o)a=i;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:i,search:r="",hash:n=""}="string"===typeof e?rg(e):e,a=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:a,search:Og(r),hash:Tg(n)}}(r,a),u=o&&"/"!==o&&o.endsWith("/"),c=(s||"."===o)&&i.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}var kg=e=>e.join("/").replace(/\/\/+/g,"/"),Sg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Og=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Tg=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Ag(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Cg=["POST","PUT","PATCH","DELETE"],Rg=(new Set(Cg),["GET",...Cg]);new Set(Rg),Symbol("ResetLoaderData");var Ig=n.createContext(null);Ig.displayName="DataRouter";var Dg=n.createContext(null);Dg.displayName="DataRouterState";var jg=n.createContext({isTransitioning:!1});jg.displayName="ViewTransition";var Lg=n.createContext(new Map);Lg.displayName="Fetchers";var Ng=n.createContext(null);Ng.displayName="Await";var Mg=n.createContext(null);Mg.displayName="Navigation";var $g=n.createContext(null);$g.displayName="Location";var Fg=n.createContext({outlet:null,matches:[],isDataRoute:!1});Fg.displayName="Route";var Bg=n.createContext(null);Bg.displayName="RouteError";function Ug(){return null!=n.useContext($g)}function zg(){return Jm(Ug(),"useLocation() may be used only in the context of a <Router> component."),n.useContext($g).location}var Hg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vg(e){n.useContext(Mg).static||n.useLayoutEffect(e)}function Gg(){let{isDataRoute:e}=n.useContext(Fg);return e?function(){let{router:e}=eb("useNavigate"),t=ib("useNavigate"),i=n.useRef(!1);Vg((()=>{i.current=!0}));let r=n.useCallback((async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qm(i.current,Hg),i.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...n}))}),[e,t]);return r}():function(){Jm(Ug(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(Ig),{basename:t,navigator:i}=n.useContext(Mg),{matches:r}=n.useContext(Fg),{pathname:a}=zg(),s=JSON.stringify(Pg(r)),o=n.useRef(!1);Vg((()=>{o.current=!0}));let l=n.useCallback((function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Qm(o.current,Hg),!o.current)return;if("number"===typeof r)return void i.go(r);let l=Eg(r,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:kg([t,l.pathname])),(n.replace?i.replace:i.push)(l,n.state,n)}),[t,i,s,a,e]);return l}()}n.createContext(null);function Yg(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=n.useContext(Fg),{pathname:r}=zg(),a=JSON.stringify(Pg(i));return n.useMemo((()=>Eg(e,JSON.parse(a),r,"path"===t)),[e,a,r,t])}function Wg(e,t,i,r){Jm(Ug(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:s}=n.useContext(Mg),{matches:o}=n.useContext(Fg),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";ab(c,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=zg();if(t){let e="string"===typeof t?rg(t):t;Jm("/"===h||e.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!s&&i&&i.matches&&i.matches.length>0?i.matches:ag(e,{pathname:g});Qm(d||null!=b,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Qm(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Jg(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:kg([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:kg([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,i,r);return t&&y?n.createElement($g.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function Xg(){let e=rb(),t=Ag(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=n.createElement(n.Fragment,null,n.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:s},"ErrorBoundary")," or"," ",n.createElement("code",{style:s},"errorElement")," prop on your route.")),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),i?n.createElement("pre",{style:a},i):null,o)}var Zg=n.createElement(Xg,null),qg=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(Fg.Provider,{value:this.props.routeContext},n.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kg(e){let{routeContext:t,match:i,children:r}=e,a=n.useContext(Ig);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),n.createElement(Fg.Provider,{value:t},r)}function Jg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==t.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let r=e,a=i?.errors;if(null!=a){let e=r.findIndex((e=>e.route.id&&void 0!==a?.[e.route.id]));Jm(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let s=!1,o=-1;if(i)for(let n=0;n<r.length;n++){let e=r[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=n),e.route.id){let{loaderData:t,errors:n}=i,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){s=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}return r.reduceRight(((e,l,u)=>{let c,h=!1,d=null,p=null;i&&(c=a&&l.route.id?a[l.route.id]:void 0,d=l.route.errorElement||Zg,s&&(o<0&&0===u?(ab("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):o===u&&(h=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,u+1)),m=()=>{let t;return t=c?d:h?p:l.route.Component?n.createElement(l.route.Component,null):l.route.element?l.route.element:e,n.createElement(Kg,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=i},children:t})};return i&&(l.route.ErrorBoundary||l.route.errorElement||0===u)?n.createElement(qg,{location:i.location,revalidation:i.revalidation,component:d,error:c,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function Qg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eb(e){let t=n.useContext(Ig);return Jm(t,Qg(e)),t}function tb(e){let t=n.useContext(Dg);return Jm(t,Qg(e)),t}function ib(e){let t=function(e){let t=n.useContext(Fg);return Jm(t,Qg(e)),t}(e),i=t.matches[t.matches.length-1];return Jm(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function rb(){let e=n.useContext(Bg),t=tb("useRouteError"),i=ib("useRouteError");return void 0!==e?e:t.errors?.[i]}var nb={};function ab(e,t,i){t||nb[e]||(nb[e]=!0,Qm(!1,i))}n.memo((function(e){let{routes:t,future:i,state:r}=e;return Wg(t,void 0,r,i)}));function sb(e){Jm(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ob(e){let{basename:t="/",children:i=null,location:r,navigationType:a="POP",navigator:s,static:o=!1}=e;Jm(!Ug(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=n.useMemo((()=>({basename:l,navigator:s,static:o,future:{}})),[l,s,o]);"string"===typeof r&&(r=rg(r));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,m=n.useMemo((()=>{let e=_g(c,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:p,key:f},navigationType:a}}),[l,c,h,d,p,f,a]);return Qm(null!=m,`<Router basename="${l}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:n.createElement(Mg.Provider,{value:u},n.createElement($g.Provider,{children:i,value:m}))}function lb(e){let{children:t,location:i}=e;return Wg(ub(t),i)}n.Component;function ub(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return n.Children.forEach(e,((e,r)=>{if(!n.isValidElement(e))return;let a=[...t,r];if(e.type===n.Fragment)return void i.push.apply(i,ub(e.props.children,a));Jm(e.type===sb,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jm(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ub(e.props.children,a)),i.push(s)})),i}var cb="get",hb="application/x-www-form-urlencoded";function db(e){return null!=e&&"string"===typeof e.tagName}var pb=null;var fb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mb(e){return null==e||fb.has(e)?e:(Qm(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hb}"`),null)}function gb(e,t){let i,r,n,a,s;if(db(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?_g(s,t):null,i=e.getAttribute("method")||cb,n=mb(e.getAttribute("enctype"))||hb,a=new FormData(e)}else if(function(e){return db(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return db(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?_g(o,t):null,i=e.getAttribute("formmethod")||s.getAttribute("method")||cb,n=mb(e.getAttribute("formenctype"))||mb(s.getAttribute("enctype"))||hb,a=new FormData(s,e),!function(){if(null===pb)try{new FormData(document.createElement("form"),0),pb=!1}catch(e){pb=!0}return pb}()){let{name:t,type:i,value:r}=e;if("image"===i){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(db(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=cb,r=null,n=hb,s=e}var o;return a&&"text/plain"===n&&(s=a,a=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:a,body:s}}function bb(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function yb(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function vb(e){return null!=e&&"string"===typeof e.page}function _b(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function wb(e,t,i,r,n,a){let s=(e,t)=>!i[t]||e.route.id!==i[t].route.id,o=(e,t)=>i[t].pathname!==e.pathname||i[t].route.path?.endsWith("*")&&i[t].params["*"]!==e.params["*"];return"assets"===a?t.filter(((e,t)=>s(e,t)||o(e,t))):"data"===a?t.filter(((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function xb(e,t){let{includeHydrateFallback:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let n=[r.module];return r.clientActionModule&&(n=n.concat(r.clientActionModule)),r.clientLoaderModule&&(n=n.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(n=n.concat(r.hydrateFallbackModule)),r.imports&&(n=n.concat(r.imports)),n})).flat(1),[...new Set(r)];var r}function Pb(e,t){let i=new Set,r=new Set(t);return e.reduce(((e,n)=>{if(t&&!vb(n)&&"script"===n.as&&n.href&&r.has(n.href))return e;let a=JSON.stringify(function(e){let t={},i=Object.keys(e).sort();for(let r of i)t[r]=e[r];return t}(n));return i.has(a)||(i.add(a),e.push({key:a,link:n})),e}),[])}function Eb(e){return{__html:e}}Symbol("SingleFetchRedirect");function kb(e,t){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.data":t&&"/"===_g(i.pathname,t)?i.pathname=`${t.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}n.Component;function Sb(e){let{error:t,isOutsideRemixApp:i}=e;console.error(t);let r,a=n.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(Ag(t))return n.createElement(Ob,{title:"Unhandled Thrown Response!"},n.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),a);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return n.createElement(Ob,{title:"Application Error!",isOutsideRemixApp:i},n.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),n.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function Ob(e){let{title:t,renderScripts:i,isOutsideRemixApp:r,children:a}=e,{routeModules:s}=Ib();return s.root?.Layout&&!r?a:n.createElement("html",{lang:"en"},n.createElement("head",null,n.createElement("meta",{charSet:"utf-8"}),n.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),n.createElement("title",null,t)),n.createElement("body",null,n.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?n.createElement(Fb,null):null)))}function Tb(e){return!0===e}function Ab(){let e=n.useContext(Ig);return bb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Cb(){let e=n.useContext(Dg);return bb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rb=n.createContext(void 0);function Ib(){let e=n.useContext(Rb);return bb(e,"You must render this element inside a <HydratedRouter> element"),e}function Db(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function jb(e,t,i){if(i&&!$b)return[e[0]];if(t){let i=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,i+1)}return e}function Lb(e){let{page:t,...i}=e,{router:r}=Ab(),a=n.useMemo((()=>ag(r.routes,t,r.basename)),[r.routes,t,r.basename]);return a?n.createElement(Mb,{page:t,matches:a,...i}):null}function Nb(e){let{manifest:t,routeModules:i}=Ib(),[r,a]=n.useState([]);return n.useEffect((()=>{let r=!1;return async function(e,t,i){return Pb((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await yb(r,i);return e.links?e.links():[]}return[]})))).flat(1).filter(_b).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,i).then((e=>{r||a(e)})),()=>{r=!0}}),[e,t,i]),r}function Mb(e){let{page:t,matches:i,...r}=e,a=zg(),{manifest:s,routeModules:o}=Ib(),{basename:l}=Ab(),{loaderData:u,matches:c}=Cb(),h=n.useMemo((()=>wb(t,i,c,s,a,"data")),[t,i,c,s,a]),d=n.useMemo((()=>wb(t,i,c,s,a,"assets")),[t,i,c,s,a]),p=n.useMemo((()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(i.forEach((t=>{let i=s.routes[t.route.id];i&&i.hasLoader&&(!h.some((e=>e.route.id===t.route.id))&&t.route.id in u&&o[t.route.id]?.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let n=kb(t,l);return r&&e.size>0&&n.searchParams.set("_routes",i.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[n.pathname+n.search]}),[l,u,a,s,h,i,t,o]),f=n.useMemo((()=>xb(d,s)),[d,s]),m=Nb(d);return n.createElement(n.Fragment,null,p.map((e=>n.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),f.map((e=>n.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),m.map((e=>{let{key:t,link:i}=e;return n.createElement("link",{key:t,...i})})))}Rb.displayName="FrameworkContext";var $b=!1;function Fb(e){let{manifest:t,serverHandoffString:i,isSpaMode:r,ssr:a,renderMeta:s}=Ib(),{router:o,static:l,staticContext:u}=Ab(),{matches:c}=Cb(),h=Tb(a);s&&(s.didRenderScripts=!0);let d=jb(c,null,r);n.useEffect((()=>{0}),[]);let p=n.useMemo((()=>{let r=u?`window.__reactRouterContext = ${i};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",a=l?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${d.map(((e,i)=>{let r=`route${i}`,n=t.routes[e.route.id];bb(n,`Route ${e.route.id} not found in manifest`);let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:u}=n,c=[...a?[{module:a,varName:`${r}_clientAction`}]:[],...s?[{module:s,varName:`${r}_clientLoader`}]:[],...o?[{module:o,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:u,varName:`${r}_main`}];return 1===c.length?`import * as ${r} from ${JSON.stringify(u)};`:[c.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${c.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:i,...r}=e,n=new Set(t.state.matches.map((e=>e.route.id))),a=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(a.pop();a.length>0;)s.push(`/${a.join("/")}`),a.pop();s.forEach((e=>{let i=ag(t.routes,e,t.basename);i&&i.forEach((e=>n.add(e.route.id)))}));let o=[...n].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return{...r,routes:o,sri:!!i||void 0}}(t,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${d.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return n.createElement(n.Fragment,null,n.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Eb(r),type:void 0}),n.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Eb(a),type:"module",async:!0}))}),[]),f=$b?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(xb(d,t,{includeHydrateFallback:!0}))),m="object"===typeof t.sri?t.sri:{};return $b?null:n.createElement(n.Fragment,null,"object"===typeof t.sri?n.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:m})}}):null,h?null:n.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:m[t.url],suppressHydrationWarning:!0}),n.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:m[t.entry.module],suppressHydrationWarning:!0}),f.map((t=>n.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:m[t],suppressHydrationWarning:!0}))),p)}function Bb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Ub="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Ub&&(window.__reactRouterVersion="7.5.0")}catch(iy){}function zb(e){let{basename:t,children:i,window:r}=e,a=n.useRef();null==a.current&&(a.current=Km({window:r,v5Compat:!0}));let s=a.current,[o,l]=n.useState({action:s.action,location:s.location}),u=n.useCallback((e=>{n.startTransition((()=>l(e)))}),[l]);return n.useLayoutEffect((()=>s.listen(u)),[s,u]),n.createElement(ob,{basename:t,children:i,location:o.location,navigationType:o.action,navigator:s})}var Hb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vb=n.forwardRef((function(e,t){let i,{onClick:r,discover:a="render",prefetch:s="none",relative:o,reloadDocument:l,replace:u,state:c,target:h,to:d,preventScrollReset:p,viewTransition:f,...m}=e,{basename:g}=n.useContext(Mg),b="string"===typeof d&&Hb.test(d),y=!1;if("string"===typeof d&&b&&(i=d,Ub))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),i=_g(t.pathname,g);t.origin===e.origin&&null!=i?d=i+t.search+t.hash:y=!0}catch(iy){Qm(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jm(Ug(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=n.useContext(Mg),{hash:a,pathname:s,search:o}=Yg(e,{relative:t}),l=s;return"/"!==i&&(l="/"===s?i:kg([i,s])),r.createHref({pathname:l,search:o,hash:a})}(d,{relative:o}),[_,w,x]=function(e,t){let i=n.useContext(Rb),[r,a]=n.useState(!1),[s,o]=n.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=t,p=n.useRef(null);n.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),n.useEffect((()=>{if(r){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let f=()=>{a(!0)},m=()=>{a(!1),o(!1)};return i?"intent"!==e?[s,p,{}]:[s,p,{onFocus:Db(l,f),onBlur:Db(u,m),onMouseEnter:Db(c,f),onMouseLeave:Db(h,m),onTouchStart:Db(d,f)}]:[!1,p,{}]}(s,m),P=function(e){let{target:t,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Gg(),u=zg(),c=Yg(e,{relative:s});return n.useCallback((n=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(n,t)){n.preventDefault();let t=void 0!==i?i:ig(u)===ig(c);l(e,{replace:t,state:r,preventScrollReset:a,relative:s,viewTransition:o})}}),[u,l,c,i,r,t,e,a,s,o])}(d,{replace:u,state:c,target:h,preventScrollReset:p,relative:o,viewTransition:f});let E=n.createElement("a",{...m,...x,href:i||v,onClick:y||l?r:function(e){r&&r(e),e.defaultPrevented||P(e)},ref:Bb(t,w),target:h,"data-discover":b||"render"!==a?void 0:"true"});return _&&!b?n.createElement(n.Fragment,null,E,n.createElement(Lb,{page:v})):E}));Vb.displayName="Link";var Gb=n.forwardRef((function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h}=e,d=Yg(l,{relative:h.relative}),p=zg(),f=n.useContext(Dg),{navigator:m,basename:g}=n.useContext(Mg),b=null!=f&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.useContext(jg);Jm(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Xb("useViewTransitionState"),a=Yg(e,{relative:t.relative});if(!i.isTransitioning)return!1;let s=_g(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=_g(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=yg(a.pathname,o)||null!=yg(a.pathname,s)}(d)&&!0===u,y=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,v=p.pathname,_=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(v=v.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&g&&(_=_g(_,g)||_);const w="/"!==y&&y.endsWith("/")?y.length-1:y.length;let x,P=v===y||!s&&v.startsWith(y)&&"/"===v.charAt(w),E=null!=_&&(_===y||!s&&_.startsWith(y)&&"/"===_.charAt(y.length)),k={isActive:P,isPending:E,isTransitioning:b},S=P?i:void 0;x="function"===typeof a?a(k):[a,P?"active":null,E?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof o?o(k):o;return n.createElement(Vb,{...h,"aria-current":S,className:x,ref:t,style:O,to:l,viewTransition:u},"function"===typeof c?c(k):c)}));Gb.displayName="NavLink";var Yb=n.forwardRef(((e,t)=>{let{discover:i="render",fetcherKey:r,navigate:a,reloadDocument:s,replace:o,state:l,method:u=cb,action:c,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:f,...m}=e,g=Kb(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=n.useContext(Mg),r=n.useContext(Fg);Jm(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...Yg(e||".",{relative:t})},o=zg();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let i=e.toString();s.search=i?`?${i}`:""}}e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(s.pathname="/"===s.pathname?i:kg([i,s.pathname]));return ig(s)}(c,{relative:d}),y="get"===u.toLowerCase()?"get":"post",v="string"===typeof c&&Hb.test(c);return n.createElement("form",{ref:t,method:y,action:b,onSubmit:s?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,i=t?.getAttribute("formmethod")||u;g(t||e.currentTarget,{fetcherKey:r,method:i,navigate:a,replace:o,state:l,relative:d,preventScrollReset:p,viewTransition:f})},...m,"data-discover":v||"render"!==i?void 0:"true"})}));function Wb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xb(e){let t=n.useContext(Ig);return Jm(t,Wb(e)),t}Yb.displayName="Form";var Zb=0,qb=()=>`__${String(++Zb)}__`;function Kb(){let{router:e}=Xb("useSubmit"),{basename:t}=n.useContext(Mg),i=ib("useRouteId");return n.useCallback((async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:s,encType:o,formData:l,body:u}=gb(r,t);if(!1===n.navigate){let t=n.fetcherKey||qb();await e.fetch(t,i,n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||s,formEncType:n.encType||o,flushSync:n.flushSync})}else await e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||s,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})}),[e,t,i])}new TextEncoder;function Jb(){const e=zg();return(0,n.useEffect)((()=>{"/redirect/kofi"===e.pathname&&(window.location.href="https://ko-fi.com/llm7_io")}),[e]),null}function Qb(){const[e,t]=(0,n.useState)([]),[i,r]=(0,n.useState)(0),[a,s]=(0,n.useState)(""),o=(0,n.useMemo)((()=>["import openai","","client = openai.OpenAI(",'    base_url="https://api.llm7.io/v1",','    api_key="unused"',")","","response = client.chat.completions.create(",'    model="gpt-4o-mini-2024-07-18",',"    messages=[",'        {"role": "user", "content": "Tell me a short story about a brave squirrel."}',"    ]",")","","print(response.choices[0].message.content)"]),[]);return(0,n.useEffect)((()=>{if(i>=o.length)return;const e=o[i];let n=0;e.length>0&&(s(e.charAt(0)),n=1);const a=setInterval((()=>{n<e.length?(s((t=>t+e.charAt(n))),n++):(clearInterval(a),t((t=>[...t,e])),s(""),setTimeout((()=>{r((e=>e+1))}),""===e?0:400))}),35);return()=>clearInterval(a)}),[i,o]),(0,Xc.jsxs)("pre",{style:{minHeight:"320px"},className:"bg-gray-800 text-white p-2 md:p-4 rounded-lg shadow-md font-mono overflow-x-auto text-xs md:text-sm w-full max-w-4xl mx-4",children:[e.join("\n"),e.length>0&&"\n",a,(0,Xc.jsx)("span",{className:"animate-pulse",children:"\u2588"})]})}const ey=function(){const[e,t]=(0,n.useState)([]),[i,r]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[o,l]=(0,n.useState)(0);return(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.llm7.io/v1/models");let i=(await e.json()).sort(((e,t)=>e.id.localeCompare(t.id)));t(i.map((e=>e.id)))}catch(e){console.error("Error fetching models:",e)}})()}),[]),(0,n.useEffect)((()=>{(async()=>{s(!0);try{const e=await fetch("https://api.llm7.io/stats/days"),t=await e.json();if(t&&Array.isArray(t.stats)){r(t.stats);let e=0;t.stats.forEach((t=>{e+=t.requests_num})),l(e)}else console.error("Unexpected stats data format:",t),r([])}catch(e){console.error("Error fetching stats:",e),r([])}finally{s(!1)}})()}),[]),(0,Xc.jsx)(zb,{children:(0,Xc.jsxs)(lb,{children:[(0,Xc.jsx)(sb,{path:"/redirect/kofi",element:(0,Xc.jsx)(Jb,{})}),(0,Xc.jsx)(sb,{path:"/",element:(0,Xc.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 font-sans",children:[(0,Xc.jsx)("img",{src:"/logo.png",alt:"LLM7 Logo",className:"w-40 h-40 mt-8 mb-8"}),(0,Xc.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"LLM7.io"}),(0,Xc.jsxs)("p",{className:"text-center mb-6 text-gray-700 px-4",children:["A free, anonymous LLM provider without authorization.",(0,Xc.jsx)("br",{}),"Just start using powerful models instantly."]}),(0,Xc.jsxs)("div",{className:"flex justify-center items-center flex-wrap space-x-2 mb-8",children:[(0,Xc.jsx)("a",{href:"https://badge.fury.io/py/langchain-llm7",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://badge.fury.io/py/langchain-llm7.svg",alt:"PyPI version"})}),(0,Xc.jsx)("a",{href:"https://pepy.tech/project/langchain-llm7",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://static.pepy.tech/badge/langchain-llm7",alt:"PyPI Downloads"})}),(0,Xc.jsx)("a",{href:"https://www.npmjs.com/package/langchain-llm7",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://img.shields.io/npm/v/langchain-llm7",alt:"NPM Version"})}),(0,Xc.jsx)("a",{href:"https://www.npmjs.com/package/langchain-llm7",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://img.shields.io/npm/dy/langchain-llm7",alt:"NPM Daily Downloads"})}),(0,Xc.jsx)("a",{href:"https://www.npmjs.com/package/langchain-llm7",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://img.shields.io/npm/last-update/langchain-llm7",alt:"NPM Last Update"})}),(0,Xc.jsx)("a",{href:"https://opensource.org/licenses/Apache-2.0",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://img.shields.io/pypi/l/langchain-llm7?color=%2340b814",alt:"License: Apache 2.0"})}),(0,Xc.jsx)("a",{href:"https://api.llm7.io/",target:"_blank",rel:"noopener noreferrer",children:(0,Xc.jsx)("img",{src:"https://img.shields.io/badge/max_rate-150%20per%20min-brightgreen",alt:"max rate: 150 requests per minute"})})]}),(0,Xc.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Example Usage"}),(0,Xc.jsx)(Qb,{}),(0,Xc.jsx)(qc,{}),(0,Xc.jsx)("h2",{className:"text-xl font-semibold mt-6 mb-2",children:"Usage Statistics"}),(0,Xc.jsxs)("div",{className:"w-full max-w-4xl mx-4 mb-6",children:[" ",a?(0,Xc.jsx)("div",{className:"text-center p-10 text-gray-500",children:"Loading chart data..."}):i.length>0?(0,Xc.jsxs)(Xc.Fragment,{children:[(0,Xc.jsx)(Zm,{data:i}),(0,Xc.jsxs)("div",{children:["Total requests: ",o]})]}):(0,Xc.jsx)("div",{className:"text-center p-10 text-gray-500",children:"Could not load statistics."})]}),(0,Xc.jsxs)("h2",{className:"text-xl font-semibold mt-6 mb-2",children:["Available Models",(0,Xc.jsx)("a",{href:"https://api.llm7.io/v1/models",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-sm text-blue-600 hover:text-blue-800",children:"(view all)"})]}),(0,Xc.jsx)("ul",{className:"list-disc list-inside text-gray-600",children:e.map((e=>(0,Xc.jsx)("li",{children:e},e)))}),(0,Xc.jsxs)("div",{className:"mt-8 px-4 max-w-2xl text-gray-700 text-sm text-center",children:[(0,Xc.jsx)("p",{children:"LLM7.io is provided free of charge, made possible by donations. The primary aim is to ensure open access to powerful models for everyone, worldwide. We cannot guarantee 100% uptime or availability of specific models, and we may switch or change models at any time. Use this service at your own risk: no warranties, and any liabilities rest solely with you. Anonymous user data may be analyzed for research to help us improve future models."}),(0,Xc.jsxs)("p",{className:"mt-2",children:["For more details, please see our"," ",(0,Xc.jsx)("a",{href:"https://github.com/chigwell/llm7.io/blob/main/TERMS.md",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Terms"}),"."]})]}),(0,Xc.jsxs)("footer",{className:"mt-12 mb-4 text-sm text-gray-500",children:["\xa9 2025 LLM7.io \xb7",(0,Xc.jsx)("a",{href:"https://www.linkedin.com/in/eugene-evstafev-716669181/",target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-blue-600 hover:text-blue-800",children:"Created by Eugene Evstafev"})]})]})})]})})},ty=e=>{e&&e instanceof Function&&i.e(453).then(i.bind(i,6453)).then((t=>{let{getCLS:i,getFID:r,getFCP:n,getLCP:a,getTTFB:s}=t;i(e),r(e),n(e),a(e),s(e)}))};a.createRoot(document.getElementById("root")).render((0,Xc.jsx)(n.StrictMode,{children:(0,Xc.jsx)(ey,{})})),ty()})()})();
//# sourceMappingURL=main.96a239a2.js.map